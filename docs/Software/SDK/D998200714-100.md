---
title: MagTekVirtual Reader SDK
layout: home
parent: 
nav_order: 
---
# MagTek Tap to Pay SDK (iOS)

<!-- TOC START -->

- [MagTek Tap to Pay SDK (iOS)](#magtek-tap-to-pay-sdk-ios)
  - [Overview](#overview)
    - [Key Components](#key-components)
    - [What's Included](#whats-included)
    - [Developer Workflow](#developer-workflow)
  - [Structure: `MagTekT2PConfig`](#structure-magtekt2pconfig)
    - [Initializers](#initializers)
    - [Instance Properties](#instance-properties)
    - [Instance Methods](#instance-methods)
  - [Class: `MagTekVirtualReader`](#class-magtekvirtualreader)
    - [Initializers](#initializers-1)
    - [Instance Properties](#instance-properties-1)
    - [Instance Methods](#instance-methods-1)
    - [Type Methods](#type-methods)
  - [Terms and Conditions](#terms-and-conditions)
  - [License](#license)
  - [Build](#build)
<!-- TOC END -->


## Overview
The MagTek Tap to Pay SDK enables applications to accept secure contactless payments directly on iOS devices that support Tap to Pay. With this SDK, the iPhone itself acts as a *virtual reader*—no external hardware is required. This SDK manages secure NFC access, merchant authentication, token handling, and event monitoring so developers can work with the device as if it were a traditional MagTek card reader.

### Key Components
- **MagTekT2PConfig** – Holds account configuration values such as `userName`, `password`, `url`, and optional `readerID`.
- **MagTekVirtualReader** – The main reader class that provides methods to configure sessions, link merchant accounts, check device compatibility, and read contactless cards.

### What's Included
This API reference covers:
- Initializers, instance properties, and methods for **MagTekT2PConfig** and **MagTekVirtualReader**.
- Utility methods for logging and SDK version tracking.
- Error handling for merchant linking, token management, and reader sessions.
- Guidance on checking Tap to Pay availability and device compatibility.

### Developer Workflow
The recommended integration flow is:
**Configuration → Merchant Linking → Session Preparation → Card Reading**

By following this sequence, developers can confidently integrate Tap to Pay functionality into their payment applications using MagTek’s virtual reader approach.

---

## Structure: `MagTekT2PConfig`
MagTek Tap To Pay account information.

```swift
struct MagTekT2PConfig
```

### Initializers
```swift
init(userName: String, password: String, url: String, readerID: String?)
```

### Instance Properties
- `let password: String`  
  Password for this account.

- `var readerID: String?`  
  Identifier of the reader.

- `let url: String`  
  URL to the server.

- `let userName: String`  
  Username is composed with `CustomerCode/Username`.

### Instance Methods
```swift
func validate() throws
```
Validates that all configuration properties are not empty.

---

## Class: `MagTekVirtualReader`
```swift
class MagTekVirtualReader
```

### Initializers
```swift
init(config: MagTekT2PConfig)
```
Instantiate a reader class with Tap To Pay configure data.

### Instance Properties
- `var cardReaderID: String?`  
  Unique identifier for this card reader.

- `var events: AsyncStream<PaymentCardReader.Event>?`  
  A stream of events you receive indicating the activities of the payment card reader.

- `var paymentCardReader: PaymentCardReader?`  
  `PaymentCardReader` object for advanced operations.

- `var updateCardReaderSessionIfExpired: Bool`  
  `true` for automatic renewal of the token if it expires.

---

### Instance Methods
```swift
func configurePaymentCardReaderSession(progressHandler: ((Int) -> Void)?) async throws
```
Configure payment card reader session.

```swift
func fetchPaymentCardReaderTokenFromMagensaPSP(_ config: MagTekT2PConfig, terminalProfileId: String?, duration: Int?) async throws -> String
```
Fetch payment card reader token for transaction.

```swift
func getPaymentCardReaderEvents() -> AsyncStream<PaymentCardReader.Event>
```
Retrieve a stream of events you receive indicating the activities of the payment card reader.

```swift
func getPaymentCardReaderIdentifier() async throws -> String?
```
The unique identifier for this card reader.

```swift
func isMerchantAccountLinked() async throws -> Bool
```
Check if the merchant account is linked to card reader.

```swift
func isMerchantAccountLinked(token: String) async throws -> Bool
```
Check merchant account linking state.

```swift
func isTapToPaySupported() -> Bool
```
Boolean value that indicates whether Tap to Pay is available on the current device.

```swift
func isTokenExpired() async -> Bool
```
Check if token expired or not.

```swift
func linkMerchantAccount() async throws
```
Link to a merchant’s account.

```swift
func linkMerchantAccountWithToken(_ tokenString: String) async throws
```
Link merchant account with given token.

```swift
func prepareCardReaderSessionWithToken(_ tokenString: String) async throws
```
Initialize a Card Reader Session.

```swift
func readContactlessPaymentCard(for amount: Decimal, currencyCode: String, transactionType: PaymentTransactionType) async throws -> PaymentCardReadResult
```
Read contactless payment card.

```swift
func setConfiguration(_ config: MagTekT2PConfig) throws
```
Update Magensa account for card reader.

---

### Type Methods
```swift
static func enableLogger(_ enabled: Bool, _ logHandler: ((_ log: String) -> Void)? = nil)
```
Enable/disable the internal logger. Default: `false`.

```swift
static func getSDKVersion() -> String
```
Get current SDK version number string.

---
## Terms and Conditions
[Terms and Conditions](https://www.magtek.com/about/policy?tab=terms)

## License
[License](https://www.magtek.com/about/policy?tab=software)

## Build
PN1000009873