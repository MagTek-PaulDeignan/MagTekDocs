- [Home](D100005000-103-MARKDOWN TEST - Modified.md)
- [IMPORTANT NOTE (MAGTEK INTERNAL ONLY)](#important-note-magtek-internal-only)
- [Table of Contents](#table-of-contents)
- [Introduction](#introduction)
  - [About Connections and Data Formats](#about-connections-and-data-formats)
  - [About Device Features](#about-device-features)
- [Connection Types](#connection-types)
  - [How to Use USB Connections (USB Only)](#how-to-use-usb-connections-usb-only)
    - [About USB Reports, Usages, Usage Pages, and Usage IDs](#about-usb-reports-usages-usage-pages-and-usage-ids)
    - [How to Connect to a Device Using the USB Connection](#how-to-connect-to-a-device-using-the-usb-connection)
    - [How to Send Command Requests Using the USB Connection](#how-to-send-command-requests-using-the-usb-connection)
    - [How to Receive Data Using the USB Connection (HID Only)](#how-to-receive-data-using-the-usb-connection-hid-only)
  - [How to Use Wireless LAN (WLAN) Connections (WLAN Only)](#how-to-use-wireless-lan-wlan-connections-wlan-only)
    - [About Wireless LAN (WLAN) Connections](#about-wireless-lan-wlan-connections)
    - [How to Connect to a Device Using the Wireless LAN (WLAN) Connection](#how-to-connect-to-a-device-using-the-wireless-lan-wlan-connection)
    - [How to Send Commands Using the Wireless LAN (WLAN) Connection](#how-to-send-commands-using-the-wireless-lan-wlan-connection)
    - [How to Receive Data Using the Wireless LAN (WLAN) Connection](#how-to-receive-data-using-the-wireless-lan-wlan-connection)
  - [How to Use Ethernet Connections (Ethernet Only, MAGTEK INTERNAL ONLY FOR NOW)](#how-to-use-ethernet-connections-ethernet-only-magtek-internal-only-for-now)
    - [About Ethernet Connections](#about-ethernet-connections)
    - [How to Connect to a Device Using the Ethernet Connection](#how-to-connect-to-a-device-using-the-ethernet-connection)
    - [How to Send Commands Using the Ethernet Connection](#how-to-send-commands-using-the-ethernet-connection)
    - [How to Receive Data Using the Ethernet Connection](#how-to-receive-data-using-the-ethernet-connection)
  - [How to Use Bluetooth® LE Connections (Bluetooth® LE Only)](#how-to-use-bluetooth-le-connections-bluetooth-le-only)
    - [About GATT Characteristics](#about-gatt-characteristics)
    - [DynaFlex Bluetooth® LE protocol](#dynaflex-bluetooth-le-protocol)
  - [How to Use RS-232/UART Connections (SLIP Only)](#how-to-use-rs-232uart-connections-slip-only)
  - [How to Use SLIP Format (SLIP Only)](#how-to-use-slip-format-slip-only)
  - [How to Use Apple iAP2 Connections (iAP2 Only)](#how-to-use-apple-iap2-connections-iap2-only)
- [Messages (Requests, Responses, Notifications, and Files)](#messages-requests-responses-notifications-and-files)
  - [About Messages](#about-messages)
  - [Message Format](#message-format)
    - [Tag-Length-Value (TLV) Encoding](#tag-length-value-tlv-encoding)
    - [Message Structure](#message-structure)
- [Data Types and Shared TLV Data Objects](#data-types-and-shared-tlv-data-objects)
  - [Primitive Data Types](#primitive-data-types)
  - [About Track Data](#about-track-data)
  - [Display Strings](#display-strings)
  - [Encryption Type](#encryption-type)
  - [EMV ARQC Type](#emv-arqc-type)
    - [EMV ARQC (DynaPro Format) Type](#emv-arqc-dynapro-format-type)
  - [EMV ARPC Type](#emv-arpc-type)
  - [EMV Batch Data Type](#emv-batch-data-type)
    - [EMV Batch Data (DynaPro Format) Type](#emv-batch-data-dynapro-format-type)
    - [Merchant Data Container](#merchant-data-container)
  - [EMV Terminal Configuration File Type](#emv-terminal-configuration-file-type)
  - [EMV Processing Configuration File Type](#emv-processing-configuration-file-type)
  - [EMV Entry Point Configuration File Type](#emv-entry-point-configuration-file-type)
    - [4.10.1 Mastercard MCL Entry Point Table](#4101-mastercard-mcl-entry-point-table)
    - [4.10.2 Visa payWave Entry Point Table](#4102-visa-paywave-entry-point-table)
    - [### 4.10.3 American Express Expresspay Entry Point Table](#4103-american-express-expresspay-entry-point-table)
    - [4.10.4 Discover D-PAS Entry Point Table](#4104-discover-d-pas-entry-point-table)
    - [4.10.5 China Unionpay Entry Point Table (Common Kernel Only)](#4105-china-unionpay-entry-point-table-common-kernel-only)
    - [4.10.6 JCB Entry Point Table (Common Kernel Only)](#4106-jcb-entry-point-table-common-kernel-only)
    - [4.10.7 Interac Flash Entry Point Table (Common Kernel Only)](#4107-interac-flash-entry-point-table-common-kernel-only)
  - [EMV Configuration CA Public Keys File Type](#emv-configuration-ca-public-keys-file-type)
  - [EMV American Express DRL Configuration File Type (Not Supported on Expresspay 4.x)](#emv-american-express-drl-configuration-file-type-not-supported-on-expresspay-4x)
  - [Signature Capture File Type (Touch Only)](#signature-capture-file-type-touch-only)
  - [Security Operation Type](#security-operation-type)
  - [Security Parameters Type](#security-parameters-type)
  - [Key Information Type](#key-information-type)
  - [NFC UID Type (EMV Contactless Only)](#nfc-uid-type-emv-contactless-only)
  - [GPO Response Type (EMV Contactless Only)](#gpo-response-type-emv-contactless-only)
  - [TR-31 Key Block Type](#tr-31-key-block-type)
    - [DUKPT Key Mapping](#dukpt-key-mapping)
    - [Restrictions of a DUKPT Slot ID](#restrictions-of-a-dukpt-slot-id)
    - [The Rules of Key Mapping](#the-rules-of-key-mapping)
    - [The settings of DUKPT Slot IDs injected through TR31](#the-settings-of-dukpt-slot-ids-injected-through-tr31)
    - [The Allowed Key Mapping Table](#the-allowed-key-mapping-table)
  - [Miniature Certificate Type (MAGTEK INTERNAL ONLY)](#miniature-certificate-type-magtek-internal-only)
  - [Firmware File Type (MAGTEK INTERNAL ONLY)](#firmware-file-type-magtek-internal-only)
  - [TrackType Type (MAGTEK INTERNAL ONLY FOR NOW)](#tracktype-type-magtek-internal-only-for-now)
  - [CardData Type (MAGTEK INTERNAL ONLY FOR NOW)](#carddata-type-magtek-internal-only-for-now)
  - [TagsType Type (MAGTEK INTERNAL ONLY FOR NOW)](#tagstype-type-magtek-internal-only-for-now)
  - [TLVType Type (MAGTEK INTERNAL ONLY FOR NOW)](#tlvtype-type-magtek-internal-only-for-now)
  - [Common File Structure](#common-file-structure)
  - [Certificate File Types](#certificate-file-types)
  - [Certificate Signing Request (CSR) File Types](#certificate-signing-request-csr-file-types)
  - [UI Configuration File Type (MAGTEK INTERNAL ONLY)](#ui-configuration-file-type-magtek-internal-only)
    - [Process UI Configuration File](#process-ui-configuration-file)
    - [Authenticate and Save the signed UI configuration file](#authenticate-and-save-the-signed-ui-configuration-file)
    - [Self-Authenticate the Saved UI Configuration File](#self-authenticate-the-saved-ui-configuration-file)
  - [Card Emulation](#card-emulation)
    - [Card Emulation Overview](#card-emulation-overview)
    - [Device Compatibility](#device-compatibility)
- [Security](#security)
  - [About Message Authentication Codes (MAC)](#about-message-authentication-codes-mac)
    - [MACs for EMV Data](#macs-for-emv-data)
  - [About Key Serial Numbers (KSNs)](#about-key-serial-numbers-ksns)
  - [About Encryption and Decryption](#about-encryption-and-decryption)
  - [How to Determine the Key](#how-to-determine-the-key)
  - [How to Decrypt Data](#how-to-decrypt-data)
  - [24 Hour Automatic Reset PCI Requirement](#24-hour-automatic-reset-pci-requirement)
  - [Device Lock Feature](#device-lock-feature)
- [Commands](#commands)
  - [Command Group 0x10nn - Transactions](#command-group-0x10nn---transactions)
    - [Command 0x1001 - Start Transaction](#command-0x1001---start-transaction)
    - [Command 0x1002 - Continue Transaction (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1002---continue-transaction-magtek-internal-only-for-now)
    - [Command 0x1003 - Finalize (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1003---finalize-magtek-internal-only-for-now)
    - [Command 0x1004 - Resume Transaction](#command-0x1004---resume-transaction)
    - [Command 0x1008 - Cancel Transaction](#command-0x1008---cancel-transaction)
    - [Command 0x1009 - Close / Clear Transaction (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1009---close--clear-transaction-magtek-internal-only-for-now)
    - [Command 0x1014 - Get Transaction Status (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1014---get-transaction-status-magtek-internal-only-for-now)
    - [Command 0x1041 - Set Payment Parameters (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1041---set-payment-parameters-magtek-internal-only-for-now)
    - [Command 0x1042 - Get Payment Parameters (MAGTEK INTERNAL ONLY FOR NOW)](#command-0x1042---get-payment-parameters-magtek-internal-only-for-now)
  - [Command Group 0x11nn - NFC/MIFARE Pass Through Commands (Contactless Only)](#command-group-0x11nn---nfcmifare-pass-through-commands-contactless-only)
    - [Command 0x1100 – Pass Through Command For NTag/MIFARE Ultralight, Type 2](#command-0x1100--pass-through-command-for-ntagmifare-ultralight-type-2)
    - [Command 0x1101 – Pass Through Command for MIFARE Classic/MINI®/Plus SL1 (Security Level 1), Type 2](#command-0x1101--pass-through-command-for-mifare-classicminiplus-sl1-security-level-1-type-2)
    - [Command 0x1102 – Pass Through Command for MIFARE DESFire, Type 4](#command-0x1102--pass-through-command-for-mifare-desfire-type-4)
    - [Command 0x1103 – Pass Through Command for MIFARE Plus, Type 2](#command-0x1103--pass-through-command-for-mifare-plus-type-2)
  - [Command Group 0x18nn - User Interface](#command-group-0x18nn---user-interface)
    - [Command 0x1801 - Request Cardholder Signature (Touch Only)](#command-0x1801---request-cardholder-signature-touch-only)
    - [Command 0x1802 - Report Cardholder Selection](#command-0x1802---report-cardholder-selection)
    - [Command 0x1803 - Display Message (Display Only)](#command-0x1803---display-message-display-only)
    - [Command 0x1804 - Read Barcode (BCR Only)](#command-0x1804---read-barcode-bcr-only)
    - [Command 0x1805 - Buzzer](#command-0x1805---buzzer)
    - [Command 0x1821 - Show Image (Display Only)](#command-0x1821---show-image-display-only)
    - [Command 0x1822 - Show QR Code (Display Only)](#command-0x1822---show-qr-code-display-only)
    - [Command 0x1823 - Show Bitmap Image (Display Only)](#command-0x1823---show-bitmap-image-display-only)
    - [Command 0x1830 - Display Flexible UI Pages (Display Only)](#command-0x1830---display-flexible-ui-pages-display-only)
    - [Command 0x1840 – Card Emulation](#command-0x1840--card-emulation)
  - [Command Group 0x1Fnn - Device Control](#command-group-0x1fnn---device-control)
    - [Command 0x1F01 - Reset Device](#command-0x1f01---reset-device)
    - [Command 0x1F02 - Set Notification Subscriptions](#command-0x1f02---set-notification-subscriptions)
    - [Command 0x1F03 - Extend Session (Session Management Only)](#command-0x1f03---extend-session-session-management-only)
    - [Command 0x1F04 – Terminate Bluetooth® LE Connection (Bluetooth® LE Only)](#command-0x1f04--terminate-bluetooth-le-connection-bluetooth-le-only)
    - [Command 0x1F05 – Erase All Bluetooth® LE Bonds (Bluetooth® LE Only)](#command-0x1f05--erase-all-bluetooth-le-bonds-bluetooth-le-only)
  - [Command Group 0x20nn - Banking Functions (Touch/Display Only)](#command-group-0x20nn---banking-functions-touchdisplay-only)
    - [Command 0x2001 - Request PIN with Host Supplied Account Data (Banking Functions Only)](#command-0x2001---request-pin-with-host-supplied-account-data-banking-functions-only)
    - [Command 0x2002 - Request PIN with Card Supplied Account Data (Banking Functions Only)](#command-0x2002---request-pin-with-card-supplied-account-data-banking-functions-only)
  - [Command Group 0xD1nn - Settings and Information](#command-group-0xd1nn---settings-and-information)
    - [Command 0xD101 - Get Property](#command-0xd101---get-property)
    - [Command 0xD111 - Set Property (Unsecured)](#command-0xd111---set-property-unsecured)
    - [Command 0xD112 - Set Property (Secured)](#command-0xd112---set-property-secured)
    - [Command 0xD201 - Reset Properties to Defaults (MAGTEK INTERNAL ONLY FOR NOW)](#command-0xd201---reset-properties-to-defaults-magtek-internal-only-for-now)
  - [Command Group 0xD8nn - File Operations](#command-group-0xd8nn---file-operations)
    - [About Files](#about-files)
    - [Command 0xD801 - Load Firmware File](#command-0xd801---load-firmware-file)
    - [Command 0xD811 - Start Send File to Device (Secured)](#command-0xd811---start-send-file-to-device-secured)
    - [Command 0xD812 - Start Send File to Device (Unsecured)](#command-0xd812---start-send-file-to-device-unsecured)
    - [Command 0xD821 - Start Get File from Device](#command-0xd821---start-get-file-from-device)
    - [Command 0xD825 - Get File Info from Device](#command-0xd825---get-file-info-from-device)
    - [Command 0xD831 – Delete File from Device](#command-0xd831--delete-file-from-device)
  - [Command Group 0xD9nn - Process Files](#command-group-0xd9nn---process-files)
    - [Command 0xD901 - Commit Firmware from File](#command-0xd901---commit-firmware-from-file)
  - [Command Group 0xDFnn - Diagnostics and Utilities](#command-group-0xdfnn---diagnostics-and-utilities)
    - [Command 0xDF01 - Echo](#command-0xdf01---echo)
    - [Command 0xDF02 - Convert Binary Tag Data to Text (MAGTEK INTERNAL ONLY FOR NOW)](#command-0xdf02---convert-binary-tag-data-to-text-magtek-internal-only-for-now)
  - [Command Group 0xEnnn - Security](#command-group-0xennn---security)
    - [Command 0xE001 - Get Challenge](#command-0xe001---get-challenge)
    - [Command 0xEEEE - Send Secured Command to Device](#command-0xeeee---send-secured-command-to-device)
    - [Command 0xEF01 - Load Key Using TR-31](#command-0xef01---load-key-using-tr-31)
    - [Command 0xEF02 – Generate CSR keys (WLAN Only)](#command-0xef02--generate-csr-keys-wlan-only)
    - [Command 0xEF03 – Generate CSR (WLAN Only)](#command-0xef03--generate-csr-wlan-only)
    - [Command 0xEF04 – Load LTPK Protection Key (MAGTEK INTERNAL ONLY FOR NOW)](#command-0xef04--load-ltpk-protection-key-magtek-internal-only-for-now)
    - [Command 0xEF05 – Load Encrypted LTPK and Version (MAGTEK INTERNAL ONLY FOR NOW)](#command-0xef05--load-encrypted-ltpk-and-version-magtek-internal-only-for-now)
    - [Command 0xEF06 – Change Device Lock State](#command-0xef06--change-device-lock-state)
    - [Command 0xEF07 – Change Device Lock Passcode](#command-0xef07--change-device-lock-passcode)
    - [Command 0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR NOW)](#command-0xef08--reset-device-lock-passcode-magtek-internal-only-for-now)
    - [Command 0xEF11 - Get Key Info](#command-0xef11---get-key-info)
  - [Command Group 0xFnnn - Manufacturing](#command-group-0xfnnn---manufacturing)
    - [Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)](#command-0xf012---force-tamper-magtek-internal-only)
    - [Command 0xF014 - Read Log (MAGTEK INTERNAL ONLY)](#command-0xf014---read-log-magtek-internal-only)
    - [Command 0xF015 - Read Log & Clear Tamper (MAGTEK INTERNAL ONLY)](#command-0xf015---read-log--clear-tamper-magtek-internal-only)
    - [Command 0xF016 - Activate Device Security (MAGTEK INTERNAL ONLY)](#command-0xf016---activate-device-security-magtek-internal-only)
    - [Command 0xF017 - Establish Ephemeral KBPK](#command-0xf017---establish-ephemeral-kbpk)
  - [# Notifications](#notifications)
  - [Notification Source 0x01nn - Notifications from Transactions](#notification-source-0x01nn---notifications-from-transactions)
    - [Notification 0x0101 - Transaction Information Update](#notification-0x0101---transaction-information-update)
    - [Notification 0x0103 - Transaction Host Action Request (MAGTEK INTERNAL ONLY FOR NOW)](#notification-0x0103---transaction-host-action-request-magtek-internal-only-for-now)
    - [Notification 0x0104 - Transaction Callback (MAGTEK INTERNAL ONLY FOR NOW)](#notification-0x0104---transaction-callback-magtek-internal-only-for-now)
    - [Notification 0x0105 - Transaction Operation Complete](#notification-0x0105---transaction-operation-complete)
  - [Notification Source 0x02nn - Notifications from Banking Functions (Banking Functions Only)](#notification-source-0x02nn---notifications-from-banking-functions-banking-functions-only)
    - [Notification 0x0201 - Banking Functions Information Update](#notification-0x0201---banking-functions-information-update)
    - [Notification 0x0203 - Banking Functions Host Action Request(MAGTEK INTERNAL ONLY FOR NOW)](#notification-0x0203---banking-functions-host-action-requestmagtek-internal-only-for-now)
    - [Notification 0x0205 - Banking Functions Operation Complete](#notification-0x0205---banking-functions-operation-complete)
  - [Notification Source 0x09nn - Notifications from Firmware Updates](#notification-source-0x09nn---notifications-from-firmware-updates)
    - [Notification 0x0905 - Firmware Update Successful](#notification-0x0905---firmware-update-successful)
    - [Notification 0x0906 - Firmware Update Failed](#notification-0x0906---firmware-update-failed)
    - [Notification 0x0907 - Firmware is Up to Date](#notification-0x0907---firmware-is-up-to-date)
  - [Notification Source 0x10nn - Notifications from Device](#notification-source-0x10nn---notifications-from-device)
    - [Notification 0x1001 - Device Information Update](#notification-0x1001---device-information-update)
  - [Notification Source 0x18nn - Notifications from User Interface](#notification-source-0x18nn---notifications-from-user-interface)
    - [Notification 0x1801 - User Interface Information Update (MAGTEK INTERNAL ONLY FOR NOW)](#notification-0x1801---user-interface-information-update-magtek-internal-only-for-now)
    - [Notification 0x1803 - User Interface Host Action Request](#notification-0x1803---user-interface-host-action-request)
    - [Notification 0x1805 - User Interface Operation Complete](#notification-0x1805---user-interface-operation-complete)
- [Configuration](#configuration)
  - [About Configuration](#about-configuration)
  - [Property Group 1.1.nnnn Financial Settings](#property-group-11nnnn-financial-settings)
    - [Property Subgroup 1.1.1.nnn EMV Settings](#property-subgroup-111nnn-emv-settings)
    - [Property Subgroup 1.1.2.nnn SRED Settings](#property-subgroup-112nnn-sred-settings)
  - [Property Group 1.2.nnnn Device Settings](#property-group-12nnnn-device-settings)
    - [Property Subgroup 1.2.1.nnn Transaction Settings](#property-subgroup-121nnn-transaction-settings)
    - [Property Subgroup 1.2.2.1.nn WLAN Settings (WLAN Only)](#property-subgroup-1221nn-wlan-settings-wlan-only)
    - [Property Subgroup 1.2.2.2.nn USB Settings (USB Only)](#property-subgroup-1222nn-usb-settings-usb-only)
    - [Property Subgroup 1.2.2.3.nn Bluetooth® LE Settings (Bluetooth® LE Only)](#property-subgroup-1223nn-bluetooth-le-settings-bluetooth-le-only)
    - [Property Subgroup 1.2.3.nnn User Interface Settings](#property-subgroup-123nnn-user-interface-settings)
    - [Property Subgroup 1.2.5.nnn Security Settings](#property-subgroup-125nnn-security-settings)
    - [Property Subgroup 1.2.7.nnn System Settings](#property-subgroup-127nnn-system-settings)
  - [Property Group 2.1.1.nnn Device Firmware Feature Information (MAGTEK INTERNAL ONLY FOR NOW)](#property-group-211nnn-device-firmware-feature-information-magtek-internal-only-for-now)
    - [8.4.1 Property Subgroup 2.1.1.1.nn MainApp Firmware Information](#841-property-subgroup-2111nn-mainapp-firmware-information)
  - [Property Group 2.1.2.nnn Device Firmware Identification Information](#property-group-212nnn-device-firmware-identification-information)
    - [Property Subgroup 2.1.2.1.nn Boot Firmware Information](#property-subgroup-2121nn-boot-firmware-information)
    - [Property Subgroup 2.1.2.2.nn Core Firmware Information](#property-subgroup-2122nn-core-firmware-information)
    - [Property Subgroup 2.1.2.3.nn EMV Firmware Information](#property-subgroup-2123nn-emv-firmware-information)
    - [Property Subgroup 2.1.2.4.nn Main Application Firmware Information (MAGTEK INTERNAL ONLY FOR NOW)](#property-subgroup-2124nn-main-application-firmware-information-magtek-internal-only-for-now)
    - [Property Subgroup 2.1.2.5.nn WLAN Information (WLAN Only)](#property-subgroup-2125nn-wlan-information-wlan-only)
    - [Property Subgroup 2.1.2.6.nn General Firmware Information (MAGTEK INTERNAL ONLY)](#property-subgroup-2126nn-general-firmware-information-magtek-internal-only)
    - [Property Subgroup 2.1.2.7.nn Bluetooth® LE Information (Bluetooth® LE Only, MAGTEK INTERNAL ONLY FOR NOW)](#property-subgroup-2127nn-bluetooth-le-information-bluetooth-le-only-magtek-internal-only-for-now)
    - [Property Subgroup 2.1.2.8.nn Custom UI](#property-subgroup-2128nn-custom-ui)
  - [Property Group 2.2.1.nnn Device Hardware Information](#property-group-221nnn-device-hardware-information)
    - [Property Subgroup 2.2.1.1.1.n Device Common Configuration Information](#property-subgroup-22111n-device-common-configuration-information)
  - [Property Group 2.3.1.nnn System Status Information](#property-group-231nnn-system-status-information)
    - [Property Subgroup 2.3.1.1.1.n System Status Injected Key Information](#property-subgroup-23111n-system-status-injected-key-information)
    - [Property Subgroup 2.3.1.1.2.n System Status Security Protection Information](#property-subgroup-23112n-system-status-security-protection-information)
    - [Property Subgroup 2.3.1.2.1.n System Status Device State Information](#property-subgroup-23121n-system-status-device-state-information)