---
title: Developer Documentation
layout: home
nav_order: 8
has_children: true
---
# Developer Documentation

## Introduction

### About This Document

This document describes how to communicate with Secure Card Reader
Authenticator (SCRA) devices which implement MagTek Messaging Schema
(MMS) and the DynaFlex family, DynaFlex II Go and DynaProx system
architecture.

This document also describes how to communicate with PIN Entry Devices
(PED) which implement MagTek Messaging Schema (MMS) and the
DynaFlex/DynaProx family system architecture. (PED ONLY)

The document uses **bold face** to:

- Highlight terms / concepts being formally defined in the current
  sentence / paragraph

- Highlight important distinguishing keywords in sentences

- Indicate hyperlinks to other sections / tables

The document uses a small number of annotation standards that are
important to understand:

- Hexadecimal values are prefixed with **0x** unless the context clearly
  indicates an un-prefixed number is hexadecimal (for example, TLV tags,
  lengths, and values are always assumed to be hex).

- Binary values are prefixed with **0b** unless the context clearly
  indicates the value is binary.

- Decimal values are not prefixed unless required for clarity, in which
  case the prefix is **0d**.

The standard documented by this document makes extensive use of
Tag-Length-Value encoding. Section **3.2.1 Tag-Length-Value (TLV)
Encoding** describes how to encode and decode TLV, and how to read the
tables in this document that describe TLV data objects.

### About Terminology

The general terms “device” and “host” are used in different, often
incompatible ways in a multitude of specifications and contexts. For
instance, the term "host" can signify different things depending on the
context—such as USB communication versus networked financial transaction
processing. In this document, "device" and "host" are defined
specifically as follows:

- **Device** refers to the Secure Card Reader Authenticator (SCRA) or
  PIN Entry Device (PED) that receives and responds to the command set
  specified in this document. Refer to **Table 2 - Device Features**, to
  determine a device’s specific capabilities, not all devices support
  PIN entry. Devices include DynaFlex, DynaProx, DynaFlex II, and so on.

- **Host** refers to the piece of general-purpose electronic equipment
  the device is connected or paired to, which can send data to and
  receive data from the device. Host types include PC and Mac
  computers/laptops, tablets, smartphones, teletype terminals, and even
  test harnesses. In many cases the host may have custom software
  installed on it that communicates with the device. When “host” must be
  used differently, it is qualified as something specific, such as
  “acquirer host” or “USB host.”

Similarly, the word “user” is used in different ways in different
contexts. This document separates users into more descriptive
categories:

- The **cardholder**

- The **operator** (such as a cashier, bank teller, customer service
  representative, or server), and

- The **developer** or the **administrator** (such as an integrator
  configuring the device for the first time).

Because some connection types, payment brands, and other vocabulary name
spaces (notably Bluetooth® LE, EMV, smart phones, and more recent
versions of Windows) use very specific meanings for the term
“Application,” this document favors the term **host software** to refer
to software on the host that provides a user interface for the operator.

The combination of device(s), host(s), host software, device firmware,
device configuration settings, physical mounting and environment, user
experience, and documentation is referred to as the **solution**.

### About SDKs and Sample Code

MagTek provides convenient SDKs and corresponding documentation for many
programming languages and operating systems. The API libraries included
in the SDKs wrap the details of the connection in an interface that
conceptually parallels the device’s internal operation, freeing software
developers to focus on the business logic, without having to deal with
the complexities of platform APIs for connecting to the various
available connection types, communicating using the various available
protocols, and parsing the various available data formats. Information
about using MagTek wrapper APIs is available in separate documentation,
including:

- ***D998200380 MagTek Universal SDK Programmer’s Manual (Microsoft
  .NET)***

- ***D998200381 MagTek Universal SDK Programmer’s Manual (Microsoft C++
  )***

- ***D998200385 MagTek Universal SDK Programmer’s Manual (Java)***

- ***D998200386 MagTek Universal SDK Programmer’s Manual (iOS)***

- ***D998200387 MagTek Universal SDK Programmer’s Manual (Android)***

- ***D998200388 MagTek Universal SDK Programmer’s Manual (macOS)***

The documentation is bundled with the SDKs themselves, which include:

- ***1000007351 MagTek Universal SDK for MMS Devices (Windows)***

- ***1000007352 MagTek Universal SDK for MMS Devices (Android)***

- ***1000007353 MagTek Universal SDK for MMS Devices (iOS)***

- ***1000007354 MagTek Universal SDK for MMS Devices (macOS)***

The SDKs and corresponding documentation include:

- Functions for sending the direct commands described in this manual

- Wrappers for commonly used commands that further simplify development

- Sample source code to demonstrate how to communicate with the device
  using the direct commands described in this manual

To download the SDKs and documentation, search
[www.MagTek.com](http://www.magtek.com) for “SDK” and select the SDK and
documentation for the programming languages and platforms you need or
contact MagTek Support Services for assistance.

Software developers also have the option to revert to direct
communication with the device using libraries available in the chosen
development framework. For example, custom software written in Visual
Basic or visual C++ may make API calls to the standard Windows USB HID
driver. This document provides information and support for developing
host software using that method.

MagTek has also developed sample software that demonstrates direct
communication with the device, which software developers can use to test
the device and which provides a starting point for developing other
software. For more information, see the MagTek web site, or contact your
reseller or MagTek Support Services.

### About Connections and Data Formats

MMS products transmit data using a set of common data formats across a
variety of physical connection layers, which can include universal
serial bus (USB) acting as a vendor-defined HID device (“USB HID”),
wireless LAN (WLAN), Bluetooth®, Bluetooth® Low Energy (“Bluetooth®
LE”), RS-232, Apple Lightning, and so on. The set of available physical
connection types and the data formats available on each connection type
is device dependent. **Table 1** shows the physical connection types
available on each product, and the data formats supported on each
connection type for that device. Details about connection types and
formats can be found in section **2 Connection Types**. Section headings
in this document include tags that indicate which connection types
and/or data formats they apply to.

<span id="_Ref369105675" class="anchor"></span>Table 1 - Device
Connection Types / Data Formats

<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">Product / Connection</th>
<th style="text-align: center;">Bluetooth®® LE GATT</th>
<th style="text-align: center;">RS‑232 / UART</th>
<th style="text-align: center;">USB HID</th>
<th style="text-align: center;">WLAN</th>
<th style="text-align: center;">iAP2</th>
<th style="text-align: center;">Ethernet</th>
</tr>
</thead>
<tbody>
<tr>
<td>DynaFlex with USB Only</td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex w/Bluetooth® LE</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td>GATT</td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DynaFlex Pro with USB Only</td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex Pro w/Bluetooth® LE</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td>GATT</td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DynaFlex Pro w/WLAN</td>
<td></td>
<td></td>
<td>HID</td>
<td>WLAN</td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex Pro w/Ethernet</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td>Ethernet</td>
</tr>
<tr>
<td>DynaProx</td>
<td></td>
<td>SLIP</td>
<td>HID</td>
<td></td>
<td>iAP2-USB</td>
<td></td>
</tr>
<tr>
<td>DynaFlex II with USB Only</td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex II w/Bluetooth® LE</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td>GATT</td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DynaFlex II PED with USB Only</td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex II PED w/Bluetooth® LE</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td>GATT</td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DynaFlex II PED w/WLAN</td>
<td></td>
<td></td>
<td>HID</td>
<td>WLAN</td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>DynaFlex II PED w/Ethernet</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p></td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td></td>
<td>Ethernet</td>
</tr>
<tr>
<td>DynaFlex II Go with USB Only</td>
<td></td>
<td></td>
<td>HID</td>
<td></td>
<td>iAP2-USB</td>
<td></td>
</tr>
<tr>
<td>DynaFlex II Go w/Bluetooth® LE</td>
<td>GATT</td>
<td></td>
<td>HID</td>
<td></td>
<td>iAP2-USB</td>
<td></td>
</tr>
</tbody>
</table>

### About Device Features

Much of the information in this document is applicable to multiple
devices. When developing solutions that use a specific device or set of
devices, integrators must be aware of each device’s connection types,
data formats, features, and configuration options, which affect the
availability and behavior of some commands. **Table 2** provides a list
of device features that may impact command availability and behavior.
All section headings in this document include tags that indicate which
features they apply to.

Table 2 - Device Features

| Feature / Product | DynaFlex II GO | DynaFlex with USB Only | DynaFlex w/Bluetooth® LE | DynaFlex Pro with USB Only | DynaFlex Pro with Bluetooth® LE | DynaFlex Pro with WLAN | DynaFlex Pro with Ethernet | DynaProx | DynaFlex II with USB Only | DynaFlex II w/Bluetooth® LE | DynaFlex II PED with USB Only | DynaFlex II PED with Bluetooth® LE | DynaFlex II PED with WLAN | DynaFlex II PED with Ethernet |
|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|
| MSR | Y | Y | Y | Y | Y | Y | Y | N | Y | Y | Y | Y | Y | Y |
| EMV Contact | Y | Y | Y | Y | Y | Y | Y | N | Y | Y | Y | Y | Y | Y |
| EMV Contactless | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y |
| MCE (Manual Card Entry) | N | N | N | Y | Y | Y | Y | N | N | N | Y | Y | Y | Y |
| BCR (Barcode Reader) | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y | Y |
| LED RGBx4 | 1 | Y | Y | Y | Y | Y | Y | N | Y | Y | Y | Y | Y | Y |
| LED Monox4 | Y | N | N | N | N | N | N | Y | N | N | N | N | N | N |
| Touch | N | N | N | Y | Y | Y | Y | N | N | N | Y | Y | Y | Y |
| No Touch | Y | Y | Y | N | N | N | N | Y | Y | Y | N | N | N | N |
| Display | N | N | N | Y | Y | Y | Y | N | N | N | Y | Y | Y | Y |
| No Display | Y | Y | Y | N | N | N | N | Y | Y | Y | N | N | N | N |
| Battery Power | Y | N | Y | N | Y | Y | Y | N | N | Y | N | Y | Y | Y |
| Banking Functions | N | N | N | Y | Y | Y | Y | N | N | N | Y | Y | Y | Y |
| Session Management | N | N | N | N | N | Y | N | N | N | N | N | N | Y | N |
| Apple VAS | Y | N | N | N | N | N | N | Y | Y | Y | Y | Y | Y | Y |
| Google Wallet Smart Tap | Y | N | N | N | N | N | N | Y | Y | Y | Y | Y | Y | Y |
| Flexible UI | N | N | N | N | N | N | N | N | N | N | Y | Y | Y | Y |
| Common Kernel | N | N | N | N | N | N | N | Y | Y | Y | Y | Y | Y | Y |
| Card Emulation | Y | N | N | N | N | N | N | Y | Y | Y | Y | Y | Y | Y |

## Connection Types

**Table 1** on page [**4**](#_Ref369105675) includes a list of
connection types available for each device. The following subsections
provide details developers will need to communicate with the device
using each connection type.

### How to Use USB Connections (USB Only)

These USB devices conform to the USB specification revision 1.1. They
also conform to the Human Interface Device (HID) class specification
version 1.1. This document assumes the audience is familiar with USB HID
class specifications, which are available at
[***www.usb.org***](http://www.usb.org). MagTek strongly recommends
becoming familiar with that standard before trying to communicate with
the device directly via USB.

These devices are full-speed, high-powered USB devices that draw power
from the USB bus they are connected to. They enter and wake up from
Suspend mode when directed to do so by the USB host. They do not support
remote wakeup.

When connecting via USB, MMS devices connect to the USB host as a
**vendor-defined** Human Interface Device. MMS devices identify
themselves to the host with MagTek’s vendor ID **0x0801**. DynaFlex
products report as Product ID (PID) **0x2020**, DynaProx products report
as Product ID (PID) **0x2023 and DynaFlex II Go report as Product ID
(PID) 0x2024**.

Details for exchanging messages with the device are provided in the
sections that follow.

#### About USB Reports, Usages, Usage Pages, and Usage IDs

All USB HID devices send and receive data using **Reports**. Each report
may contain several sections, called **Usages**, each of which has its
own unique four-byte (32-bit) identifier. The two most significant bytes
of a usage are called the **usage page**, and the two least significant
bytes are called the **usage ID**. Vendor-defined HID device usages must
have a usage page in the range **0xFF00 - 0xFFFF**, and it is common
practice for related usage IDs share the same usage page. For these
reasons, all usages for MMS devices use vendor-defined usage page
**0xFF00**, **Magnetic Stripe Reader**.

HID reports used by the host can be divided into two types:

- **Output Reports**, which the host uses to send messages (such as
  commands) to the device.

- **Input Reports**, which the device uses to send messages (such as
  responses and unsolicited notifications) to the host.

For information about using output reports to send command messages to /
receive response messages from the device, see section **2.1.3 How to
Send Command Requests Using the USB Connection**. For information about
receiving unsolicited data from the device, see section **2.1.4 How to
Receive Data Using the USB Connection (HID Only)**.

#### How to Connect to a Device Using the USB Connection

The steps for a host to connect to the device using the USB connector
are the same as connecting to any USB HID device, and are platform
specific. The general steps regardless of platform are as follows:

- Enumerate the USB devices connected to the host.

- Locate the desired device by PID.

- Open the USB connection.

- Read the report descriptor.

- Begin listening for incoming reports, and sending data using outgoing
  reports.

#### How to Send Command Requests Using the USB Connection

MMS communication between the host and the device consists of
**Messages**, which are independent of connection type and are
documented in section **2.7**. This section focuses specifically on how
to use the device’s USB HID connection to transmit a **Command** to the
host by composing and sending a **Request Message**, then listening for
and interpreting the corresponding **Response Message**.

When the device is connected to the host via USB, the host sends one or
more **Output Reports** to the device to send the requests for commands,
and listens / waits for the device to send one or more **Input Reports**
containing a response (see section **2.1.1**). All reports use Usage
Page **0xFF00**, Usage ID **0x20**, and no Report ID (which some
platform libraries present to the calling software as Report ID 0x00).

The host may send Output Reports by using either the default **Control**
pipe or the Interrupt OUT pipe using a blocking call to the platform’s
USB libraries. The device ACKs all Output Reports immediately. Upon
detecting the ACK for the last Output Report in the message stream, the
host software can immediately begin listening for one or more follow-up
Input Reports containing the device’s response.

Some messages defined in section **2.7** may exceed the maximum packet
length allowed by USB HID. For this reason, MMS implements a packetizing
scheme the host must use when it composes Output Reports to send
commands, and when it decomposes Input Reports to receive responses. The
host should follow this general sequence to send a request and receive a
response:

1)  Choose the command to invoke from section **6 Commands**.

2)  Construct the command request message using the **Request** table in
    the command documentation. For a deeper explanation of the contents
    of request tables, see section **2.7**.


4)  Determine the complete length of the command request message.

5)  Examine the device’s **Report Descriptor** to determine what payload
    length the device expects for an Output Report (operating system
    libraries may refer to this length as the “Report Length” or “Report
    Count”). MMS devices using USB HID generally use a payload length of
    64 bytes.

    1)  If the message length fits the **Single Packet** payload length
        of 62 bytes, wrap the message in the Single Packet format shown
        in **Table 3**.

    2)  If the message length does not fit the Single Packet payload
        length, wrap the message in the format of a single
        **Multi-Packet Head**, followed by zero or more **Multi-Packet
        Middles** as necessary, followed by one **Multi-Packet Tail**,
        as shown in **Table 4**, **Table 5**, and **Table 6**. If
        necessary, the host can cancel in the middle of a Multi-Packet
        message using the **Multi-Packet Cancel** packet shown in
        **Table 7**.

6)  For each packet, send an Output Report to the device, and wait for
    the device to ACK the output report USB packet. Upon ACK, either
    send the next packet in the sequence (if any), or begin listening
    for an Input Report containing the device’s response message \[see
    section **2.1.4 How to Receive Data Using the USB Connection (HID
    Only)**\]. If an ACK does not arrive, time out and assume the
    command needs to be started again.

7)  Strip wrappers off the device’s response in exactly the same way you
    constructed the command (using either Single Packet format or
    Multi-Packet format), and recompose the response message. Be sure to
    assemble the packets in the correct order using **Packet Number**,
    and to truncate the padding based on **Message Length** or
    **Remaining Message Length**.

8)  Parse the final response message using the Response table in the
    documentation for the command.

Table 3 - Single Packet Format

| Byte Offset | Field Name         | Field Value                          |
|-------------|--------------------|--------------------------------------|
| 0           | Packet Type        | 0x00 = Single Packet                 |
| 1           | Message Length     | Message length, denoted as **N**     |
| 2..N+1      | Message            | Message exactly from section **2.7** |
| N+2..63     | Padding, if needed | 0x00                                 |

Table 4 - Multi-Packet Head Format

| Byte Offset | Field Name | Field Value |
|----|----|----|
| 0 | Packet Type | 0x01 = Multi-packet Head |
| 1..4 | Message Length | Total message length before decomposing into packets, denoted as **N**. If 62 or less, use Single Packet Format. |
| 5..63 | Message Part | First 59 bytes of message from section **2.7** |

Table 5 - Multi-Packet Middle Format

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 27%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>Byte Offset</th>
<th>Field Name</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Packet Type</td>
<td>0x02 = Multi-Packet Middle</td>
</tr>
<tr>
<td>1..2</td>
<td>Packet Number</td>
<td><p>0x0001 = First Multi-Packet Middle</p>
<p>0x0002 = Second Multi-Packet Middle</p>
<p>Etc. up to 0xFFFF</p></td>
</tr>
<tr>
<td>3..63</td>
<td>Message Part</td>
<td>Next 61 bytes of message from section <strong>2.7</strong></td>
</tr>
</tbody>
</table>

Table 6 - Multi-Packet Tail Format

| Byte Offset | Field Name | Field Value |
|----|----|----|
| 0 | Packet Type | 0x03 = Multi-Packet Tail |
| 1 | Remaining Message Length | Number of bytes of the message that are being transmitted in this final packet, denoted as **n**. |
| 2..n+1 | Message Part | Final n bytes of message exactly as described in section **2.7** |
| n+2..63 | Padding, if needed | 0x00 |

Table 7 - Multi-Packet Cancel Format

| Byte Offset | Field Name        | Field Value                |
|-------------|-------------------|----------------------------|
| 0           | Packet Type       | 0x04 = Multi-Packet Cancel |
| 1..2        | Reason for Cancel | 0x0000 = General           |
| 3..63       | Padding           | 0x00                       |

#### How to Receive Data Using the USB Connection (HID Only)

MMS devices use the same mechanism to send **Response** messages to host
commands and to send unsolicited **Notifications** to the host when
events occur, such as device state changes or user interactions.

When the device communicates with the host as a vendor-defined HID
device, it sends messages to the host via an Input Report, which it
sends to the host using the **USB Interrupt IN** pipe. Per the USB HID
standard, the host polls the device on a regular Polling Interval to see
if the device has input reports available to send. If the device does
not, it responds to the host’s poll with a USB NAK.

The host software should always be listening for **Input Reports** from
the device containing notification messages and command response
messages. Assembling and parsing the incoming message is the same in
both cases, but notification messages, which are generally
unpredictable, need to be routed to different handlers than responses,
which are generally anticipated after sending a command. All input
reports use Usage Page **0xFF00**, Usage ID **0x20**. Because MMS
devices only implement one input report, the input report they send to
the host does not include an Input Report ID (which some operating
system libraries present to the calling software as Input Report ID
0x00), in accordance with the USB HID specification.

Some response and notification messages defined in section **2.7** may
exceed the maximum packet length allowed by USB HID. If the message
can’t fit into one packet, the device sends multiple packets, each
containing partial message data using the same message packet structures
described in section **2.1.3**, **Table 3**, **Table 4**, **Table 5**,
**Table 6**, **Table 7**.

Upon receiving an input report, the host can determine the size of
message packet Input Reports by looking at the HID report descriptor.
The host can locate a specific data element in the report by finding the
corresponding Usage and interpreting its contents as binary data.
Because MMS devices use a single usage to hold the Input Report
contents, unlike devices that divide the Input Report contents into
length-delimited Usages, the host software can hard-code its method of
finding the packet data; it is not necessary for the host software to
examine the Report Descriptor for information about separate data
elements’ offsets upon receiving a packet.

The host should follow this general sequence to process incoming Input
Reports:

1)  Register a listener with the operating system USB library to have
    the relevant Input Reports routed to the host software for
    processing.

2)  When an Input Report arrives, knowing from section **2.1.1** that
    the device uses **Usage Page 0xFF00**, and knowing the desired data
    is found in the usage with **Usage ID 0x0020**, call the platform’s
    USB SDK to retrieve the data from **Usage 0xFF000020** in the input
    report.

3)  Interpret the blob of data according to tables in section **2.1.3**
    to determine whether the incoming message is in single packet format
    or multi-packet format. If it is using multi-packet format:

    1)  Continue buffering the message and processing incoming packets
        until the last packet of the message arrives.

    2)  Assemble the full message. Be sure to assemble the packets in
        the correct order using the Packet Number, and to truncate the
        padding based on **Message Length** or **Remaining Message
        Length**.

4)  Determine the message type and message ID and parse it according to
    the corresponding Response table or Notification table in section
    **2.7**.

5)  Route the fully composed message to the appropriate handler.

### How to Use Wireless LAN (WLAN) Connections (WLAN Only)

#### About Wireless LAN (WLAN) Connections

This section provides information about developing software for a host
to communicate via a TCP/IP network with MMS products connected to a
wireless LAN access point. In this arrangement, the host and device
exchange messages as peers using the bidirectional ***WebSocket***
protocol. For details about the WebSocket Protocol, formally ***IETF RFC
6455***, see <https://tools.ietf.org/html/rfc6455> and
<http://websocket.org>.

For information about SDKs and sample code that can wrap the protocol
and speed up development, see section **1.3 About SDKs and Sample
Code**.

#### How to Connect to a Device Using the Wireless LAN (WLAN) Connection

Before the device and host can communicate using the wireless LAN (WLAN)
connection, the device must first be configured to connect to a WLAN
access point. For details about configuring the device, see the device’s
***Installation and Operation Manual*** or supporting documentation
included with the device.

After the device has been successfully configured for WLAN
communication, whenever the device powers on or resets, it attempts to
connect to the configured access point. If it is configured to use DHCP,
it contacts a DHCP server to acquire a dynamic IP address and register
its Hostname to the DNS server, otherwise it uses its configured static
IP address. It then opens a WebSocket server listener port, and waits
for a host to establish a connection using a WebSocket handshake. If any
notification events occur before the host completes the handshake and
establishes a connection, the device does not send the corresponding
notifications, and it does not buffer while it waits for a host to
establish a connection.

If you wish to test the device’s network connection before writing any
code, you may choose to use the echo tool at
<https://www.websocket.org/echo.html>, which allows a WebSocket capable
browser to connect directly to a local IP address and port to perform a
simple echo operation.

To connect to the device, the host software must follow these steps:

1)  Know the WebSocket connection / handshake parameters:

    1)  /host/ is the device’s IP address or IP name (if DNS is in use).
        By default, when using DHCP, the device registers its Hostname
        as its IP name. Suggest using the Hostname df-device serial
        number to keep each server unique. See the serial number label
        on the back of the device.

    2)  /port/ is the port the device’s WebSocket server is listening
        on. Per the WebSocket standard, if the host does not specify a
        port, the connection assumes the default (port 80 for non-secure
        WebSocket, port 443 for secure WebSocket). For these devices,
        use the default port.

    3)  /resource name/, /protocols/, and /extensions/ are not required
        because the device only communicates with a single host and uses
        binary WebSocket frames.

    4)  /origin/ is not required per the WebSocket standard, because the
        host software is not a web browser.

    5)  /secure/ is recommended .

2)  As a WebSocket server, the device can be configured to accept up to
    four client connections at a time.

3)  Establish a connection using a standard WebSocket handshake.

4)  Leave the connection open to listen for incoming WebSocket messages
    as binary WebSocket frames.

5)  The device will automatically disconnect from the client at the end
    of a session. See **Command 0x1F03 - Extend Session (Session
    Management Only)** for more details.

6)  Spawn a process to send a WebSocket ***ping*** across the connection
    on a reasonable interval (such as 5 seconds) to make sure the
    connection is still alive. Note that WebSocket protocol keeps ping /
    pong and binary message traffic separate, so there is not a risk of
    collision between MMS messages and a ping. Upon detecting the
    connection is no longer functioning (such as during power
    interruptions, wireless interference or out-of-range, network
    outage, etc.), take appropriate action such as:

    1)  Resetting the state of all host-side operations in process

    2)  Reporting the connection state and recommended troubleshooting
        procedures to the operator

    3)  Attempting to re-establish the connection

#### How to Send Commands Using the Wireless LAN (WLAN) Connection

To send a command to the device using the WLAN connection:

1)  Make sure there is an open WebSocket connection. See section **2.2.2
    How to Connect to a Device Using the Wireless LAN (**WLAN)
    Connection for details.

2)  Choose the command to invoke from section **6 Commands**.

3)  Construct the command request message using the **Request** table in
    the command documentation. For a deeper explanation of the contents
    of request tables, see section **2.7**.

4)  Transmit the full command request using the binary WebSocket message
    type (binary frames).

5)  Listen for the device’s response, which will also come in as a
    binary WebSocket message type.

6)  Make sure the incoming message is the expected response, not an
    asynchronous notification.

7)  Parse the final response message using the Response table in the
    documentation for the command.

#### How to Receive Data Using the Wireless LAN (WLAN) Connection

MMS devices use the same mechanism to send **Response** messages to host
commands and to send unsolicited **Notifications** to the host when
events occur, such as device state changes or user interactions.

The host software should always be listening for notification messages,
and should listen for command response messages after sending a command.
Receiving the incoming message is the same in both cases, but
notification messages, which are generally unpredictable, need to be
routed to different handlers than responses, which are generally
anticipated after sending a command.

The host should follow this general sequence to process notification
messages incoming via WebSocket protocol:

1)  Make sure there is an open WebSocket connection. See section **2.2.2
    How to Connect to a Device Using the Wireless LAN (**WLAN)
    Connection for details.

2)  After a WebSocket message arrives, determine the message type and
    message ID and route / parse it according to the corresponding
    Response table or Notification table in section **2.7**.

### How to Use Ethernet Connections (Ethernet Only, MAGTEK INTERNAL ONLY FOR NOW)

#### About Ethernet Connections

#### How to Connect to a Device Using the Ethernet Connection

#### How to Send Commands Using the Ethernet Connection

#### How to Receive Data Using the Ethernet Connection

### How to Use Bluetooth® LE Connections (Bluetooth® LE Only) 

This section provides information about developing software for a
Bluetooth® LE-capable host that needs to communicate with the device
using Bluetooth® Low Energy (Bluetooth® LE). The device acts as a
Bluetooth® LE server/peripheral, and the host acts as a client/central.

#### About GATT Characteristics

Messages are exchanged with the device using a service named “DynaFlex”.
The UUID for this service is 0c ba 14 b7 ff 24 47 b0 be 09 26 44 05 38
53 0c in big endian order. This service contains the following
characteristics.

Messages are sent to the device using a characteristic named “Message
From Host”. The UUID for this service is 47 f0 5f fa 59 09 49 69 bc 57
25 0d 47 e8 74 e5 in big endian order. This characteristic supports the
Write Request Attribute PDU Method. The value of this characteristic has
a variable length. The maximum length is 244 bytes. The host must have
performed secure connections pairing with the device before the device
will allow it to write to this characteristic.

Messages are sent to the host using a characteristic named “Message To
Host”. The UUID for this service is fe d4 91 18 c7 e2 4a 61 9e d5 e6 dd
65 c3 07 1b in big endian order. This characteristic only supports the
Handle Value Notification Attribute PDU Method. The value of this
characteristic has a variable length. The maximum length is 244 bytes.
The host must have secure connections pairing with the device before the
device will send notifications on this characteristic. The host must
also enable notifications to be sent from this characteristic before the
device will start sending messages on it.

Messages are exchanged with these characteristics using the DynaFlex
Bluetooth® LE protocol. This protocol is described in the next section.

#### DynaFlex Bluetooth® LE protocol

This protocol was designed to meet the following goals.

1)  Exchange messages with the device.

2)  Maximize throughput.

3)  Allow the side receiving a message to detect if a message is
    partially or completely dropped.

Bluetooth® LE attribute protocol transmits data in protocol data units
(PDUs). The maximum size of a PDU is determined by the maximum
transmission unit (MTU) agreed on between the host and the device. The
MTU is typically set to the minimum of the host and device’s ATT_MTU
size. DynaFlex’s ATT_MTU size is 247 bytes. Most host’s ATT_MTU sizes
are larger than 247 bytes, so the MTU size agreed on between most hosts
and DynaFlex’s is 247 bytes. Since application messages can be much
larger than 247 bytes, application messages need to be able to be sent
using multiple PDUs. Note that the minimum ATT_MTU allowed for all hosts
and devices is 23 bytes. To maximize throughput, all messages should be
sent using the maximum MTU size possible. This protocol allows large
application messages to be sent using multiple PDUs. The protocol format
for sending and receiving messages is the same for both the host and
device. The only difference is the characteristic used. Since the
attribute opcode and attribute handle use 3 bytes of the MTU size the
attribute value length for the message from host and message to host
characteristics is limited to 247 - 3 = 244 bytes.

When a PDU is received in the application layer, it is guaranteed to be
correct since Bluetooth® LE does error detection and retries in the
lower layers. However, PDUs can be completely dropped if the device goes
out of range of the host or bad interference occurs. So host
applications should be written with appropriate error detection and
handling to account for these potential drops.

The following is the definition of each byte of a characteristic’s value
for the DynaFlex Bluetooth® LE protocol:

The first byte of the characteristic value is the message counter for
every PDU. The message counter should be zero for the first message sent
after every new BLE connection is established and should increase by one
after sending every message. If its’ value is 0xff before it increments,
it should have a value of zero after incrementing. All PDUs of a single
message should have the same value for the message counter. The side
receiving the message can use this counter to help detect if some PDUs
of a message or if an entire message is dropped. The message counter for
the message from host direction should be completely independent from
the message counter for the message to host direction.

The second byte of the characteristic value is the PDU counter for every
PDU. The PDU counter should be zero for the first PDU of a message sent
and should increase by one after sending every PDU of that message. If
its’ value is 0xff before it increments, it should have a value of one
instead of zero after incrementing. This is because the value of zero is
reserved to always be used for the first PDU of a message. If the device
receives a PDU counter of zero while it is still expecting more PDUs for
an existing message, it shall discard any message that it is currently
receiving and start receiving the new message. The first PDU of a
message has a different protocol format than the remaining PDUs. The
side receiving the message shall use this counter to help detect if some
PDUs of a message are dropped. The PDU counter for the message from host
direction should be completely independent from the PDU counter for the
message to host direction.

If the PDU counter is zero indicating that this is the first PDU of a
message, then the following paragraphs define the remaining bytes of the
PDU, otherwise the remaining bytes of the PDU starting with the third
byte contain the next portion of the application message.

If the PDU counter is zero indicating that this is the first PDU of a
message, then the third byte of the PDU contains the protocol control
byte (PCB). The protocol control byte is reserved and should always be
set to zero. This byte may be used in the future to extend the protocol.

If the PDU counter is zero indicating that this is the first PDU of a
message, then the fourth, fifth, sixth and seventh byte of the PDU
contain the message length in big endian order. This is the length of
the entire message not just the portion contained in the current PDU.
The receiver of the message shall use this value to determine when it
has received all the PDUs of a message.

If the PDU counter is zero indicating that this is the first PDU of a
message, the remaining bytes of the PDU starting with the eighth byte
contain the first portion of the application message. If the entire
application message fits into one PDU then it contains all the
application message.

The following is an example of sending two application messages in a row
where the first 9-byte message fits into a single PDU and the second
512-byte message requires 3 PDUs.

| Message Counter | PDU Counter | PCB | Message Length | Message Portion |
|-----------------|-------------|-----|----------------|-----------------|
| 00              | 00          | 00  | 00 00 00 09    | 9 bytes         |

| Message Counter | PDU Counter | PCB | Message Length          | Message Portion |
|-----------------|-------------|-----|-------------------------|-----------------|
| 01              | 00          | 00  | 00 00 02 00 (512 bytes) | 237 bytes       |

| Message Counter | PDU Counter | Message Portion |
|-----------------|-------------|-----------------|
| 01              | 01          | 242 bytes       |

| Message Counter | PDU Counter | Message Portion |
|-----------------|-------------|-----------------|
| 01              | 02          | 33 bytes        |

Protocol implementation recommendations:

1)  To optimize throughput, split large messages into the minimum number
    of PDUs by making all PDUs the agreed upon MTU size long (ideally
    247 bytes) except for possibly the last PDU.

2)  Implement error detection that as a minimum detects and discards
    incomplete messages.

3)  If the device detects an incomplete message, it should be able to
    continue to receive new complete messages.

4)  Use the message counter, PDU counter and message length fields to
    detect incomplete messages.

5)  When receiving a multiple PDU message and expecting more PDUs, if
    the next PDU has a PDU counter of zero discard the previous message
    and start receiving the new one.

6)  When looking for the first PDU of a message, if a PDU arrives that
    does not have a PDU counter of zero discard it.

7)  If the message counter advances by more than one between two
    messages, assume a message has been dropped. The device should
    ignore this situation. The host can ignore this situation too or
    implement error handling of its choice.

### How to Use RS-232/UART Connections (SLIP Only)

To connect the host to the device using a serial connection such as
RS-232 UART, configure the host’s serial port to use 115200 Baud, 8 Bit,
No-parity,1 Stop bit, and No flow control.

When using these connections, the host and device use SLIP format to
send and receive MMS messages. For details, see section **2.6 How to Use
SLIP Format (SLIP Only)**. The host software should always be ready to
receive notification messages and command response messages from the
device.

(BCR Only) When using the UART interface and the device is configured to
be enable user action event notifications using **Property 1.2.7.1.2.1
User Event Notification Controls Enable**, the device cannot determine
if it is connected to a host or not, therefore the device will continue
reading barcode data even when not connected to a host.

### How to Use SLIP Format (SLIP Only)

For connection types that do not include error detection and correction,
such as serial protocols, which provides a means for the host and device
to re-synchronize in the case of connection errors by watching for
specifically reserved frame delimiters marking the start and end of a
message. The MMS SLIP wrapper is defined in **Table 8**.

All messages start with SLIP’s frame delimiter **C0**, and must consider
SLIP escape sequences that deal with occurrences of C0 inside the SLIP
data frame:

- If an outbound message contains the byte value **C0**, software should
  encode it into SLIP as **DB DC**.

- If an inbound message contains the byte sequence **DB DC**, software
  should decode it to **C0**.

- If an outbound message contains the byte value **DB**, software should
  encode it into SLIP as **DB DD**.

- If an inbound message contains the byte sequence **DB DD**, software
  should decode it to **DB**.

**Message Info** indicates the direction of the message (such as
**Direction Host to Device** for **Commands**, **Direction Device to
Host** for **Notifications**). If the host has sent the device a command
that exceeds the device’s incoming message buffer capacity, the device
responds with a brief message indicating **Hardware Capability
Exceeded**, and populates **Length of MMS Message** with the maximum
possible message length the device can process, followed by a zero
length **MMS Message** and the closing **SLIP Frame Delimiter**.

For general information about messages, see section **2.7**.

For specific messages, see sections **6 Commands** and **7
Notifications**.

Table 8 - MMS SLIP Wrapper

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr>
<th>Offset</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte 0</td>
<td>SLIP Frame Delimiter = 0xC0</td>
</tr>
<tr>
<td>Byte 1</td>
<td><p>Message Info</p>
<p>0x00 = Direction Host to Device</p>
<p>0x02 = Direction Device to Host</p>
<p>0x03 = Hardware Capability Exceeded</p></td>
</tr>
<tr>
<td>Bytes 2..5</td>
<td><p>Length of MMS Message</p>
<p>Use big endian order</p></td>
</tr>
<tr>
<td>Bytes 6..n</td>
<td>MMS Message</td>
</tr>
<tr>
<td>Byte n+1</td>
<td>SLIP Frame Delimiter = 0xC0</td>
</tr>
</tbody>
</table>

For further reference, see the definition of the SLIP format in Part D,
Section 3 of ***Specification of the Bluetooth® System, Host Controller
Interface, Volume 4***, which is available at
<https://www.bluetooth.org/Technical/Specifications/adopted.htm>. Note
the reference to bluetooth.org is intentional, and the specification
does indeed apply to other device connection types.

### How to Use Apple iAP2 Connections (iAP2 Only)

This section provides information about developing an iOS app that
interfaces with the device via the USB connector using iPod Accessory
Protocol (iAP2). For sample code and other supporting materials, see
***1000007353 MAGTEK UNIVERSAL SDK FOR MMS DEVICES ( iOS )***, available
from MagTek.

To develop host software for an iOS host that connects to the device,
you must know the following device properties, which are specified by
the purchaser when ordering, and loaded by the manufacturer:

- Apple iAP2 AppBundleID, also known as the SDK Protocol, usually in the
  form of a reverse DNS string unique to the host software developer or
  the device purchaser.

The host software should initiate a connection to the device using the
iOS SDK’s ***ExternalAccessory*** Framework (for sample code, see
Apple’s ***EADemo*** app). Upon establishing the connection, the host
can begin exchanging data with the device.

## Messages (Requests, Responses, Notifications, and Files)

This section describes the general format of messages exchanged between
hosts and devices that are using the common MMS message framework.

Documentation about the specific messages supported by a given device is
provided in section **6 Commands**.

### About Messages

The host and the device communicate with each other by exchanging blocks
of data called **Messages**, which are standardized wrappers containing
a **payload** that is either a command **Request**, a command
**Response**, an unsolicited **Notification**, or a **File**. For
example, the host may send a command **request** message to the device
to change a configuration setting, and the device may send a command
**response** message to indicate the command was successful; when a
cardholder inserts a card, the device may send a **notification**
message to the host that a cardholder has initiated a transaction; the
host may send the device a **file** message to load firmware.

Messages can be nested. For example, a top-level secure wrapper request
from the host to the device may contain an encrypted or signed command
request for the device to unpack, validate, and execute.

**Requests and Responses.** Requests and responses are two of the
message payload types the host and device exchange inside messages. The
combination of a message that contains a **request** payload and a
message that contains the corresponding **response** payload is referred
to generally in this document as a **Command**. The device can only
service one command request at a time, and sends each command response
within a pre-determined finite amount of time after receiving the
request. After sending a command request, the host must wait until the
device returns a response before sending another request, or until the
request is unanswered after a reasonable host-defined timeout period
passes.

**Notifications.** Notifications are a message payload type the host and
device exchange inside messages. The device sends notification messages
to the host if the device’s state changes or if an external event
occurs, such as a cardholder inserting a card. The device can send a
notification at any time, and does not expect a response or any specific
action from the host. By default, the device sends all notifications to
the USB interface. To configure the device to send notifications on
additional connections, use **Command 0x1F02 - Set Notification
Subscriptions**.

**Data Files**. Data Files are a message payload type the host and
device exchange inside messages. The device handles them as a stream, in
that it begins storing the payload of the message before it has received
the final packet of the message, allowing for much larger payloads than
standard requests. This is made possible by restricting the function of
the message to just transferring a file, which means restricting the
message payload to primitive data only; it cannot contain composed TLV
data objects.

Regardless of connection type, all MMS devices use the same schema for
sending and receiving messages, which is documented in section **3.2
Message Format**. For information about transmitting and receiving
messages using specific connection types, which involves following
connection-specific rules for breaking messages down into transmittable
**Message Streams**, see section **2 Connection Types**.

### Message Format

#### Tag-Length-Value (TLV) Encoding

##### About TLV Encoding

All messages exchanged between the host and the device are formatted
using the tag-length-value **Distinguished Encoding Rules** (DER)
defined in ***ITU-T X.680\|ISO/IEC 8824-1*** and ***ITU-T X.690\|ISO/IEC
8825-1***. A subset of these standards is also used in ***EMV Integrated
Circuit Card Specifications for Payment Systems 4.3, Part IV, Annex B
Rules for BER-TLV Data Objects***, so the latter can serve as a useful
point of reference, especially for developers who are familiar with
systems that exchange blocks of EMV data.

Summarizing those specifications, each TLV data object follows these
basic rules:

- The DER standard designates the least significant bit of a byte as
  **bit 1**, and the most significant bit of a byte as **bit 8**. This
  is different from the remainder of the MMS standard, which indexes bit
  numbers starting at 0 to be consistent with each bit position number
  representing that bit’s power of 2.

- The **Tag** or **Identifier** portion of a TLV data object identifies
  the TLV data object. This standard assigns the **tag** (identifier)
  portion of TLV data objects according to the DER format as follows:

  - Bits 8 and 7 specify whether the TLV data object is universal,
    application-defined, context-specific, or private. Most messages in
    this standard contain **context-specific** tags (bits 8 and 7 =
    **10**), meaning different messages reuse the same tags, and the
    tags represent sequentially numbered parameters passed in any
    message. The contents of each context-specific tag (parameter) are
    described for each message in section **6 Commands**.

  - Bit 6 specifies whether the tag is **primitive** (bit 6=**0**),
    meaning it contains its values directly, or **constructed** (bit
    6=**1**), meaning the TLV data object contains more TLV data
    objects.

  - Bits 5 to 1 specify a unique tag number, with 11111 reserved to
    mean:

    - The tag is not a single byte long

    - Bits 7 to 1 of subsequent bytes with bit 8 set to 1 are also part
      of the tag identifier with the most significant of the whole tag
      number in bit 7

    - Bits 7 to 1 of the final byte with bit 8 set to 0 is also part of
      the tag identifier

<!-- -->

- The **Length** portion is calculated as the total length of the Data
  portion that follows it: Lengths can be either short form or long
  form:

  - **Short form** means the length is one byte long in the range 0x00
    to 0x7F.

  - **Long form** means the length is multiple bytes long, starting with
    one-byte 0x80 or greater, where the lower 7 bits specify how many
    subsequent bytes are used to indicate the length. For example, in
    the case of length 8201C3, 0x82 is greater than 0x7F, and the lower
    7 bits equal 0x02, so the next 2 bytes 0x01C3 give the total length
    of the data block, 451 bytes.

  - DER format stipulates all TLV data objects should be encoded using
    the smallest length required to fit the data.

- The **Value** or **Data** portion is the actual payload of the TLV
  data object.

This document provides message definitions in hexadecimal format; when
the host constructs or interprets a message, if no additional encode /
decode filtering or translation is in place at the platform layer, it
should expect each hexadecimal value shown in this document to be
represented as binary bytes in the message stream, not as string
literals. For example, FF is a single byte with all bits set to 1, not
the two-byte string literal “FF.”

##### TLV Example

Below is a brief example of a TLV-encoded request and response for
**Command 0xDF01 - Echo**, wrapped in the standard message format
documented in section **3.2.2 Message Structure**.

The host sends the device a binary byte stream
AA0081040101DF018407DF018103010203, which breaks down as follows:

- AA00 = Standard **Start of Message** / **API Framework Version** (not
  TLV)

- 81, 04, 0101DF01

  - Tag 81 = Request Message Parameter 1, **Message Information**

  - Length 04

  - Value 0101DF01

    - 01 = Request from host to device

    - 01 = Message reference number

    - DF01 = **Command 0xDF01 - Echo**

- 84, 07, DF018103010203

  - Tag 84 = Request Message Parameter 4, **Request Payload**

  - Length 07

  - Value DF018103010203

    - DF01 = Payload format is for Request **Command 0xDF01 - Echo**
      (not TLV)

    - Tag 81 = Payload Parameter 1, **Value to Echo**

    - Length 03

    - Value 010203 = Value to Echo 010203

In response, the device sends the host a binary byte stream
AA0081048201DF018204000000008407DF018103010203, which breaks down as
follows:

- AA00 = Standard **Start of Message** / **API Framework Version** (not
  TLV)

- 81, 04, 8201DF01

  - Tag 81 = Response Message Parameter 1, **Message Information**

  - Length 04

  - Value 8201DF01

    - 82 = Response from device to host

    - 01 = Message reference number

    - DF01 = **Command 0xDF01 - Echo**

- 82, 04, 00000000

  - Tag 82 = Response Message Parameter 2, **Response Status** (one byte
    **Operation Status Summary**, three bytes **Operation Status
    Detail**)

  - Length 04

  - Value 00, 000000 = OK / Done, General / All Good / Requested
    operation was successful

- 84, 07, DF018103010203

  - Tag 84 = Response Message Parameter 4 for **Response Payload**

  - Length 07

  - Value DF018103010203

    - DF01 = Payload format is for Response **Command 0xDF01 - Echo**
      (not TLV)

    - Tag 81 = Payload Parameter 1, **Value to Echo**

    - Length 03

    - Value 010203 = Value to Echo 010203

##### How to Read TLV Tables

Throughout this document, tables that show TLV data objects use some
number of slashes in front of the **Tag** identifier to indicate that
object’s *relative* level of nesting / containment within other TLV data
objects *in the same table*. These levels should not be assumed to be
absolute levels, because a given TLV data object may be nested within
other TLV data objects at any level. The slash notation saves table
space compared to whitespace indenting and is easier to read than a
separate “Nesting Level” column, which can be difficult to notice.

For example:

- **Earth** contains

- **/North America**, which contains

- **//United States**, which contains

- **///California**.

Although **Earth** is a *relative* root within the context of the
objects above, it is not an *absolute* root, because the nested objects
starting with the **Earth** relative root could be wrapped inside
another object representing **Sol Solar System**, and that could be
wrapped in **Milky Way Galaxy**, and so on.

In tables that show TLV data objects, a Length of **var** means the
length is variable, and the device or host must calculate it based on
whatever is nested inside the TLV data object.

See **Table 9 below** for an example.

Table 9 - TLV Table Example

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| A1 | var | TLV data object **A1** contains four directly nested TLV data objects: 81, 82, A3, and 84 for short, or more precisely A1/81, A1/82, A1/A3, and A1/84. A1/82 is optional (Req = **O**), so the length of A1 will vary depending on whether or not A1/82 is included (Len = **var**) or excluded / left implicit. | T | R |  |
| /81 | 01 | TLV data object A1/81 contains one byte and is required. It has no default value because it must be explicitly included. | B | R |  |
| /82 | 03 | TLV data object A1/82 contains three bytes but is optional. If it is not included in this object, the device (or host) assumes the default value 0x4D6F6D. | B | O | 0x4D6F6D |
| /A3 | 08 | TLV data object A1/A3 contains two TLV data objects: 81 and 82, or more precisely, A1/A3/81 and A1/A3/82. Its length is the combined length of its two nested objects: 5 bytes for 81 (tag **81**, length **03**, value **xx xx xx**) and 3 bytes for 82 (tag **82**, length **01**, value **xx**). | T | R |  |
| //81 | 03 | TLV data object A1/A3/81 contains three bytes and is required. | B | R |  |
| //82 | 01 | TLV data object A1/A3/82 contains one byte and is required. | B | R |  |
| /84 | 03 | TLV data object A1/84 contains three bytes that represent distinct values, but to save space, they are length-delimited directly inside A1/84, instead of being assigned their own individual nested TLV data objects. The length of A1/84 is simply the combination of three single bytes. | B | R |  |
| //null | \(1\) | This is just a raw byte inside 84. As a simple byte, it has no tag-length-value structure of its own, so its Tag is shown here as **/null**, and its length is in parentheses to indicate it is not encoded as a TLV data object, it is simply a byte count that can be used to “slice apart” the contents of 84 into separate values. | B | R |  |
| //null | \(1\) | This is another byte contained by 84. | B | R |  |
| //null | \(1\) | This is another byte contained by 84. | B | R |  |

#### Message Structure

Each message type follow a specific structure, detailed in the
subsections below.

##### Request Message

Table 10 - Request Message Format

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>One byte standard <strong>Start of Message</strong>
constant, not in TLV format.</p>
<ul>
<li><p>0xAA = Standard start of message byte</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>One-byte standard <strong>API Framework
Version</strong> constant, not in TLV format, used for tracking version
compatibility. Devices that implement higher (newer) versions of the API
framework are designed to be reasonably compatible with current and
previous (lower) versions:</p>
<ul>
<li><p>0x00 = Pre-production development (limited breaking changes). At
minimum, every device MagTek ever produces using the MMS framework will
accept this value.</p></li>
<li><p>0x01 = First Production release (no breaking changes)</p></li>
<li><p>0x02 = Second Production release</p></li>
<li><p>Etc.</p></li>
</ul></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td>Message Information</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Type &amp; Direction</p>
<ul>
<li><p>0x01 = Request from host to device</p></li>
<li><p>0x81 = Request from device to host (Reserved)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Reference Number</p>
<p>The host can use any value in this byte to help match responses with
their corresponding requests. The device includes the same number in the
corresponding response(s). MagTek recommends using a simple incrementing
counter per request the host sends during a session.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Command ID</p>
<p>The fully qualified Command number as defined in section <strong>6
Commands</strong>. The first byte is the Command Group number, which
groups functionally related requests, and the second byte is the Command
number within that group. If the <strong>Request Payload</strong> in the
message contains wrappers, the host should specify the command it is
invoking at the core of the request after all wrappers have been
removed. This value is included primarily for performance and key
conservation; the device simply uses it to make sure it is in a mode
where it is capable of processing the desired command before it begins
processing the <strong>Request Payload</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(var)</td>
<td>Reserved</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Request Payload</p>
<p>As documented in the message’s Request table in section <strong>6
Commands</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>9E</td>
<td>var</td>
<td>Reserved</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

##### Response Message

Table 11 - Response Message Format

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>One byte standard <strong>Start of Message</strong>
constant, not in TLV format.</p>
<ul>
<li><p>0xAA = Standard start of message byte</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>One-byte standard <strong>API Framework
Version</strong> constant, not in TLV format, used for tracking version
compatibility. Devices that implement higher (newer) versions of the API
framework are designed to be reasonably compatible with current and
previous (lower) versions:</p>
<ul>
<li><p>0x00 = Pre-production development (limited breaking changes). At
minimum, every device MagTek ever produces using the MMS framework will
accept this value.</p></li>
<li><p>0x01 = First Production release (no breaking changes)</p></li>
<li><p>0x02 = Second Production release</p></li>
<li><p>Etc.</p></li>
</ul></td>
</tr>
<tr>
<td>81</td>
<td style="text-align: center;">4</td>
<td>Message Information</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Type &amp; Direction</p>
<ul>
<li><p>0x02 = Response from host to device (Reserved)</p></li>
<li><p>0x82 = Response from device to host</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Reference Number</p>
<p>The device echoes back whatever value the host populated in the
Message Reference Number when it made the corresponding request. The
host can use this value to match responses with their corresponding
requests.</p></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Response ID</p>
<p>Matches the fully qualified Command number from the corresponding
Command Request message, as defined in section <strong>6.1 Command Group
0x10nn - Transactions</strong>.</p>
<ul>
<li><p>0x1001 – Start Transaction</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(var)</td>
<td>Reserved</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>04</td>
<td>Response Status</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Operation Status Summary</p>
<ul>
<li><p>0x00 = OK, Done</p></li>
<li><p>0x01 = OK, Started / Running</p></li>
<li><p>0x40 = OK, Done with Warnings</p></li>
<li><p>0x41 = OK, Started / Running with Warnings</p></li>
<li><p>0x80 = Failed to start operation (missing parameters,
etc.)</p></li>
<li><p>0x81 = Failed during operation</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Operation Status Detail (Group)</p>
<p>Operation Status Detail <strong>Group</strong>,
<strong>Subgroup</strong>, and <strong>Status Code</strong> combine to
provide a more detailed report than the Operation Status Summary. See
<strong>Table 12 - Operation Status Detail Codes</strong> on page <a
href="#_Ref133388469"><strong>26</strong></a>.</p>
<ul>
<li><p>0x02 = Security / Permission Problems</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Operation Status Detail (Subgroup)</p>
<p>Operation Status Detail <strong>Group</strong>,
<strong>Subgroup</strong>, and <strong>Status Code</strong> combine to
provide a more detailed report than the Operation Status Summary. See
<strong>Table 12 - Operation Status Detail Codes</strong> on page <a
href="#_Ref133388469"><strong>26</strong></a>.</p>
<ul>
<li><p>0x03 = Device State Issue</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Operation Status Detail (Status Code)</p>
<p>Operation Status Detail <strong>Group</strong>,
<strong>Subgroup</strong>, and <strong>Status Code</strong> combine to
provide a more detailed report than the Operation Status Summary. See
<strong>Table 12 - Operation Status Detail Codes</strong> on page <a
href="#_Ref133388469"><strong>26</strong></a>.</p>
<ul>
<li><p>0x16 = Low Battery (5% or less)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Additional Details</p>
<p>If provided, use this value to help isolate the problem such as the
specific parameter number or EMV tag. See the Command definition in
section <strong>6 Commands</strong> for command-specific Additional
Details.</p></td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Response Payload</p>
<p>As documented in the message’s Response table in section <strong>6
Commands</strong>.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>9E</td>
<td>var</td>
<td>Reserved</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

<span id="_Ref133388469" class="anchor"></span>Table 12 - Operation
Status Detail Codes

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 5%" />
<col style="width: 13%" />
<col style="width: 5%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>Source</th>
<th>Grp</th>
<th>Sub</th>
<th>Cde</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>The <strong>General</strong> group 0x00 contains
operation status detail codes related to the platform that do not
originate from a specific functional module.</p>
<ul>
<li><p>Subgroup 0x00 = General</p></li>
</ul></td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td>All good / requested operation was successful.</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>02</td>
<td>Requested Operation Failed</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>10</td>
<td>Setting up RTC data and time failure</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>11</td>
<td>Setting up RTC alarm failure</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>12</td>
<td>Key generation failure</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>13</td>
<td>Tamper setting is locked, can’t be changed</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>14</td>
<td>Tamper setting requires system reset to continue</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>15</td>
<td>Tamper status can’t be cleared, failure</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>16</td>
<td>Device has been tampered, need attention</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>17</td>
<td>Tamper module failed for other cases</td>
</tr>
<tr>
<td>General</td>
<td>00</td>
<td>00</td>
<td>18</td>
<td>Setting WLAN SoftAP password failure</td>
</tr>
<tr>
<td colspan="5"><p>The <strong>Message Handler</strong> group 0x01
contains operation status detail codes related to parsing and validating
messages.</p>
<ul>
<li><p>Subgroup 0x01 = Device issues that prevent Message Processing
(e.g., Critical Battery, Pending Reset, System Failure, System
Busy).</p></li>
</ul></td>
</tr>
<tr>
<td>Message</td>
<td>01</td>
<td>01</td>
<td>01</td>
<td>Generic Failure.</td>
</tr>
<tr>
<td>Message</td>
<td>01</td>
<td>01</td>
<td>02</td>
<td>Bad message parameter. The host has sent a message to the device
that is not constructed properly.</td>
</tr>
<tr>
<td>Message</td>
<td>01</td>
<td>01</td>
<td>09</td>
<td>Device offline, can not process messages. For example, the device
returns this detail code when it does not have keys injected or has
registered a tamper.</td>
</tr>
<tr>
<td>Message</td>
<td>01</td>
<td>01</td>
<td>10</td>
<td>PIN Key Not Mapped.</td>
</tr>
<tr>
<td>Message</td>
<td>01</td>
<td>01</td>
<td>13</td>
<td>Feature Not Available</td>
</tr>
<tr>
<td colspan="5"><p>The <strong>Request Handler</strong> group 0x02
contains operation status detail codes related to starting actual
command requests.</p>
<ul>
<li><p>Subgroup 0x01 = Data issues (bad, missing, unknown…)</p></li>
<li><p>Subgroup 0x02 = Security / permission problems</p></li>
<li><p>Subgroup 0x03 = Device state issues (busy, not permitted,
tampered, low battery)</p></li>
<li><p>Subgroup 0x04 = Device issues (missing hardware or
features)</p></li>
<li><p>Subgroup 0x05 = TR31 Errors</p></li>
</ul></td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>00</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>01</td>
<td>Generic Failure</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>02</td>
<td>Bad Message Parameter</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>03</td>
<td>Response Payload too big</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>07</td>
<td>Internal FW Failure</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>0A</td>
<td>Image Failure</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>19</td>
<td>Key does not exist</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>1A</td>
<td>Not Secured</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>1B</td>
<td>Passcode validation failed</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>01</td>
<td>1C</td>
<td>Device is locked</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>02</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>04</td>
<td>Failed, device state issue, no transaction.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>05</td>
<td>Failed, device state issue, cannot cancel.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>08</td>
<td>Failed, device state, Transaction in Progress.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>0C</td>
<td>Failed, device state, Signature Not allowed</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>0D</td>
<td>Failed, device state, Wrong Transaction State</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>0E</td>
<td>Failed, device state, Invalid PIN Entry State</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>0F</td>
<td>Failed, device state, PIN Entry in Session.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>11</td>
<td>Failed, device state, Barcode Read in Progress.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>12</td>
<td>Failed, device state, Pass-through command Not Activated.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>14</td>
<td>Failed, device state, UI Settings in Progress.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>15</td>
<td>Failed, device state, Buzzer in Progress</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>16</td>
<td>Failed, device state, Low Battery (5% or less)</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>17</td>
<td>Attempt to display Flexible UI page while touchscreen UI
notifications enabled</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>03</td>
<td>18</td>
<td>Request is invalid while card emulation is in progress</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>04</td>
<td>13</td>
<td>Failed, BCR hardware not found.</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>01</td>
<td>Invalid TR31parameter</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>02</td>
<td>Invalid AES length</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>03</td>
<td>Invalid 16-Byte Boundary</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>04</td>
<td>Invalid Length in Message</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>05</td>
<td>Invalid number of optional KBH</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>06</td>
<td>Error in conversion of data type</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>07</td>
<td>Invalid KCV algorithm</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>08</td>
<td>Invalid KCV length</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>09</td>
<td>Invalid Optional KBH ID</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0A</td>
<td>Invalid KBH ID</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0B</td>
<td>Invalid algorithm used in KBH</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0C</td>
<td>Invalid KBH usage</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0D</td>
<td>Invalid KBH length</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0E</td>
<td>Invalid version ID for key derivation</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>0F</td>
<td>Invalid KBH mode of use</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>10</td>
<td>TR31 engine not installed</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>11</td>
<td>Invalid Cryptographic operation</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>12</td>
<td>MAC Verification Failed</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>13</td>
<td>Error in Decrypting Key data</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>14</td>
<td>Error in computing MAC over entire message</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>15</td>
<td>Invalid MAC length</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>16</td>
<td>KDF Error</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>17</td>
<td>Buffer Insufficient</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>18</td>
<td>Invalid Storage KPM</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>19</td>
<td>Invalid Storage Secure RAM</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1A</td>
<td>Invalid Key ID specified in option block</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1B</td>
<td>Unsupported Key ID specified in option block</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1C</td>
<td>Invalid Key ID Relationship</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1D</td>
<td>Protection Key ID not loaded</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1E</td>
<td>Invalid Data Tag MagTek Custom option block</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>1F</td>
<td>Invalid Kcv</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>20</td>
<td>Invalid Data</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>21</td>
<td>Invalid DUKPT key derivation</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>22</td>
<td>Invalid Exportability</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>23</td>
<td>Invalid Key Class</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>24</td>
<td>Invalid DSN</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>25</td>
<td>Invalid Challenge</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>26</td>
<td>Key Undeletable</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>27</td>
<td>Key not present</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>28</td>
<td>Unsupported Keyset ID</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>29</td>
<td>KPM Error</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2A</td>
<td>Secure RAM Error</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2B</td>
<td>Duplicated Key</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2C</td>
<td>Invalid Key Usage Rule</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2D</td>
<td>Selftest Key Corrupted</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2E</td>
<td>Selftest System Key Bitmap Corrupted</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>2F</td>
<td>Selftest System Key Missing</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>30</td>
<td>Selftest System Key Not Loaded</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>31</td>
<td>Invalid Key Storage Limit</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>32</td>
<td>Duplicated Key set</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>33</td>
<td>Key Restriction</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>34</td>
<td>Key Transported by Weaker key</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>35</td>
<td>Repeat Key Agreement</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>36</td>
<td>Security not activated</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>37</td>
<td>Selftest key relocated</td>
</tr>
<tr>
<td>Request Handler</td>
<td>02</td>
<td>05</td>
<td>38</td>
<td>Invalid Selftest Scanned Versus Saved Bitmap</td>
</tr>
<tr>
<td colspan="5"><p>(MAGTEK INTERNAL ONLY FOR NOW, not used)</p>
<p>The <strong>EMV Tag Processing</strong> group 0x03 contains operation
status detail codes related to…</p></td>
</tr>
<tr>
<td>EMV Tag Processing</td>
<td>03</td>
<td>00</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td colspan="5"><p>(MAGTEK INTERNAL ONLY FOR NOW, not used)</p>
<p>The <strong>Keys / Cryptographic Handler</strong> group 0x04 contains
operation status detail codes related to…</p></td>
</tr>
<tr>
<td>Keys/Crypto Handler</td>
<td>04</td>
<td>00</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td colspan="5"><p>(MAGTEK INTERNAL ONLY FOR NOW, not used)</p>
<p>The <strong>Configuration</strong> group 0x05 contains operation
status detail codes related to…</p></td>
</tr>
<tr>
<td>Configuration</td>
<td>05</td>
<td>00</td>
<td>00</td>
<td>Reserved</td>
</tr>
<tr>
<td colspan="5"><p>(MAGTEK INTERNAL ONLY FOR NOW, not used)</p>
<p>The <strong>Kernel Set ‘A’</strong> group 0xF0 contains operation
status detail codes from a subset of vendor-supplied libraries / modules
used by the device’s firmware. These detail codes are not specifically
enumerated here, they simply provide a standard, controlled channel to
report messages controlled by third parties.</p>
<p>Please report occurrences of this type of failure to MagTek Support
Services.</p></td>
</tr>
<tr>
<td colspan="5"><p>(MAGTEK INTERNAL ONLY FOR NOW, not used)</p>
<p>The <strong>Kernel Set ‘I’</strong> group 0xF1 contains operation
status detail codes from a subset of vendor-supplied libraries / modules
used by the device’s firmware. These detail codes are not specifically
enumerated here, they simply provide a standard, controlled channel to
report messages controlled by third parties.</p>
<p>Please report occurrences of this type of failure to MagTek Support
Services.</p></td>
</tr>
</tbody>
</table>

##### Notification Message

Table 13 - Notification Message Format

<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 68%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>One-byte standard <strong>Start of Message</strong>
constant, not in TLV format.</p>
<ul>
<li><p>0xAA = Standard start of message byte</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>One-byte standard <strong>API Framework
Version</strong> constant, not in TLV format, used for tracking version
compatibility. Devices that implement higher (newer) versions of the API
framework are designed to be reasonably compatible with current and
previous (lower) versions:</p>
<ul>
<li><p>0x00 = Pre-production development (limited breaking changes). At
minimum, every device MagTek ever produces using the MMS framework will
accept this value.</p></li>
<li><p>0x01 = First Production release (no breaking changes)</p></li>
<li><p>0x02 = Second Production release</p></li>
<li><p>Etc.</p></li>
</ul></td>
</tr>
<tr>
<td>81</td>
<td style="text-align: center;">4</td>
<td>Message Information</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Type &amp; Direction</p>
<ul>
<li><p>0x03 = Notification from host to device (Reserved)</p></li>
<li><p>0x83 = Notification from device to host</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td>Reserved, set to 0x00</td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Notification Source</p>
<p>This byte and the <strong>Notification Type</strong> form the first
two bytes of a unique six-byte Notification ID. Use this byte to look up
the <strong>Notification Group</strong> subsection in <strong>7
Notifications</strong>.</p>
<ul>
<li><p>0x01 = Transaction</p></li>
<li><p>0x09 = Firmware Update</p></li>
<li><p>0x10 = Device</p></li>
<li><p>0x18 = User Interface</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Notification Type</p>
<p>Append this byte to <strong>Notification Source</strong> to look up
the <strong>Notification 0xNNNN</strong> subsection in the Notification
Group subsection to find the documentation for the notification.</p>
<ul>
<li><p>0x01 = Information Update</p></li>
<li><p>0x02 = Warning (e.g. low battery, reset soon)</p></li>
<li><p>0x03 = Action Request (device is asking the host to take
action)</p></li>
<li><p>0x04 = Callback (request for action from host, device waits
before continuing the related operation)</p></li>
<li><p>0x05 = Operation Complete (either success or error)</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(var)</td>
<td>Reserved</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>(4)</td>
<td><p>Notification Detail Code</p>
<p>These four bytes, when combined with <strong>Notification
Source</strong> and <strong>Notification Type</strong>, form a six-byte
unique ID for the notification. Each six-byte combination has a specific
meaning and represents a different call to action for the host. See
section <strong>7 Notifications</strong> for <strong>Notification Detail
Codes</strong> tables containing information about the
notification.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>1</td>
<td><p>Category</p>
<ul>
<li><p>0x00 = Power/Reset</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>1</td>
<td><p>Reason</p>
<ul>
<li><p>0x02 = Battery</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>1</td>
<td><p>Reason Detail (Subgroup)</p>
<ul>
<li><p>0x01 = Power Down Imminent</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>1</td>
<td>Reserved, set to 0x00</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Additional Detail</p>
<p>See the notification definition in section <strong>7
Notifications</strong> for notification-specific Additional
Details.</p></td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Notification Payload</p>
<p>As documented in the message’s Notification table in section
<strong>7 Notifications</strong>.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>9E</td>
<td>var</td>
<td>Reserved</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

##### Data File Message

This message type is used exclusively for transferring larger blocks of
data that can overwhelm the standard message queue. The payload data for
each message is always be treated as an individual file. This message is
only valid after a successful invocation of **Command 0xD811 - Start
Send File to Device (Secured)**, **Command 0xD812 - Start Send File to
Device (Unsecured)**, or **Command 0xD821 - Start Get File from
Device**.

Table 14 - Data File Message Format

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>One byte standard <strong>Start of Message</strong>
constant, not in TLV format.</p>
<ul>
<li><p>0xAA = Standard start of message byte</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>One-byte standard <strong>API Framework
Version</strong> constant, not in TLV format, used for tracking version
compatibility. Devices that implement higher (newer) versions of the API
framework are designed to be reasonably compatible with current and
previous (lower) versions:</p>
<ul>
<li><p>0x00 = Pre-production development (limited breaking changes). At
minimum, every device MagTek ever produces using the MMS framework will
accept this value.</p></li>
<li><p>0x01 = First Production release (no breaking changes)</p></li>
<li><p>0x02 = Second Production release</p></li>
<li><p>Etc.</p></li>
</ul></td>
</tr>
<tr>
<td>81</td>
<td>08</td>
<td>Message Information</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Type &amp; Direction</p>
<ul>
<li><p>0x04 = Data file from host to device</p></li>
<li><p>0x84 = Data file from device to host</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Message Reference Number</p>
<p>The host can use any value in this byte to help match responses with
their corresponding requests. The device includes the same number in the
corresponding response(s). MagTek recommends using a simple incrementing
counter per request the host sends during a session.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td>Command Number that prompted this message to be sent, as documented
in <strong>Command Group 0xD8nn - File Operations</strong>.</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(4)</td>
<td><p>File Type</p>
<p>The file type as defined in <strong>Command Group 0xD8nn - File
Operations</strong></p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>File Payload</p>
<p>As documented in section <strong>6.7.1 About Files</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
</tbody>
</table>

Table 15 - Data File Message Example

| Example (Hex) |
|----|
| AA 00 81 08 84 08 D8 21 00 00 00 01 84 40 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F 20 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F 30 31 32 33 34 35 36 37 38 39 3A 3B 3C 3D 3E 3F |

## Data Types and Shared TLV Data Objects

This section describes the primitive and composed data types referred to
throughout this document.

### Primitive Data Types

TLV data objects use the following primitive data types:

- A = Alphabetic (string, no numbers).

- AN = Alphanumeric (string).

- B = Binary value, which includes bit combinations (“OR” types).

- CN = Compressed numeric, as defined by ***EMV 4.3 Book 3***, section
  ***Data Element Format Conventions***.

- N = Numeric, as defined by ***EMV 4.3 Book 3***, section ***Data
  Element Format Conventions***.

- T = TLV **Constructed** data object (TLV Value contains additional
  layers of TLV-encoded data the parser should continue to process).

### About Track Data

After the host receives and decrypts **EMV ARQC Type** data or
**Merchant Data Container** data from the device, it may need to parse
each track into individual values embedded in the tracks. The device can
read multiple card formats, which vary even between different issuers
and payment brands using the same underlying standards. Describing all
possible formats is beyond the scope of this document, but this section
describes how to parse data from tracks 1, 2, and 3 in a generic ISO/ABA
compliant format as an example.

**Table 16** shows an example of ISO/ABA track data the device sends to
the host, using unmasked placeholder numbers to make it easier to see
the relative positions of the values embedded in the track data. It is
important to note that some cards do not include Track 3 data. Manually
entered data does not include Track 3.

Table 16 - Example Generic ISO/ABA Track Data Format

| Generic ISO/ABA Track Data Format |  |
|----|----|
| Track 1 Data | %75555555555555555^CARDHOLDER NAME/^33338880004444000006? |
| Track 2 Data | ;5555555555555555=33338880004444006? |
| Track 3 Data | ;5555555555555555=333388800044440000006? |

The example track data in **Table 16** can be interpreted as follows:

- The **%**, **?**, and **;** are Sentinels / delimiters, and are taken
  directly from the data on the card.

- The **7** at the beginning of Track 1 data is the card format code.
  For swiped credit / debit cards, this comes from the card and is
  generally **B**. Manually entered data uses **M**.

- The string of **5**s is the Account Number / License Number / PAN.

- The carets **^** are a standard ISO track 1 delimiter surrounding the
  Cardholder Name.

- **CARDHOLDER NAME/** is the Cardholder Name. Manually entered data
  uses string literal **MANUAL ENTRY/**.

- The string of **3**s is the Expiration Date (YYMM).

- The string of **8**s is the Service Code. For swiped credit / debit
  cards, this comes from the card. Manually entered data uses **000**.

- The remaining characters (**0**s, **4**s, and **6**) are Discretionary
  Data. For swiped debit / credit cards this data is of varying length
  and content and comes from the card, and must be interpreted according
  to the standards established by issuers, payment brands, and so on.
  Manually entered track data uses a MagTek standard for Discretionary
  Data as follows:

  - The string of **4**s is the CVV2 a cardholder or operator entered on
    the keypad. This may be 3 or 4 characters long and is not padded, so
    the host software must find it by using the fixed-length padding and
    sentinels that surround it.

  - The strings of **0**s are literals of fixed length: Track 1 has
    three zeroes after the Service Code, and five zeroes after the CVV2;
    Track 2 has three zeroes after the Service Code, and two zeroes
    after CVV2.

  - The **6** contains either a 0 or a 1. This Field Option tells what
    data is included in the track data, where **0 = Acct, Date, CVV**
    and **1 = Name on Card, Acct, Date, CVV**.

### Display Strings

The Display Strings type provides a pre-defined set of messages by
string ID that the host and device use for various user interface
features.

Table 17 - Display String IDs and Strings

| Display String ID | Display String (en-US)               |
|-------------------|--------------------------------------|
| 0x00              | Reserved, do not use.                |
| 0x01              | “AMOUNT”                             |
| 0x02              | “AMOUNT OK?”                         |
| 0x03              | “APPROVED”                           |
| 0x04              | “CALL YOUR BANK”                     |
| 0x05              | “CANCEL OR ENTER”                    |
| 0x06              | “CARD ERROR”                         |
| 0x07              | “DECLINED”                           |
| 0x08              | “ENTER AMOUNT”                       |
| 0x09              | Reserved, do not use.                |
| 0x0A              | Reserved, do not use.                |
| 0x0B              | “INSERT CARD”                        |
| 0x0C              | “NOT ACCEPTED”                       |
| 0x0D              | Reserved, do not use.                |
| 0x0E              | “PLEASE WAIT”                        |
| 0x0F              | “PROCESSING ERROR”                   |
| 0x10              | “REMOVE CARD”                        |
| 0x11              | “USE CHIP READER”                    |
| 0x12              | “USE MAGSTRIPE”                      |
| 0x13              | “TRY AGAIN”                          |
| 0x14              | “WELCOME”                            |
| 0x15              | “PRESENT CARD”                       |
| 0x16              | “PROCESSING”                         |
| 0x17              | “CARD READ OK - REMOVE CARD”         |
| 0x18              | “INSERT OR SWIPE CARD”               |
| 0x19              | “PRESENT ONE CARD ONLY”              |
| 0x1A              | “APPROVED PLEASE SIGN”               |
| 0x1B              | “AUTHORIZING PLEASE WAIT”            |
| 0x1C              | “INSERT, SWIPE, OR TRY ANOTHER CARD” |
| 0x1D              | “PLEASE INSERT CARD”                 |
| 0x1E              | Null prompt (empty screen)           |
| 0x1F              | Reserved, do not use.                |
| 0x20              | “SEE PHONE”                          |
| 0x21              | “PRESENT CARD AGAIN”                 |
| 0x22              | “INSERT/SWIPE/TRY OTHER CARD”        |
| 0x23              | “TAP or SWIPE CARD”                  |
| 0x24              | “TAP or INSERT CARD”                 |
| 0x25              | “TAP, INSERT or SWIPE CARD”          |
| 0x26              | “TAP CARD”                           |
| 0x27              | “TIMEOUT”                            |
| 0x28              | “TRANSACTION TERMINATED”             |
| 0x29              | “USE CHIP READER or MAGSTRIPE”       |
| 0x2A              | “SCAN BARCODE”                       |
| 0x2B              | “BARCODE READ SUCCESSFULLY”          |
| 0x2C              | “CANCELED”                           |
| 0x2D              | “SWIPE CARD or SCAN BARCODE”         |
| 0x2E              | “INSERT CARD or SCAN BARCODE”        |
| 0x2F              | “INSERT, SWIPE or SCAN BARCODE”      |
| 0x30              | “TAP CARD or SCAN BARCODE”           |
| 0x31              | “TAP, SWIPE or SCAN BARCODE”         |
| 0x32              | “TAP, INSERT or SCAN BARCODE”        |
| 0x33              | “TAP, INSERT, SWIPE or SCAN BARCODE” |
| 0x34              | “TRY ANOTHER INTERFACE”              |
| 0x35              | “NFC TAG DETECTED”                   |
| 0x36              | “ERROR REMOVE CARD”                  |
| 0x37              | “MIFARE CLASSIC 1K DETECTED”         |
| 0x38              | “MIFARE CLASSIC 4K DETECTED”         |
| 0x39              | “MIFARE DESFIRE DETECTED”            |

### Encryption Type

The Encryption Type provides the key type, variant, and other
information the host can use to decrypt encrypted data included in
various payloads. The possible values are an ORed bitmask using the
following elements:

- 0xxx xxxx = Fixed Key (Not used)

- 1xxx xxxx = DUKPT Key

- xx00 xxxx = TDES

- xx01 xxxx = AES128

- xx10 xxxx = AES256

- xxxx 0000 = Data Encrypt/Decrypt Variant

- xxxx 0001 = PIN Variant

- xxxx 0010 = MAC Variant

- xxxx 0011 = Data, Encrypt Variant

- xxxx 0100 = MAC Verify Variant

- xxxx 0101 = RESERVED

- xxxx 0110 = RESERVED

- xxxx 0111 = AES PIN Encrypt

- xxxx 1000 = AES MAC Generate

- xxxx 1001 = AES MAC Verify

- xxxx 1010 = AES MAC Generate/Verify

- xxxx 1011 = AES Data Encrypt

- xxxx 1100 = AES Data Decrypt

- xxxx 1101 = AES Data Encrypt/Decrypt

- xxxx 1110 = RESERVED

- xxxx 1111 = RESERVED

### EMV ARQC Type

The device formats ARQC messages as shown in **Table 18**. The default
is an EMV standard list of ARQC message tags. The host may also
customize the contents of ARQC messages by setting **Property
1.1.1.1.1.2 EMV ARQC Message Tag List**.

#### EMV ARQC (DynaPro Format) Type

Table 18 - EMV ARQC (DynaPro Format) Type

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">2-byte MSB message length excluding padding and
CBC-MAC</td>
</tr>
<tr>
<td>F9</td>
<td>var</td>
<td>Container for MAC structure and generic data</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF54</td>
<td>var</td>
<td>MAC KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF55</td>
<td>01</td>
<td><p>MAC Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF25</td>
<td>var</td>
<td>Device Serial Number (IFD Serial Number)</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FA</td>
<td>var</td>
<td>Container for generic data</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//70</td>
<td>var</td>
<td>Container for ARQC</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>///82</td>
<td>02</td>
<td><p>Application Interchange Profile</p>
<p>Available on:</p>
<p>DynaProx FW Ver A8 or newer</p>
<p>DynaFlex II FW Ver A6 or newer</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F6E</td>
<td>var</td>
<td><p>Third Party Data</p>
<p>Available on:</p>
<p>DynaProx FW Ver A8 or newer</p>
<p>DynaFlex II FW Ver A6 or newer</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DFDF53</td>
<td>01</td>
<td><p>Fallback Indicator</p>
<ul>
<li><p>0x00 = No Fallback</p></li>
<li><p>0x01 = Technical Fallback</p></li>
<li><p>0x81 = MSR Fallback</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>///DFDF33</td>
<td>var</td>
<td><p>Masked Track 2 MSR Data</p>
<p>If the payment method presented by the cardholder provides
it</p></td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DFDF4D</td>
<td>var</td>
<td><p>Masked Track 2 ICC Data</p>
<p>If the payment method presented by the cardholder provides
it</p></td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DFDF52</td>
<td>01</td>
<td><p>Card Type</p>
<ul>
<li><p>0x00 = Other</p></li>
<li><p>0x01 = Magnetic Stripe ISO/ABA Financial (MSR)</p></li>
<li><p>0x02 = Magnetic Stripe AAMVA (MSR)</p></li>
<li><p>0x03 = Manual Entry</p></li>
<li><p>0x04 = Unknown</p></li>
<li><p>0x05 = Contact Chip Card (ICC)</p></li>
<li><p>0x06 = Contactless Chip Card (PICC), EMV</p></li>
<li><p>0x07 = MSR Financial and Contact Chip Card (ICC)</p></li>
<li><p>0x08 = Contactless PICC, Magnetic Stripe Data (MSD)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>///FF42</td>
<td>var</td>
<td><p>Container for Selectable Encrypted Card Data</p>
<p>Set up OID 1.1.2.6.1.1 to enable this container.</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DFDFDF37</td>
<td>var</td>
<td><p>Selectable Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Selectable Encrypted Data KSN</strong>
parameter and the <strong>Selectable Encrypted Data Encryption
Type</strong> parameter. See <strong>Table 20 - EMV ARQC (DynaPro
Format) DFDFDF37 Decrypted Contents</strong> for the data structure as
it should appear after decryption.</p>
<p>(This item will be present if 0xFF42 is enabled)</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DFDFDF38</td>
<td>0C</td>
<td><p>Selectable Encrypted Data KSN</p>
<p>(This item will be present if 0xFF42 is enabled)</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DFDFDF39</td>
<td>01</td>
<td><p>Selectable Encrypted Data Encryption Type</p>
<p>(This item will be present if 0xFF42 is enabled)</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DF2A</td>
<td>06</td>
<td>Tip Mode Sale Amount Entered</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DF2B</td>
<td>06</td>
<td>Tip Mode Total Amount</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DF5D</td>
<td>06</td>
<td>Tip Amount</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///DF5E</td>
<td>06</td>
<td>Tax Amount</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///F8</td>
<td>var</td>
<td>Container for Encrypted Data</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>////DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Transaction Data KSN</strong>
parameter and the <strong>Encrypted Transaction Data Encryption
Type</strong> parameter to read its contents. See <strong>Table
19</strong> on page <a href="#_Ref36484046"><strong>39</strong></a> for
the data structure as it should appear after decryption.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>////DFDF56</td>
<td>var</td>
<td>Encrypted Transaction Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>////DFDF57</td>
<td>01</td>
<td><p>Encrypted Transaction Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>////DFDF58</td>
<td>01</td>
<td><p>Number of Padding Bytes</p>
<p>Number of bytes added to DFDF59 value to force its length to a
multiple of 8 bytes for TDES, or 16 bytes for AES.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/FF40</td>
<td>Var</td>
<td><p>Fleet Data Container (Common Kernel Only)</p>
<p>See <a href="#OLE_LINK1"><strong>Table 4.5 9 – Fleet Data Container
Payload</strong></a></p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">Padding to ensure the length of data, starting with the
message length at the very beginning, and ending with any additional
padding, is a multiple of 8 bytes for TDES, or 16 bytes for AES. This is
a requirement of using the CBC-MAC algorithm.</td>
</tr>
<tr>
<td colspan="6">Four-byte CBC-MAC. The host should calculate the CBC-MAC
and verify that it matches. For details about calculating a CBC-MAC, see
<strong>About Message Authentication Codes (MAC)</strong>.</td>
</tr>
</tbody>
</table>

The device encrypts the value inside the **Encrypted Data Primitive**
container using the **Encrypted Transaction Data Encryption Type**
parameter and working key associated with the keyset number currently
active in the device’s configuration. As a requirement for using DUKPT
encryption algorithms, the device pads it so the length of its value is
a multiple of 8 bytes for TDES, or 16 bytes for AES. The device uses
container DFDF58 to report how many bytes of data object DFDF59 are
padding. Data object DFDF59 itself is formatted like **Table 19** after
the host decrypts it.

<span id="_Ref36484046" class="anchor"></span>Table 19 - EMV ARQC
(DynaPro Format) DFDF59 Decrypted Contents

<table style="width:100%;">
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td>var</td>
<td><p>Decrypted Data Container</p>
<p>Inside this container, the device inserts all EMV TLV data objects
specified by the setting in <strong>Property 1.1.1.1.1.2 EMV ARQC
Message Tag List</strong>. The remainder of this table shows the basic
structure and content of MagTek custom tags. For definitions of all
other standard EMV tags that can be included directly under container
FC, see <em><strong>EMV 4.3 Book 3</strong></em>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF29</td>
<td>08</td>
<td><p>Only if tag DF29 is included in <strong>Property 1.1.1.1.1.2 EMV
ARQC Message Tag List</strong>.</p>
<p>Outcome Parameter Set</p>
<p>Byte 1 - Outcome</p>
<p>0x10 = Approved</p>
<p>0x20 = Declined</p>
<p>0x30 = Online Request</p>
<p>0x40 = End Application</p>
<p>0x50 = Select Next Application</p>
<p>0x60 = Try Another Interface</p>
<p>0x70 = Try Again</p>
<p>0xF0 = N/A</p>
<p>Byte 2 – Entry Point Start</p>
<p>0x00 = Start A</p>
<p>0x10 = Start B</p>
<p>0x20 = Start C</p>
<p>0x30 = Start D</p>
<p>0xF0 = N/A</p>
<p>Byte 3 – Entry Point Online Response</p>
<p>0x00 = EMV Data</p>
<p>0x10 = Any</p>
<p>0xF0 = N/A</p>
<p>Byte 4 – CVM</p>
<p>0x00 = No CVM</p>
<p>0x10 = Obtain Signature</p>
<p>0x20 = Online PIN</p>
<p>0x30 = Confirmation Code Verified</p>
<p>0xF0 = N/A</p>
<p>Byte 5 – UI/Data/Receipt</p>
<p>0x80 = UI Request on Outcome Present</p>
<p>0x40 = UI Request on Restart Present</p>
<p>0x20 = Data Record Present</p>
<p>0x10 = Discretionary Data Present</p>
<p>0x08 = Provide Receipt</p>
<p>Byte 6 – Alternate Interface Preference</p>
<p>0x10 = Contact</p>
<p>0x20 = MSR</p>
<p>0xF0 = N/A</p>
<p>Byte 7 – Field Off Request</p>
<p>FF = N/A</p>
<p>Byte 8 – Removal Timeout</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/F4</td>
<td>var</td>
<td>Container for encrypted MSR data (MSR Only)</td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF36</td>
<td>01</td>
<td><p>Encrypted Track 1 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF37</td>
<td>var</td>
<td>Encrypted Track 1 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF38</td>
<td>01</td>
<td><p>Encrypted Track 2 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF39</td>
<td>var</td>
<td>Encrypted Track 2 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3A</td>
<td>01</td>
<td><p>Encrypted Track 3 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3B</td>
<td>var</td>
<td>Encrypted Track 3 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3C</td>
<td>var</td>
<td><p>Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included for MSR swipe transactions and when Track Data and
Magneprint are using the same KSN.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF43</td>
<td>04</td>
<td><p>MagnePrint Status Data (MSR Only)</p>
<p>Only included for MSR swipe transactions and when Track Data and
Magneprint are using the same KSN.</p>
<ul>
<li><p>Bit 0 = MagnePrint Capable Flag</p>
<ul>
<li><p>0 = Device is not MagnePrint capable</p></li>
<li><p>1 = Device is MagnePrint capable</p></li>
</ul></li>
<li><p>Bits 1 through 3 = Mode</p>
<ul>
<li><p>0 = Standard MagnePrint</p></li>
<li><p>1 = Extended MagnePrint</p></li>
</ul></li>
<li><p>Bits 4 through 15 = ASIC Revision</p></li>
<li><p>Bit 16 = Reserved</p></li>
<li><p>Bit 17 = Reserved</p></li>
<li><p>Bit 18 = Swipe too slow</p></li>
<li><p>Bit 19 = Swipe too fast</p></li>
<li><p>Bit 20 = Reserved</p></li>
<li><p>Bit 21 = Card swipe direction</p>
<ul>
<li><p>0 = Forward</p></li>
<li><p>1 = Reverse</p></li>
</ul></li>
</ul>
<p>Bits 22..31 = Reserved</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF50</td>
<td>var</td>
<td><p>MSR KSN Data (MSR Only)</p>
<p>Key Serial Number for the key the host should use to decrypt
<strong>Encrypted Track 1 Data</strong>, <strong>Encrypted Track 2
Data</strong>, <strong>Encrypted Track 3 Data</strong> and
<strong>Encrypted MagnePrint Data</strong>.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF51</td>
<td>01</td>
<td><p>MSR Encryption Type (MSR Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/FF73</td>
<td>var</td>
<td><p>Container for Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included when Track Data and MagnePrint encryption keys are
using different KSN</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3C</td>
<td>var</td>
<td><p>Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included for MSR swipe transactions.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF43</td>
<td>04</td>
<td><p>MagnePrint Status Data (MSR Only)</p>
<p>Only included for MSR swipe transactions.</p>
<ul>
<li><p>Bit 0 = MagnePrint Capable Flag</p>
<ul>
<li><p>0 = Device is not MagnePrint capable</p></li>
<li><p>1 = Device is MagnePrint capable</p></li>
</ul></li>
<li><p>Bits 1 through 3 = Mode</p>
<ul>
<li><p>0 = Standard MagnePrint</p></li>
<li><p>1 = Extended MagnePrint</p></li>
</ul></li>
<li><p>Bits 4 through 15 = ASIC Revision</p></li>
<li><p>Bit 16 = Reserved</p></li>
<li><p>Bit 17 = Reserved</p></li>
<li><p>Bit 18 = Swipe too slow</p></li>
<li><p>Bit 19 = Swipe too fast</p></li>
<li><p>Bit 20 = Reserved</p></li>
<li><p>Bit 21 = Card swipe direction</p>
<ul>
<li><p>0 = Forward</p></li>
<li><p>1 = Reverse</p></li>
</ul></li>
</ul>
<p>Bits 22..31 = Reserved</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF50</td>
<td>var</td>
<td><p>MSR KSN Data (MSR Only)</p>
<p>Key Serial Number for the key the host should use to decrypt
<strong>Encrypted MagnePrint Data</strong>.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF51</td>
<td>01</td>
<td><p>MSR Encryption Type (MSR Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/F5</td>
<td>var</td>
<td><p>Container for Encrypted PIN Data (Touch Only)</p>
<p>Contains ISO PIN Block formatted data in the nested <strong>Encrypted
PIN Data</strong> object, plus supporting information to decrypt it. The
host should use the current PIN DUKPT working key specified in the
supporting information.</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DF71</td>
<td>01</td>
<td><p>PIN Block Format (Touch Only)</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = ISO Format 1</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//99</td>
<td>08</td>
<td>Encrypted PIN Data (Touch Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF41</td>
<td>var</td>
<td>PIN KSN Data (Touch Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF42</td>
<td>01</td>
<td><p>PIN Encryption Type (Touch Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">Padding to force DFDF59 plus padding to be a multiple of
8 bytes</td>
</tr>
</tbody>
</table>

**Table 20 - EMV ARQC (DynaPro Format) DFDFDF37 Decrypted Contents**

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td>var</td>
<td><p>Decrypted Data Container</p>
<p>Inside this container, the device inserts EMV TLV data objects
specified by the setting in Property 1.1.1.1.1.2 EMV ARQC Message Tag
List. If the data is not available for a given selected card data, the
tag will still get transmitted with a length of ‘1’ and value =
‘*’.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/5F20</td>
<td>var</td>
<td><p>Only if Byte 0 – Bit 0 is set in Property 1.1.2.6.1.1 Selectable
Card Data Encryption Enable.</p>
<p>Cardholder Name</p></td>
<td>an</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/5F24</td>
<td><p>02/</p>
<p>03</p></td>
<td><p>Only if Byte 0 – Bit 2 is set in Property 1.1.2.6.1.1 Selectable
Card Data Encryption Enable.</p>
<p>Expiration Date, YYMM or YYMMDD</p></td>
<td><p>n4/</p>
<p>n6</p></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/5F30</td>
<td>02</td>
<td><p>Only if Byte 0 – Bit 3 is set in Property 1.1.2.6.1.1 Selectable
Card Data Encryption Enable.</p>
<p>Service Code</p></td>
<td>n3</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/9F1F</td>
<td>var</td>
<td><p>Only if Byte 0 – Bit 4 is set in Property 1.1.2.6.1.1 Selectable
Card Data Encryption Enable.</p>
<p>T1 Discretionary Data</p></td>
<td>an</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/9F20</td>
<td>var</td>
<td><p>Only if Byte 0 – Bit 5 is set in Property 1.1.2.6.1.1 Selectable
Card Data Encryption Enable.</p>
<p>T2 Discretionary Data</p></td>
<td>cn</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">Padding to force DFDFDF37 plus padding to be a multiple
of 16 bytes for AES encryption.</td>
</tr>
</tbody>
</table>

Table 21 – EMV ARQC Enhanced DFDF59 Decrypted Contents for EMV Data

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 0%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th colspan="2">Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td colspan="2">var</td>
<td><p>Decrypted Data Container</p>
<p>This contains all EMV TLV data objects specified in <strong>Property
1.1.1.1.1.2 EMV ARQC Message Tag List</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td colspan="2"><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="7">Padding to ensure the length of data, starting with the
message length at the very beginning, and ending with any additional
padding, is a multiple of 8 bytes for TDES, or 16 bytes for AES. This is
a requirement of using the CBC-MAC algorithm.</td>
</tr>
</tbody>
</table>

Table 22 – EMV ARQC Enhanced DFDF59 Decrypted Contents for MSR and
MagnePrint Data

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 0%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th colspan="2">Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td colspan="2">var</td>
<td><p>Decrypted Data Container</p>
<p>Inside this container, the device inserts all EMV TLV data objects
specified by the setting in <strong>Property 1.1.1.1.1.2 EMV ARQC
Message Tag List</strong>. The remainder of this table shows the basic
structure and content of MagTek custom tags. For definitions of all
other standard EMV tags that can be included directly under container
FC, see <em><strong>EMV 4.3 Book 3</strong></em>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/9F41</td>
<td colspan="2">04</td>
<td><p>Transaction Counter</p>
<p>Starts at 00000000 each time the device powers up or resets,
increments for each transaction.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF36</td>
<td colspan="2">01</td>
<td><p>MSR Track 1 Status</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DF41</td>
<td colspan="2">var</td>
<td>MSR Track 1 Clear Text</td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DFDF38</td>
<td colspan="2">01</td>
<td><p>MSR Track 2 Status</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DF42</td>
<td colspan="2">var</td>
<td>MSR Track 2 Clear Text</td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DFDF3A</td>
<td colspan="2">01</td>
<td><p>MSR Track 3 Status</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DF43</td>
<td colspan="2">var</td>
<td>MSR Track 3 Clear Text</td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DFDF43</td>
<td colspan="2">04</td>
<td><p>MagnePrint Status</p>
<p>The device only includes this if MSR and MagnePrint data are both
included in the transaction and the device is configured to encrypt them
using the same key, to avoid consuming two DUKPT keys encrypting
separate containers. If the device is configured to encrypt MSR and
MagnePrint data using different keys, it provides MagnePrint data in the
<strong>Container for Encrypted MagnePrint Data</strong> instead.</p>
<ul>
<li><p>Bit 0 = MagnePrint Capable Flag</p>
<ul>
<li><p>0 = Device is not MagnePrint capable</p></li>
<li><p>1 = Device is MagnePrint capable</p></li>
</ul></li>
<li><p>Bits 1 through 3 = Mode</p>
<ul>
<li><p>0 = Standard MagnePrint</p></li>
<li><p>1 = Extended MagnePrint</p></li>
</ul></li>
<li><p>Bits 4 through 15 = ASIC Revision</p></li>
<li><p>Bit 16 = Reserved</p></li>
<li><p>Bit 17 = Reserved</p></li>
<li><p>Bit 18 = Swipe too slow</p></li>
<li><p>Bit 19 = Swipe too fast</p></li>
<li><p>Bit 20 = Reserved</p></li>
<li><p>Bit 21 = Card swipe direction</p>
<ul>
<li><p>0 = Forward</p></li>
<li><p>1 = Reverse</p></li>
</ul></li>
<li><p>Bits 22..31 = Reserved</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/DF44</td>
<td colspan="2">var</td>
<td><p>MagnePrint Data</p>
<p>The device only includes this if MSR and MagnePrint data are both
included in the transaction and the device is configured to encrypt them
using the same key. The host can use this data in conjunction with
Magensa services to determine whether the swiped card is
authentic.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td colspan="2"><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="7">Padding to ensure the length of data, starting with the
message length at the very beginning, and ending with any additional
padding, is a multiple of 8 bytes for TDES, or 16 bytes for AES. This is
a requirement of using the CBC-MAC algorithm.</td>
</tr>
</tbody>
</table>

Table 23 – EMV ARQC Enhanced DFDF59 Decrypted Contents for MagnePrint
Data

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 0%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th colspan="2">Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td colspan="2">var</td>
<td>Decrypted Data Container</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF43</td>
<td colspan="2">var</td>
<td><p>MagnePrint Status</p>
<p>The device only includes this when MSR and MagnePrint data are
included in the transaction, but the device is configured to encrypt
them using a different key.</p>
<ul>
<li><p>Bit 0 = MagnePrint Capable Flag</p>
<ul>
<li><p>0 = Device is not MagnePrint capable</p></li>
<li><p>1 = Device is MagnePrint capable</p></li>
</ul></li>
<li><p>Bits 1..15 = Product revision &amp; mode</p></li>
<li><p>Bit 16 = Reserved</p></li>
<li><p>Bit 17 = Reserved for noise measurement</p></li>
<li><p>Bit 18 = Swipe too slow</p></li>
<li><p>Bit 19 = Swipe too fast</p></li>
<li><p>Bit 20 = Reserved</p></li>
<li><p>Bit 21 = Card swipe direction</p>
<ul>
<li><p>0 = Forward</p></li>
<li><p>1 = Reverse</p></li>
</ul></li>
<li><p>Bits 22..31 = Reserved</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF44</td>
<td colspan="2">var</td>
<td><p>MagnePrint Data</p>
<p>The host can use this data in conjunction with Magensa services to
determine whether the swiped card is authentic.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF4B</td>
<td colspan="2">var</td>
<td>MSR PAN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td colspan="2"><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="7">Padding to ensure the length of data, starting with the
message length at the very beginning, and ending with any additional
padding, is a multiple of 8 bytes for TDES, or 16 bytes for AES. This is
a requirement of using the CBC-MAC algorithm.</td>
</tr>
</tbody>
</table>

Table 24 – VAS Data Container Payload

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 6%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/FE</td>
<td>var</td>
<td>VAS Data Container</td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF01</td>
<td>var</td>
<td>Apple VAS Container Slot 1 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF02</td>
<td>var</td>
<td>Apple VAS Container Slot 2 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF03</td>
<td>var</td>
<td>Apple VAS Container Slot 3 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF04</td>
<td>var</td>
<td>Apple VAS Container Slot 4 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF05</td>
<td>var</td>
<td>Apple VAS Container Slot 5 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF06</td>
<td>var</td>
<td>Apple VAS Container Slot 6 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F27</td>
<td>var</td>
<td><p>VAS Data</p>
<p>Up to 128 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///9F2A</td>
<td>var</td>
<td><p>Mobile Token</p>
<p>Up to 36 bytes.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//FF41</td>
<td>var</td>
<td>Google Smart Tap Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF01</td>
<td>var</td>
<td>Collector ID Slot 1 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF02</td>
<td>var</td>
<td>Collector ID Slot 2 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF03</td>
<td>var</td>
<td>Collector ID Slot 3 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF04</td>
<td>var</td>
<td>Collector ID Slot 4 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF05</td>
<td>var</td>
<td>Collector ID Slot 5 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///FF06</td>
<td>var</td>
<td>Collector ID Slot 6 Container</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>////DF7B</td>
<td>var</td>
<td>Service Response NDEF Record</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

<span id="OLE_LINK1" class="anchor"></span>Table 25 – Fleet Data
Container Payload (Common Kernel Only)

| Tag |  | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|----|
| /FF40 |  | var | Fleet Data Container | T | O |  |
| //DF30 |  | var | Prompting | B | O |  |
| //DF32 |  | var | Purchase Restrictions | B | O |  |
| //DF33 |  | var |  | B | O |  |
| //DF34 |  | var | Chip Offline purchase Restrictions for Fuel | B | O |  |
| //DF35 |  | var | Chip Offline purchase Restrictions for Non-fuel | B | O |  |
| //DF36 |  | var | Relationship Codes | B | O |  |
| //DF37 |  | var | 3<sup>rd</sup> Party Reference Data Generation 2 | B | O |  |
| //DF38 |  | var | Loyalty ID | B | O |  |
| //DF39 |  | var | Purchase Device Sequence Number | B | O |  |
| //DF40 |  | var | Generic Tag | B | O |  |
| //DF41 |  | var | Vehicle/Trailer Number | B | O |  |
| //DF42 |  | var | Vehicle Tag | B | O |  |
| //DF43 |  | var | Driver ID | B | O |  |
| //DF44 |  | var | Driver’s License Number | B | O |  |
| //DF45 |  | var | Driver’s License State/Province Abbreviation | B | O |  |
| //DF46 |  | var | Driver’s License Name Abbreviation | B | O |  |
| //DF47 |  | var | Date of Birth | B | O |  |
| //DF48 |  | var | Zip/Postal Code | B | O |  |
| //DF49 – //DF51 |  | var | IFSR Reserved for Future Use | B | O |  |
| //DF52 |  | var | Trailer Number | B | O |  |
| //DF53 |  | var | Employee Number | B | O |  |
| //DF54 |  | var | Work Order / Purchase Order Number | B | O |  |
| //DF55 |  | var | Additional Prompted Data 1 | B | O |  |
| //DF56 |  | var | Additional Prompted Data 2 | B | O |  |
| //DF57 |  | var | Proprietary Data | B | O |  |
| //9F5A |  | var |  | B | O |  |
| //9F0A |  | var | ASRPD | B | O |  |
| //9F6E |  | var | M/C Fleet | B | O |  |
| //9FD4 |  | var |  | B | O |  |
| //9F50 |  | var |  | B | O |  |

### EMV ARPC Type

Table 26 – EMV ARPC Data

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF74</td>
<td>var</td>
<td>Container for non-MAC ARPC</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF25</td>
<td>var</td>
<td>Device Serial Number (IFD Serial Number)</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FA</td>
<td>var</td>
<td>Container for generic data</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//70</td>
<td>var</td>
<td>Container for ARPC</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>///8A</td>
<td>02</td>
<td><p>Authorization Response Code</p>
<ul>
<li><p>‘00’ = Approved</p></li>
<li><p>‘01’ = Issuer Referral</p></li>
<li><p>‘05’ = Declined</p></li>
<li><p>‘12’ = Switch Interface</p></li>
<li><p>‘13’ = Request Online PIN</p></li>
</ul></td>
<td>AN</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>///91</td>
<td>var</td>
<td><p>Issuer Authentication Data</p>
<p>As defined in <em><strong>EMV Integrated Circuit Card Specifications
for Payment Systems 4.3</strong></em></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///71</td>
<td>var</td>
<td><p>Issuer Script Template 1</p>
<p>As defined in <em><strong>EMV Integrated Circuit Card Specifications
for Payment Systems 4.3</strong></em>. <em><strong>The host may include
as many instances of this parameter as needed, up to a maximum length of
128 bytes including Tags and Lengths.</strong></em></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>///72</td>
<td>var</td>
<td><p>Issuer Script Template 2</p>
<p>As defined in <em><strong>EMV Integrated Circuit Card Specifications
for Payment Systems 4.3</strong></em>. <em><strong>The host may include
as many instances of this parameter as needed, up to a maximum length of
128 bytes including Tags and Lengths.</strong></em></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### EMV Batch Data Type

The device formats EMV batch data, such as merchant data and pre-defined
EMV batch data tags, using the format shown in **Table 27**. The default
is an EMV standard list of batch data message tags. The host may also
customize the contents of batch data messages by setting **Property
1.1.1.1.1.3 EMV Batch Data Tag List**.

(EMV Contact Only) For unsuccessful transactions, this data object can
contain additional pre-defined reversal data. It is normally used by the
host for data capture. The default is an EMV standard list of reversal
data message tags. The host may also customize the contents of reversal
data messages by setting **Property 1.1.1.1.1.4 EMV Reversal Data Tag
List**.

As part of successful completion of **Command 0x1001 - Start
Transaction**, this data structure contains the results of the
transaction. The set of tags used during a given EMV transaction is a
combination of the tags defined in the EMV specification and the tags
that are specific to the kernel being used for the transaction.

#### EMV Batch Data (DynaPro Format) Type

Table 27 – EMV Batch Data (DynaPro Format) Type

<table style="width:100%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 9%" />
<col style="width: 47%" />
<col style="width: 8%" />
<col style="width: 0%" />
<col style="width: 7%" />
<col style="width: 0%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th colspan="2">Req</th>
<th colspan="2">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="8">2-byte MSB message length excluding padding and
CBC-MAC</td>
</tr>
<tr>
<td>F9</td>
<td>var</td>
<td>Container for MAC structure and generic data</td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>/DFDF54</td>
<td>var</td>
<td>MAC KSN</td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>/DFDF55</td>
<td>01</td>
<td><p>MAC Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>/DFDF25</td>
<td>var</td>
<td>Device Serial Number (IFD Serial Number)</td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>/FA</td>
<td>var</td>
<td>Container for Generic Data</td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>//F0</td>
<td>var</td>
<td>Transaction Results</td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>///F1</td>
<td>var</td>
<td>Container for Status Data</td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF1A</td>
<td>01</td>
<td><p>Transaction Status</p>
<ul>
<li><p>0x00 = Accept</p></li>
<li><p>0x01 = Decline</p></li>
<li><p>0x02 = Error</p></li>
</ul></td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF1B</td>
<td>01</td>
<td><p>Additional Transaction Information</p>
<p>0x00</p>
<p>(MAGTEK INTERNAL ONLY FOR NOW)</p>
<ul>
<li><p>0x00 = No additional information</p></li>
<li><p>0x31 = EMV Application not selected</p></li>
<li><p>0x32 = Error transaction in progress</p></li>
<li><p>0x33 = Error invalid PSE format</p></li>
<li><p>0x34 = EMV Terminal application list is empty</p></li>
<li><p>0x35 = Candidate list is empty</p></li>
<li><p>0x36 = No transaction</p></li>
<li><p>0x37 = No common EMV applications</p></li>
<li><p>0x38 = Transaction canceled</p></li>
<li><p>0x39 = Aid parse error</p></li>
<li><p>0x3A = Code table index not found</p></li>
<li><p>0x3B = Error no more record</p></li>
<li><p>0x3C = EMV e overflow [sic.]</p></li>
</ul></td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>///F8</td>
<td>var</td>
<td>Container for Encrypted Data</td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object according to the
<strong>Encrypted Transaction Data KSN</strong> parameter and the
<strong>Encrypted Transaction Data Encryption Type</strong> parameter to
read its contents. See <strong>Table 28</strong> on page <a
href="#_Ref36482891"><strong>51</strong></a> for the data structure as
it should appear after decryption.</p>
<p>Use the data variant of the current MSR DUKPT working key used in the
relevant transaction.</p></td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF56</td>
<td>var</td>
<td>Encrypted Transaction Data KSN</td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF57</td>
<td>01</td>
<td><p>Encrypted Transaction Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>////DFDF58</td>
<td>01</td>
<td>Number of padding bytes added to DFDF59 value to force length to a
multiple of 8 bytes</td>
<td>B</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>///F7</td>
<td>var</td>
<td><p>Merchant Data</p>
<p>This contains an instance of <strong>Merchant Data
Container</strong>.</p></td>
<td>T</td>
<td colspan="2">R</td>
<td colspan="2"></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td colspan="2">T</td>
<td colspan="2">O</td>
<td></td>
</tr>
<tr>
<td colspan="8">Padding to ensure the length of data, starting with the
message length at the very beginning, and ending with any additional
padding, is a multiple of 8 bytes for TDES, or 16 bytes for AES. This is
a requirement of using the CBC-MAC algorithm.</td>
</tr>
<tr>
<td colspan="8">Four-byte CBC-MAC. The host should calculate the CBC-MAC
and verify that it matches. For details about calculating a CBC-MAC, see
<strong>About Message Authentication Codes (MAC)</strong>.</td>
</tr>
</tbody>
</table>

<span id="_Ref36482891" class="anchor"></span>Table 28 – EMV Batch Data
(DynaPro Format) DFDF59 Decrypted Contents

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td>var</td>
<td>Decrypted Data Container</td>
<td>T</td>
<td></td>
<td></td>
</tr>
<tr>
<td>/F2</td>
<td>var</td>
<td><p>Container for Batch Data</p>
<p>This data object contains the set of EMV TLV data objects specified
in <strong>Property 1.1.1.1.1.3 EMV Batch Data Tag
List</strong>.</p></td>
<td>T</td>
<td></td>
<td></td>
</tr>
<tr>
<td>//DF29</td>
<td>08</td>
<td><p>Only if tag DF29 is included in <strong>Property 1.1.1.1.1.3 EMV
Batch Data Tag List</strong></p>
<p>Outcome Parameter Set</p>
<p>Byte 1 - Outcome</p>
<p>0x10 = Approved</p>
<p>0x20 = Declined</p>
<p>0x30 = Online Request</p>
<p>0x40 = End Application</p>
<p>0x50 = Select Next Application</p>
<p>0x60 = Try Another Interface</p>
<p>0x70 = Try Again</p>
<p>0xF0 = N/A</p>
<p>Byte 2 – Entry Point Start</p>
<p>0x00 = Start A</p>
<p>0x10 = Start B</p>
<p>0x20 = Start C</p>
<p>0x30 = Start D</p>
<p>0xF0 = N/A</p>
<p>Byte 3 – Entry Point Online Response</p>
<p>0x00 = EMV Data</p>
<p>0x10 = Any</p>
<p>0xF0 = N/A</p>
<p>Byte 4 – CVM</p>
<p>0x00 = No CVM</p>
<p>0x10 = Obtain Signature</p>
<p>0x20 = Online PIN</p>
<p>0x30 = Confirmation Code Verified</p>
<p>0xF0 = N/A</p>
<p>Byte 5 – UI/Data/Receipt</p>
<p>0x80 = UI Request on Outcome Present</p>
<p>0x40 = UI Request on Restart Present</p>
<p>0x20 = Data Record Present</p>
<p>0x10 = Discretionary Data Present</p>
<p>0x08 = Provide Receipt</p>
<p>Byte 6 – Alternate Interface Preference</p>
<p>0x10 = Contact</p>
<p>0x20 = MSR</p>
<p>0xF0 = N/A</p>
<p>Byte 7 – Field Off Request</p>
<p>FF = N/A</p>
<p>Byte 8 – Removal Timeout</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/F3</td>
<td>var</td>
<td><p>(EMV Contact Only)</p>
<p>Container for Reversal Data, if any</p>
<p>This data object contains the set of EMV TLV data objects specified
in <strong>Property 1.1.1.1.1.4 EMV Reversal Data Tag
List</strong>.</p></td>
<td>T</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td>/F4</td>
<td>var</td>
<td>Container for encrypted MSR data (MSR Only)</td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF36</td>
<td>01</td>
<td><p>Encrypted Track 1 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled [<strong>Property 1.1.2.5.1.2 Track 1 Enable (MSR
Only)</strong> set to <strong>Disabled</strong>]</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF37</td>
<td>var</td>
<td>Encrypted Track 1 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF38</td>
<td>01</td>
<td><p>Encrypted Track 2 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled [<strong>Property 1.1.2.5.1.3 Track 2 Enable (MSR
Only)</strong> set to <strong>Disabled</strong>]</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF39</td>
<td>var</td>
<td>Encrypted Track 2 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3A</td>
<td>01</td>
<td><p>Encrypted Track 3 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled [<strong>Property 1.1.2.5.1.4 Track 3 Enable (MSR
Only)</strong> set to <strong>Disabled</strong>]</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3B</td>
<td>var</td>
<td>Encrypted Track 3 Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3C</td>
<td>var</td>
<td><p>Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included for MSR swipe transactions and when Track Data and
Magneprint are using the same KSN.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF43</td>
<td>04</td>
<td><p>MagnePrint Status Data (MSR Only)</p>
<p>Only included for MSR swipe transactions and when Track Data and
Magneprint are using the same KSN.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF50</td>
<td>var</td>
<td>MSR KSN Data (MSR Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF51</td>
<td>01</td>
<td><p>MSR Encryption Type (MSR Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/FF73</td>
<td>var</td>
<td><p>Container for Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included when Track Data and MagnePrint encryption keys are
using different KSN</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF3C</td>
<td>var</td>
<td><p>Encrypted MagnePrint Data (MSR Only)</p>
<p>Only included for MSR swipe transactions.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF43</td>
<td>04</td>
<td><p>MagnePrint Status Data (MSR Only)</p>
<p>Only included for MSR swipe transactions.</p>
<ul>
<li><p>Bit 0 = MagnePrint Capable Flag</p>
<ul>
<li><p>0 = Device is not MagnePrint capable</p></li>
<li><p>1 = Device is MagnePrint capable</p></li>
</ul></li>
<li><p>Bits 1 through 3 = Mode</p>
<ul>
<li><p>0 = Standard MagnePrint</p></li>
<li><p>1 = Extended MagnePrint</p></li>
</ul></li>
<li><p>Bits 4 through 15 = ASIC Revision</p></li>
<li><p>Bit 16 = Reserved</p></li>
<li><p>Bit 17 = Reserved</p></li>
<li><p>Bit 18 = Swipe too slow</p></li>
<li><p>Bit 19 = Swipe too fast</p></li>
<li><p>Bit 20 = Reserved</p></li>
<li><p>Bit 21 = Card swipe direction</p>
<ul>
<li><p>0 = Forward</p></li>
<li><p>1 = Reverse</p></li>
</ul></li>
</ul>
<p>Bits 22..31 = Reserved</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF50</td>
<td>var</td>
<td><p>MSR KSN Data (MSR Only)</p>
<p>Key Serial Number for the key the host should use to decrypt
<strong>Encrypted MagnePrint Data</strong>.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF51</td>
<td>01</td>
<td><p>MSR Encryption Type (MSR Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/F5</td>
<td>00</td>
<td>Container for Encrypted PIN Data (Touch Only)</td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DF71</td>
<td>00</td>
<td><p>PIN Block Format (Touch Only)</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = ISO Format 1</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//99</td>
<td>00</td>
<td>Encrypted PIN Data (Touch Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF41</td>
<td>00</td>
<td>PIN KSN Data (Touch Only)</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>//DFDF42</td>
<td>00</td>
<td><p>PIN Encryption Type (Touch Only)</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>null</td>
<td>(var)</td>
<td>Padding to force DFDF59 plus padding to be a multiple of 8
bytes</td>
<td>B</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 29 - EMV Batch Data (DynaPro Format) DFDF59 Decrypted Contents

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td>var</td>
<td>Decrypted Data Container</td>
<td>T</td>
<td></td>
<td></td>
</tr>
<tr>
<td>/F2</td>
<td>var</td>
<td><p>Container for Batch Data</p>
<p>This data object contains the set of EMV TLV data objects specified
in <strong>Property 1.1.1.1.1.3 EMV Batch Data Tag
List</strong>.</p></td>
<td>T</td>
<td></td>
<td></td>
</tr>
<tr>
<td>/F3</td>
<td>var</td>
<td><p>Container for Reversal Data, if any</p>
<p>This data object contains the set of EMV TLV data objects specified
in <strong>Property 1.1.1.1.1.4 EMV Reversal Data Tag
List</strong>.</p></td>
<td>T</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td>null</td>
<td>(var)</td>
<td>Padding to force DFDF59 plus padding to be a multiple of 8 bytes or
16 bytes depending on the cipher block size of the algorithm being
used.</td>
<td>B</td>
<td></td>
<td></td>
</tr>
<tr>
<td>/FE</td>
<td>Var</td>
<td><p>VAS Data Container</p>
<p>See <strong>Table 24 – VAS Data Container Payload</strong></p></td>
<td>T</td>
<td>O</td>
<td>/FE</td>
</tr>
</tbody>
</table>

#### Merchant Data Container

Merchant Data is normally used by the host for receipt printing. The
contents of this container are not customizable.

Table 30 - Merchant Data Container

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 41%" />
<col style="width: 11%" />
<col style="width: 15%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Description</th>
<th>Source</th>
<th>Format</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>DFDF30</td>
<td><p>Masked Track 1 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>Device</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>DFDF31</td>
<td>Masked Track 1 Data (MSR Only)</td>
<td>Device</td>
<td>b</td>
<td>var</td>
</tr>
<tr>
<td>DFDF32</td>
<td><p>Masked Track 2 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>Device</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>DFDF33</td>
<td>Masked Track 2 Data (MSR Only)</td>
<td>Device</td>
<td>b</td>
<td>var</td>
</tr>
<tr>
<td>DFDF34</td>
<td><p>Masked Track 3 Status (MSR Only)</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Error</p></li>
<li><p>0x03 = Disabled</p></li>
</ul></td>
<td>Device</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>DFDF35</td>
<td>Masked Track 3 Data (MSR Only)</td>
<td>Device</td>
<td>b</td>
<td>var</td>
</tr>
<tr>
<td>DFDF40</td>
<td><p>Signature Status</p>
<ul>
<li><p>0x00 = Signature Not Required</p></li>
<li><p>0x01 = Signature Required</p></li>
<li><p>0x02 = Signature Available</p></li>
<li><p>0x03 = Signature Succeeded</p></li>
<li><p>0x04 = Signature Failed</p></li>
</ul></td>
<td>Device</td>
<td>b</td>
<td>1</td>
</tr>
<tr>
<td>DFDF3E</td>
<td><p>Signature Capture Data (Touch Only)</p>
<p>This is a blob that consists of a raw list of point coordinates
representing the signature. Each coordinate is 2 bytes long, where the
first byte is the X coordinate of that point, and the second byte is the
Y coordinate of that point.</p></td>
<td>Device</td>
<td>b</td>
<td>0..2000</td>
</tr>
<tr>
<td>5F25</td>
<td>EMV Application Effective Date</td>
<td>Card</td>
<td>n6</td>
<td>3</td>
</tr>
<tr>
<td>5F24</td>
<td>EMV Application Expiration Date</td>
<td>Card</td>
<td>n6</td>
<td>3</td>
</tr>
<tr>
<td>89</td>
<td>Authorization Code</td>
<td>Device</td>
<td>b</td>
<td>6</td>
</tr>
<tr>
<td>5F2A</td>
<td>Transaction Currency Code</td>
<td>Card</td>
<td>n3</td>
<td>2</td>
</tr>
<tr>
<td>9F02</td>
<td>Amount, authorized</td>
<td>Device</td>
<td>n12</td>
<td>6</td>
</tr>
<tr>
<td>9F03</td>
<td>Amount, other</td>
<td>Device</td>
<td>n12</td>
<td>6</td>
</tr>
<tr>
<td>9F06</td>
<td>AID - terminal</td>
<td>Device</td>
<td>b</td>
<td>5..16</td>
</tr>
<tr>
<td>9F12</td>
<td>EMV Application Preferred Name</td>
<td>Card</td>
<td>ans</td>
<td>1..16</td>
</tr>
<tr>
<td>9F1C</td>
<td>Terminal ID</td>
<td>Device</td>
<td>an 8</td>
<td>8</td>
</tr>
<tr>
<td>9F39</td>
<td>POS Entry Mode</td>
<td>Device</td>
<td>n2</td>
<td>1</td>
</tr>
<tr>
<td>9C</td>
<td>Transaction Type</td>
<td>Device</td>
<td>n2</td>
<td>1</td>
</tr>
<tr>
<td>9F34</td>
<td>Indicates the results of the last CVM performed</td>
<td>Device</td>
<td>b</td>
<td>3</td>
</tr>
<tr>
<td>5F57</td>
<td>Account Type</td>
<td>Device</td>
<td>n2</td>
<td>1</td>
</tr>
<tr>
<td>5F34</td>
<td>PAN Sequence Number</td>
<td>Card</td>
<td>n2</td>
<td>1</td>
</tr>
<tr>
<td>DFDF4D</td>
<td>Masked ICC Track 2 Data</td>
<td>Card</td>
<td>ans</td>
<td>30..38</td>
</tr>
</tbody>
</table>

### EMV Terminal Configuration File Type 

The host uses **Command 0xD812 - Start Send File to Device (Unsecured)**
to load this file type to control the behavior of the device’s EMV
contact kernel. The configuration loaded using this file type must be
designed to work together with all instances of **EMV Processing
Configuration File Type** and **EMV Entry Point Configuration File
Type** the host loads into the device.

MagTek provides tools that allow these settings to be loaded using a
Microsoft Excel spreadsheet for more convenient authoring, review, and
change tracking. For a reference sample spreadsheet that contains EMVCo
approved configurations, contact MagTek Support Services.

This document shows one example of the available Contact Level 2
certified configurations (***DynaFlex C01, Merchant, Attended, ODA***).
To see which configurations are supported on the devices you are using,
see the list of **Vendor Config IDs** in the device’s ***Letter of
Approval for Contact Level 2*** posted in the list of ***Approved /
Evaluated*** products on the EMVCo web site. For detailed descriptions
of the tags included in this file type, including possible valid values
and their effects on device behavior, see ***EMV Integrated Circuit Card
Specifications for Payment Systems v4.3***.

Table 31 - EMV Configuration Terminal File Type

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>File Type Version</p>
<p>One byte indicating the version of the file type format being
used.</p>
<ul>
<li><p>0xAA</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>SHA-1 Hash</p>
<p>20-byte hash of all values that follow.</p></td>
</tr>
<tr>
<td>9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>08 40</td>
</tr>
<tr>
<td>DF79</td>
<td>01</td>
<td>Cardholder Confirmation</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>DF0A</td>
<td>01</td>
<td>EMV Contact Supported</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>E0 28 C8</td>
</tr>
<tr>
<td>9F40</td>
<td>05</td>
<td>Additional Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>EF 80 F0 A0 01</td>
</tr>
<tr>
<td>DF55</td>
<td>01</td>
<td>EMV Contactless Supported</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF0B</td>
<td>01</td>
<td>Magnetic Stripe Supported</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF27</td>
<td>01</td>
<td>Time allocated to enter a PIN</td>
<td>B</td>
<td>R</td>
<td>0A</td>
</tr>
<tr>
<td>DF06</td>
<td>01</td>
<td>Batch / Online Data Capture managed</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF08</td>
<td>00</td>
<td>Advice Managed</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>DF7A</td>
<td>01</td>
<td>PSE Supported</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF0D</td>
<td>00</td>
<td>AutoRun Mode</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>DF10</td>
<td>03</td>
<td>Predefined amount for AutoRun mode</td>
<td>B</td>
<td>R</td>
<td>00 00 00</td>
</tr>
<tr>
<td>DF7B</td>
<td>01</td>
<td>PIN Bypass Supported</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>DF07</td>
<td>01</td>
<td>Referral Managed</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF09</td>
<td>01</td>
<td>Default TAC supported when regular TACs are not present</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>DF73</td>
<td>05</td>
<td>Default TAC default</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>DF74</td>
<td>05</td>
<td>Default TAC denial</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>DF75</td>
<td>05</td>
<td>Default TAC online</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>DF53</td>
<td>01</td>
<td>Random Transaction Selection not supported</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>DF54</td>
<td>01</td>
<td>Velocity Checking not supported</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>DF7C</td>
<td>01</td>
<td>CDA Mode</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
</tbody>
</table>

### EMV Processing Configuration File Type 

The host uses **Command 0xD812 - Start Send File to Device (Unsecured)**
to load this file type to control the behavior of the device’s EMV
kernels. The host must compile a single instance of this file type
containing multiple instances of the **AID Delimiter Container**, one
for each contact or contactless AID the device should support. For each
instance of the **AID Delimiter Container** where tag 9F01 is set to a
contactless AID, the host must load a corresponding instance of an Entry
Point Table when it loads the **EMV Entry Point Configuration File
Type** .

Table 32 - EMV Configuration Processing File Type

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>File Type Version</p>
<p>One byte indicating the version of the file type format being
used.</p>
<ul>
<li><p>0xAA</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>SHA-1 Hash</p>
<p>20-byte hash of all values that follow.</p></td>
</tr>
<tr>
<td>FF33</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Processing Table Slot 1, the contents
of the second are loaded into Processing Table Slot 2, etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/9F01</td>
<td>06</td>
<td><p>Payment Brand Identifier</p>
<p>This serves as supporting information to clarify whether this
instance of the AID Delimiter Container is for Contact or
Contactless.</p>
<p>Byte 1 upper nibble must be set to a value flagging that it
corresponds to a Contactless AID, generally by using 0xC0 or 0xF0. For
Contact AID, the value of Byte 1 is 00.</p>
<p>Byte 1 lower nibble:</p>
<ul>
<li><p>0 = Contact</p></li>
<li><p>1 = Interac (Common Kernel Only)</p></li>
<li><p>2 = Mastercard Contactless</p></li>
<li><p>3 = Visa payWave</p></li>
<li><p>4 = Expresspay</p></li>
<li><p>5 = JCB (Common Kernel Only)</p></li>
<li><p>6 = Discover D-PAS</p></li>
<li><p>7 = China UnionPay (Common Kernel Only)</p></li>
</ul>
<p>Bytes 2..5</p>
<p>Reserved for future use</p></td>
<td>B</td>
<td>R</td>
<td>F2 00 00 00 00 00</td>
</tr>
<tr>
<td>/4F</td>
<td>0..16</td>
<td>Application Identifier (AID)</td>
<td>B</td>
<td>R</td>
<td>A0 00 00 00 04 10 10</td>
</tr>
<tr>
<td>/DF7E</td>
<td>01</td>
<td>ASI</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>/9F09</td>
<td>02</td>
<td><p>Application Version</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00</td>
</tr>
<tr>
<td>/DF11</td>
<td>01</td>
<td><p>Skip TAC/IAC default supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF12</td>
<td>01</td>
<td><p>Random transaction selection supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF13</td>
<td>01</td>
<td><p>Velocity checking supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF14</td>
<td>01</td>
<td><p>Floor limit checking supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF15</td>
<td>01</td>
<td><p>TAC supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF20</td>
<td>05</td>
<td><p>TAC default</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>/DF21</td>
<td>05</td>
<td><p>TAC denial</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>/DF22</td>
<td>05</td>
<td><p>TAC online</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>/9F1B</td>
<td>04</td>
<td><p>Floor limit</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00 00 00</td>
</tr>
<tr>
<td>/DF70</td>
<td>01</td>
<td><p>Target percentage</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF6E</td>
<td>03</td>
<td><p>Threshold value</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00 00</td>
</tr>
<tr>
<td>/DF6F</td>
<td>01</td>
<td><p>Maximum target percentage</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF01</td>
<td>01</td>
<td><p>Default DDOL supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF71</td>
<td><p>0..</p>
<p>FC</p></td>
<td><p>DDOL</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF02</td>
<td>01</td>
<td><p>Default TDOL supported</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>/DF72</td>
<td><p>0..</p>
<p>252</p></td>
<td><p>TDOL</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/5F2A</td>
<td>02</td>
<td><p>Currency Code</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00 00</td>
</tr>
<tr>
<td>/5F36</td>
<td>01</td>
<td><p>Transaction currency exponent</p>
<p>Only applies when Payment Brand Identifier indicates
Contact.</p></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td colspan="6">Additional instances of the <strong>AID Delimiter
Container</strong> parameter, one per Application Identifier (AID) the
device should support.</td>
</tr>
</tbody>
</table>

### EMV Entry Point Configuration File Type 

The host uses **Command 0xD812 - Start Send File to Device (Unsecured)**
to load this file type to control the behavior of the device’s EMV
kernels.

Table 33 - EMV Entry Point Configuration File Type Header

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 25%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Value (hex)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3"><p>File Type Version</p>
<p>One byte indicating the version of the file type format being
used.</p>
<ul>
<li><p>0xAA</p></li>
</ul></td>
</tr>
<tr>
<td colspan="3"><p>SHA-1 Hash</p>
<p>20-byte hash of all values that follow</p></td>
</tr>
<tr>
<td colspan="3"><p>One or more instances of the following:</p>
<ul>
<li><p><strong>4.10.1 Mastercard MCL Entry Point</strong> Table</p></li>
<li><p><strong>4.10.2 Visa payWave Entry Point</strong> Table</p></li>
<li></li>
<li><p><strong><br />
4.10.3 American Express Expresspay Entry</strong> Point Table</p></li>
<li><p><strong>4.10.4 Discover D-PAS Entry Point</strong> Table</p></li>
<li><p><strong>4.10.5 China Unionpay Entry Point Table (Common
Kernel</strong> Only)</p></li>
<li><p><strong>4.10.6 JCB Entry Point Table (Common Kernel</strong>
Only)</p></li>
<li><p><strong>4.10.7 Interac Flash Entry Point Table (Common
Kernel</strong> Only)</p></li>
</ul>
<p>The host should include an Entry Point Table for each transaction
type to be supported by each contactless payment brand Application
Identifier (AID) listed in the loaded <strong>EMV Processing
Configuration File Type</strong> . For example, if the device should
support three transaction types across each of four payment brands, it
would combine 12 total Entry Point Tables into a single file instance
before loading.</p></td>
</tr>
</tbody>
</table>

#### 4.10.1 Mastercard MCL Entry Point Table

Table 34 - Mastercard MCL Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x02 = MasterCard Contactless (MCL)</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>02 01 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>08 40</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F40</td>
<td>05</td>
<td>Additional Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//9F7E</td>
<td>01</td>
<td>Mobile Support Indicator</td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>//DF0C</td>
<td>01</td>
<td>Kernel ID</td>
<td>B</td>
<td>R</td>
<td>02</td>
</tr>
<tr>
<td>//DF1B</td>
<td>01</td>
<td><p>Kernel Configuration</p>
<ul>
<li><p>Bit 8 = MSD Mode Not Supported ( Not Used, kernel does not
support MSD, always set to 0)</p></li>
<li><p>Bit 7 = EMV Mode contactless transaction not supported (Always
set to 0)</p></li>
<li><p>Bit 6 = On-Device-CVM Supported</p></li>
<li><p>Bit 5 = Relay Resistance Protocol Supported</p></li>
<li><p>Bit 4..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>20</td>
</tr>
<tr>
<td>//DF2D</td>
<td>03</td>
<td>Message Hold Time (100 of ms)</td>
<td>B</td>
<td>R</td>
<td>00 00 0D</td>
</tr>
<tr>
<td>//9F6D</td>
<td>02</td>
<td><p>Magnetic Stripe Application Version Number</p>
<p>This value only applies when the Kernel Configuration parameter is
set to support MSD. The device ignores this value.</p></td>
<td>B</td>
<td>R</td>
<td>00 01</td>
</tr>
<tr>
<td>//DF1A</td>
<td>03</td>
<td><p>Magnetic Stripe Default UDOL</p>
<p>This value only applies when the Kernel Configuration parameter is
set to support MSD. The device ignores this value.</p></td>
<td>B</td>
<td>R</td>
<td>9F 6A 04</td>
</tr>
<tr>
<td>//DF1E</td>
<td>01</td>
<td><p>CVM Capability - CVM Required</p>
<p>This value only applies when the Kernel Configuration parameter is
set to support MSD. The device ignores this value.</p>
<ul>
<li><p>Bits 8..5:</p>
<ul>
<li><p>0000 = No CVM</p></li>
<li><p>0001 = Obtain Signature</p></li>
<li><p>0010 = Online PIN</p></li>
<li><p>Others = Reserved for future use</p></li>
</ul></li>
<li><p>Bits 4..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>//DF2C</td>
<td>01</td>
<td><p>CVM Capability - No CVM Required</p>
<p>This value only applies when the Kernel Configuration parameter is
set to support MSD. The device ignores this value.</p>
<ul>
<li><p>Bits 8..5:</p>
<ul>
<li><p>0000 = No CVM</p></li>
<li><p>0001 = Obtain Signature</p></li>
<li><p>0010 = Online PIN</p></li>
<li><p>Others = Reserved for future use</p></li>
</ul></li>
<li><p>Bits 4..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 02</td>
</tr>
<tr>
<td>//DF03</td>
<td>01</td>
<td><p>Security Capabilities</p>
<ul>
<li><p>Bit 8 = SDA</p></li>
<li><p>Bit 7 = DDA</p></li>
<li><p>Bit 6 = Card Capture</p></li>
<li><p>Bit 5 = Reserved for future use</p></li>
<li><p>Bit 4 = CDA</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>08</td>
</tr>
<tr>
<td>//DF17</td>
<td>01</td>
<td><p>Card Data Input Capabilities</p>
<ul>
<li><p>Bit 8 = Manual Key Entry</p></li>
<li><p>Bit 7 = MSR</p></li>
<li><p>Bit 6 = ICC</p></li>
<li><p>Bits 5..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>60</td>
</tr>
<tr>
<td>//DF18</td>
<td>01</td>
<td><p>CVM Capability - CVM Required</p>
<ul>
<li><p>Bit 8 = Offline Plaintext PIN</p></li>
<li><p>Bit 7 = Enciphered Online PIN</p></li>
<li><p>Bit 6 = Signature</p></li>
<li><p>Bit 5 = Enciphered Offline PIN</p></li>
<li><p>Bit 4 = No CVM</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>28</td>
</tr>
<tr>
<td>//DF19</td>
<td>01</td>
<td><p>CVM Capability - No CVM Required</p>
<ul>
<li><p>Bit 8 = Offline Plaintext PIN</p></li>
<li><p>Bit 7 = Enciphered Online PIN</p></li>
<li><p>Bit 6 = Signature</p></li>
<li><p>Bit 5 = Enciphered Offline PIN</p></li>
<li><p>Bit 4 = No CVM</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>08</td>
</tr>
<tr>
<td>//DF1C</td>
<td>02</td>
<td>Max Lifetime Torn Transaction(s)</td>
<td>B</td>
<td>R</td>
<td>01 2C</td>
</tr>
<tr>
<td>//DF1D</td>
<td>01</td>
<td>Max Number Torn Transaction</td>
<td>B</td>
<td>R</td>
<td>00</td>
</tr>
<tr>
<td>//DF20</td>
<td>05</td>
<td>Terminal Action Code - Default</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF21</td>
<td>05</td>
<td>Terminal Action Code - Denial</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF22</td>
<td>05</td>
<td>Terminal Action Code - Online</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF04</td>
<td>0</td>
<td>Balance Read Before GenAC</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DF05</td>
<td>0</td>
<td>Balance Read After GenAC</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 00 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit (No On-Device CVM)</td>
<td>B</td>
<td>R</td>
<td>00 00 00 03 00 00</td>
</tr>
<tr>
<td>//DF25</td>
<td>06</td>
<td>Reader Contactless Transaction Limit (On-Device CVM)</td>
<td>B</td>
<td>R</td>
<td>00 00 00 05 00 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 10 00</td>
</tr>
<tr>
<td>//DF27</td>
<td>02</td>
<td>Timeout Value (ms)</td>
<td>B</td>
<td>R</td>
<td>13 88</td>
</tr>
<tr>
<td>//DF30</td>
<td>01</td>
<td>Hold time value before field off (100 of ms)</td>
<td>B</td>
<td>R</td>
<td>0D</td>
</tr>
<tr>
<td>//DF32</td>
<td>02</td>
<td>Minimum Relay Resistance Grace Period (100 of micro sec)</td>
<td>B</td>
<td>R</td>
<td>00 14</td>
</tr>
<tr>
<td>//DF33</td>
<td>02</td>
<td>Maximum Relay Resistance Grace Period (100 of micro seconds)</td>
<td>B</td>
<td>R</td>
<td>00 32</td>
</tr>
<tr>
<td>//DF34</td>
<td>02</td>
<td>Terminal Expected Transmission Time for Relay Resistance C-APDU (100
of micro seconds)</td>
<td>B</td>
<td>R</td>
<td>00 12</td>
</tr>
<tr>
<td>//DF35</td>
<td>02</td>
<td>Terminal Expected Transmission Time for Relay Resistance R-APDU (100
of micro seconds)</td>
<td>B</td>
<td>R</td>
<td>00 18</td>
</tr>
<tr>
<td>//DF36</td>
<td>02</td>
<td>Relay Resistance Accuracy Threshold (100 of micro seconds)</td>
<td>B</td>
<td>R</td>
<td>01 2C</td>
</tr>
<tr>
<td>//DF37</td>
<td>01</td>
<td>Relay Resistance Transmission Time Mismatch Threshold (%)</td>
<td>B</td>
<td>R</td>
<td>32</td>
</tr>
</tbody>
</table>

#### 4.10.2 Visa payWave Entry Point Table

Table 35 - Visa payWave Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x03 = Visa payWave</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>03 05 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>08 40</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>00 00 00</td>
</tr>
<tr>
<td>//9F40</td>
<td>05</td>
<td>Additional Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//9F66</td>
<td>04</td>
<td>Terminal Transaction Qualifier</td>
<td>B</td>
<td>R</td>
<td>22 00 40 00</td>
</tr>
<tr>
<td>//DF1B</td>
<td>03</td>
<td><p>Kernel Configuration</p>
<p>Byte 1</p>
<ul>
<li><p>Bit 8 = CVN17 fallback to MSD legacy (Not supported)</p></li>
<li><p>Bit 7 = Enable MSD and CVN17 (Not supported)</p></li>
<li><p>Bit 6 = MSD Formatting Track 2 Data (Not supported)</p></li>
<li><p>Bit 5 = MSD Formatting Track 1 Data (Not supported)</p></li>
<li><p>Bits 4..3 = Reserved for future use</p></li>
<li><p>Bit 2 = Force Online if Online Only terminal and with cash back
transaction</p></li>
<li><p>Bit 1 = UL2 #23 Errata S.79/5.80 Performed</p></li>
</ul>
<p>Byte 2</p>
<ul>
<li><p>Bit 8 = DRL Set</p></li>
<li><p>Bit 7 = TVR not reset</p></li>
<li><p>Bit 6 = TSI not reset</p></li>
<li><p>Bits 5..1 = Reserved for future use</p></li>
</ul>
<p>Byte 3</p>
<p>Reserved for future use</p></td>
<td>B</td>
<td>R</td>
<td>00 00 06</td>
</tr>
<tr>
<td>//DF2D</td>
<td>03</td>
<td>Message Hold Time (100 of ms)</td>
<td>B</td>
<td>R</td>
<td>00 00 0F</td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 01</td>
</tr>
<tr>
<td>//DF30</td>
<td>01</td>
<td><p>Bitmap Entry Point</p>
<ul>
<li><p>Bit 8 = Status Check Support Flag</p></li>
<li><p>Bit 7= Zero Amount Allowed Flag</p></li>
<li><p>Bit 6= Reader Contactless Transaction Limit</p></li>
<li><p>Bit 5 = Reader Contactless Floor Limit</p></li>
<li><p>Bit 4 = Reader CVM Required Limit</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>F8</td>
</tr>
<tr>
<td>//DF32</td>
<td>01</td>
<td><p>Status Zero Amount Allowed Flag</p>
<ul>
<li><p>0x01 = Option 1, Online Cryptogram Request</p></li>
<li><p>0x02 = Option 2, Not Allowed</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>02</td>
</tr>
<tr>
<td>//9F1B</td>
<td>04</td>
<td>Terminal Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00</td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 20 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 50 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 10 00</td>
</tr>
</tbody>
</table>

####  

#### 4.10.3 American Express Expresspay Entry Point Table

Table 36 - American Express Expresspay Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x04 = Expresspay</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>04 04 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 01</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>08 40</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>60 28 00</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F40</td>
<td>05</td>
<td>Additional Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//9F6D</td>
<td>01</td>
<td><p>Contactless Reader Capability</p>
<p>Bits 8..7</p>
<ul>
<li><p>00 = Expresspay 1.0</p></li>
<li><p>01 = Expresspay 2.0 and Expresspay &gt;= 3.x (MSD)</p></li>
<li><p>11 = Expresspay &gt;= 3.x(MSD)</p></li>
</ul>
<p>Bits 6..1 = 0 (Reserved, not to be configured)</p></td>
<td>B</td>
<td>R</td>
<td>C0</td>
</tr>
<tr>
<td>//DF1B</td>
<td>06</td>
<td><p>Kernel Configuration</p>
<p>Byte 1 Seed for UN for MSD mode</p>
<p>Byte 2</p>
<ul>
<li><p>Bit 8 = DRL Set</p></li>
<li><p>Bit 7 = EMVCo Entry Point</p></li>
<li><p>Bit 6 = Use TAC and IAC</p></li>
<li><p>Bit 5 = Not EMV Consistency Check</p></li>
<li><p>Bit 4 = Patch ODA Applied</p></li>
<li><p>Bit 3 = Consistency Check as per EMV</p></li>
<li><p>Bit 2 = Delay authorization</p></li>
<li><p>Bit 1 = Unable to go online support</p></li>
</ul>
<p>Byte 3</p>
<p>Hold Time for ‘See Phone’ cases</p>
<p>Byte 4</p>
<p>No holding time on Approve and Decline</p>
<p>Byte 5</p>
<ul>
<li><p>Bit 8 = XP 3.0 activated</p></li>
<li><p>Bit 7 = Start D managed in EMV Mode</p></li>
<li><p>Bit 6 = Disable Discretionary Data</p></li>
<li><p>Bit 5 = Display delayed message</p></li>
<li><p>Bit 4 = Check CDOL2 Presence</p></li>
<li><p>Bit 3 = CVM Mobile Supported</p></li>
<li><p>Bit 2 = Terminal exempt of No CVM checks</p></li>
<li><p>Bit 1 = Transit Terminal</p></li>
</ul>
<p>Byte 6</p>
<ul>
<li><p>Bit 8 = Display PROCESSING Message</p></li>
<li><p>Bit 7 = Only EMV Mode</p></li>
<li><p>Bits 6..4 = Reserved for future use</p></li>
<li><p>Bits 3..1 = C-4 Kernel Version</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>31 01 00 00 00 00</td>
</tr>
<tr>
<td>//DF27</td>
<td>01</td>
<td>Timeout, Field off request (100 of ms)</td>
<td>B</td>
<td>R</td>
<td>20</td>
</tr>
<tr>
<td>//DF2D</td>
<td>03</td>
<td>Message Hold Time (100 of ms)</td>
<td>B</td>
<td>R</td>
<td>00 00 0F</td>
</tr>
<tr>
<td>//DF30</td>
<td>01</td>
<td><p>Bitmap Entry Point</p>
<ul>
<li><p>Bit 8 = Status Check Support Flag</p></li>
<li><p>Bit 7= Zero Amount Allowed Flag</p></li>
<li><p>Bit 6= Reader Contactless Transaction Limit</p></li>
<li><p>Bit 5 = Reader Contactless Floor Limit</p></li>
<li><p>Bit 4 = Reader CVM Required Limit</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>F8</td>
</tr>
<tr>
<td>//DF32</td>
<td>01</td>
<td><p>Status Zero Amount Allowed</p>
<ul>
<li><p>0x01 = Option 1, Online Cryptogram Request</p></li>
<li><p>0x02 = Option 2, Not Allowed</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>//DF20</td>
<td>05</td>
<td>Terminal Action Code - Default</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF21</td>
<td>05</td>
<td>Terminal Action Code - Denial</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF22</td>
<td>05</td>
<td>Terminal Action Code - Online</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 20 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 00 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 00 00</td>
</tr>
</tbody>
</table>

#### 4.10.4 Discover D-PAS Entry Point Table

Table 37 - Discover D-PAS Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x06 = Discover D-PAS</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>06 06 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 01</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>08 40</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>00 00 00</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F66</td>
<td>04</td>
<td>Terminal Transaction Qualifier</td>
<td>B</td>
<td>R</td>
<td>B6 00 C0 00</td>
</tr>
<tr>
<td>//DF1B</td>
<td>01</td>
<td><p>Kernel Configuration</p>
<ul>
<li><p>Bit 8 = Exception List Supported</p></li>
<li><p>Bit 7 = Check PID Limit</p></li>
<li><p>Bit 6 = Extended Selection Support</p></li>
<li><p>Bit 5 = RFU</p></li>
<li><p>Bit 4 = Kernel Supports Do Not Fix Track</p></li>
<li><p>Bit 3 = Online PIN allowed after going online</p></li>
<li><p>Bits 2..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>60</td>
</tr>
<tr>
<td>//DF1B</td>
<td>02</td>
<td><p>Kernel Configuration (Common Kernel Only)</p>
<p>Byte 1</p>
<ul>
<li><p>Bit 8 = Exception List Supported</p></li>
<li><p>Bit 7 = Check PID Limit</p></li>
<li><p>Bit 6 = Extended Selection Support</p></li>
<li><p>Bit 5 = RFU</p></li>
<li><p>Bit 4 = Kernel Supports Do Not Fix Track</p></li>
<li><p>Bit 3 = Online PIN allowed after going online</p></li>
<li><p>Bits 2..1 = Reserved for future use</p></li>
</ul>
<p>Byte 2</p>
<ul>
<li><p>Bit 8 = RFU</p></li>
<li><p>Bit 7 = RFU</p></li>
<li><p>Bit 6 = RFU</p></li>
<li><p>Bit 5 = Deferred Authorization</p></li>
<li><p>Bit 4 = Data Storage Supported (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
<li><p>Bit 3 = Torn Transaction Supported (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
<li><p>Bit 2 = Extended Logging Supported (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
<li><p>Bit 1 = Do Not Display Processing Message (MAGTEK INTERNAL ONLY
FOR NOW)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>60 00</td>
</tr>
<tr>
<td>//DF30</td>
<td>02</td>
<td><p>Bitmap Entry Point</p>
<ul>
<li><p>Bit 8 = Status Check Support Flag</p></li>
<li><p>Bit 7= Zero Amount Allowed Flag</p></li>
<li><p>Bit 6= Reader Contactless Transaction Limit</p></li>
<li><p>Bit 5 = Reader Contactless Floor Limit</p></li>
<li><p>Bit 4 = Reader CVM Required Limit</p></li>
<li><p>Bits 3..1 = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>F8</td>
</tr>
<tr>
<td>//DF32</td>
<td>01</td>
<td><p>Status Zero Amount Allowed Flag</p>
<ul>
<li><p>0x01 = Option 1, Online Cryptogram Request</p></li>
<li><p>0x02 = Option 2, Not Allowed</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td>//9F1B</td>
<td>06</td>
<td>Terminal Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00</td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 50 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 03 00 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 20 00</td>
</tr>
</tbody>
</table>

#### 4.10.5 China Unionpay Entry Point Table (Common Kernel Only)

Table 38 – China Unionpay Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x07 = China Unionpay</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>07 05 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 30</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>01 56</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>60 08 00</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F66</td>
<td>04</td>
<td>Terminal Transaction Qualifier</td>
<td>B</td>
<td>R</td>
<td>36 00 00 80</td>
</tr>
<tr>
<td>//DF1B</td>
<td>02</td>
<td><p>Kernel Configuration</p>
<p>Byte1:</p>
<ul>
<li><p>→ b8..b2: RFU</p></li>
<li><p>→ b1: Display PROCESSING Message</p></li>
</ul>
<p>Byte2:</p>
<ul>
<li><p>→ b8: C7 Outcome</p></li>
<li><p>→ b7: TVR Not Reset</p></li>
<li><p>→ b6: 9F27 Always Raised</p></li>
<li><p>→ b5: Not Forced Online</p></li>
<li><p>→ b4: Standard UICS DT/CT Application Flow Supported</p></li>
<li><p>→ b3: Always DD</p></li>
<li><p>→ b2: Not Decline On Transit Debit AID ONLINE PIN Case</p></li>
<li><p>→ b1: Transit Terminal</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>00 00</td>
</tr>
<tr>
<td>//DF20</td>
<td>05</td>
<td>Terminal Action Code - Default</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF21</td>
<td>05</td>
<td>Terminal Action Code - Denial</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF22</td>
<td>05</td>
<td>Terminal Action Code - Online</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 50 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 03 00 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 20 00</td>
</tr>
<tr>
<td>//DF30</td>
<td>01</td>
<td><p>Bitmap Entry Point</p>
<ul>
<li><p>Bit 8 = Status Check Support Flag</p></li>
<li><p>Bit 7= Zero Amount Allowed Flag</p></li>
<li><p>Bit 6= Reader Contactless Transaction Limit</p></li>
<li><p>Bit 5 = Reader Contactless Floor Limit</p></li>
<li><p>Bit 4 = Reader CVM Required Limit</p></li>
</ul>
<p>Bits 3..1 = Reserved for future use</p></td>
<td>B</td>
<td>R</td>
<td>78</td>
</tr>
<tr>
<td>9F1B</td>
<td>04</td>
<td>Terminal Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 3a 98</td>
</tr>
</tbody>
</table>

#### 4.10.6 JCB Entry Point Table (Common Kernel Only)

Table 39 - JCB Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x05 = JCB</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>05 06 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F01</td>
<td>06</td>
<td>Acquirer Identifier</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00 01</td>
</tr>
<tr>
<td>//9F15</td>
<td>02</td>
<td>Merchant Category Code</td>
<td>B</td>
<td>R</td>
<td>70 32</td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 01</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>03 92</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capability</td>
<td>B</td>
<td>R</td>
<td>60 68 08</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F4E</td>
<td>var</td>
<td>Merchant Name and Location</td>
<td>B</td>
<td>R</td>
<td>5858204D45524348414E54205959204C4F434154494F4E</td>
</tr>
<tr>
<td>//DF1B</td>
<td>03</td>
<td><p>Kernel Configuration</p>
<p>Byte1 (reflects Combination Options):</p>
<ul>
<li><p>→ b8: RFU</p></li>
<li><p>→ b7: Status Check Supported</p></li>
<li><p>→ b6: ODA Supported</p></li>
<li><p>→ b5: Exception File Supported</p></li>
<li><p>→ b4: Random Transaction Selection Supported</p></li>
<li><p>→ b3: MagStripe Mode Supported (see here)</p></li>
<li><p>→ b2: EMV Mode Supported (see here)</p></li>
<li><p>→ b1: Legacy Mode Supported (see here)</p></li>
</ul>
<p>Byte2 (reflects Combination Options):</p>
<ul>
<li><p>→ b8..b1: RFU</p></li>
<li><p>Byte3:</p></li>
<li><p>→ b8: On Device CVM</p></li>
<li><p>→ b7: Transit Reader Supported</p></li>
<li><p>→ b6: Issuer Update Supported</p></li>
<li><p>→ b5..b3: RFU</p></li>
<li><p>→ b2: Do Not Display PROCESSING message</p></li>
<li><p>→ b1: TVR with Online Pin for Legacy</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>7B 00 80</td>
</tr>
<tr>
<td>//DF20</td>
<td>05</td>
<td>Terminal Action Code - Default</td>
<td>B</td>
<td>R</td>
<td>90 40 20 80 20</td>
</tr>
<tr>
<td>//DF21</td>
<td>05</td>
<td>Terminal Action Code - Denial</td>
<td>B</td>
<td>R</td>
<td>04 10 20 20 20</td>
</tr>
<tr>
<td>//DF22</td>
<td>05</td>
<td>Terminal Action Code - Online</td>
<td>B</td>
<td>R</td>
<td>90 60 20 90 20</td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 50 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 03 00 00</td>
</tr>
<tr>
<td>//DF25</td>
<td>06</td>
<td>On Device CVM Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 02 50 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 20 00</td>
</tr>
<tr>
<td>//9F1B</td>
<td>04</td>
<td>Terminal Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 3a 98</td>
</tr>
</tbody>
</table>

#### 4.10.7 Interac Flash Entry Point Table (Common Kernel Only)

Table 40 – Interac Flash Entry Point Table

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF35</td>
<td>var</td>
<td><p>AID Delimiter Container</p>
<p>There can be multiple instances of this in sequence. The contents of
the first instance are loaded into Entry Point Table Slot 1, the
contents of the second are loaded into Entry Point Table Slot 2,
etc.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF0E</td>
<td>03</td>
<td><p>Kernel ID, Processing Slot, Transaction Type</p>
<p>Byte 1 Kernel ID</p>
<ul>
<li><p>0x41 = Interac Flash</p></li>
</ul>
<p>Byte 2 Processing Slot to Use</p>
<p>See the <strong>AID Delimiter Container</strong> parameter in
<strong>EMV Processing Configuration File Type</strong> for information
about how to identify slots.</p>
<p>Byte 3 Transaction Type</p>
<ul>
<li><p>0x00 = Purchase</p></li>
<li><p>0x01 = Cash</p></li>
<li><p>0x02 = Purchase with cashback</p></li>
<li><p>0x03 = Refund</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>41 05 00</td>
</tr>
<tr>
<td>/DF0F</td>
<td>var</td>
<td><p>Payload Delimiter Container</p>
<p>Include only one of these containers inside each <strong>AID
Delimiter Container</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//9F09</td>
<td>02</td>
<td>EMV Application Version Number</td>
<td>B</td>
<td>R</td>
<td>00 02</td>
</tr>
<tr>
<td>//9F1A</td>
<td>02</td>
<td>Terminal Country Code</td>
<td>B</td>
<td>R</td>
<td>01 24</td>
</tr>
<tr>
<td>//9F33</td>
<td>03</td>
<td>Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>60 68 08</td>
</tr>
<tr>
<td>//9F35</td>
<td>01</td>
<td>Terminal Type</td>
<td>B</td>
<td>R</td>
<td>21</td>
</tr>
<tr>
<td>//9F40</td>
<td>05</td>
<td>Additional Terminal Capabilities</td>
<td>B</td>
<td>R</td>
<td>E0 00 E0 F0 01</td>
</tr>
<tr>
<td>//9F58</td>
<td>01</td>
<td>Merchant Type Indicator</td>
<td>B</td>
<td>R</td>
<td>03</td>
</tr>
<tr>
<td>//9F5D</td>
<td>06</td>
<td>Receipt Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 50 00</td>
</tr>
<tr>
<td>//9F5E</td>
<td>02</td>
<td><p>Terminal Option Status</p>
<p>Byte1:</p>
<ul>
<li><p>→ b8: Use Interface If Different Currency</p></li>
<li><p>→ b7: Use Interface If Different Country Code</p></li>
<li><p>→ b6: Use Interface If Domestic Transaction With Different
Currency</p></li>
<li><p>→ b5..b1: RFU</p></li>
</ul>
<p>Byte2:</p>
<ul>
<li><p>→ b8..b1: RFU</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>E0 00</td>
</tr>
<tr>
<td>//9F5F</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 01 00 00</td>
</tr>
<tr>
<td>//DF1B</td>
<td>02</td>
<td><p>Kernel Configuration</p>
<p>Byte1:</p>
<ul>
<li><p>Max Retry</p></li>
</ul>
<p>Byte2:</p>
<ul>
<li><p>→ b8: Interac Contact</p></li>
<li><p>→ b7: Interac on Other Terminal</p></li>
<li><p>→ b6: Mobile NFC</p></li>
<li><p>→ b5: Contactless Card</p></li>
<li><p>→ b4: Legacy Floor Limit</p></li>
<li><p>→ b3: Always DD</p></li>
<li><p>→ b2: Terminal v1.4</p></li>
<li><p>→ b1: Processing Message Disabled</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>02 34</td>
</tr>
<tr>
<td>//DF20</td>
<td>05</td>
<td>Terminal Action Code - Default</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF21</td>
<td>05</td>
<td>Terminal Action Code - Denial</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//DF22</td>
<td>05</td>
<td>Terminal Action Code - Online</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 00</td>
</tr>
<tr>
<td>//9F1B</td>
<td>04</td>
<td>Terminal Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 1F 40</td>
</tr>
</tbody>
</table>

### EMV Configuration CA Public Keys File Type 

The host can load this file type to control the behavior of the device’s
EMV contact and contactless kernels when the device should support
Offline Data Authentication (ODA). Populate all values from information
provided by each payment brand that should be supported by the device.
The host can load this file using **Command 0xD812 - Start Send File to
Device (Unsecured)**.

MagTek provides tools that allow these settings to be loaded using a
Microsoft Excel spreadsheet in xlsx format for more convenient
authoring, review, and change tracking. For a reference sample
spreadsheet, contact MagTek Support Services. The MagTek tools expect
the spreadsheet to be formatted format as shown in **Table 41**. Each CA
Key to be supported is defined in a tab of the Excel file.

Table 41 - EMV Configuration CA Keys File Type

| Tag | Len | Value / Description | Typ | Req | Example |
|----|----|----|----|----|----|
| DFDF79 | 05 | Registered Application ID (RID) | B | R | A0 00 00 00 04 |
| DFDF7A | 01 | CA Public Key Index | B | R | 05 |
| DFDF7B | var | CA Public key Modulus | B | R | B8 04 8A … D5 97 |
| DFDF7C | 01 or 03 | CA Public Key Exponent | B | R | 03 |
| DFDF7D | 14 | CA Public Key Checksum | B | R | EB FA 0D 5D 06 D8 CE 70 2D A3 EA E8 90 70 1D 45 E2 74 C8 45 |

The MagTek tool converts the spreadsheet data into the format shown in
**Table 42**.

Table 42 - CA Keys Raw Format

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>CA Keys Raw Format</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>RID (5 Bytes)</p>
<p>As defined by the payment brand.</p></td>
</tr>
<tr>
<td><p>Index (1 Byte)</p>
<p>As defined by the payment brand.</p></td>
</tr>
<tr>
<td><p>Exponent Length (1 Byte)</p>
<ul>
<li><p>0x01</p></li>
<li><p>0x03</p></li>
</ul></td>
</tr>
<tr>
<td>Key Length (1 Byte), Max of 248 bytes per EMVCo specifications</td>
</tr>
<tr>
<td><p>Exponent (1 or 3 Bytes)</p>
<ul>
<li><p>0x03</p></li>
<li><p>0x010001</p></li>
</ul></td>
</tr>
<tr>
<td><p>Modulus</p>
<p>As defined by the payment brand.</p></td>
</tr>
<tr>
<td>Additional CA Keys, repeating from RID through Modulus, as
needed.</td>
</tr>
<tr>
<td>SHA-1 hash of all data in the file</td>
</tr>
</tbody>
</table>

### EMV American Express DRL Configuration File Type (Not Supported on Expresspay 4.x) 

The host can load this file type to control the behavior of the device’s
American Express contactless kernel when the card sends tag 9F70 and one
or more DRL is defined.

The host can load it using **Command 0xD812 - Start Send File to Device
(Unsecured)**. See the ***Expresspay 4.0.2*** specification for
functional details.

MagTek provides tools that allow these settings to be loaded using a
Microsoft Excel spreadsheet in xlsx format for more convenient
authoring, review, and change tracking. For a reference sample
spreadsheet, contact MagTek Support Services. The MagTek tools expect
the spreadsheet to be formatted as shown in **Table 43**. Each DRL to be
supported is defined in a tab of the Excel file.

Table 43 - EMV Configuration American Express DRL Set File Type

| Tag  | Len | Value / Description                  | Typ | Req | Example           |
|------|-----|--------------------------------------|-----|-----|-------------------|
| DF23 | 06  | Reader Contactless Floor Limit       | B   | R   | 00 00 00 00 15 00 |
| DF24 | 06  | Reader Contactless Transaction Limit | B   | R   | 00 00 00 00 05 00 |
| DF26 | 06  | Reader CVM Required Limit            | B   | R   | 00 00 00 00 10 00 |

The MagTek tool converts the spreadsheet data into the raw format shown
in **Table 44**:

Table 44 -Raw EMV Configuration American Express DRL Set File Type

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><p>File Type Version</p>
<p>One byte indicating the version of the file type format being
used.</p>
<ul>
<li><p>0xAA</p></li>
</ul></td>
</tr>
<tr>
<td colspan="6"><p>SHA-1 Hash</p>
<p>20 byte hash of all values that follow</p></td>
</tr>
<tr>
<td>FF37</td>
<td>var</td>
<td>DRL Configuration Container</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/FF36</td>
<td>var</td>
<td>DRL Set Container</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DF23</td>
<td>06</td>
<td>Reader Contactless Floor Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 15 00</td>
</tr>
<tr>
<td>//DF24</td>
<td>06</td>
<td>Reader Contactless Transaction Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 05 00</td>
</tr>
<tr>
<td>//DF26</td>
<td>06</td>
<td>Reader CVM Required Limit</td>
<td>B</td>
<td>R</td>
<td>00 00 00 00 10 00</td>
</tr>
<tr>
<td colspan="6">Additional instances of DRL Set Container as needed</td>
</tr>
</tbody>
</table>

### Signature Capture File Type (Touch Only)

The signature capture file type produced when the host invokes **Command
0x1801 - Request Cardholder Signature (Touch Only)** is a TLV data
object in the format below.

Table 45 - Signature Capture File Type

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>81</td>
<td>08</td>
<td><p>Signature Window Width and Height</p>
<p>Bytes 0..1 = Left edge (minimum value of all X coordinates)</p>
<p>Bytes 2..3 = Right edge (maximum value of all Y coordinates)</p>
<p>Bytes 4..5 = Top edge (minimum value of all Y coordinates)</p>
<p>Bytes 6..7 = Bottom edge (maximum value of all Y
coordinates)</p></td>
<td>B</td>
<td>R</td>
<td><p>0000 00FD 0000 0078 (landscape)</p>
<p>0000 00C8</p>
<p>0000 00B9</p>
<p>(portrait)</p></td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Signature Coordinate Values List</p>
<p>This is a blob that consists of a raw list of point coordinates
representing the signature. Each coordinate is 4 bytes long, where the
first 2 bytes are the X coordinate of that point and the second 2 bytes
are the Y coordinate of that point.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### Security Operation Type

This non-TLV data structure consists of four or five bytes that
describes a security operation, including the algorithms and methods to
be used in that operation.

Table 46 - Security Operation Type

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 62%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr>
<th>Offset</th>
<th>Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><p>Operation Type</p>
<ul>
<li><p>0x01 = Key Agreement</p></li>
<li><p>0x02 = Command Authorization Using Signature</p></li>
<li><p>0x03 = Command Authorization Using MAC</p></li>
<li><p>0x05 = Data Authentication Using MAC</p></li>
<li><p>0x07 = Data Encryption</p></li>
<li><p>0x10 = Data Signature</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td><p>Operation Algorithm</p>
<p>If <strong>Operation Type</strong> is Key Agreement type:</p>
<ul>
<li><p>0x01 = ECDHE</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a Signature type:</p>
<ul>
<li><p>0x01 = ECDSA (indeterministic)</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a MAC type:</p>
<ul>
<li><p>0x01 = HMAC</p></li>
<li><p>0x02 = CBC-MAC</p></li>
<li><p>0x03 = CMAC</p></li>
</ul>
<p>If <strong>Operation Type</strong> is an Encryption type:</p>
<ul>
<li><p>0x01 = DEA</p></li>
<li><p>0x02 = 2TDEA</p></li>
<li><p>0x03 = 3TDEA</p></li>
<li><p>0x04 = AES-128</p></li>
<li><p>0x05 = AES-192</p></li>
<li><p>0x06 = AES-256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><p>Operation Curve/Mode/Hash/Cipher</p>
<p>If <strong>Operation Type</strong> is a Key Agreement type, this
specifies the Curve:</p>
<ul>
<li><p>0x01 = P192</p></li>
<li><p>0x02 = P224</p></li>
<li><p>0x03 = P256</p></li>
<li><p>0x04 = P384</p></li>
<li><p>0x05 = P521</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a Signature type, this
specifies the Hash:</p>
<ul>
<li><p>0x01 = MD5</p></li>
<li><p>0x02 = SHA-1</p></li>
<li><p>0x03 = SHA-224</p></li>
<li><p>0x04 = SHA-256</p></li>
<li><p>0x05 = SHA-384</p></li>
<li><p>0x06 = SHA-512</p></li>
<li><p>0x07 = SHA-512/224</p></li>
<li><p>0x08 = SHA-512/256</p></li>
<li><p>0x09 = SHA3-224</p></li>
<li><p>0x0A = SHA3-256</p></li>
<li><p>0x0B = SHA3-384</p></li>
<li><p>0x0C = SHA3-512</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a MAC type, this specifies the
Encryption Algorithm:</p>
<ul>
<li><p>0x01 = DEA</p></li>
<li><p>0x02 = 2TDEA</p></li>
<li><p>0x03 = 3TDEA</p></li>
<li><p>0x04 = AES-128</p></li>
<li><p>0x05 = AES-192</p></li>
<li><p>0x06 = AES-256</p></li>
</ul>
<p>If <strong>Operation Type</strong> is an Encryption type, this
specifies the Mode:</p>
<ul>
<li><p>0x01 = ECB (Block)</p></li>
<li><p>0x02 = CBC (Block)</p></li>
<li><p>0x03 = CFB (Stream)</p></li>
<li><p>0x04 = OFB (Stream)</p></li>
<li><p>0x05 = CTR (Stream)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td><p>KDF/Curve/Padding</p>
<p>If <strong>Operation Type</strong> is a Key Agreement type, this
specifies the KDF:</p>
<ul>
<li><p>0x01 = SP800-56A / X9.63</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a Signature type, this
specifies the Curve:</p>
<ul>
<li><p>0x01 = P192</p></li>
<li><p>0x02 = P224</p></li>
<li><p>0x03 = P256</p></li>
<li><p>0x04 = P384</p></li>
<li><p>0x05 = P521</p></li>
</ul>
<p>If <strong>Operation Type</strong> is a MAC type, this specifies the
Padding:</p>
<ul>
<li><p>0x00 = None (for streaming modes)</p></li>
<li><p>0x01 = Zeros (ISO 9797 Padding Method 1)</p></li>
<li><p>0x02 = One and zeros (ISO 9797 Method 2)</p></li>
<li><p>0x03 = Length + zeros (ISO 9797 Method 3)</p></li>
<li><p>0x10 = PKCS7 (pad # = pad length)</p></li>
<li><p>0x11 = X9.23 (random + pad length)</p></li>
<li><p>0x20 = Random (when length is known)</p></li>
</ul>
<p>If <strong>Operation Type</strong> is an Encryption type, this
specifies the Padding:</p>
<ul>
<li><p>0x00 = None (for streaming modes)</p></li>
<li><p>0x01 = Zeros (ISO 9797 Padding Method 1)</p></li>
<li><p>0x02 = One and zeros (ISO 9797 Method 2)</p></li>
<li><p>0x03 = Length + zeros (ISO 9797 Method 3)</p></li>
<li><p>0x10 = PKCS7 (pad # = pad length)</p></li>
<li><p>0x11 = X9.23 (random + pad length)</p></li>
<li><p>0x20 = Random (when length is known)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td><p>MAC Block Size</p>
<p>If <strong>Operation Type</strong> is a MAC type, this specifies the
data to be MACed must be padded to a multiple of this many bytes.</p>
<p>For all other Operation Types, do not include this byte.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### Security Parameters Type

Table 47 - Security Parameters Type

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>81</td>
<td>var</td>
<td><p>Operation</p>
<p>This contains an instance of a <strong>Security Operation
Type</strong> structure specifying the operation to be
performed.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Data</p>
<p>Reserved for future use. Do not include this parameter. It is
reserved for Initialization Vector or nonce, if needed.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>var</td>
<td><p>Extra Data Item</p>
<p>Reserved for future use. Do not include.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A8</td>
<td>var</td>
<td><p>Key Information</p>
<p>This specifies the key used in the operation. Populate with a
<strong>Key Information Type</strong> TLV data object. For ECDSA
operations, do not include this parameter.</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A9</td>
<td>var</td>
<td><p>Second Key Information (Reserved, do not include)</p>
<p>This specifies a second key used in the operation. If needed,
populate with a <strong>Key Information Type</strong> TLV data
object.</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### Key Information Type

Table 48 - Key Information Type

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>81</td>
<td>02</td>
<td><p>Key Slot ID</p>
<p>Identifies the key being used for operation. See <strong>Table 56 -
Key Slot IDs</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Key Label</p>
<p>The label that indicates the key type. For example,
<strong>DEVTK</strong>.</p></td>
<td>AN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>var</td>
<td><p>Key Derivation Details</p>
<p>Use Key Serial Number (KSN) in requests, Key Derivation Information
in responses.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>88</td>
<td>var</td>
<td><p>Additional Information</p>
<p>Reserved for future use. Do not include.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### NFC UID Type (EMV Contactless Only)

Table 49 – NFC UID Type

| Tag  | Len | Value / Description | Typ | Req | Default |
|------|-----|---------------------|-----|-----|---------|
| DF79 | var | NFC UID             | B   | R   |         |

### GPO Response Type (EMV Contactless Only)

Table 50 – NFC UID Type

| Tag | Len | Value / Description | Typ | Req | Default |
|-----|-----|---------------------|-----|-----|---------|
| 81  | var | GPO Response        | B   | R   |         |

### TR-31 Key Block Type

A ***TR-31*** (***X9.143***) key block consists of three parts:

The **Key Block Header** (KBH) which contains attribute information
about the key and the key block and is not encrypted. It is always
treated as ASCII.

- The first section is 16 bytes with a fixed format defined below.

- The second section is optional within the standard, but required for
  current products.

The **Confidential Data**, which is encrypted and always binary.

- Two bytes indicating the key length (in bits, AES-128 is 128 bits, so
  length will be 0080).

- The secret key and/or sensitive data.

- Padding as required (random bytes 0x00 to 0xFF).

The **MAC**, which is of varying length as follows:

- 64 bits if the TDEA key derivation method is used (typically not used
  for this device).

- 128 bits if the AES key derivation method is used.

| Header | Header (optional) | Key Length |    Key    | Key Padding | Block Padding | MAC |
|--------|-------------------|------------|:---------:|-------------|---------------|-----|
|        |                   |            | Encrypted |             |               |     |
|        |                   | MAC        |           |             |               |     |

Symmetric keys are padded with **Block Padding** to the maximum length
for the algorithm, 192 bits for TDEA or 256 bits for AES, to hide the
true length of short keys.

The data to be encrypted and the MAC are always binary for calculation
purposes. The encrypted data and the MAC are converted to ASCII hex as
the last step.

Date and time strings specified within the TR-31 block are represented
according to the rules described in ***ISO 8601*** and ***TR-31***. Year
is 4 digits. Time uses UTC 24 hour clock. Some functions like
‘toISOString()’ will produce a string of format
**yyyy-mm-ddThh:mm:ss.fffZ** where fff is a decimal fraction of a
second, Z is UTC time zone. The device ignores ‘Z’ and ‘.fff’ if they
are present. Seconds ‘:ss’ are optional. Date, hours, and minutes are
required. For example, March 23, 2020 4:19PM is encoded as
**2020-03-23T16:19** at minimum, but could also be
**2020-03-23T16:19:00.000Z**.

Table 51 - TR-31 Block Fixed Header

| Offset | Name | Fixed Value | Variable |
|----|----|----|----|
| 0 | Key Block V ID | ‘D’ |  |
| 1..4 | Key Block Length |  | Calculated (in decimal, e.g. 138 bytes shown as ‘0138’ |
| 5..6 | Usage |  | Look up the desired **Key Type** in **Table 52 below** and select this value from the **Usage** column. |
| 7 | Algorithm |  | Look up the desired **Key Type** in **Table 52 below** and select this value from the **Algorithm** column. |
| 8 | Mode of Use |  | Look up the desired **Key Type** in **Table 52 below** and select this value from the **Mode of Use** column. |
| 9..10 | Key Version \# | ‘00’ | Always ‘00’ |
| 11 | Exportability | ‘N’ | Always no export allowed |
| 12..13 | \# option blocks |  | Calculated |
| 14..15 | Reserved | ‘00’ |  |

Table 52 - TR-31 Key Type Table - Usage/Algorithm/Mode

<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 9%" />
<col style="width: 31%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Key Type</th>
<th>Usage</th>
<th>Algorithm AES/TDEA</th>
<th><p>Mode of Use</p>
<p>(Both, To, From)</p></th>
</tr>
</thead>
<tbody>
<tr>
<td>Transport (KBPK)</td>
<td>‘K1’</td>
<td>‘A’ / ‘T’</td>
<td>‘D’</td>
</tr>
<tr>
<td>Initial DUKPT Key</td>
<td>‘B1’</td>
<td>‘A’ / ‘T’</td>
<td>‘X’</td>
</tr>
<tr>
<td>Fixed MAC (CMAC)</td>
<td>‘M6’</td>
<td>‘A’ / ‘T’</td>
<td>(‘C’, ’G’, ’V’)</td>
</tr>
<tr>
<td>Fixed Encrypt</td>
<td>‘D0’</td>
<td>‘A’ / ‘T’</td>
<td>(‘B’, ‘E’, ‘D’)</td>
</tr>
</tbody>
</table>

Table 53 - TR-31 Optional Blocks

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr>
<th>ID</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘IK’</td>
<td>DUKPT KSID</td>
</tr>
<tr>
<td>‘KS’</td>
<td>Key Set Identifier (e.g. data used by host to find and/or derive
this key).</td>
</tr>
<tr>
<td>‘KC’</td>
<td>Key Check Value (KCV) (Legacy or CMAC)</td>
</tr>
<tr>
<td>‘PB’</td>
<td>Padding Field</td>
</tr>
<tr>
<td>‘TS’</td>
<td>Current Time Stamp (optional) see description in previous
section.</td>
</tr>
<tr>
<td>‘KP’</td>
<td>KCV of KBPK that created this Key Block (optional-preferred)</td>
</tr>
<tr>
<td>‘21’</td>
<td><p>MagTek Additional Key Info</p>
<p>From <strong>Table 54 - MagTek Custom TR-31 Small Optional
Block</strong></p></td>
</tr>
</tbody>
</table>

Table 54 - MagTek Custom TR-31 Small Optional Block

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 19%" />
<col style="width: 14%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr>
<th>Offset</th>
<th>Name</th>
<th>Value</th>
<th>Variable</th>
</tr>
</thead>
<tbody>
<tr>
<td>0..1</td>
<td>Block ID</td>
<td>‘21’</td>
<td>MagTek Added Key Info Block</td>
</tr>
<tr>
<td>2..3</td>
<td>Block Length</td>
<td>var</td>
<td>ASCII Hex (Length 01-FF from offset 0)</td>
</tr>
<tr>
<td>4..7</td>
<td>Owner Tag</td>
<td>‘MGTK’</td>
<td>Avoid collision with others using Block ID ‘21’</td>
</tr>
<tr>
<td>8..9</td>
<td>Data Tag</td>
<td>‘10’</td>
<td>Field ID</td>
</tr>
<tr>
<td>10..11</td>
<td>Data Len</td>
<td>‘01’</td>
<td>Field Length (ASCII Hex 00-FF)</td>
</tr>
<tr>
<td>12</td>
<td>Data</td>
<td>‘T’,’P’, or ‘0’</td>
<td><p>Field Data for Key Environment</p>
<ul>
<li><p>T = Test</p></li>
<li><p>P = Production</p></li>
<li><p>0 = Erase Key</p></li>
</ul></td>
</tr>
<tr>
<td>13…</td>
<td>Added elements</td>
<td></td>
<td>More Fields (Tags, Lengths, and Data)</td>
</tr>
</tbody>
</table>

Table 55 - MagTek Custom Key Data Fields

<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 12%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr>
<th>Field ID</th>
<th>Length</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘10’</td>
<td>‘01’</td>
<td><p>Key Environment</p>
<ul>
<li><p>T = Test</p></li>
<li><p>P = Production</p></li>
<li><p>0 = Erase Key</p></li>
</ul></td>
</tr>
<tr>
<td>‘11’</td>
<td>‘04’</td>
<td><p>Key Slot ID</p>
<p>See <strong>Table 56 - Key Slot ID</strong>.</p></td>
</tr>
<tr>
<td>‘12’</td>
<td>‘04’</td>
<td>Key Slot ID of Transport Key</td>
</tr>
<tr>
<td>‘20’</td>
<td>--</td>
<td>Reserved</td>
</tr>
<tr>
<td>‘21’</td>
<td>‘04’</td>
<td><p>DUKPT Data Type Restriction Bitmask</p>
<p>This is for Transport Keys and DUKPT keys. Default to 0.</p></td>
</tr>
<tr>
<td>‘31’</td>
<td>‘07’</td>
<td>Device Serial Number</td>
</tr>
<tr>
<td>‘32’</td>
<td>‘10’</td>
<td><p>Challenge Token</p>
<p>10h = 16 characters</p></td>
</tr>
<tr>
<td>‘33’</td>
<td>‘10’ ..‘18’</td>
<td><p>Expiration Date/Time</p>
<p>This is in UTC format, use short form if possible. Reserved.</p></td>
</tr>
</tbody>
</table>

<span id="_Ref49929758" class="anchor"></span>Table 56 - Key Slot IDs

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 38%" />
<col style="width: 24%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr>
<th>ID</th>
<th>Label</th>
<th>Description</th>
<th>Load Transport Key</th>
<th>TR31-F</th>
</tr>
</thead>
<tbody>
<tr>
<td>10xx</td>
<td></td>
<td>Transport Keys (KBPK)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1000</td>
<td>TMPTK</td>
<td>Temporary KBPK</td>
<td>Key agreement process from <strong>Command 0xF017 - Establish
Ephemeral KBPK</strong></td>
<td>N/A</td>
</tr>
<tr>
<td>1001</td>
<td>MTK</td>
<td>Master Transport Key</td>
<td>TMPTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1002</td>
<td>DEVTK</td>
<td>Device Master Transport Key</td>
<td>MTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1003</td>
<td>FINTK</td>
<td>Financial Master Transport Key</td>
<td>MTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1021</td>
<td>PRODTK</td>
<td><p>(MAGTEK INTERNAL ONLY)</p>
<p>Production Transport Key</p></td>
<td>DEVTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1022</td>
<td>MFGTK</td>
<td><p>(MAGTEK INTERNAL ONLY)</p>
<p>Manufacturing Transport Key</p></td>
<td>DEVTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1081</td>
<td>MKIFTK</td>
<td>MagTek KIF Financial Transport Keys</td>
<td>FINTK</td>
<td>K1AD</td>
</tr>
<tr>
<td>1101</td>
<td>FREQMK</td>
<td>Factory Request MAC Key</td>
<td>PRODTK</td>
<td>M6AV</td>
</tr>
<tr>
<td>1102</td>
<td>MREQMK</td>
<td>Manufacturer Device Request MAC Key</td>
<td>MFGTK</td>
<td>M6AV</td>
</tr>
<tr>
<td>1111</td>
<td>MFRQMK</td>
<td>Manufacturer Financial Request MAC (Configuration) Key</td>
<td>MKIFTK</td>
<td>M6AV</td>
</tr>
<tr>
<td>0x2000 to 0x201F</td>
<td>DKPTM0 to DKPTM1F</td>
<td>DUKPT Initial Keys,</td>
<td>MKIFTK</td>
<td>B1TX</td>
</tr>
</tbody>
</table>

#### DUKPT Key Mapping

##### Terms and Definitions

DUKPT – Derived Unique Key Per Transaction

OID – Object Identifier

SRED - Secure Reading and Exchange of Data

There are 7 new OIDs defined for these 7 SRED Data IDs.

Each OID value contains a two-byte DUKPT slot ID and a one-byte
transformation ID.

| **SRED Data ID** | **OID** | **OID Size** |
|----|----|:--:|
| 0: Not assigned | N/A | N/A |
| 1: PIN-TDES (supported on PED devices Only) | 0x010102040101 | 3 |
| 2: Account Data | 0x010102040102 | 3 |
| 3: MAC | 0x010102040103 | 3 |
| 4: Magneprint (supported on devices with MSR Only) | 0x010102040104 | 3 |
| 5: MagTek Token | 0x010102040105 | 3 |
| 6: User Data 1 | 0x010102040106 | 3 |
| 7: PIN-AES (supported on PED devices Only) | 0x010102040107 | 3 |

Table 57 - SRED Data IDs and OIDs

###### DUKPT Slot IDs

The existing TR31 Module supports 32 MagTek DUKPT Slot IDs, from 0x2000
to 0x201F.

The Key Injection Software Tool shall inject DUKPT keys through these
DUKPT Slot IDs.

###### Transformation IDs

This is the list of DUKPT transformations defined in both the Legacy and
AES specifications.

#### Restrictions of a DUKPT Slot ID

Table 58 - Transformation IDs for DUKPT Legacy and AES

<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 15%" />
<col style="width: 14%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><p><strong>Transformation</strong></p>
<p><strong>ID #</strong></p></th>
<th><strong>Usage Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Data for calculation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td>Reserved</td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td>PIN Encryption</td>
<td>Legacy</td>
<td>00 00 00 00 00 00 00 FF</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td>MAC Generate/Verify</td>
<td>Legacy</td>
<td>00 00 00 00 00 00 FF 00</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td>MAC Verify</td>
<td>Legacy</td>
<td>00 00 00 00 FF 00 00 00</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td>Data Enc/Decryption</td>
<td>Legacy</td>
<td>00 00 00 00 00 FF 00 00</td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td>Data Encryption</td>
<td>Legacy</td>
<td>00 00 00 FF 00 00 00 00</td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td>Reserved</td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td>PIN Encryption</td>
<td>AES</td>
<td>0x1000</td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td>MAC Generate</td>
<td>AES</td>
<td>0x2000</td>
</tr>
<tr>
<td style="text-align: center;">9</td>
<td>MAC Verify</td>
<td>AES</td>
<td>0x2001</td>
</tr>
<tr>
<td style="text-align: center;">A</td>
<td>MAC Generate/Verify</td>
<td>AES</td>
<td>0x2002</td>
</tr>
<tr>
<td style="text-align: center;">B</td>
<td>Data Encryption</td>
<td>AES</td>
<td>0x3000</td>
</tr>
<tr>
<td style="text-align: center;">C</td>
<td>Data Decryption</td>
<td>AES</td>
<td>0x3001</td>
</tr>
<tr>
<td style="text-align: center;">D</td>
<td>Data Enc/Decryption</td>
<td>AES</td>
<td>0x3002</td>
</tr>
</tbody>
</table>

<table>
<caption><p>Table 59 - The definition of Restriction bit
map</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Bit #</strong></th>
<th style="text-align: center;"><strong>5</strong></th>
<th style="text-align: center;"><strong>4</strong></th>
<th style="text-align: center;"><strong>3</strong></th>
<th style="text-align: center;"><strong>2</strong></th>
<th style="text-align: center;"><strong>1</strong></th>
<th style="text-align: center;"><strong>0</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>Data Type</strong></td>
<td style="text-align: center;"><p>User Data</p>
<p>(RFU)</p></td>
<td style="text-align: center;"><p>Token</p>
<p>(RFU)</p></td>
<td style="text-align: center;">Magneprint</td>
<td style="text-align: center;">MAC</td>
<td style="text-align: center;">Account Data</td>
<td style="text-align: center;">PIN</td>
</tr>
</tbody>
</table>

During TR31 Key Injection, each DUKPT Slot ID contains a parameter
indicates the purpose of a Key Set.

Example 1: The restriction value is 0x3F

This Key Set can be used for all purposes.

Example 2: The restriction value is 0x3E

This Key Set can be used for all purposes, except PIN Encryption.

Example 3: The restriction value is 0x01

This Key Set can be used for PIN Encryption only.

#### The Rules of Key Mapping

SRED Data ID map configuration values (Slot ID and Transformation ID)
must be checked and rejected if they don’t meet the following
conditions.

a). The DUKPT Slot ID must be loaded. (**Table 60**)

b). The loaded DUKPT Slot ID must allows this type of SRED Data ID.
(Table 59**)**

c). The transformation must be allowed by **Table 61**.

#### The settings of DUKPT Slot IDs injected through TR31

Here is the list of parameters of 4 DUKPT Slot IDs based on the existing
Key Injection Tool.

| DUKPT Slot ID | Key Type | Restrictions |
|---------------|----------|--------------|
| DKPTM0-2000   | TDES     | 0x3E         |
| DKPTM2-2002   | AES-128  | 0x3F         |
| DKPTM3-2003   | AES-256  | 0x3F         |
| DKPTM7-2007   | TDES     | 0x3F         |

Table 60 - Settings of Injected DUKPT Slot IDs

#### The Allowed Key Mapping Table

<table>
<caption><p>Table 61 - Allowed Key Mapping Table</p></caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 55%" />
<col style="width: 18%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr>
<th><p>SRED</p>
<p>Data ID</p></th>
<th><p>Data Type</p>
<p>(Working Key Purpose)</p></th>
<th><p>Allowed Legacy</p>
<p>DUKPT</p>
<p>Transforms</p></th>
<th><p>Allowed AES</p>
<p>DUKPT</p>
<p>Transforms</p></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Not assigned</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>1</td>
<td>PIN-TDES (supported on PED devices Only)</td>
<td>01</td>
<td>Not allowed</td>
</tr>
<tr>
<td>2</td>
<td>Account Data</td>
<td>01, 04, 05</td>
<td>0B, 0D</td>
</tr>
<tr>
<td>3</td>
<td>Transaction MAC</td>
<td>02</td>
<td>08, 0A</td>
</tr>
<tr>
<td>4</td>
<td>MagnePrint (supported on devices with MSR Only)</td>
<td>01, 04, 05</td>
<td>0B, 0D</td>
</tr>
<tr>
<td>5</td>
<td>MagTek Token (RFU)</td>
<td>RFU</td>
<td>RFU</td>
</tr>
<tr>
<td>6</td>
<td>User Data #1 (RFU)</td>
<td>RFU</td>
<td>RFU</td>
</tr>
<tr>
<td>7</td>
<td>PIN-AES (supported on PED devices Only)</td>
<td>Not allowed</td>
<td>07</td>
</tr>
<tr>
<td>…</td>
<td>RFU</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>

Note: If SRED Data ID 2 and 4 are mapped to the same Key Set, then they
must have the same Transformation ID.

If the Transformation ID of the latest key mapping request is different,
then the original OID setting of the other SRED Data ID will be forced
to match the latest OID setting. For example, SRED Data ID 2 has been
mapped to 0x2007 0x04, user wants to map SRED Data ID 4 to 0x2007 0x05,
then the OID setting of SRED Data ID 2 will be forced to 0x2007 0x05.

#####  Examples of Key Mapping

The following OID Values indicate that:

1)  200701: Map PIN-TDES to DKPTM7-2007 PIN Encryption Variant.

2)  20020B: Map Account Data to DKPTM2-2002 Data Encryption Usage.

3)  200702: Map MAC to DKPTM7-2007 MAC Generate/Verify Variant.

4)  20030B: Map MangePrint to DKPTM3-2003 Data Encryption Usage.

5)  000004: MagTek Token is RFU, 0000 ID does not exist (this is default
    value).

6)  000004: User Data is RFU, 0000 ID does not exist (this is default
    value).

7)  200207: Map PIN-AES to DKPTM2-2002 PIN Encryption Usage.

<figure>
<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image1.png"
style="width:5.23264in;height:2.34861in"
alt="Graphical user interface, text, application, email Description automatically generated" />
<figcaption><p>Figure 1 - Configuration Usage Values</p></figcaption>
</figure>

### Miniature Certificate Type (MAGTEK INTERNAL ONLY)

Table 62 - Miniature Certificate Type

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><strong>FF01</strong> = Start Of Miniature Certificate
Marker</td>
</tr>
<tr>
<td>81</td>
<td>08</td>
<td>Miniature Certificate Info and ID</td>
<td>B</td>
<td>R</td>
<td>81 08 50 01 01 00 C2 C2 C2 C2</td>
</tr>
<tr>
<td>83</td>
<td>02</td>
<td>Public Key Info</td>
<td>B</td>
<td>R</td>
<td>83 02 10 04</td>
</tr>
<tr>
<td>84</td>
<td>40</td>
<td>Public Key, 64 bytes for ECDSA Curve P-256</td>
<td>B</td>
<td>R</td>
<td>84 40 then 64 bytes</td>
</tr>
<tr>
<td>86</td>
<td>00</td>
<td>Reserved for RSA cipher</td>
<td>B</td>
<td>O</td>
<td>86 00</td>
</tr>
<tr>
<td>90</td>
<td>04</td>
<td><p>Signing Miniature Certificate ID</p>
<p>Signed by Base Miniature Certificate</p></td>
<td>B</td>
<td>R</td>
<td>90 04 CA CA CA CA</td>
</tr>
<tr>
<td>91</td>
<td>01</td>
<td><p>Signing Algorithm</p>
<p>SHA-256, ECDSA Curve P-256</p></td>
<td>B</td>
<td>R</td>
<td>91 01 01</td>
</tr>
<tr>
<td>9E</td>
<td>40</td>
<td><p>Signature</p>
<p>(64 bytes for ECDSA P-256)</p></td>
<td>B</td>
<td>R</td>
<td>9E 40 then 64 bytes</td>
</tr>
<tr>
<td colspan="6"><p>Padding</p>
<p>Pad with 0xCA to make the total length of the data object 512
bytes.</p></td>
</tr>
</tbody>
</table>

### Firmware File Type (MAGTEK INTERNAL ONLY)

Please refer to ***D100006342 DYNAFLEX, DYNAPROX, DYNAFLEX II GO FAMILY
EMV CONTACTLESS/NFC CARD READER AND WRITER DEVICE FIRMWARE UPDATE
PROCESS,*** for more information on Firmware File Types.

### TrackType Type (MAGTEK INTERNAL ONLY FOR NOW)

The **TrackType** TLV data object is used to define magnetic stripe data
and variations thereof.

Table 63 - Response Track Type

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>81</td>
<td>04</td>
<td>Track Data Descriptor</td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Track ID</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Track 1</p></li>
<li><p>0x02 = Track 2</p></li>
<li><p>0x03 = Track 3</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Track Status</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x01 = Empty</p></li>
<li><p>0x02 = Disabled</p></li>
<li><p>0x81 = No Start Sentinel</p></li>
<li><p>0x82 = No End Sentinel</p></li>
<li><p>0x83 = Bad Parity</p></li>
<li><p>0x84 = Bad LRC</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Track Encoding</p>
<ul>
<li><p>0x05 = 5-bit Encoding</p></li>
<li><p>0x07 = 7-bit Encoding</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Track Data Format (ORed bits)</p>
<ul>
<li><p>OR 0b00000001 = No Start Sentinel</p></li>
<li><p>OR 0b00000010 = No End Sentinel</p></li>
<li><p>OR 0b00000100 = No LRC</p></li>
<li><p>OR 0b00001000 = No Masking</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Track Data</p>
<p>ASCII characters, no null at end</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

### CardData Type (MAGTEK INTERNAL ONLY FOR NOW)

The **CardData** TLV data object is used to contain all available
information about non-EMV cards.

Table 64 - Response Card Data Type (wip)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 5%" />
<col style="width: 63%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>81</td>
<td>04</td>
<td>Card Data Descriptor</td>
<td></td>
<td>R</td>
<td>See below.</td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Status</p>
<ul>
<li><p>0x00 = OK</p></li>
<li><p>0x80 = No Data (occurs when send track errors needed)</p></li>
</ul></td>
<td></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Source</p>
<ul>
<li><p>0x01 = Swipe</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Card Type</p>
<ul>
<li><p>0x00 = Unknown</p></li>
<li><p>0x01 = ISO</p></li>
<li><p>0x02 = AAMVA</p></li>
<li><p>0x03 = Other</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td>Reserved, set to 0x00</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A4</td>
<td></td>
<td>List of Track Types</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/A0</td>
<td></td>
<td>Track x</td>
<td>*</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/A0</td>
<td></td>
<td>Track y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>/A0</td>
<td></td>
<td>Track z</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>A6</td>
<td></td>
<td>List of Encrypted Block Types - SRED + TBD</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>/80</td>
<td></td>
<td>Enc Block 1</td>
<td>*</td>
<td></td>
<td></td>
</tr>
<tr>
<td>/80</td>
<td></td>
<td>Enc Block ..n</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

P5 List of Encrypted Blocks

- List elements are each tagged with P0.

- The assumption is that data using the same crypto info would exist in
  one block.

- An example of multiple blocks encrypted under different keys would be
  track data vs MagnePrint.

EncryptedBlockType - tbd

- P1 - Encrypt Info

  - P1 - Algorithm

  - P2 - Padding method (default to PKCS7)

  - P3 - KSN or Key ID

  - P4 - IV

- P2 - List of encrypted elements

  - IV?

  - Unencrypted Length

  - Data elements ID

  - Encrypted Data

### TagsType Type (MAGTEK INTERNAL ONLY FOR NOW)

The **TagsType** TLV data object is used to contain unstructured lists
of tag/value pairs, for example, for reading or writing the contents of
tag databases used to configure EMV terminal and application settings.

### TLVType Type (MAGTEK INTERNAL ONLY FOR NOW)

The **TLVType** data object is used to contain structured TLV objects,
for example, for conveying the data used in processing EMV transactions.

### Common File Structure

Some files types conform to the common file structure format that
follows.

The following is a list of file types that conform to this format.

1)  EMV file types

2)  **Certificate File Types**

3)  **Certificate Signing Request (CSR) File Types**

<table>
<caption><p>Table 65 - Common File Structure</p></caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6"><strong>MGTKAP10</strong> = Start Of File Marker</td>
</tr>
<tr>
<td>C1</td>
<td>4</td>
<td><p>File Type</p>
<p>See ­Table 196</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>CE</td>
<td>var</td>
<td><p>File Payload</p>
<p>See the “File Type” subsections of section <strong>4 Data Types and
Shared TLV Data Objects</strong>.</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
</tbody>
</table>

### Certificate File Types

These file types are listed in ­Table 196.

These file types conform to the **Common File Structure** format.

The File Payload of these files contain a certificate in PEM format.

Certificates must be loaded into the device in the order of trust
starting with the root CA, next intermediate CA(s) and ending with the
leaf (server or client for example) so that the device can verify the
signature of each certificate. If the certificates are not loaded in
order, they will be rejected.

When loading a server cert, the associated key pair must already exist
in the device as the CSR keys or as the existing server or client cert
and will be used to verify that the public key contained in the
certificate is correct. If the keys don’t match the certificate will be
rejected. If the certificate is associated with the CSR keys, the CSR
keys will be associated with the certificate and will no longer be
available for other certificates until re-generated.

Initial server or client certificates can not be loaded until the
respective CSR keys and CSR is generated.

To generate a CSR see **Command 0xEF03 – Generate CSR (WLAN Only)**.

### Certificate Signing Request (CSR) File Types

These file types are listed in ­Table 196.

These file types conform to the **Common File Structure** format.

The File Payload of these files contain a certificate signing request in
PEM format.

To generate a CSR see **Command 0xEF03 – Generate CSR (WLAN Only)**.

The device will erase the CSR file from volatile memory after the host
fetches it with **Command 0xD821 - Start Get File from Device**. After
fetching the CSR, the keys used to generate the CSR will still exist in
non-volatile memory associated with a CSR and can be used to generate a
new CSR if needed.

### UI Configuration File Type (MAGTEK INTERNAL ONLY)

The UI configuration file will be in the following 3 file format during
it’s life time:

1)  Text or .csv file.

2)  TLV binary file.

3)  Signed UI configuration file.

The UI Configuration file may contain maximum 300 items (valid String
IDs from 0x0000 to 0x012B, and maximum String length is 30 characters).

The MagTek software tool will convert the “Text or .csv file” to the
“TLV binary file”, and then sign the “TLV binary file” into “Signed UI
configuration file”.

An example of a Text file displayed in ASCII format. (file name:
CFG0006869-100.xxx)

DISPLAY STRING ID, DISPLAY STRING

0000,

0000,Thank You

0002,See You!

0003,Hello!

0004,Please Select

0005,Please Select An Amount

0006,Please Select A Tip Amount

0007,Touch Screen To Continue

0008,Cancel

0009,Service Request

000A,Show More

000B,Options

000C,What is the issue?

000D,Exit

000E,No hot water

000F,Doesn’t spin

0010,Water leakage

0011,Request

The Text file below is displayed in Hex format.

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image2.png"
style="width:4.5974in;height:3.12795in"
alt="A screenshot of a computer Description automatically generated" />

The MagTek software tool will convert the above Text file into “TLV
binary file”.

This Text file has 18 items, each item contains a two-byte Tag, one-byte
Length, and variable-length of Value.

For example, the first TLV item is 00 00 01 20.

00 00 01 20 00 01 09 54 68 61 6e 6b 20 59 6f 75

00 02 08 53 65 65 20 59 6f 75 21 00 03 06 48 65

6c 6c 6f 21 00 04 0d 50 6c 65 61 73 65 20 53 65

6c 65 63 74 00 05 17 50 6c 65 61 73 65 20 53 65

6c 65 63 74 20 41 6e 20 41 6d 6f 75 6e 74 00 06

1a 50 6c 65 61 73 65 20 53 65 6c 65 63 74 20 41

20 54 69 70 20 41 6d 6f 75 6e 74 00 07 18 54 6f

75 63 68 20 53 63 72 65 65 6e 20 54 6f 20 43 6f

6e 74 69 6e 75 65 00 08 06 43 61 6e 63 65 6c 00

09 0f 53 65 72 76 69 63 65 20 52 65 71 75 65 73

74 00 0a 09 53 68 6f 77 20 4d 6f 72 65 00 0b 07

4f 70 74 69 6f 6e 73 00 0c 12 57 68 61 74 20 69

73 20 74 68 65 20 69 73 73 75 65 3f 00 0d 04 45

78 69 74 00 0e 0c 4e 6f 20 68 6f 74 20 77 61 74

65 72 00 0f 0c 44 6f 65 73 6e 27 74 20 73 70 69

6e 00 10 0d 57 61 74 65 72 20 6c 65 61 6b 61 67

65 00 11 07 52 65 71 75 65 73 74

The MagTek software tool will generate a secure header and sign the “TLV
binary file” (the payload) into the

“Signed UI configuration file”. The format of the “Signed UI
configuration file” is shown in Table 66 - Format of a Signed UI
Configuration File.

#### Process UI Configuration File

##### Step 1: Convert Text File Into a Binary File

| THE LEFT HAND SIDE DISPLAYS THE CONTENTS | THE RIGHT HAND SIDE DISPLAYS THE HEX VALUES OF THE TEXT FILE GENERATED BY EDIT. |
|----|----|
| <img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image3.png"
style="width:2.03889in;height:2.825in"
alt="A screenshot of a computer screen Description automatically generated" /> | <img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image2.png"
style="width:4.10417in;height:2.79236in"
alt="A screenshot of a computer Description automatically generated" /> |
| Note: Please be aware of the fact that Item ID 0000 has the content of 0x20 (space) |  |

###### Example \#1

Text Input (ASCII): 0001,Thank You

Text Input (Binary): 30303031215468616E6B20596F750D0A

Binary Output: 0001095468616E6B20596F75

09 is the number of bytes in the message string.

5468616E6B20596F75 is the ASCII code of Thank You.

###### Example \#2:

Text Input (ASCII): 0002,See You!

Text Input (Binary): 303030322153656520596F75210D0A

Binary Output: 00020853656520596F7521

08 is the number of bytes in the message string.

53656520596F7521 is the ASCII code of See You!.

###### Example \#3:

Text Input (ASCII): 0001,Thank You

0002,See You!

Binary Output: 0001095468616E6B20596F7500020853656520596F7521

If the text file only contains 2 items, then the above Binary Output is
the payload for signing.

A UI Configuration file may contain maximum 300 items.

**Note**: For each iteam, ID has 2 bytes, Length has 1 byte, Message
String has \<= 30 bytes.

Test file in Hex values:

30 30 30 30 2c 20 0d 0a

30 30 30 31 2c 54 68 61 6e 6b 20 59 6f 75 0d 0a

30 30 30 32 2c 53 65 65 20 59 6f 75 21 0d 0a

30 30 30 33 2c 48 65 6c 6c 6f 21 0d 0a

30 30 30 34 2c 50 6c 65 61 73 65 20 53 65 6c 65 63 74 0d 0a

30 30 30 35 2c 50 6c 65 61 73 65 20 53 65 6c 65 63 74 20 41 6e 20 41 6d
6f 75 6e 74 0d 0a

30 30 30 36 2c 50 6c 65 61 73 65 20 53 65 6c 65 63 74 20 41 20 54 69 70
20 41 6d 6f 75 6e 74 0d 0a

30 30 30 37 2c 54 6f 75 63 68 20 53 63 72 65 65 6e 20 54 6f 20 43 6f 6e
74 69 6e 75 65 0d 0a

30 30 30 38 2c 43 61 6e 63 65 6c 0d 0a

30 30 30 39 2c 53 65 72 76 69 63 65 20 52 65 71 75 65 73 74 0d 0a

30 30 30 41 2c 53 68 6f 77 20 4d 6f 72 65 0d 0a

30 30 30 42 2c 4f 70 74 69 6f 6e 73 0d 0a

30 30 30 43 2c 57 68 61 74 20 69 73 20 74 68 65 20 69 73 73 75 65 3f 0d
0a

30 30 30 44 2c 45 78 69 74 0d 0a

30 30 30 45 2c 4e 6f 20 68 6f 74 20 77 61 74 65 72 0d 0a

30 30 30 46 2c 44 6f 65 73 6e 27 74 20 73 70 69 6e 0d 0a

30 30 31 30 2c 57 61 74 65 72 20 6c 65 61 6b 61 67 65 0d 0a

30 30 31 31 2c 52 65 71 75 65 73 74

The Text file has been converted into binary file: (.bin):

00 00 01 20 00 01 09 54 68 61 6e 6b 20 59 6f 75

00 02 08 53 65 65 20 59 6f 75 21 00 03 06 48 65

6c 6c 6f 21 00 04 0d 50 6c 65 61 73 65 20 53 65

6c 65 63 74 00 05 17 50 6c 65 61 73 65 20 53 65

6c 65 63 74 20 41 6e 20 41 6d 6f 75 6e 74 00 06

1a 50 6c 65 61 73 65 20 53 65 6c 65 63 74 20 41

20 54 69 70 20 41 6d 6f 75 6e 74 00 07 18 54 6f

75 63 68 20 53 63 72 65 65 6e 20 54 6f 20 43 6f

6e 74 69 6e 75 65 00 08 06 43 61 6e 63 65 6c 00

09 0f 53 65 72 76 69 63 65 20 52 65 71 75 65 73

74 00 0a 09 53 68 6f 77 20 4d 6f 72 65 00 0b 07

4f 70 74 69 6f 6e 73 00 0c 12 57 68 61 74 20 69

73 20 74 68 65 20 69 73 73 75 65 3f 00 0d 04 45

78 69 74 00 0e 0c 4e 6f 20 68 6f 74 20 77 61 74

65 72 00 0f 0c 44 6f 65 73 6e 27 74 20 73 70 69

6e 00 10 0d 57 61 74 65 72 20 6c 65 61 6b 61 67

65 00 11 07 52 65 71 75 65 73 74

##### Step 2: Sign the Binary Output File

This signing process is very similar to the Image Signing process.

Assume the Text file name is CFG0006869-100.xxx, then CFG0006869-100 (in
ASCII format) will be placed in the Required String 1. And, CFG0006869
is the part number, 100 is the revision number.

The Host App may retrieve this information (CFG0006869-100) from OID
0x020102080101.

<table>
<caption><p>Table 66 - Format of a Signed UI Configuration
File</p></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 31%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Description</th>
<th style="text-align: center;">Value (example)</th>
<th style="text-align: center;">Offset</th>
</tr>
</thead>
<tbody>
<tr>
<td>N/A</td>
<td>8</td>
<td><p>Apollo File Marker:</p>
<p>‘MGTKAP10’</p></td>
<td style="text-align: center;"><p>4D 47 54 4B</p>
<p>41 50 31 30</p></td>
<td style="text-align: center;">0000 - 0007</td>
</tr>
<tr>
<td>C1</td>
<td>4</td>
<td>File ID</td>
<td style="text-align: center;"><p>C1 04</p>
<p>06 00 00 00</p></td>
<td style="text-align: center;">0008 – 000D</td>
</tr>
<tr>
<td>E3</td>
<td><p>sum</p>
<p> </p></td>
<td><p>File Description Strings</p>
<p>Required String 1: CFG0006869-100</p>
<p>Optional String 2</p>
<p>Optional String 3</p></td>
<td style="text-align: center;"><p>E3 14</p>
<p>81 0E 14bytes</p>
<p>82 00</p>
<p>83 00</p></td>
<td style="text-align: center;">000E – 0023</td>
</tr>
<tr>
<td>E5</td>
<td>sum</td>
<td>File Manifest</td>
<td style="text-align: center;">E5 1A</td>
<td style="text-align: center;">0024 – 0025</td>
</tr>
<tr>
<td>81</td>
<td>4</td>
<td><p>Product/Module Type</p>
<p>00 00: UI Config File</p>
<p>02 00: Main App</p></td>
<td style="text-align: center;"><p>81 04</p>
<p>00 00</p>
<p>02 00</p></td>
<td style="text-align: center;">0026 – 002B</td>
</tr>
<tr>
<td>82</td>
<td>2</td>
<td><p>Payload Type</p>
<p>0000: uncompressed</p></td>
<td style="text-align: center;"><p>82 02</p>
<p>00 00</p></td>
<td style="text-align: center;">002C – 002F</td>
</tr>
<tr>
<td>83</td>
<td>4</td>
<td><p>Payload Offset</p>
<p>Offset is 0x00000200</p></td>
<td style="text-align: center;"><p>83 04</p>
<p>00 00 02 00</p></td>
<td style="text-align: center;">0030 - 0035</td>
</tr>
<tr>
<td>86</td>
<td>4</td>
<td>Customer ID</td>
<td style="text-align: center;"><p>86 04</p>
<p>00 00 00 00</p></td>
<td style="text-align: center;">0036 – 003B</td>
</tr>
<tr>
<td>A8</td>
<td>v</td>
<td>Constraints</td>
<td style="text-align: center;">A8 00</td>
<td style="text-align: center;">003C – 003D</td>
</tr>
<tr>
<td>A9</td>
<td>v</td>
<td>Extra Operations</td>
<td style="text-align: center;">A9 00</td>
<td style="text-align: center;">003E – 003F</td>
</tr>
<tr>
<td>E7</td>
<td>sum</td>
<td>File Security</td>
<td style="text-align: center;">E7 81 DF</td>
<td style="text-align: center;">0040 – 0042</td>
</tr>
<tr>
<td>81</td>
<td>4</td>
<td><p>Sequence Number</p>
<p># = 0xnm</p></td>
<td style="text-align: center;"><p>81 04</p>
<p>00 00 00 nm</p></td>
<td style="text-align: center;">0043 – 0048</td>
</tr>
<tr>
<td>82</td>
<td>4</td>
<td>Time Stamp</td>
<td style="text-align: center;"><p>82 04</p>
<p>5f 18 88 10</p></td>
<td style="text-align: center;">0049 – 004E</td>
</tr>
<tr>
<td>84</td>
<td>1</td>
<td><p>Hash Algorithm</p>
<p>0x04 = SHA-256</p></td>
<td style="text-align: center;"><p>84 01</p>
<p>04</p></td>
<td style="text-align: center;">004F - 0051</td>
</tr>
<tr>
<td>85</td>
<td>4</td>
<td>Payload Length</td>
<td style="text-align: center;"><p>85 04</p>
<p>00 00 WX YZ</p></td>
<td style="text-align: center;">0052 - 0057</td>
</tr>
<tr>
<td>86</td>
<td>32</td>
<td><p>Payload Hash Checksum</p>
<p>(Note 1)</p></td>
<td style="text-align: center;"><p>86 20</p>
<p>plus 32 bytes</p></td>
<td style="text-align: center;">0058 – 0079</td>
</tr>
<tr>
<td>88</td>
<td>159</td>
<td><p>Signing mini-cert</p>
<p>159 bytes of Certificate, see 4.20 Miniature Certificate
Type.</p></td>
<td style="text-align: center;"><p>88 81 9F</p>
<p>plus 159 bytes</p></td>
<td style="text-align: center;">007A – 011B</td>
</tr>
<tr>
<td>89</td>
<td>4</td>
<td><p>Signature OP,</p>
<p>Data Sig + ECDSA + P256 + SHA256 (Note 2)</p></td>
<td style="text-align: center;"><p>89 04</p>
<p>10 01 03 04</p></td>
<td style="text-align: center;">011C - 0121</td>
</tr>
<tr>
<td>CC</td>
<td>64</td>
<td><p>Signature</p>
<p>64 bytes of signature</p></td>
<td style="text-align: center;"><p>CC 40</p>
<p>plus 64 bytes</p></td>
<td style="text-align: center;">0122 – 0163</td>
</tr>
<tr>
<td> </td>
<td> </td>
<td>512-byte Alignment</td>
<td style="text-align: center;">File up 0xFF</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><p>Payload</p>
<p>(TLV binary file)</p></td>
<td style="text-align: center;">0xWXYZ bytes</td>
<td style="text-align: center;">0200 – End of File</td>
</tr>
<tr>
<td colspan="5"><p><strong>Note 1</strong>: “Payload Hash Checksum”
include all the bytes of the “TLV binary file”.</p>
<p><strong>Note 2</strong>: Hash Checksum for the signature include the
bytes starts from 0x0000 to 0x121.</p></td>
</tr>
</tbody>
</table>

Host application sends the “Signed UI configuration file” to the device
with 0xD812 command

File ID for UI Configuration File is 0x06000000.

<table>
<caption><p>Table 67 - Format of an UI Configuration File Signing
Mini-cert Signed by the Base Mini-cert</p></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 11%" />
<col style="width: 29%" />
<col style="width: 28%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Description</th>
<th style="text-align: center;">Value (example)</th>
<th style="text-align: center;">Offset</th>
</tr>
</thead>
<tbody>
<tr>
<td>FF01</td>
<td>N/A</td>
<td>Mini-cert Marker</td>
<td style="text-align: center;">FF,91</td>
<td style="text-align: center;">0000 - 0001</td>
</tr>
<tr>
<td>81</td>
<td>8</td>
<td>Mini-cert Info and ID</td>
<td style="text-align: center;"><p>81,08,</p>
<p>50,01,01,00</p>
<p>C2,C2,C2,C2</p></td>
<td style="text-align: center;">0002 – 000B</td>
</tr>
<tr>
<td>83</td>
<td>2</td>
<td>Public Key Info</td>
<td style="text-align: center;">83,02,10,04</td>
<td style="text-align: center;">000C – 000F</td>
</tr>
<tr>
<td>84</td>
<td>64</td>
<td>Public Key, 64 bytes for ECDSA Curve P-256</td>
<td style="text-align: center;"><p>84,40,</p>
<p>64 bytes</p></td>
<td style="text-align: center;">0010 – 0051</td>
</tr>
<tr>
<td>86</td>
<td>0</td>
<td>Reserved for RSA cipher</td>
<td style="text-align: center;">86,00</td>
<td style="text-align: center;">0052 – 0053</td>
</tr>
<tr>
<td>90</td>
<td>4</td>
<td><p>Signing Mini-cert ID</p>
<p>(signed by Base mini-cert)</p></td>
<td style="text-align: center;"><p>90,04,</p>
<p>CA,CA,CA,CA</p></td>
<td style="text-align: center;">0054 – 0059</td>
</tr>
<tr>
<td>91</td>
<td>1</td>
<td><p>Signing Algorithm</p>
<p>SHA-256, ECDSA Curve P-256</p></td>
<td style="text-align: center;"><p>91,01,</p>
<p>01</p></td>
<td style="text-align: center;">005A – 005C</td>
</tr>
<tr>
<td>9E</td>
<td>64</td>
<td><p>Signature</p>
<p>(64 bytes for ECDSA P-256)</p></td>
<td style="text-align: center;"><p>9E,40,</p>
<p>64 bytes</p></td>
<td style="text-align: center;">005D – 009E</td>
</tr>
</tbody>
</table>

##### Step 3: Send the Signed UI Configuration File to the Device with 0xd812 Command

File ID for UI Configuration File is 0x06000000.

Send the signed UI Configuration File to the device with MagTek DTE App.

#### Authenticate and Save the signed UI configuration file

**The Device Will Verify the Mini cert in the Signed UI Configuration
File as Follows:**

- Step \#1: Fetch the Base mini-cert Public Key from the Base mini-cert
  resides in the Boot-0 image.

- Step \#2: Hash the Signing mini-cert (exclude the Signature TLV) into
  sha_cksum\[32\], it is a 32-byte array holds the result of SHA-256
  operation. These Hash operation parameters are derived from the
  Signing mini-cert in the secure header of the signed UI configuration
  file.

- Step \#3: Initialize ECDSA context.

- Step \#4: Load NIST EC Curve P-256 parameters into ECDSA context.

- Step \#5: Load Base mini-cert Public Key fetched in Step \#1 into
  ECDSA context.

- Step \#6: Load sha_cksum\[32\] and signature into ECDSA context. These
  signature validation parameters are derived from the Signing mini-cert
  in the secure header of the signed UI configuration file.

- Step \#7: Validate the signature per SECG – SEC1 Elliptic Curve
  Cryptography, Version 2.0, Section 4.1.4. (SECG = Standards for
  Efficient Cryptography Group)

**Verify the Signature of the Signed UI Configuration File:**

- Step \#1: Hash the payload into sha_cksum\[32\], it is a 32-byte array
  holds the result of SHA-256 operation on the payload. These Hash
  operation parameters are derived from the secure header of the signed
  UI configuration file, such as Signature Algorithm, Payload Offset,
  Payload Size, and the Payload.

- Step \#2: Verify the contents of sha_cksum\[32\] from Step \#1 match
  the contents of Payload Hash Checksum in the secure header.

- Step \#3: Hash the secure header (exclude the signature TLV) into
  sha_cksum\[32\].

- Step \#4: Initialize ECDSA context.

- Step \#5: Load NIST EC Curve P-256 parameters into ECDSA context.

- Step \#6: Get the UI configuration file Authentication Public Key from
  the Signing mini-cert in the secure header, load this Key into ECDSA
  context.

- Step \#7: Get the signature from the secure header, load
  sha_cksum\[32\] and signature into ECDSA context. These signature
  validation parameters are derived from the secure header of the signed
  UI configuration file, such as Signature Algorithm, Signature Offset,
  Signature Size, and the Signature.

- Step \#8: Validate the signature per SECG – SEC1 Elliptic Curve
  Cryptography, Version 2.0, Section 4.1.4. (SECG = Standards for
  Efficient Cryptography Group)

Save the signed UI configuration file and the Part Number and Revision
to the file system.

#### Self-Authenticate the Saved UI Configuration File 

During power-up, the device will retrieve and authenticate the saved UI
configuration file. The device will read the signed UI configuration
file, and then authenticate the file the same way as described **Step 3:
Send the Signed UI Configuration File to the Device with 0xd812
Command.**

### Card Emulation

#### Card Emulation Overview

Card emulation enables a DynaFlex/DynaProx device to simulate a Type 4
smart card. The emulated card has the following characteristics:

- Compliance: Card emulation conforms to ISO/IEC 14443 Type-A and NFC
  Forum Type 4 standards.

- Passive Operation: The emulated card functions in passive mode. The
  phone is responsible for generating the magnetic field required to
  activate the simulated card.

- Read-Only: The emulated card is read-only and does not support
  writing.

- Supported Data Type: Supports the URI (URL) data type.

#### Device Compatibility 

- iPhone Support: NFC card reading was introduced on Apple iPhones
  starting with the iPhone 7.

- Android Support: Android added NFC support in 2012; however,
  compatibility depends on the specific phone model and hardware
  capabilities. Most Android phones released since 2016 support NFC.
  Verify with the phone’s manufacturer to confirm compatibility.

- Google Pay Indicator: If a phone supports Google Pay, it is likely
  capable of reading NFC tags.

## Security

### About Message Authentication Codes (MAC)

“MAC” is an abbreviation of Message Authentication Code, which is a
string of bytes included in a message that can be used to provide
reasonable assurance that the message originated from a trusted source
and has not been modified.

#### MACs for EMV Data

This section describes how to calculate MACs for EMV ARQC and EMV Batch
Data.

The key and variant used to calculate the MAC is determined by how the
**DUKPT Key Mapping** is mapped, this can be set-up for TDES or AES
mode.

The key used to calculate the MAC is normally the same key used to
encrypt the encrypted data included as part of the same data structure.
For TDES MAC, the key variant is always ***Message Authentication,
Request or Both Ways***. For AES MAC, this can be AES-128 or AES-256,
the valid usages are: 0x08=MAC Generate, 0x0A=MAC Generate/Verify.

For TDES MAC:

ANSI X9.24-3-2017

The MAC operations follow the CBC procedure described in ISO 16609
Section C.4 using padding method 1 defined in ISO 9797 section 6.1.1.

For AES CMAC:

NIST Special Publication 800-38B

Section 6.2 MAC Generation

The data structure for both EMV ARQC and EMV Batch Data has the
following format related to MACing:

AAAA /\* 2-byte MSB message length excluding padding and CBC-MAC \*/

F9\<len\> /\* container for MAC structure and generic data \*/

DFDF54(MAC KSN)\<len\>\<val\>

DFDF55(MAC Encryption Type)\<len\>\<val\>

DFDF25(IFD Serial Number)\<len\>\<val\>

\<Nested TLV data objects specific to the message\>

\<Padding to force the 2-byte MSB message length plus F9 plus padding to
be a multiple of 8 bytes\>

\<Four byte CBC-MAC of all data starting with the 2-byte MSB message
length and ending with the last byte of padding (if any)\>

### About Key Serial Numbers (KSNs)

The device can use two different types of keys: Triple Data Encryption
Standard (TDES) DUKPT Keys and AES DUKPT Keys. The Key Serial Number
(KSN) format is slightly different depending on which type of key is
injected into the key slot that is being used by the operation being
performed or the data being passed.

When the device and host are using TDES keys, the Key Serial Number
(KSN) is an 80-bit value. The rightmost 21 bits are the current value of
the encryption counter associated with that key. The leftmost 59 bits
are the **Initial KSN** for that key, which is specified during key
injection and is a combination of the **Key Set ID** that identifies the
Base Derivation Key (BDK) injected into the device during manufacture,
and the device’s serial number (DSN); how those two values are combined
into the 59 bit Initial KSN is defined by a convention the customer
defines when architecting the solution, with support from MagTek. For
example, one common scheme is to concatenate a 7 hex digit (28 bit) Key
Set ID, a 7 hex digit (28 bit) Device Serial Number, and a 3 bit
**Initial Key Load Counter** the injecting host increments each time the
same key is re-loaded into the device. In these cases, the key can be
referenced by an 8-digit MagTek part number (“key ID”) consisting of the
7 hex digit Key Set ID plus a trailing “0.”

### About Encryption and Decryption

Some data exchanged between the device and the host is encrypted. This
includes parts of the **EMV ARQC Type** and the **EMV Batch Data Type**.
To decrypt this data, the host must first determine what key to use,
then decrypt the data. The following sections explain each of those
steps in detail.

### How to Determine the Key

When the device and the host are using TDES DUKPT key and the device is
encrypting data, the host software must do the following to generate a
key (the “derived key”) to use for decryption:

1)  **Determine the value of the Initial Key loaded into the device**.
    The lookup methods the host software uses depend on the overall
    solution architecture, and are outside the scope of this document.
    However, most solutions do this in one of two ways, both of which
    use the Initial Key Serial Number that arrives with the encrypted
    data:

    1)  Look up the value of the Base Derivation Key using the Initial
        KSN portion of the current KSN as an index value, then use TDES
        DUKPT algorithms to calculate the value of the Initial Key; or

    2)  Look up the value of the Initial Key directly, using the Initial
        KSN portion of the current KSN as an index value.

2)  **Derive the current key**. Apply TDES DUKPT algorithms to the
    Initial Key value and the encryption counter portion of the KSN that
    arrives with the encrypted data.

3)  **Determine which variant of the current key the device used to
    encrypt**. The variants are defined in ***ANS X9.24-1:2009 Annex
    A***, which programmers of host software must be familiar with.
    Which variant the host should use depends on the type of data the
    host is decrypting. The encrypted portions of EMV ARQC and EMV Batch
    Data both use the *Data Encryption, Request or Both Ways* variant.

4)  Use the variant algorithm with the current key to calculate that
    variant.

5)  Decrypt the data according to the steps in section **5.5 How to
    Decrypt Data**.

### How to Decrypt Data

For EMV ARQC and EMV Batch Data, the device begins by TDES encrypting
the first 8 bytes of clear text data. The 8-byte result of this
encryption is placed in an encrypted data buffer. The process continues
using the TDES CBC (Cipher Block Chaining) method with the encrypted 8
bytes XORed with the next 8 bytes of clear text. That result is placed
in next 8 bytes of the encrypted data buffer, and the device continues
until all clear text bytes have been encrypted. If the final block of
clear text contains fewer than 8 bytes, the device pads the end of the
block to make 8 bytes. After the final clear text block is XORed with
the prior 8 bytes of encrypted data, the device encrypts it and places
it in the encrypted data value. No Initial Vector is used in the
process.

The host must decrypt the data in 8 byte blocks, ignoring any final
unused bytes in the last block. When a value consists of more than one
block, the host should use the CBC method to decrypt the data by
following these steps:

1)  Start decryption on the last block of 8 bytes (call it block N)
    using the key.

2)  XOR the result of the decryption with the next-last block of 8 bytes
    (block N-1).

3)  Repeat until reaching the first block.

4)  Do not XOR the first block with anything.

5)  Concatenate all blocks.

6)  Determine the expected length of the decrypted data. For EMV ARQC
    and EMV Batch Data this information is included as part of the
    unencrypted data structure.

7)  Truncate the end of the decrypted data block to the expected data
    length, which discards the padding at the end.

### 24 Hour Automatic Reset PCI Requirement

Due to Payment Card Industry (PCI) certification requirements, the
device must automatically reset at least once every 24 hours. This is
required for security purposes, so that the device can reinitialize
memory and perform a self-test. Host software developers and potentially
end users should be aware of this.

By default, the device will automatically reset 23 hours after it boots
up and it will attempt to send a warning notification message to the
host 3 minutes before the reset occurs.

The default behavior is adjustable. See the following for more
information.

**Property 1.2.7.1.1.4 Auto Reset Configuration**

**Property 1.2.7.1.1.3 Device Reset Will Occur Soon Notification
Control**

Device Reset Will Occur Soon notification in **Notification 0x1001 -
Device Information Update**

One way the host software could handle receiving a device reset will
occur notification would be as follows.

1)  Cancel any operation that is in process like a transaction if it is
    unlikely to end before the reset.

2)  Optionally send **Command 0x1F01 - Reset Device** instead of waiting
    for the automatic reset to occur.

3)  Re-connect with the device and re-start any operation that was in
    process.

### Device Lock Feature

The purpose of locking a device is to disable most of the device’s
functionality for use cases that need this extra layer of security. When
a device is locked, it will reject all commands except for a few. This
locks the majority of the device’s functionality. Use of the device lock
feature is optional. It is not required by PCI.

The device lock state can be either unlocked or locked. The device lock
state can be retrieved by getting a property.

The device lock state can be changed by setting a secure property or it
can be changed with a command that requires knowledge of the device lock
passcode.

The device can be configured to always have the device lock state set to
locked after a reset or power cycle by setting a property.

If the device has a display and the device is locked, the welcome screen
will display “WELCOME” “Device is Locked”. This screen can be
customized.

The device lock passcode can be changed by setting a secure property or
it can be changed with a command that requires knowledge of the current
device lock passcode.

The following commands and properties can be used to manage the device
lock feature:

**Command 0xEF06 – Change Device Lock State**

**Command 0xEF07 – Change Device Lock Passcode**

**Command 0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR
NOW)**

**Property 1.2.3.1.1.2 Custom Idle Page Image Device Locked (Display
Only)**

**Property 1.2.5.2.1.1 Device Lock State**

**Property 1.2.5.2.1.2 Device Lock State After Reset**

**Property 1.2.5.2.1.3 Device Lock Passcode**

Only the following commands are allowed when the device lock state is
set to locked:

**Command 0x1F01 - Reset Device**

**Command 0x1F03 - Extend Session (Session Management Only)**

**Command 0x1F04 – Terminate Bluetooth® LE Connection (Bluetooth® LE
Only)**

**Command 0xD101 - Get Property**

**Command 0xD112 - Set Property (Secured)**

**Command 0xDF01 - Echo**

**Command 0xE001 - Get Challenge**

**Command 0xEF06 – Change Device Lock State**

**Command 0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR
NOW)**

**Command 0xEF11 - Get Key Info**

**Command 0xEEEE - Send Secured Command to Device**

**  
**

## Commands

### Command Group 0x10nn - Transactions

#### Command 0x1001 - Start Transaction

The host uses this command to start a payment transaction.

The sequence of events for transactions with card readers enabled is
roughly as follows.

**(MCE Only)** The sequence for Manual Entry Mode is provided further
below.

1)  If the device is configured to enable user action event
    notifications using **Property 1.2.7.1.2.1 User Event Notification
    Controls Enable**, the cardholder may present a card or payment
    device before the host calls this command, and the device sends
    **Notification 0x1001 - Device Information Update** to the host to
    indicate it should call this command to start a transaction.

    1)  **(MSR Only)** In the case where the cardholder has swiped
        before the transaction started, the device temporarily stores
        the card swipe data for the period of time specified by
        **Property 1.2.7.1.2.2 User Event Notification MSR Data Timeout
        (MSR Only)** to make it available during the transaction. Later
        in this sequence, when the device would ordinarily prompt the
        cardholder to swipe, insert, or tap, the device briefly displays
        the same cardholder prompt, then automatically proceeds with the
        transaction using the temporarily stored card data. The
        cardholder does not have to swipe again.

    2)  **(EMV Contact Only \| EMV Contactless Only)** In the case where
        the cardholder has inserted or tapped before the transaction
        started, the host should call this command as quickly as
        possible while the card is still in the slot, or while the card
        or contactless payment device is still within tap range. The
        device does not begin contact or contactless reads until after
        the host invokes this command and does not store any data from
        the cardholder action event before the transaction is in
        process.

2)  The host composes a command request in the format below, and sends
    it to the device. It may cancel the transaction in process by
    calling **Command 0x1008 - Cancel Transaction**.

3)  The device sends a response in the format below, and waits for the
    cardholder to present payment using one of the enabled payment
    technologies.

4)  **(BCR Only)** If the cardholder scans a barcode, the device sends
    **Notification 0x0101 - Transaction Information Update** to report
    Barcode / Barcode Event / Type / Data Attached with the barcode data
    attached and terminates the transaction.

5)  After the cardholder presents payment, the device sends
    **Notification 0x0101 - Transaction Information Update** to report
    the payment technology being used / **Card Event**.

6)  **(MSR Only)** If **Property 1.2.1.1.1.1 Device-Driven Fallback
    Behavior (MSR Only)** is configured so the device automatically
    performs fallback operations, it performs them at this time
    following roughly the same sequence of steps as host-driven fallback
    described below. Device-driven fallback occurs at this point in the
    sequence within one iteration of this command, whereas host-driven
    fallback requires the host to re-send this command for each retry
    attempt.

7)  **(EMV Contact Only)** If the cardholder has inserted a chip card
    and there is more than one application the device and card mutually
    support:

    1)  **(Display Only)** The device prompts the cardholder to select
        the application to use.

    2)  **(No Display Only)** The device sends **Notification 0x1803 -
        User Interface Host Action Request** to report **Cardholder
        Selection Request**/ **Notification Payload** to prompt the
        cardholder to select the application to use. The host should
        respond by showing the prompt, receiving input from the
        cardholder, and calling **Command 0x1802 - Report Cardholder
        Selection** to report the selection result to the device.

8)  The device sends **Notification 0x0101 - Transaction Information
    Update** to report the payment technology being used / **Data Update
    / ARQC Update / Data Attached**.

9)  If the host specified **Quick Chip Transaction Flow** in the
    **Transaction Flow** parameter:

    1)  The device immediately constructs its own internal ARPC
        Response, with tag 8A set to ‘Z3’ to coordinate the transaction
        with the card or other payment method, and sends the host
        **Notification 0x0105 - Transaction Operation Complete** to
        report the payment technology being used / **Kernel Outcome** /
        **Quick Chip Deferred** /outcome detail. A Transaction Option
        parameter can be set to display on amount or not.

    2)  **(Display Only)** The device shows the message **REMOVE CARD**
        to notify the cardholder the card can be removed.

    3)  **(No Display only)** The device sends the host **Notification
        0x1803 - User Interface Host Action Request** to report
        **Display**/**Display Message**/**Data Attached** with message
        **REMOVE CARD** to notify the cardholder the card can be
        removed.

    4)  The host should then process the ARQC Message data, including
        replacing the default amount with the final transaction amount,
        and should coordinate with the transaction processor to retrieve
        a final transaction result. Because in this case the device is
        not involved in determining the final transaction result, it
        does not send a notification to the host to show **APPROVED** or
        **DECLINED**.

        1)  **(Display Only)** Instead, the host should call **Command
            0x1803 - Display Message (Display Only)** to show an
            appropriate message to the cardholder, such as **APPROVED**
            or **DECLINED**, based on the final transaction result.

        2)  **(No Display Only)** Instead, the host should use its local
            display to show an appropriate message to the cardholder,
            such as **APPROVED** or **DECLINED**, based on the final
            transaction result.

10) If the host specified **EMV Transaction Flow** in the **Transaction
    Flow** parameter:

    1)  The host processes the ARQC Message data and uses it to
        coordinate with the transaction processor to receive an ARPC
        Response, which it processes and sends to the device using
        **Command 0x1004 - Resume Transaction**.

    2)  The device waits for the period of time specified in **Property
        1.1.1.1.1.5 ARPC Receive Timeout**. If an ARPC timeout occurs,
        the device sends the ARQC again based on the setting in
        **Property 1.1.1.1.1.6 ARPC Retry Attempts**.

    3)  **(EMV Contact Only)** If the cardholder inserted a contact chip
        card, the device communicates with the card to determine whether
        to approve or decline the transaction.

    4)  The device sends the host **Notification 0x0105 - Transaction
        Operation Complete** to report the payment technology being used
        / **Kernel Outcome** / **Approved** or **Declined** /outcome.

    5)  **(Display Only)** The device shows **APPROVED** or **DECLINED**
        to notify the cardholder of the transaction result.

    6)  **(No Display Only)** The device sends the host **Notification
        0x1803 - User Interface Host Action Request** to report
        **Display**/**Display Message**/**Data Attached** with message
        **APPROVED** or **DECLINED** to notify the cardholder of the
        transaction result.

11) **(Touch Only)** If the card requires a signature, and if **Property
    1.2.1.1.2.1 Signature Capture Control** is set to **Device-driven
    Signature Capture**, and if the **Signature Capture Control (MSR
    Only)** command parameter does not apply to the current transaction,
    the device prompts the cardholder to sign.

12) The device sends **Notification 0x0101 - Transaction Information
    Update** to report the payment technology used / **Data Update /
    Batch Data / Data Attached**. **(Touch Only)** Depending on the
    setting in **Property 1.2.1.1.2.2 Include Signature Data in EMV
    Batch Data (Touch Only)**, the device includes any acquired
    signature data with the batch data.

13) The device sends **Notification 0x0105 - Transaction Operation
    Complete** to report the payment technology used / **Outcome** / the
    final result of the transaction.

14) **(MSR Only)** If **Property 1.2.1.1.1.1 Device-Driven Fallback
    Behavior (MSR Only)** is configured so the device does not perform
    fallback operations, and if the solution design requires payment
    brand fallback logic, the host may use the contents of the
    notifications above to implement fallback flow according to the
    following rules, which mimic the automatic fallback behaviors the
    device implements during a single invocation of this command. The
    primary difference is that the host must keep track of its own final
    **Fallback Indicator** instead of receiving it from the device in
    the **EMV ARQC Type**:

    1)  If the transaction was successful and the notification indicates
        Payment Technology is **EMV Contact** or **EMV Contactless**,
        there is no need to perform fallback-related operations.

    2)  If the transaction was successful and the notification indicates
        Payment Technology is **Magnetic Stripe Reader**, the host
        should check the contents of the **Card Type** tag DFDF52 in the
        **EMV ARQC Type** from the notification. Per payment brand
        fallback rules:

        1)  If **Card Type** is NOT **MSR Financial and Contact Chip
            Card (ICC)**, the host may continue with the current
            transaction attempt using the magnetic stripe data. There is
            no need to perform fallback-related operations.

        2)  If **Card Type** is **MSR Financial and Contact Chip Card
            (ICC)**, and the host has restarted the same transaction
            because a previous attempt failed with the notification
            indicating **MSR Fallback**, the chip card and the device
            communicated during the previous invocation of this command,
            and determined they are not compatible. The host may
            continue the current transaction using the magnetic stripe
            data.

        3)  If **Card Type** is **MSR Financial and Contact Chip Card
            (ICC)** and the host has NOT restarted the same transaction
            three times and failed with the notification indicating
            **Technical Fallback**, the card has a chip the cardholder
            should use so the transaction will be more secure. The host
            should guide the cardholder to use the chip card interface
            by sending **Command 0x1803 - Display Message** to direct
            the device to display **USE CHIP READER**, then repeat
            **Command 0x1001 - Start Transaction** and arm the device
            with the contact interface enabled. The host may opt to also
            arm the contactless interface.

        4)  If **Card Type** is **MSR Financial and Contact Chip Card
            (ICC)** and the host has restarted the same transaction
            three times and failed with the notification indicating
            **Technical Fallback**, the host may continue the current
            transaction using the magnetic stripe data.

    3)  If the transaction has failed and the notification indicates
        Payment Technology is **None**, something went wrong at the very
        beginning of the transaction (for example, the host canceled),
        and the host may simply end all attempts at performing the
        transaction, or it may opt to repeat the original transaction
        with the same payment technologies enabled.

    4)  If the transaction has failed and the notification indicates
        Payment Technology is **EMV Contact**, the host should examine
        the contents of the notification. Per payment brand fallback
        rules:

        1)  If the notification indicates **MSR Fallback**, the chip
            card and the device have communicated and have determined
            they are not compatible. The host should guide the
            cardholder to use the magnetic stripe interface by sending
            **Command 0x1803 - Display Message** to direct the device to
            display **USE MAGSTRIPE**, then repeat **Command 0x1001 -
            Start Transaction** and arm the device with the Magnetic
            Stripe Reader interface enabled. The host may opt to also
            arm the contactless interface.

        2)  If the host has NOT restarted the same transaction three
            times and failed with the notification indicating a
            **Technical Fallback**, the host should guide the cardholder
            to re-insert the chip card by sending **Command 0x1803 -
            Display Message** to direct the device to display **TRY
            AGAIN**, then repeat **Command 0x1001 - Start Transaction**
            and arm the device with the contact interface enabled. The
            host may opt to also arm the contactless interface.

        3)  If the host has restarted the same transaction three times
            and failed with the notification reporting **Technical
            Fallback**, the host should guide the cardholder to use the
            magnetic stripe reader by sending **Command 0x1803 - Display
            Message** to direct the device to display **USE MAGSTRIPE**,
            then repeat **Command 0x1001 - Start Transaction** and arm
            the device with the Magnetic Stripe Reader interface
            enabled. The host may opt to also arm the contactless
            interface.

15) (Touch Only) If **Property 1.2.1.1.2.1 Signature Capture Control**
    is set to **Host-driven Signature Capture** and the card requires a
    signature, the host should perform host-driven signature capture at
    this time. The device waits for the time period specified by
    **1.2.1.1.2.3 Signature Timing Window (Touch Only)**, providing a
    time window for the host to end the transaction by sending **Command
    0x1801 - Request Cardholder Signature**. At the end of that time
    window, if the host has not called that command, the device returns
    to the idle state.

16) **(EMV Contactless Only)** For NFC Tag, the flow is as follows:

<!-- -->

1)  Use Start Transaction command with the NFC enabled in Contactless
    Reader Mode

2)  If an NFC Tag is Detected

    1.  the terminal will send a notification that identifies the NFC
        card type, see **Notification 0x0101 - Transaction Information
        Update**

    2.  the terminal will send another notification with the UID as a
        payload, see **Table 298 - Notification Payload for Data Update,
        ARQC Update (Quick Chip), Data Attached**. If a card is
        configured with a random ID, its value will be changed every
        time the card gets detected. The host is responsible to retrieve
        the real UID.

3)  No ARQC or BATCH data will be sent

4)  The host application can continue interfacing with the NFC tag by
    sending pass-through commands

5)  When an NFC Tag gets out of the field, the terminal sends
    **Notification 0x0105 – 20 05 00 00 (PICC, NFC Tag, Tag Removed,
    Reserved)** indicating that the Tag has been removed.

<!-- -->

17) **(MCE Only)** For manual card entry, the sequence of events is as
    follows:

<!-- -->

1)  The host composes a command request in the format below with
    **Manual Entry Mode** parameters defined and other reader modes
    empty and sends it to the device. The host may cancel the
    transaction in process by calling **Command 0x1008 - Cancel
    Transaction**.

2)  The device presents a sequence of pages based on the setting of
    **Property 1.2.1.1.4.5 MIFARE Plus AES_Key1.**.

3)  The device creates Track 1 and 2 data based on the entered values.

4)  The device sends instances of **Notification 0x0101 - Transaction
    Information Update** to report each of the following:

    1.  Manual Card Entry, Card Event, Data Entered, Reserved

    2.  Manual Card Entry, Data Update, ARQC Update, Data Attached

    3.  Manual Card Entry, Data Update, Batch Update, Data Attached

<!-- -->

5)  The device sends **Notification 0x0105 - Transaction Operation
    Complete** to report **Manual Card Entry, Transaction Completed,
    Reserved, Reserved**.

<!-- -->

18) Tip Feature **(Touch Only)**

<u>Tip Operation Use Case Mode 1A</u>

1)  Use Tag A4 for Tip and Tax Options

2)  Use Byte 1 of Tag 81 under A4 to specify Tip mode

    1.  0x01 = Use % mode

    2.  0x02 = Use Amount mode

3)  Bytes 2 through 31 of Tag 81 specifies the % or \$ value to show for
    Buttons 1 thru 6. There is a button mode to control whether the
    button is going to show \$/%, CUSTOM, NO TIP, or is disabled.

4)  Tag 82 is the Tax Amount to Display

5)  DF5D = Tip Amount, DF5E = Tax Amount are used for reporting back to
    the host application.

6)  If available, tags DF5D and DF5E will be sent in the ARQC Data, see
    **Table 18 - EMV ARQC (DynaPro Format) Type** .

7)  The value of Tag 9F02 provided in command 0x1001 will be updated by
    the Device by adding TIP and TAX before passing that value to the
    kernels.

8)  See **Tip & Tax Display Limits (Touch Only)** for display
    limitations.

<u>Tip Operation Use Case Mode 1B</u>

1)  If **Property 1.1.1.1.2.1 Start Transaction on Touchscreen Event
    Control(Touch Only)** is Enabled, and there is a socket connection
    with the host, the device will show the **START SALE** button.

2)  When the cardholder touches the **START SALE** button, the device
    will automatically start a transaction by asking cardholder to enter
    the transaction amount. The device will show the **CUSTOM AMOUN**T
    screen. Press **ENTER** to set transaction amount. The Start
    Transaction parameters are taken from the settings of these
    properties

    1.  **Property 1.1.1.1.2.2 Tip Mode(Touch Only)**

    2.  Property 1.1.1.1.2.6 Tip Mode Enable Submit on Amount Button
        Press

    3.  **Property 1.1.1.1.3.2 Reader Options (Touch Only)**

    4.  **Property 1.1.1.1.3.3 Transaction Options (Touch Only)**

3)  The Device automatically sends a Notification – Transaction
    Information Update that a transaction has started, **Table 297 -
    Notification Detail Codes**.

4)  If the **CANCEL** button is touched, the device automatically sends
    a Notification – Transaction Information Update that a transaction
    is canceled, **Table 297 - Notification Detail Codes**.

5)  After amount is entered, device checks **Property 1.1.1.1.2.2 Tip
    Mode(Touch Only)** to determine if TIP mode is enabled, as well as
    the TIP parameters. The Device will show the **TIP SCREEN** or
    **CUSTOM AMT** screen per cardholder selection. Press **SUBMIT** to
    set TIP amount.

6)  The device checks **Property 1.1.1.1.2.3 Tax Rate (Touch Only**) to
    determine if taxes need to be calculated. If enabled, device
    calculates the Taxes per the tax rate specified in the property.

7)  If tax function is enabled, the device checks **Property 1.1.1.1.2.4
    Display Tax or Surcharge (Touch Only)** to determine how to show the
    label, tax or surcharge in the **SUMMARY SCREEN**

8)  Tax is only calculated on the amount entered, excluding TIP.

9)  Total Amount = Amount + Tip + Tax Total Amount is the value that
    will be used for Tag 9F02 of the transaction flow.

10) See **Tip & Tax Display Limits (Touch Only)** for display
    limitations.

<!-- -->

19) Audio Transducer Beep Flow:

<!-- -->

1)  Upon NFC tag detection, notify HOST

2)  Host sends 0x1001 to Start Transaction

3)  After NFC is activated - No Beep

4)  Host goes thru several Pass-Through commands to R/W NFC

5)  A parameter will be added to the Pass-Through command API to
    indicate if this is the last command

6)  If this is the last command, Device -\> Single Beep to indicate CARD
    CAN BE REMOVED. Turn-Off RF to shut down-card.

7)  If an error condition is detected, the device will end session,
    double-beep, Turn-Off RF to shut down the card.

<!-- -->

20) Command 0x1001 – Start a Payment Transaction with an option to show
    functional button Right **(Display Only)**

The host uses this command to start a payment transaction with an option
to display a **Present a Card** page and a green functional button Right
(e.g. Service Request button).

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image4.png"
style="width:3.375in;height:2.5625in"
alt="A close-up of a card reader Description automatically generated" /><img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image5.png"
style="width:2.55208in;height:3.375in"
alt="A white paper with black text Description automatically generated" />

When the cardholder presses the **Service Request** button, the device
will send a notification, show **PLEASE WAIT** and await the next
command from the host.

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image6.png"
style="width:3.47361in;height:2.64028in"
alt="A white background with black text AI-generated content may be incorrect." />

The host uses **Command 0x1001** to start a payment transaction. If the
battery charge is five percent or less, a response is returned
indicating that the command has not been executed. See **Table 70 -
Response Example for Command 0x1001 – Start Transaction Command not
executed due to Battery Charge State**.

Table 68 - Request Data for Command 0x1001 - Start Transaction

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1001 = <strong>Command 0x1001 - Start
Transaction</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td>Reserved</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Transaction Timeout, in seconds</p>
<p>This parameter defines how long the device waits for the cardholder
to take action on any cardholder input, for example, when waiting for
the cardholder to present payment after the host starts the
transaction.</p>
<ul>
<li><p>0x00 = No timeout</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>Reader Options</p>
<p>The parameters inside this TLV data object allow the host to enable
and disable the various payment method interfaces.</p></td>
<td>T</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>01</td>
<td><p>Magnetic Stripe Reader Mode (MSR Only)</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = EMV</p></li>
<li><p>0x80 = Non-EMV (disables other readers) (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Contact Reader Mode (EMV Contact Only)</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = EMV</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>/83</td>
<td>01</td>
<td><p>Contactless Reader Mode (EMV Contactless Only)</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = EMV</p></li>
<li><p>0x02 = NFC</p></li>
<li><p>0x03 = EMV and NFC</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>/84</td>
<td>03</td>
<td><p>Manual Entry Mode (Touch Only)</p>
<p>Populate this parameter to enable manual card entry. When using this
feature, all other Reader Mode parameters must be set to
<strong>Disabled</strong>.</p>
<p>Byte 1 Card Number Valid Format</p>
<ul>
<li><p>0x00 = PAN min 8, max 21 digits</p></li>
</ul>
<p>Byte 2 User Interface Sequence</p>
<ul>
<li><p>0x00 = Based on the setting of <strong>Property 1.2.1.1.4.5
MIFARE Plus AES_Key1.</strong></p></li>
</ul>
<p>Byte 3 Beeper Feedback</p>
<ul>
<li><p>0x00 = On keypress sound disabled</p></li>
<li><p>0x01 = On keypress sound enabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>02</td>
<td><p>Barcode Reader Mode (BCR Only)</p>
<p>Populate this parameter to enable the device’s barcode reader. This
feature can be enabled alongside all other reader modes except Manual
Entry Mode.</p>
<p>Byte 1 Barcode Reader Enable</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = Enabled</p></li>
</ul>
<p>Byte 2 Encrypt Non-EMV Barcode Data</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = Enabled</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x0000</td>
</tr>
<tr>
<td>/86</td>
<td>01</td>
<td><p>PIN Block Format (Touch Only)</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>A4</td>
<td>var</td>
<td>Tip and Tax Options</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>1F</td>
<td><p>Byte 1 Tip Mode</p>
<p>0x00 – Disable Tip Mode</p>
<p>0x01 – Show Tip GUI immediately using % value</p>
<p>0x02 – Show Tip GUI immediately using $ amount</p>
<p>0x11 - Enable Read Channel(s), with +Tip Button, %value</p>
<p>0x12 - Enable Read Channel(s), with +Tip Button, $ Amount</p>
<p>For Tip Modes 0x01 and 0x02, the Tip GUI is shown immediately with
selected read channels disabled. They get enabled after the Tip
information are entered.</p>
<p>For Tip Modes 0x11 and 0x12, the read channels are enabled and “+Tip”
button is shown. If no tip is desired, just present the card. If “+Tip”
button is selected, read channels are first disabled, then show the Tip
GUI.</p>
<p>Byte 2, Display Mode for Button1</p>
<p>0 - % or Amount</p>
<p>1 – Display Custom</p>
<p>2 – Display NO TIP</p>
<p>3 – Disabled (An OID controls whether the button is blank, grayed out
or not showing, see <strong>Property 1.1.1.1.2.5 Disabled Tip Button
Display Mode (Touch Only)</strong>)</p>
<p>Bytes 3 to 6 Value in % or Amount for Button 1, if applicable</p>
<p>Byte 7, Display Mode for Button 2 (See Byte 2 for Details)</p>
<p>Bytes 8 to 11 Value in % or Amount for Button 2, if applicable</p>
<p>Byte 12, Display Mode for Button 3 (See Byte 2 for Details)</p>
<p>Bytes 13 to 16 Value in % or Amount for Button 3, if applicable</p>
<p>Byte 17, Display Mode for Button 4 (See Byte 2 for Details)</p>
<p>Bytes 18 to 21 Value in % or Amount for Button 4, if applicable</p>
<p>Byte 22, Display Mode for Button 5 (See Byte 2 for Details)</p>
<p>Bytes 23 to 26 Value in % or Amount for Button 5, if applicable</p>
<p>Byte 27, Display Mode for Button 6 (See Byte 2 for Details)</p>
<p>Bytes 28 to 31 Value in % or Amount for Button 6, if applicable</p>
<p><strong>See Property 1.1.1.1.2.2 Tip Mode(Touch Only) for a suggested
default value</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>06</td>
<td><p>Tax or Surcharge Amount to Display</p>
<p>See <strong>Property 1.1.1.1.2.4 Display Tax or Surcharge (Touch
Only)</strong> to configure display Tax or Surcharge</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>02</td>
<td><p>Transaction Options</p>
<p>This parameter is a bitmask (ORed bits) that sets various device
behaviors that change the transaction flow or the way the device reports
transaction results, as follows:</p>
<p>Byte 1 Apple VAS Mode (<strong>Apple / Google VAS Only, set to 0 if
not supported</strong>)</p>
<p>Bits 0, 1</p>
<ul>
<li><p>0x00 = <strong>Apple/Google VAS Support
Disabled</strong></p></li>
<li><p>0x01 = <strong>VAS App OR Payment Mode (Single Mode)</strong>.
The<br />
device reads only Apple/Google VAS data from a tapped<br />
smartphone, or reads EMV payment data from a tapped<br />
card. When the device sends ARQC to conclude the<br />
transaction, it only includes either EMV payment data in<br />
container FC for cards, or includes VAS data in container<br />
FE for smartphones</p></li>
<li><p>0x02 = <strong>VAS App and Payment Mode (Dual Mode)</strong>.
The<br />
device reads both Apple/Google VAS data and EMV payment data<br />
from a tapped smartphone, or reads EMV payment data<br />
from a tapped card. When device sends ARQC to the host<br />
to conclude the transaction, it includes EMV payment data<br />
in container FC and includes VAS data, if available, in<br />
container FE</p></li>
<li><p>0x03 = <strong>VAS App Only Mode (VAS Mode)</strong>. The
device<br />
reads only Apple/Google VAS data from a tapped smartphone, and<br />
does not read data from a tapped card. If the tapped<br />
smartphone does not support VAS, the device does not<br />
detect or read from the smartphone. When the device send<br />
ARQC to conclude the transaction, it includes VAS data in<br />
container FE and does not include EMV payment data in<br />
container FC</p></li>
<li><p>0x04 = <strong>Payment Only Mode (Payment Mode)</strong>.
The<br />
device operates the same as EMV mode (01). It reads only<br />
EMV payment data from a tapped smartphone or a tapped<br />
card. When the device sends ARQC to conclude the<br />
transaction, it includes EMV payment data in container FC<br />
and does not include VAS data in container FE.</p></li>
</ul>
<p>Bits 4, 5, 6 Wallet Mode</p>
<p>4 -Apple</p>
<p>5 - Google</p>
<p>6 - Reserved</p>
<ul>
<li><p>0x000 = Wallet Support Disabled</p></li>
<li><p>0x001 = Apple VAS Enable</p></li>
</ul>
<ul>
<li><p>0x002 = Google VAS Enabled</p></li>
<li><p>0x003 = –Apple and Google VAS Enabled</p></li>
</ul>
<p>Bit 7 Apple VAS Protocol Mode<br />
o Value 0 – URL VAS Protocol<br />
o Value 1 – FULL VAS Protocol</p>
<p>Byte 2 Transaction Flow Control</p>
<ul>
<li><p>Bit 0 Transaction Flow</p>
<ul>
<li><p>Value 1 = Quick Chip Transaction Flow</p></li>
<li><p>Value 0 = EMV Transaction Flow</p></li>
</ul></li>
</ul>
<ul>
<li><p>Bit 1 Response Format</p>
<ul>
<li><p>Value 1 = DynaPro Response Format. For sending ARQC data and
batch data, the device uses <strong>EMV ARQC (DynaPro Format)
Type</strong> and <strong>EMV Batch Data (DynaPro Format)
Type</strong>.</p></li>
<li><p>Value 0 = Reserved.</p></li>
</ul></li>
<li><p>Bit 2 Signature Capture Control (MSR Only).</p>
<ul>
<li><p>Value 1 = Skip Signature Capture On Service Code. The device
skips signature capture during an MSR-only transaction if the card’s
service code indicates it is a chip card.</p></li>
<li><p>Value 0 = Do Not Skip Signature Capture.</p></li>
</ul></li>
<li><p>Bit 3 Display Amount for Quick Chip Transaction Flow</p>
<ul>
<li><p>Value 1 = Display Amount</p></li>
<li><p>Value 0 = Do not Display Amount</p></li>
</ul></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x0003</td>
</tr>
<tr>
<td>86</td>
<td>var</td>
<td><p>Transaction TLV</p>
<p>This is a list of self-contained TLV data objects that defines the
basic parameters for the transaction. It may contain any of the
following tags in the formats defined in the <em><strong>EMV
4.3</strong></em> specification or payment brand specifications, but at
minimum it must contain 9C and 9F02, plus 9F03 if the transaction
includes cash back. This parameter is optional for Manual Card Entry; to
show a transaction amount when using Manual Card Entry, include 9F02 and
5F2A:</p>
<ul>
<li><p>9C Transaction Type</p></li>
<li><p>9F02 Amount Authorized. If the <strong>Transaction Flow</strong>
parameter specifies <strong>Quick Chip Transaction Flow</strong>, the
host must specify a non-zero amount.</p></li>
<li><p>9F03 Amount Other</p></li>
<li><p>9F7C Merchant Custom Data</p></li>
<li><p>5F2A Transaction Currency Code</p></li>
<li><p>5F36 Transaction Currency Exponent</p></li>
<li><p>9F53 Transaction Category Code</p></li>
<li><p>9F15 Merchant Category Code</p></li>
<li><p>9F16 Merchant ID</p></li>
</ul></td>
<td>B</td>
<td>R/O</td>
<td></td>
</tr>
<tr>
<td>A8</td>
<td>00</td>
<td><p>(MAGTEK INTERNAL ONLY FOR NOW)</p>
<p>Tag Lists</p></td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>8A</td>
<td></td>
<td><p>(MAGTEK INTERNAL ONLY FOR NOW)</p>
<p>Notification Options</p>
<ul>
<li><p>??</p></li>
</ul></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>AC</td>
<td>var</td>
<td>User Interface Options</td>
<td>T</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td>/81</td>
<td>00</td>
<td><p>Suppress Thank You Message</p>
<p>By default, devices with a display signal the end of a transaction by
briefly showing “THANK YOU,” then “WELCOME.” The host can include this
parameter to direct the device to suppress the “THANK YOU” message
during this transaction.</p></td>
<td>T</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Override Final Transaction Message</p>
<p>By default, devices with a display signal the end of a transaction by
returning to the idle page and showing “WELCOME.” The host can include
this parameter to direct the device to show a different message, chosen
from the list of available Display String IDs in section <strong>4.3
Display Strings</strong>. This option completely overrides the device’s
idle page behavior until the next transaction, power cycle, or other
similar state change.</p></td>
<td>B</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td>/83</td>
<td>02</td>
<td><p>Functional button Right option.</p>
<p>String ID = Enable the present card page with a green functional
button Right – label with a String ID associates with a configured
String message. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings.</strong> This button can fit about 15 characters. When user
presses this button, device sends notification to the host to indicate
the present card functional button Right is pressed. See
<strong>Notification 0x1803 - User Interface Host Action
Request</strong></p>
<p>If host wants to disable this button, do not include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td>null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 69 - Response Data for Command 0x1001 - Start Transaction

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1001 = **Command 0x1001 - Start Transaction** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 01 10 01 82 04 80 02 03 16 |

Table 70 - Response Example for Command 0x1001 – Start Transaction
Command not executed due to Battery Charge State

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 71 - Request Example (MSR, Contact, and Contactless Only)

| Example (Hex) |
|----|
| AA 00 81 04 01 00 10 01 84 3D 10 01 82 01 3C A3 09 81 01 01 82 01 01 83 01 01 84 02 00 03 86 27 9C 01 00 9F 02 06 00 00 00 00 01 00 9F 03 06 00 00 00 00 00 00 5F 2A 02 08 40 5F 36 01 02 9F 15 02 00 00 9F 53 01 00 |

| Example (Hex) |
|----|
| AA 00 81 04 01 00 10 01 84 3D 10 01 82 01 3C A3 09 81 01 00 82 01 00 83 01 01 84 02 00 03 86 27 9C 01 00 9F 02 06 00 00 00 00 01 00 9F 03 06 00 00 00 00 00 00 5F 2A 02 08 40 5F 36 01 02 9F 15 02 00 00 9F 53 01 00 |

Table 72 - Request Example (Contactless Only)

Table 73 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 01 10 01 82 04 01 00 00 00 |

#### Command 0x1002 - Continue Transaction (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use in operations where **Command 0x1001 - Start
Transaction** must suspend for some reason, e.g., waiting for an ARPC
response, waiting for a host-driven application selection, etc.

#### Command 0x1003 - Finalize (MAGTEK INTERNAL ONLY FOR NOW)

#### Command 0x1004 - Resume Transaction

The host uses this command to provide the device with additional /
modified data to resume a transaction that is currently paused.

Table 74 - Request Data for Command 0x1004 - Resume Transaction

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including Request
Message found on page <a href="#request-message">23</a></td>
</tr>
<tr>
<td colspan="6">1004 = <strong>Command 0x1004 - Resume
Transaction</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Resume Code</p>
<p>Indicates the pause state the transaction will resume from:</p>
<ul>
<li><p>0x00 = Waiting for ARPC</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td>Reserved</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>ARPC Data</p>
<p>This contains an <strong>EMV ARPC Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>var</td>
<td><p>Transaction TLV Update</p>
<p>Not applicable when Resume Code = <strong>Waiting for
ARPC</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 75 - Response Data for Command 0x1004 - Resume Transaction

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1004 = **Command 0x1004 - Resume Transaction** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 76 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 00 10 04 84 21 10 04 81 01 00 82 01 78 84 17 FF 74 14 DF DF 25 08 99 26 90 E1 16 12 07 10 FA 06 70 04 8A 02 30 30 |

Table 77 - Response Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 82 06 10 04 82 04 00 00 00 00 84 02 10 04 |

#### Command 0x1008 - Cancel Transaction

The host can use this command to cancel a transaction in progress that
it initiated using **Command 0x1001 - Start Transaction**.

The sequence of events is as follows:

1)  The host has already called **Command 0x1001 - Start Transaction**
    and the transaction is still in process.

2)  The host constructs the command request in the format below.

3)  The host sends the command request to the device.

4)  The device sends a response in the format below to the host.

    1)  If the transaction is in a state where it can not be canceled,
        the device’s response returns operation status detail **Failed,
        Device State Issue, Cannot Cancel**.

    2)  If there is no transaction in progress, the device’s response
        returns operation status detail codes **Failed, Device State
        Issue, No Transaction**.

5)  If the device successfully cancels the transaction, the device’s
    response returns operation status detail **All Good, Requested
    Operation Was Successful**, shows **CANCELED** on the display (if
    any), and returns to the idle state.

Table 78 - Request Data for Command 0x1008 - Cancel Transaction

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| 1008 = **Command 0x1008 - Cancel Transaction** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 79 - Response Data for Command 0x1008 - Cancel Transaction

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1008 = **Command 0x1008 - Cancel Transaction** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 80 - Request Example

| Example (Hex)                       |
|-------------------------------------|
| AA 00 81 04 01 13 10 08 84 02 10 08 |

Table 81 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 13 10 08 82 04 00 00 00 00 |

#### Command 0x1009 - Close / Clear Transaction (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use per Dave.

#### Command 0x1014 - Get Transaction Status (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use per Dave.

#### Command 0x1041 - Set Payment Parameters (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use per Dave. MAC.

#### Command 0x1042 - Get Payment Parameters (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use per Dave.

### Command Group 0x11nn - NFC/MIFARE Pass Through Commands (Contactless Only)

#### Command 0x1100 – Pass Through Command For NTag/MIFARE Ultralight, Type 2

After an NTag/MIFARE Ultralight is activated, the host uses this command
to send commands and receive responses to and from a Ntag/MIFARE
Ultralight. Do not change the address 0x00 for read protection of
Ultralight C/AES card because the device will fail to access the card if
the address 0x00 is read protected.

Table 82 - Request Data for Command 0x1100 – Pass Through Command For
NTag/MIFARE Ultralight, Type 2.

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message">23</a></td>
</tr>
<tr>
<td colspan="6">1100 = <strong>Command 0x1100 – Pass Through Command For
NTag/MIFARE Ultralight, Type</strong> 2</td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Command to Send.</p>
<p>See <strong>Table 83 – NTag Commands</strong></p>
<p>See <strong>Table 84 – MIFARE Ultralight EV1 Commands</strong></p>
<p>See <strong>Table 85 – MIFARE Ultralight C Commands</strong></p>
<p>See <strong>Table 86 – MIFARE Ultralight AES
Commands</strong></p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>00 – No Encrypt</p>
<p>01 - Encrypt</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>00 – Expect More Commands</p>
<p>01 – FF (Last Command)</p>
<p>If the pass-through command is the last successful command, the
device will end the transaction with a single beep, indicating success.
If an error arises, the device will end the transaction but will sound
two beeps to indicate the error. The user should then remove the
card.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Request
Message found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 83 – NTag Commands

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get Version</td>
<td>1</td>
<td><p>The GET_VERSION command is used to retrieve information on the
NTAG family, the product version, storage size and other product data
required to identify the specific NTAG21x.</p>
<p>Byte 0 = 0x60</p></td>
</tr>
<tr>
<td>Read</td>
<td>2-3</td>
<td><p>The READ command requires a start page address, and returns the
16 bytes of four NTAG21x pages. For example, if address is 03h then
pages 03h, 04h, 05h, 06h are returned. Special conditions apply if the
READ command address is near the end of the accessible memory area. The
special conditions also apply if at least part of the addressed pages is
within a password protected area.</p>
<p>The READ command with an option of end page address returns the all
n*4 bytes of the addressed pages. For example if the start address is
03h and the end address is 07h then pages 03h, 04h, 05h, 06h and 07h are
returned.</p>
<p>Byte 0 = 0x30</p>
<p>Byte 1 = Start Page Address</p>
<p>Byte 2 = (optional) End Page Address</p></td>
</tr>
<tr>
<td>Fast Read</td>
<td>3</td>
<td><p>The FAST_READ command requires a start page address and an end
page address and returns the all n*4 bytes of the addressed pages. For
example, if the start address is 03h and the end address is 07h then
pages 03h, 04h, 05h, 06h and 07h are returned.</p>
<p>Byte 0 = 0x3A</p>
<p>Byte 2 = Start Page Address</p>
<p>Byte 3 = End Page Address</p></td>
</tr>
<tr>
<td>Write</td>
<td>6</td>
<td><p>The WRITE command requires a block address, and writes 4 bytes of
data into the addressed NTAG21x page.</p>
<p>Byte 0 = 0xA2</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 5 = 4 Bytes of Data to Write</p></td>
</tr>
<tr>
<td><p>Compatibility</p>
<p>Write</p></td>
<td>18</td>
<td><p>The COMPATIBILITY_WRITE command is implemented to guarantee
interoperability with the established MIFARE Classic PCD infrastructure,
in case of coexistence of ticketing and NFC applications. Even though 16
bytes are transferred to NTAG21x, only the least significant 4 bytes
(bytes 0 to 3) are written to the specified address. Set all the
remaining bytes, 04h to 0Fh, to logic 00h.</p>
<p>Byte 0 = 0xA0</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 17 = 16 Bytes of Data to Write (only least significant 4
bytes are written)</p>
<p>Note: This command is sent in 2 steps, which the Firmware will
handle</p>
<ol type="1">
<li><p>&lt;CMD&gt;&lt;Address to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
<li><p>&lt;16 Bytes of Data to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
</ol></td>
</tr>
<tr>
<td>READ_CNT</td>
<td>2</td>
<td><p>The READ_CNT command is used to read out the current value of the
NFC one-way counter of the NTAG213, NTAG215 and NTAG216. The command has
a single argument specifying the counter number and returns the 24-bit
counter value of the corresponding counter. If the NFC_CNT_PWD_PROT bit
is set to 1b the counter is password protected and can only be read with
the READ_CNT command after a previous valid password authentication</p>
<p>Byte 0 = 0x39</p>
<p>Byte 1 = 0x02 (NFC Counter Address)</p></td>
</tr>
<tr>
<td>PWD_AUTH</td>
<td>5</td>
<td><p>A protected memory area can be accessed only after a successful
password verification using the PWD_AUTH command. The AUTH0
configuration byte defines the protected area. It specifies the first
page that the password mechanism protects. The level of protection can
be configured using the PROT bit either for write protection or
read/write protection. The PWD_AUTH command takes the password as
parameter and, if successful, returns the password authentication
acknowledge, PACK. By setting the AUTHLIM configuration bits to a value
larger than 000b, the number of unsuccessful password verifications can
be limited. Each unsuccessful authentication is then counted in a
counter featuring anti-tearing support. After reaching the limit of
unsuccessful attempts, the memory access specified in PROT, is no longer
possible.</p>
<p>Byte 0 = 0x1B</p>
<p>Byte 1..4 = password (4 bytes)</p></td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC specific, 32-byte ECC
signature, to verify NXP Semiconductors as the silicon vendor. The
signature is programmed at chip production and cannot be changed
afterwards.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
</tr>
</tbody>
</table>

Table 84 – MIFARE Ultralight EV1 Commands

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get Version</td>
<td>1</td>
<td><p>The GET_VERSION command is used to retrieve information on the
MIFARE family, product version, storage size and other product data
required to identify the MF0ULx1.</p>
<p>Byte 0 = 0x60</p></td>
</tr>
<tr>
<td>Read</td>
<td>2-3</td>
<td><p>The READ command requires a start page address, and returns the
16 bytes of four MIFARE Ultralight pages. For example if address (Addr)
is 03h then pages 03h, 04h, 05h, 06h are returned. A rollover mechanism
is implemented if the READ command address is near the end of the
accessible memory area. This rollover mechanism is also used when at
least part of the addressed pages is within a password protected
area.</p>
<p>The READ command with an option of end page address returns the all
n*4 bytes of the addressed pages. For example if the start address is
03h and the end address is 07h then pages 03h, 04h, 05h, 06h and 07h are
returned.</p>
<p>Byte 0 = 0x30</p>
<p>Byte 1 = Start Page Address</p>
<p>Byte 2 = (optional) End Page Address</p></td>
</tr>
<tr>
<td>Fast Read</td>
<td>3</td>
<td><p>The FAST_READ command requires a start page address and an end
page address and returns the all n*4 bytes of the addressed pages. For
example if the start address is 03h and the end address is 07h then
pages 03h, 04h, 05h, 06h and 07h are returned.</p>
<p>Byte 0 = 0x3A</p>
<p>Byte 2 = Start Page Address</p>
<p>Byte 3 = End Page Address</p></td>
</tr>
<tr>
<td>Write</td>
<td>6</td>
<td><p>The WRITE command requires a block address, and writes 4 bytes of
data into the addressed MIFARE Ultralight EV1 page.</p>
<p>Byte 0 = 0xA2</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 5 = 4 Bytes of Data to Write</p></td>
</tr>
<tr>
<td><p>Compatibility</p>
<p>Write</p></td>
<td>18</td>
<td><p>The COMPATIBILITY_WRITE command is implemented to accommodate the
established MIFARE Classic PCD infrastructure. Even though 16 bytes are
transferred to the MF0ULx1, only the least significant 4 bytes (bytes 0
to 3) are written to the specified address. Set all the remaining bytes,
04h to 0Fh, to logic 00h</p>
<p>Byte 0 = 0xA0</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 17 = 16 Bytes of Data to Write (only least significant 4
bytes are written)</p>
<p>Note: This command is sent in 2 steps, which the Firmware will
handle</p>
<ol type="1">
<li><p>&lt;CMD&gt;&lt;Address to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
<li><p>&lt;16 Bytes of Data to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
</ol></td>
</tr>
<tr>
<td>READ_CNT</td>
<td>2</td>
<td><p>The READ_CNT command is used to read out the current value of one
of the 3 one-way counters of the MF0ULx1. The command has a single
argument specifying the counter number and returns the 24-bit counter
value of the corresponding counter. The counters are always readable,
independent on the password protection settings.</p>
<p>Byte 0 = 0x39</p>
<p>Byte 1 = 0x00..0x02 (counter number from 0x00 to 0x02)</p></td>
</tr>
<tr>
<td>INCR_CNT</td>
<td>6</td>
<td><p>The INCR_CNT command is used to increment one of the 3 one-way
counters of the MF0ULx1. The two arguments are the counter number and
the increment value.</p>
<p>Byte 0 = 0xA5</p>
<p>Byte 1 = 0x00..0x02 (counter number from 0x00 to 0x02)</p>
<p>Byte 2 to 5 = 4 bytes increment value (only the 3 least significant
bytes are relevant)</p></td>
</tr>
<tr>
<td>PWD_AUTH</td>
<td>5</td>
<td><p>A protected memory area can be accessed only after a successful
password verification using the PWD_AUTH command. The AUTH0
configuration byte defines the protected area. It specifies the first
page that the password mechanism protects. The level of protection can
be configured using the PROT bit either for write protection or read/
write protection. The PWD_AUTH command takes the password as parameter
and, if successful, returns the password authentication acknowledge,
PACK. By setting the AUTHLIM configuration bits to a value larger than
000b, the number of unsuccessful password verifications can be limited.
Each unsuccessful authentication is then counted in a counter featuring
anti-tearing support. After reaching the limit of unsuccessful attempts,
the memory access specified in PROT, is no longer possible.</p>
<p>Byte 0 = 0x1B</p>
<p>Byte 1..4 = password (4 bytes)</p></td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC specific, 32-byte ECC
signature, to verify NXP Semiconductors as the silicon vendor. The
signature is programmed at chip production and cannot be changed
afterwards.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
</tr>
<tr>
<td><p>CHECK</p>
<p>TEARING_EVENT</p></td>
<td>2</td>
<td><p>The CHECK_TEARING_EVENT command enables the application to
identify if a tearing event happened on a specified counter element. It
takes the counter number as single argument and returns a specified
valid flag for this counter. If the returned valid flag is not equal to
the predefined value, a tearing event happened. Note, although a tearing
event might have happened on the counter, a valid value corresponding to
the last valid counter status is still available using the READ_CNT
command.</p>
<p>Byte 0 = 0x3E</p>
<p>Byte 1 = 0x00..0x02 (counter number from 0x00 to 0x02)</p></td>
</tr>
<tr>
<td>VCSL</td>
<td>21</td>
<td><p>The VCSL command is used to enable a unique identification and
selection process across different MIFARE product-based cards and card
implementations on mobile devices. The command requires a 16-byte
installation identifier IID and a 4-byte PCD capability value as
parameters. The parameters are present to support compatibility to other
MIFARE product-based devices but are not used or checked inside the
MF0ULx1. Nevertheless, the number of bytes is checked for correctness.
The answer to the VCSL command is the virtual card type identifier
VCTID. This identifier indicates the type of card or ticket. Using this
information, the reader can decide whether the ticket belongs to the
installation or not.</p>
<p>Byte 0 = 0x4B</p>
<p>Byte 1 to 16 = 16-byte IID (installation identifier, can be any
number)</p>
<p>Byte 17 to 20 = 4-byte PCDCAPS (PCD capabilities, can be any
number)</p></td>
</tr>
</tbody>
</table>

Table 85 – MIFARE Ultralight C Commands

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read</td>
<td>2-3</td>
<td><p>The READ command takes the page address as a parameter. Only
addresses 00h to 2Bh are decoded. For higher addresses the MF0ICU2
returns a NAK. The MF0ICU2 responds to the READ command by sending 16
bytes starting from the page address defined in the command (e.g. if ADR
is 03h, pages 03h, 04h, 05h, 06h are returned)</p>
<p>A roll-over mechanism is implemented to continue reading from page
00h once the end of the accessible memory is reached. For example,
reading from address 29h on a MF0ICU2 results in pages 29h, 2Ah, 2Bh and
00h being returned.</p>
<p>The following conditions apply if part of the memory is protected by
the 3DES authentication for read access:</p>
<p>• if the MF0ICU2 is in the ACTIVE state – addressing a page which is
equal or higher than AUTH0 results in a NAK response – addressing a page
lower than AUTH0 results in data being returned with the roll-over
mechanism occurring just before the AUTH0 defined page</p>
<p>• if the MF0ICU2 is in the AUTHENTICATED state – the READ command
behaves like on a MF0ICU2 without access protection.</p>
<p>The READ command with an option of end page address returns the all
n*4 bytes of the addressed pages. For example if the start address is
03h and the end address is 07h then pages 03h, 04h, 05h, 06h and 07h are
returned.</p>
<p>Byte 0 = 0x30</p>
<p>Byte 1 = Start Page Address</p>
<p>Byte 2 = (optional) End Page Address</p></td>
</tr>
<tr>
<td>Write</td>
<td>6</td>
<td><p>The WRITE command is used to program the lock bytes in page 02h,
the OTP bytes in page 03h, data bytes in pages 04h to 27h, configuration
data from page 28h to 2B and keys from page 2Ch to 2Fh. A WRITE command
is performed page-wise, programming 4 bytes in a page.</p>
<p>Byte 0 = 0xA2</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 5 = 4 Bytes of Data to Write</p></td>
</tr>
<tr>
<td><p>Compatibility</p>
<p>Write</p></td>
<td>18</td>
<td><p>The COMPATIBILITY WRITE command was implemented to accommodate
the established MIFARE PCD infrastructure. Even though 16 bytes are
transferred to the MF0ICU2, only the least significant 4 bytes (bytes 0
to 3) will be written to the specified address. It is recommended to set
the remaining bytes 4 to 15 to all 0.</p>
<p>Byte 0 = 0xA0</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 17 = 16 Bytes of Data to Write (only least significant 4
bytes are written)</p>
<p>Note: This command is sent in 2 steps, which the Firmware will
handle</p>
<ol type="1">
<li><p>&lt;CMD&gt;&lt;Address to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
<li><p>&lt;16 Bytes of Data to
Write&gt;&lt;CRCH&gt;&lt;CRCL&gt;</p></li>
</ol></td>
</tr>
<tr>
<td>AUTHENTICATE</td>
<td>2</td>
<td><p>The AUTHENTICATE command is used to authenticate the MF0ICU2
using 2 keys 3DES encryption in Cipher-Block Chaining (CBC) mode as
described in ISO/IEC 10116.</p>
<ul>
<li><p>The 16-byte of the 2keys 3DES are programmed to card memory pages
from 2Ch to 2Fh. The key itself can be written during personalization or
at any later stage using the WRITE or COMPATIBILITY WRITE with Byte 0 is
always sent first.</p></li>
</ul>
<blockquote>
<p>On example of Key1 = 0001020304050607h and Key2 = 08090A0B0C0D0E0Fh,
the command sequence needed for key programming with WRITE command
is:</p>
<p>• A2 2C 07 06 05 04</p>
<p>• A2 2D 03 02 01 00</p>
<p>• A2 2E 0F 0E 0D 0C</p>
<p>• A2 2F 0B 0A 09 08</p>
</blockquote>
<ul>
<li><p>The 16-byte of the same 2keys 3DES are programed to the Device
using <strong>Property 1.2.1.1.4.1 MIFARE Ultralight C
2keys3DES</strong></p></li>
</ul>
<p>Byte 0 = 0x1A</p>
<p>Byte 1 = 0x00</p></td>
</tr>
</tbody>
</table>

Table 86 – MIFARE Ultralight AES Commands

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get Version</td>
<td>1</td>
<td><p>The GET_VERSION command is used to retrieve information on the
MIFARE family, product version, storage size and other product data
required to identify the MIFARE Ultralight AES.</p>
<p>Byte 0 = 0x60</p></td>
</tr>
<tr>
<td>Read</td>
<td>2-3</td>
<td><p>The READ command requires a start page address, and returns the
16 bytes of four pages. For example, if address (Addr) is 03h then pages
03h, 04h, 05h, 06h are returned. So called roll-over mechanism
(described later) applies if the READ command address is near the end of
the accessible memory area. Same mechanism applies if at least part of
the addressed pages is within an authentication protected area</p>
<p>In the default state of MIFARE Ultralight AES, all memory pages in
the range from 00h to 3Bh are allowed as Addr parameter to the READ
command. Addressing a memory page above the limit results in a NAK
response. A roll-over mechanism is implemented to continue reading from
page 00h once the end of the accessible memory is reached if at least
first addressed page is within allowed limit.</p>
<p><strong>Remark</strong>: AES key values can never be directly read
out of the memory. When reading from the pages holding key values, all
00h bytes are returned.</p>
<p>The READ command with an option of end page address returns the all
n*4 bytes of the addressed pages. For example if the start address is
03h and the end address is 07h then pages 03h, 04h, 05h, 06h and 07h are
returned.</p>
<p>Byte 0 = 0x30</p>
<p>Byte 1 = Start Page Address</p>
<p>Byte 2 = (optional) End Page Address</p></td>
</tr>
<tr>
<td>Fast Read</td>
<td>3</td>
<td><p>The FAST_READ command requires a start page address and an end
page address and returns bytes of addressed pages. For example if the
start address is 03h and the end address is 07h then pages 03h, 04h,
05h, 06h, and 07h are returned. If either start or end address is
outside accessible area, then MIFARE Ultralight AES replies with a
NAK.</p>
<p>Byte 0 = 0x3A</p>
<p>Byte 2 = Start Page Address</p>
<p>Byte 3 = End Page Address</p></td>
</tr>
<tr>
<td>Write</td>
<td>6</td>
<td><p>The WRITE command requires a block address, and writes 4 bytes of
data into the addressed MIFARE Ultralight AES page.</p>
<p>Byte 0 = 0xA2</p>
<p>Byte 1 = Address to Write</p>
<p>Byte 2 to 5 = 4 Bytes of Data to Write</p></td>
</tr>
<tr>
<td>READ_CNT</td>
<td>2</td>
<td><p>The READ_CNT command is used to read out the current value of one
of the 3 one-way counters of MIFARE Ultralight AES. The command has a
single argument specifying the counter number and returns the 24-bit
counter value of the corresponding counter. Counters are always
readable, except in case of the counter "0x02" with the optional AES
authentication protection enabled. In that case, the counter 0x02 is
readable only in the AUTHENTICATE state.</p>
<p>Byte 0 = 0x39</p>
<p>Byte 1 = 0x00..0x02 (counter number from 0x00 to 0x02)</p></td>
</tr>
<tr>
<td>INCR_CNT</td>
<td>6</td>
<td><p>The INCR_CNT command is used to increment one of the 3x one-way
counters of the MIFARE Ultralight AES. Two arguments are the counter
number and the increment value. Counters are always incrementable,
except in case of the counter "0x02" with the optional AES
authentication protection enabled. In that case, the counter 0x02 can be
incremented only in the AUTHENTICATE state.</p>
<p>Byte 0 = 0xA5</p>
<p>Byte 1 = 0x00..0x02 (counter number from 0x00 to 0x02)</p>
<p>Byte 2 to 5 = 4 bytes increment value (only the 3 least significant
bytes are relevant)</p></td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC-specific, 48-byte ECC
signature. The originality signature can be changed if it has been
unlocked with the LOCK_SIG command.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
</tr>
<tr>
<td>WRITE_SIG</td>
<td>6</td>
<td><p>The WRITE_SIG command allows the writing of a customized
originality signature into the dedicated originality signature memory.
The WRITE_SIG command requires an originality signature block address,
and writes 4 bytes of data into the addressed originality signature
block.</p>
<p>In the initial state of MIFARE Ultralight AES, the following
originality signature blocks 00h to 0Bh are valid Addr parameters to the
WRITE_SIG command. Addressing a memory block beyond the limits above
results in a NAK response from MIFARE Ultralight AES.</p>
<p>If the originality signature is locked or permanently locked, a
WRITE_SIG command results in a NAK response from the MIFARE Ultralight
AES.</p>
<p>Byte 0 = 0xA9</p>
<p>Byte 1 = signature block address</p>
<p>Byte 2 to 5 = signature bytes to be written</p></td>
</tr>
<tr>
<td>LOCK_SIG</td>
<td>2</td>
<td><p>The LOCK_SIG command allows the user to unlock, lock or
permanently lock the dedicated originality signature memory.</p>
<p>The originality signature can only be unlocked, if the originality
signature is not permanently locked.</p>
<p>There is no command to unlock the originality signature, if the
originality signature is permanently locked.</p>
<p>Byte 0 = 0xAC</p>
<p>Byte 1 = lock option</p>
<ul>
<li><p>0x00 = unlock</p></li>
<li><p>0x01 = lock</p></li>
<li><p>0x02 = permanently lock</p></li>
</ul></td>
</tr>
<tr>
<td>VCSL</td>
<td>21</td>
<td><p>The VCSL command is used to enable a unique identification and
selection process across different physical MIFARE product-based cards
and virtual MIFARE implementations. The command requires a 16-byte
installation identifier IID and a 4-byte PCD capability value as
parameters. The parameters are present to support compatibility to other
MIFARE product-based devices, but are not used or checked inside the
MIFARE Ultralight AES. Nevertheless, the number of bytes is checked for
correctness. The answer to the VCSL command is the VCTID value stored in
the user configuration segment. This identifier indicates the type of
card or ticket. Using this information, the contactless reader can
decide whether the ticket belongs to the installation or not.</p>
<p>Byte 0 = 0x4B</p>
<p>Byte 1 to 16 = 16-byte IID (installation identifier, can be any
number)</p>
<p>Byte 17 to 20 = 4-byte PCDCAPS (PCD capabilities, can be any
number)</p></td>
</tr>
<tr>
<td>AUTHENTICATE</td>
<td>2</td>
<td><p>The AUTHENTICATE command is used to authenticate with a 3-pass
mutual authentication the MIFARE Ultralight AES and PCD. The
cryptographic method is based on AES in Cipher-Block chaining (CBC) mode
according to NIST Special Publication 800-38A. The used key is a 128-bit
AES Key. Remark: To reduce the risk on card-only side channel attack to
the AES keys, a failed authentication limit (AUTH_LIM) can be set.</p>
<ul>
<li><p>The 16 bytes of the AES [DataProtKey] are programmed to memory
pages from 30h to 33h. Keys themselves can be written during
personalization or at any later stage in a secure environment, as long
as the key is not locked for update in the user configuration segment.
AES [UIDRetrKey] is stored in memory addresses from 34h until 37h. In
case keys are not locked, MIFARE Ultralight AES allows to change
AES-keys without authentication as long as AUTH0 is not set to a page
address before or at page address where keys bytes are stored. Otherwise
MIFARE Ultralight AES requires to be in the AUTHENTICATED state to allow
to write AES keys.</p></li>
</ul>
<blockquote>
<p>The key itself can be written using the WRITE with Byte 0 is always
sent first.</p>
<p>On example of AES [DataProtKey] = 000102030405060708090A0B0C0D0E0Fh,
the command sequence needed for key programming with WRITE command
is:</p>
<p>• A2 30 0F 0E 0D 0C</p>
<p>• A2 31 0B 0A 09 08</p>
<p>• A2 32 07 06 05 04</p>
<p>• A2 33 03 02 01 00</p>
<p>On example of AES [UIDRetrKey] = 000102030405060708090A0B0C0D0E0Fh,
the command sequence needed for key programming with WRITE command
is:</p>
<p>• A2 34 0F 0E 0D 0C</p>
<p>• A2 35 0B 0A 09 08</p>
<p>• A2 36 07 06 05 04</p>
<p>• A2 37 03 02 01 00</p>
</blockquote>
<ul>
<li><p>The 16-byte of the same AES [DataProtKey] are programed to the
Device using <strong>Property 1.2.1.1.4.2 MIFARE Ultralight AES
DataProtKey</strong>.</p></li>
<li><p>The 16-byte of the same AES [UIDRetrKey] are programed to the
Device using <strong>Property 1.2.1.1.4.3 MIFARE Ultralight AES
UIDRetrKey</strong>.</p></li>
<li><p>The 16-byte of the AES [OriginalityKey] are programed to the
Device using <strong>Property 1.2.1.1.4.4 MIFARE Ultralight AES
OriginalityKey.</strong> This key value is only known by NXP.</p></li>
</ul>
<p>Byte 0 = 0x1A</p>
<p>Byte 1 = Key option</p>
<p>0x00 = DataProtKey</p>
<p>0x01 = UIDRetrKey</p>
<p>0x02 = OriginalityKey</p></td>
</tr>
</tbody>
</table>

Table 87 - Response Data for Command 0x1100 – Pass Through Command For
NTag/MIFARE Ultralight, Type 2

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">1100 = Command 0x1100 – Pass Through Command For
NTag/MIFARE Ultralight, Type 2 Command For NFC Tag</td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Tag Response Code</p>
<p>0x00 = Success</p>
<p>0x01 = Failed</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Encryption Control</p>
<p>If encrypted, see Table 90 - Payload for Encrypted NFC/MIFARE
Data</p>
<p>If unencrypted see Table 91 – Unencrypted NFC/MIFARE Data</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 88 - Request Example (Get Version)

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA 00 81 04 01 39 11 00 84 0B 11 00 81 01 60 82 01 00 83 01 00 |

Table 89 - Response Example (Get Version)

| Example (Hex) |
|----|
| AA 00 81 04 82 39 11 00 82 04 01 00 00 00 84 14 11 00 81 01 00 82 0D FC 0B DF 7A 08 01 02 03 04 05 06 07 08 |

##### Encrypted Data Format

Table 90 - Payload for Encrypted NFC/MIFARE Data

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 91 – Unencrypted NFC/MIFARE</strong> Data.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section 4.4 Encryption Type for a list of valid values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of Notification Message found on page <a
href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 91 – Unencrypted NFC/MIFARE Data

| Tag   | Len | Value / Description | Typ | Req | Default |
|-------|-----|---------------------|-----|-----|---------|
| FC    | var | NFC Data Container  | T   | R   |         |
| /DF7A | var | NFC Data            | B   | O   |         |

#### Command 0x1101 – Pass Through Command for MIFARE Classic/MINI®/Plus SL1 (Security Level 1), Type 2

After a MIFARE Tag is activated, the host uses this command to send
commands and receive responses to and from a MIFARE tag.

For MIFARE Plus EV1/EV2/SE/X at SL1 (Security Level 1), the tag is
discovered as MIFARE Classic, and can use the same functionality as
MIFARE Classic 1K/4K commands in **Table 93 – MIFARE Classic/MINI**®
Commands**.** Furthermore, an additional optional AES authentication is
available in this level without affecting the MIFARE Classic 1K/4K
functionality. The authenticity of the card can be proven using strong
cryptographic means with this additional functionality. In addition to
the backwards compatibility mode, MIFARE Plus card can be switched to
higher security levels. After MIFARE Plus is authenticated with AES
Security Level 1 Key, the Device doesn’t auto detect an error from the
MIFARE Tag has been removed to end the pass-through session. To end the
pass-through session, the Host application can send the last command,
CANCEL command (0xFF), or receive error response from the MIFARE Tag.

Table 92 - Request Data for Command 0x1101 - Pass Through Command for
MIFARE Classic/MINI®/Plus SL1 (Security Level 1)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message">23</a></td>
</tr>
<tr>
<td colspan="6">1101 = <strong>Command 0x1101 – Pass Through Command for
MIFARE Classic/MINI®/Plus SL1 (Security Level 1), Type 2</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Command to Send.</p>
<p>See <strong>Table 93 – MIFARE Classic/MINI</strong>® Commands</p>
<p>See <strong>Table 94 – MIFARE Plus EV1/EV2/SE/X SL1 (Security Level
1)</strong> Commands</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>00 – No Encrypt</p>
<p>01 - Encrypt</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>00 – Expect More Commands</p>
<p>01 – FF (Last Command)</p>
<p>If last command, Device will provide a single beep after receiving a
successful response from tag, otherwise, device will provide a double
beep</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Request
Message found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 93 – MIFARE Classic/MINI® Commands

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>MIFARE Read</td>
<td></td>
<td><p>Byte 0 – 0x30 – Read Command</p>
<p>Byte 1- Sector Number to Read</p>
<p>Byte 2 – Start Block Number</p>
<p>Byte 3 – End Block Number</p>
<p>Byte 4 – Key Type, 0 = A, 1 = B</p>
<p>Byte 5 to 10 = 6 Byte Key</p></td>
</tr>
<tr>
<td>MIFARE Write</td>
<td></td>
<td><p>Byte 0 – 0xA0 – Write Command</p>
<p>Byte 1- Sector Number to Write</p>
<p>Byte 2 – Start Block Number</p>
<p>Byte 3 – End Block Number</p>
<p>Byte 4 – Key Type 0 = A, 1 = B</p>
<p>Byte 5 to 10 = 6 Byte Key</p>
<p>Byte 11 to x = Variable length Byte Data (16 bytes per
block)</p></td>
</tr>
<tr>
<td>MIFARE Increment</td>
<td></td>
<td><p>Byte 0 – 0xC1 – Increment Command</p>
<p>Byte 1 – Source Sector Number</p>
<p>Byte 2- Source Block number</p>
<p>Byte 3 – Key Type 0 = A, 1 = B</p>
<p>Byte 4 to 9 = 6 Byte Key</p>
<p>Byte 10 to 13 = 4 Byte Operand</p></td>
</tr>
<tr>
<td>MIFARE Decrement</td>
<td></td>
<td><p>Byte 0 – 0xC0 – Decrement Command</p>
<p>Byte 1 – Source Sector Number</p>
<p>Byte 2- Source Block number</p>
<p>Byte 3 – Key Type 0 = A, 1 = B</p>
<p>Byte 4 to 9 = 6 Byte Key</p>
<p>Byte 10 to 13 = 4 Byte Operand</p></td>
</tr>
<tr>
<td>MIFARE Restore</td>
<td></td>
<td><p>Byte 0 – 0xC2 – Restore Command</p>
<p>Byte 1 – Source Sector Number</p>
<p>Byte 2 - Source Block number</p>
<p>Byte 3 – Key Type 0 = A, 1 = B</p>
<p>Byte 4 to 9 = 6 Byte Key</p></td>
</tr>
<tr>
<td>MIFARE Transfer</td>
<td></td>
<td><p>Byte 0 – 0xB0 – Write the value from the Transfer Buffer into
destination block number</p>
<p>Byte 1 – Destination Sector Number</p>
<p>Byte 2 - Destination Block number</p>
<p>Byte 3 – Key Type 0 = A, 1 = B</p>
<p>Byte 4 to 9 = 6 Byte Key</p></td>
</tr>
</tbody>
</table>

Table 94 – MIFARE Plus EV1/EV2/SE/X SL1 (Security Level 1) Commands

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 7%" />
<col style="width: 54%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
<th>EV1</th>
<th>EV2</th>
<th>SE</th>
<th>X</th>
</tr>
</thead>
<tbody>
<tr>
<td>First Authenticate (part1 and part2)</td>
<td>3</td>
<td><p>First Authenticate. Use this command to switch to higher security
levels. This command is behaved as the last command. Device will provide
a single beep after receiving a successful response from a card,
otherwise, device will provide a double beep.</p>
<p>Byte 0 = 0x70</p>
<p>Byte 1-2 = Level 2 Switch Key (MIFARE Plus X only), or Level 3 Switch
Key. See NXP doc ds206234, table 113.</p>
<p>Byte 3 = MIFARE Plus AES_Key#</p>
<ul>
<li><p>0x01 = AES_Key1 = 16 bytes value stored in <strong>Property
1.2.1.1.4.5 MIFARE Plus AES_Key1.</strong></p></li>
<li><p>0x02 = AES_Key2 = 16 bytes value stored in <strong>Property
1.2.1.1.4.6 MIFARE Plus AES_Key2.</strong></p></li>
<li><p>0x03 = AES_Key3 = 16 bytes value stored in <strong>Property
1.2.1.1.4.7 MIFARE Plus AES_Key3.</strong></p></li>
<li><p>0x04 = AES_Key4 = 16 bytes values stored in <strong>Property
1.2.1.1.4.8 MIFARE Plus AES_Key4.</strong></p></li>
<li><p>0x05 = AES_Key5 = 16 bytes values stored in <strong>Property
1.2.1.1.4.9 MIFARE Plus AES_Key5.</strong></p></li>
<li><p>0x06 = AES_Key6 = 16 bytes values stored in <strong>Property
1.2.1.1.4.A MIFARE Plus AES_Key6.</strong></p></li>
</ul></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><p>Following Authenticate</p>
<p>(part1 and part2)</p></td>
<td>3</td>
<td><p>Following Authenticate. Use this command for an option to put the
NFC tag in Security Level 1 AES Authenticated before sending MIFARE
Classic commands.</p>
<p>Byte 0 = 0x76</p>
<p>Byte 1-2 = Security Level 1 Card Authentication Key. See NXP doc
ds206234, table 113.</p>
<p>Byte 3 = MIFARE Plus AES_Key#</p>
<ul>
<li><p>0x01 = AES_Key1 = 16 bytes value stored in <strong>Property
1.2.1.1.4.5 MIFARE Plus AES_Key1.</strong></p></li>
<li><p>0x02 = AES_Key2 = 16 bytes value stored in <strong>Property
1.2.1.1.4.6 MIFARE Plus AES_Key2.</strong></p></li>
<li><p>0x03 = AES_Key3 = 16 bytes value stored in <strong>Property
1.2.1.1.4.7 MIFARE Plus AES_Key3.</strong></p></li>
<li><p>0x04 = AES_Key4 = 16 bytes values stored in <strong>Property
1.2.1.1.4.8 MIFARE Plus AES_Key4.</strong></p></li>
<li><p>0x05 = AES_Key5 = 16 bytes values stored in <strong>Property
1.2.1.1.4.9 MIFARE Plus AES_Key5.</strong></p></li>
<li><p>0x06 = AES_Key6 = 16 bytes values stored in <strong>Property
1.2.1.1.4.A MIFARE Plus AES_Key6.</strong></p></li>
</ul></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC-specific, 48-byte ECC
originality check signature.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>Personalize UID</td>
<td>2</td>
<td><p>Set anti-collision, selection and authentication behavior.</p>
<p>The execution of this command requires an authentication to MF
Classic sector 0. Once this command has been issued and accepted by the
PICC, the configuration is automatically locked. A subsequently issued
‘Personalize UID Usage’ command is not executed and fails.</p>
<p>Byte 0 = 0x40</p>
<p>Byte 1 = Encoded type of UID usage:</p>
<p>0x00 = UIDF0 = anti-collision and selection with the double size UID
(7-byte) according to ISO/IEC14443-3</p>
<p>0x40 = UIDF1 = anti-collision and selection with the double size UID
(7-byte) according to ISO/IEC 14443-3 and optional usage of a selection
process shortcut</p>
<p>0x20 = UIDF2 = anti-collision and selection with a single size random
ID (4-byte) according to ISO/IEC14443-3. After the card is configured
with random ID, it won’t be able perform any MF Classic authentication
since MF Classic authentication requires UID.</p>
<p>0x60 = UIDF3 = anti-collision and selection with a single size NUID
(4-byte) according to ISO/IEC14443-3 where the NUID is calculated out of
the 7-byte UID</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>CANCEL</td>
<td>1</td>
<td><p>This command is used to terminate the pass-through command
session.</p>
<p>Byte 0 = 0xFF</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>

Table 95 - Response Data for Command 0x1101 – Pass Through Command for
MIFARE Classic/MINI®/Plus SL1 (Security Level 1), Type 2

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">1101 = <strong>Command 0x1101 – Pass Through Command for
MIFARE Classic/MINI®/Plus SL1 (Security Level 1), Type 2</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Tag Response Code</p>
<p>Byte 0 = 0x00 = Success</p>
<p>Byte 0 = 0x01 = I/O Failed</p>
<p>Byte 0 = 0x02 Authentication Failed</p>
<p>Byte 1 = 0x01 = Block that Failed (optional)</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Encryption Control</p>
<p>If encrypted, see <strong>Table 90 - Payload for Encrypted
NFC/MIFARE</strong> Data</p>
<p>If unencrypted see <strong>Table 91 – Unencrypted NFC/MIFARE</strong>
Data</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 96 - Request Example (Read Sector 0, Block Number Start 0 - End 0,
KeyType A, Key = FFFFFFFFFFFF)

| Example (Hex) |
|----|
| AA 00 81 04 01 19 11 01 84 15 11 01 81 0B 30 00 00 00 00 FF FF FF FF FF FF 82 01 00 83 01 00 |

Table 97 - Response Example (Read Sector 0, Block Number Start 0 - End
0, KeyType A, Key = FFFFFFFFFFFF)

| Example (Hex) |
|----|
| AA 00 81 04 82 19 11 01 82 04 01 00 00 00 84 1C 11 01 81 01 00 82 15 FC 13 DF 7A 10 A4 FB 0D 3E 6C 08 04 00 03 0D C0 90 EE BF BB 1D |

##### Encrypted Data Format

Table 98 - Payload for Encrypted NFC/MIFARE Data

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 342</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section 4.4 Encryption Type for a list of valid values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Table 99 – Unencrypted NFC/MIFARE Data

| Tag   | Len | Value / Description       | Typ | Req | Default |
|-------|-----|---------------------------|-----|-----|---------|
| FC    | var | NFC/MIFARE Data Container | T   | R   |         |
| /DF7A | var | NFC/MIFARE Data           | B   | O   |         |

#### Command 0x1102 – Pass Through Command for MIFARE DESFire, Type 4

After a MIFARE DESFire Light/EV1/EV2/EV3 Tag is activated, the host uses
this command to send commands and receive responses to and from a MIFARE
DESFire Tag.

There will be a fixed 30 second timeout for commands that require
multiple command/responses.

Table 100 - Request Data for Command 0x1102 – Pass Through Command for
MIFARE DESFire, Type 4

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message">23</a></td>
</tr>
<tr>
<td colspan="6">1102 <strong>=</strong> <strong>Command 0x1102 – Pass
Through Command for MIFARE DESFire, Type 4</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Command to Send.</p>
<p>See DESFire Data Sheet (MF2DLHX0)</p>
<p>Should follow ISO 7816-4 APDU format</p>
<ul>
<li><p>C-APDU</p></li>
</ul>
<ul>
<li><p>CLA INS P1 P2 Lc Data Le</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>00 – No Encrypt</p>
<p>01 - Encrypt</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>00 – Expect More Commands</p>
<p>01 – FF (Last Command)</p>
<p>If last command, Device will provide a single beep after receiving a
successful response from tag, otherwise, device will provide a double
beep</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Request
Message found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 101 - Response Data for Command 0x1102 – Pass Through Command for
MIFARE DESFire, Type 4

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">1102 = <strong>Command 0x1102 – Pass Through Command for
MIFARE DESFire, Type 4</strong></td>
</tr>
<tr>
<td>81</td>
<td>02</td>
<td><p>Tag Response (SW1 SW2)</p>
<p>See DESFire Data Sheet (MF2DLHX0)</p>
<p>Should follow ISO 7816-4 APDU format</p>
<ul>
<li><p>SW1 and SW2 of R-APDU</p></li>
</ul>
<p>If card is not able to respond:</p>
<ul>
<li><p>SW1 = 0x64, SW2 = 0x00</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Tag Data</p>
<ul>
<li><p>Data of R-APDU</p></li>
</ul>
<p>Encryption Control</p>
<p>If encrypted, see <strong>Table 90 - Payload for Encrypted
NFC/MIFARE</strong> Data</p>
<p>If unencrypted see <strong>Table 91 – Unencrypted NFC/MIFARE</strong>
Data</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 102 - Request Example (Get Version Part 1)

| Example (Hex) |
|----|
| AA 00 81 04 01 13 11 02 84 0F 11 02 81 05 90 60 00 00 00 82 01 00 83 01 00 |

Table 103 - Response Example (Get Version Part 1)

| Example (Hex) |
|----|
| AA 00 81 04 82 13 11 02 82 04 01 00 00 00 84 14 11 02 81 02 91 AF 82 0C FC 0A DF 7A 07 04 08 01 30 00 13 05 |

##### Encrypted Data Format

Table 104 - Payload for Encrypted NFC/MIFARE Data

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 342</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of Notification Message found on page <a
href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 105 – Unencrypted NFC/MIFARE Data

| Tag   | Len | Value / Description       | Typ | Req | Default |
|-------|-----|---------------------------|-----|-----|---------|
| FC    | var | NFC/MIFARE Data Container | T   | R   |         |
| /DF7A | var | NFC/MIFARE Data           | B   | O   |         |

#### Command 0x1103 – Pass Through Command for MIFARE Plus, Type 2

After a MIFARE Plus EV1/EV2/SE/X Tag is activated, the Host uses this
command to send commands and receive responses to and from a MIFARE Plus
tag.

For MIFARE Plus SE/X, the Device will not auto detect an error from the
MIFARE Tag that has been removed to end the pass-through session. To end
the pass-through session, the Host application can send the last
command, CANCEL command (0xFF), or receive error response from the
MIFARE Tag.

After the card is configured to successfully switch to Security Level 1,
the card will be discovered as MIFARE Classic 1K/4K and can use the same
functionality as MIFARE Classic 1K/4K commands.

For more details, please refer to NXP NDA documentation ds206234-Product
data sheet MIFARE Plus Functionality of implementations on smart card
controllers (3.4)

Table 106 - Command 0x1103 – Pass Through Command for MIFARE Plus, Type
2

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message">23</a></td>
</tr>
<tr>
<td colspan="6"><strong>1103 = Command 0x1103 – Pass Through Command for
MIFARE Plus, Type 2</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Command to Send.</p>
<p>See <strong>Table 107 - MIFARE Plus EV1/EV2/SE/X SL0 (Security Level
0) Commands</strong></p>
<p>See <strong>Table 108 – MIFARE Plus EV1/EV2/SE/X SL3 (Security Level
3) Commands</strong></p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>00 – No Encrypt</p>
<p>01 - Encrypt</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>00 – Expect More Commands</p>
<p>01 – FF (Last Command)</p>
<p>If this is the last command, the Device will provide a single beep
after receiving a successful response from the tag, otherwise, the
device will provide a double beep</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Request
Message found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 107 - MIFARE Plus EV1/EV2/SE/X SL0 (Security Level 0) Commands

<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 8%" />
<col style="width: 54%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
<th>EV1</th>
<th>EV2</th>
<th>SE</th>
<th>X</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET_VERSION</td>
<td>1</td>
<td><p>The GET_VERSION command is used to retrieve manufacturing related
data of the MIFARE Plus EV1/EV2 cards</p>
<p>Byte 0 = 0x60</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC-specific, 48-byte ECC
originality check signature of MIFARE Plus EV1/EV2 cards.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>WRITE_PERSO</td>
<td>19</td>
<td><p>The WRITE_PERSO command is used to pre-personalize AES keys and
data from the initial delivery configuration to a customer specific
value.</p>
<p>Byte 0 = 0xA8</p>
<p>Byte 1-2 = Number of Block or Key to be written to (MSB first). See
NXP doc ds206234, table 113.</p>
<p>Byte 3 to 18 = 16 bytes value of the key or data which shall be
written (in plain)</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>COMMIT_PERSO</td>
<td>2</td>
<td><p>The COMMIT_PERSO command is used to finalize the personalization
and switch up to security level 1 or security level 3.</p>
<p>For MIFARE Plus EV1/EV2, the following mandatory AES keys must be
written using the WRITE_PERSO command before it can be switched to
security level 1 or security level 3.</p>
<ul>
<li><p>Card Configuration Key</p></li>
<li><p>Card Master Key</p></li>
<li><p>Level 2 Switch Key</p></li>
<li><p>Level 3 Switch Key</p></li>
</ul>
<p>For MIFARE Plus SE, the following mandatory AES keys must be written
using the WRITE_PERSO command before it can be switched to security
level 1 (for L1 card) or security level 3 (for L3 card).</p>
<ul>
<li><p>Card Configuration Key</p></li>
<li><p>Card Master Key</p></li>
<li><p>Level 3 Switch Key</p></li>
</ul>
<p>For MIFARE Plus X, the following mandatory AES keys must be written
using the WRITE_PERSO command before it can be switched to security
level 1 (for L1 card) or security level 3 (for L3 card).</p>
<ul>
<li><p>Card Configuration Key</p></li>
<li><p>Card Master Key</p></li>
<li><p>Level 2 Switch Key (for L1 card)</p></li>
<li><p>Level 3 Switch Key (for L1 card)</p></li>
</ul>
<p>Byte 0 = 0xAA</p>
<p>Byte 1 = Security Level Option for EV1 and EV2 cards</p>
<ul>
<li><p>0x01 = Security Level 1</p></li>
<li><p>0x03 = Security Level 3</p></li>
<li><p>Other values = Invalid. Device will return error.</p></li>
</ul>
<p>Byte 1 = 0x00 for SE and X cards. The Device will return error for
other values.</p>
<p>It is also highly recommended to change all sector AES keys as well
as the data within this security level in a secure environment.</p>
<p>This command is behaved as the last command. The Device will provide
a single beep after receiving a successful response from a card,
otherwise, device will provide a double beep.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>CANCEL</td>
<td>1</td>
<td><p>This command is used to terminate the pass-through command
session.</p>
<p>Byte 0 = 0xFF</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>

Table 108 – MIFARE Plus EV1/EV2/SE/X SL3 (Security Level 3) Commands

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 7%" />
<col style="width: 54%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr>
<th>Command</th>
<th>Length</th>
<th>Field Value</th>
<th>EV1</th>
<th>EV2</th>
<th>SE</th>
<th>X</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MIFARE Plus Authenticate commands</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>First Authenticate (part1 and part2)</td>
<td>3</td>
<td><p>First Authenticate</p>
<p>Byte 0 = 0x70</p>
<p>Byte 1-2 = Key Number of the key to be authenticated (MSB first). See
NXP doc ds206234, table 113.</p>
<p>Byte 3 = MIFARE Plus AES_Key#</p>
<ul>
<li><p>0x01 = AES_Key1 = 16 bytes value stored in <strong>Property
1.2.1.1.4.5 MIFARE Plus AES_Key1.</strong></p></li>
<li><p>0x02 = AES_Key2 = 16 bytes value stored in <strong>Property
1.2.1.1.4.6 MIFARE Plus AES_Key2.</strong></p></li>
<li><p>0x03 = AES_Key3 = 16 bytes value stored in <strong>Property
1.2.1.1.4.7 MIFARE Plus AES_Key3.</strong></p></li>
<li><p>0x04 = AES_Key4 = 16 bytes values stored in <strong>Property
1.2.1.1.4.8 MIFARE Plus AES_Key4.</strong></p></li>
<li><p>0x05 = AES_Key5 = 16 bytes values stored in <strong>Property
1.2.1.1.4.9 MIFARE Plus AES_Key5.</strong></p></li>
<li><p>0x06 = AES_Key6 = 16 bytes values stored in <strong>Property
1.2.1.1.4.A MIFARE Plus AES_Key6.</strong></p></li>
</ul></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><p>Following Authenticate</p>
<p>(part1 and part2)</p></td>
<td>3</td>
<td><p>Following Authenticate</p>
<p>Byte 0 = 0x76</p>
<p>Byte 1-2 = Key Number of the key to be authenticated (MSB first). See
NXP doc ds206234, table 113.</p>
<p>Byte 3 = MIFARE Plus AES_Key#</p>
<ul>
<li><p>0x01 = AES_Key1 = 16 bytes value stored in <strong>Property
1.2.1.1.4.5 MIFARE Plus AES_Key1.</strong></p></li>
<li><p>0x02 = AES_Key2 = 16 bytes value stored in <strong>Property
1.2.1.1.4.6 MIFARE Plus AES_Key2.</strong></p></li>
<li><p>0x03 = AES_Key3 = 16 bytes value stored in <strong>Property
1.2.1.1.4.7 MIFARE Plus AES_Key3.</strong></p></li>
<li><p>0x04 = AES_Key4 = 16 bytes values stored in <strong>Property
1.2.1.1.4.8 MIFARE Plus AES_Key4.</strong></p></li>
<li><p>0x05 = AES_Key5 = 16 bytes values stored in <strong>Property
1.2.1.1.4.9 MIFARE Plus AES_Key5.</strong></p></li>
<li><p>0x06 = AES_Key6 = 16 bytes values stored in <strong>Property
1.2.1.1.4.A MIFARE Plus AES_Key6.</strong></p></li>
</ul></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>ResetAuth</td>
<td>1</td>
<td><p>Reset the authentication</p>
<p>Byte 0 = 0x78</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><strong>READ commands</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Read</td>
<td>4</td>
<td><p>Reading encrypted, no MAC on response, MAC</p>
<p>on command.</p>
<p>This command offers the possibility to read the data from</p>
<p>one or multiple blocks in an encrypted way. A MAC is only used on the
command sent to the PICC, no MAC is attached to the response.</p>
<p>Byte 0 = 0x30</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read MACed</td>
<td>4</td>
<td><p>Reading encrypted, MAC on response, MAC on</p>
<p>Command.</p>
<p>This command offers the possibility to read the data from</p>
<p>one or multiple blocks in an encrypted way. A MAC is used on the
command sent to the PICC and on the response</p>
<p>received.</p>
<p>Byte 0 = 0x31</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read Plain</td>
<td>4</td>
<td><p>Reading in plain, no MAC on response, MAC on command.</p>
<p>This command offers the possibility to read the data in plain from
one or multiple blocks. A MAC is used on the command and not on the
response.</p>
<p>Byte 0 = 0x32</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read Plain MACed</td>
<td>4</td>
<td><p>Reading in plain, MAC on response, MAC on command.</p>
<p>This command offers the possibility to read the data in plain from
one or multiple blocks. A MAC is used on the command and the
response.</p>
<p>Byte 0 = 0x33</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read UnMACed</td>
<td>4</td>
<td><p>Reading encrypted, no MAC on response, no</p>
<p>MAC on command</p>
<p>This command offers the possibility to read the data from</p>
<p>one or multiple blocks in an encrypted way.</p>
<p>By default, Read with MAC on command is required. To Read with no MAC
on command, needs to modify the card MFP Configuration Block.</p>
<p>Byte 0 = 0x34</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read UnMACed, Response MACed</td>
<td>4</td>
<td><p>Reading encrypted, MAC on response, no MAC on command</p>
<p>This command offers the possibility to read the data from</p>
<p>one or multiple blocks in an encrypted way. A MAC is used only on the
response received.</p>
<p>By default, Read with MAC on command is required. To Read with no MAC
on command, needs to modify the card MFP Configuration Block.</p>
<p>Byte 0 = 0x35</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read Plain UnMACed</td>
<td>4</td>
<td><p>Reading in plain, no MAC on response, no MAC on command.</p>
<p>This command offers the possibility to read the data in plain from
one or multiple blocks. AMAC is not used on the response and not on the
command.</p>
<p>By default, Read with MAC on command is required. To Read with no MAC
on command, needs to modify the card MFP Configuration Block.</p>
<p>Byte 0 = 0x36</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Read Plain UnMACed, Response MACed</td>
<td>4</td>
<td><p>Reading in plain, MAC on response, no MAC on command</p>
<p>This command offers the possibility to read the data in plain from
one or multiple blocks. A MAC is used on the response and not on the
command.</p>
<p>By default, Read with MAC on command is required. To Read with no MAC
on command, needs to modify the card MFP Configuration Block.</p>
<p>Byte 0 = 0x37</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> block to be read (MSB
first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01 – 0x0F = Number of blocks to be read. Sector Trailers
do not count if Byte 3 &gt; 1. Use Byte 3 = 1 for reading Sector
Trailer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><strong>WRITE commands</strong></td>
<td></td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Write</td>
<td>20/36/52</td>
<td><p>Writing encrypted, no MAC on response, MAC on Command.</p>
<p>This command offers the possibility to write the data to up to three
blocks in an encrypted way. MAC is only used on the command sent to the
PICC.</p>
<p>Byte 0 = 0xA0</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> to be written block
(MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01/0x02/0x03 = number of blocks (16 byte) of the data to
be written</p>
<p>Byte 4 – n = Data to be written, equal to number of blocks *
16.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Write MACed</td>
<td>20/36/52</td>
<td><p>Writing encrypted, MAC on response, MAC on command.</p>
<p>This command offers the possibility to write the data to up to three
blocks in an encrypted way. A MAC is used on the command sent to the
PICC and on the response received from the PICC.</p>
<p>Byte 0 = 0xA1</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> to be written block
(MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01/0x02/0x03 = number of blocks (16 byte) of the data to
be written</p>
<p>Byte 4 – n = Data to be written, equal to number of blocks *
16.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Write Plain</td>
<td>20/36/52</td>
<td><p>Writing in plain, no MAC on response, MAC on command</p>
<p>This command offers the possibility to write the data to up to three
blocks in plain. A MAC is only used on the command sent to the PICC.</p>
<p>Byte 0 = 0xA2</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> to be written block
(MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01/0x02/0x03 = number of blocks (16 byte) of the data to
be written</p>
<p>Byte 4 – n = Data to be written, equal to number of blocks *
16.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Write Plain MACed</td>
<td>20/36/52</td>
<td><p>Writing in plain, MAC on response, MAC on command.</p>
<p>This command offers the possibility to write the data to up to three
blocks in plain. A MAC is used on the command sent to the PICC as well
as on the response from the PICC</p>
<p>Byte 0 = 0xA3</p>
<p>Byte 1-2 = Block number of the 1<sup>st</sup> to be written block
(MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3 = 0x01/0x02/0x03 = number of blocks (16 byte) of the data to
be written</p>
<p>Byte 4 – n = Data to be written, equal to number of blocks *
16.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><strong>VALUE operations</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Increment</td>
<td>7</td>
<td><p>Increment encrypted, no MAC on response, MAC on command</p>
<p>This command offers the possibility to increment a value block where
the command is secured by a MAC calculated, but not on the response.</p>
<p>Byte 0 = 0xB0</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
incremented (MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3-6 = The 4 bytes value to be incremented in LSB order. For
example, if the value to be incremented by 1, then the value will be
0x01 00 00 00</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Increment MACed</td>
<td>7</td>
<td><p>Increment encrypted, MAC on response, MAC on command.</p>
<p>This command offers the possibility to increment a value block where
the command is secured by a MAC calculated, but not on the response.</p>
<p>Byte 0 = 0xB1</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
incremented (MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3-6 = The 4 bytes value to be incremented in LSB order. For
example, if the value to be incremented by 1, then the value will be
0x01 00 00 00</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Decrement</td>
<td>7</td>
<td><p>Decrement encrypted, no MAC on response, MAC on command.</p>
<p>This command offers the possibility to decrement a value block where
the command is secured by a MAC calculated, but not on the response.</p>
<p>Byte 0 = 0xB2</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
decremented (MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3-6 = The 4 bytes value to be decremented in LSB order. For
example, if the value to be decremented by 1, then the value will be
0x01 00 00 00</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Decrement MACed</td>
<td>7</td>
<td><p>Decrement encrypted, MAC on response, MAC on command</p>
<p>This command offers the possibility to decrement a value block where
the command is secured by a MAC calculated, as well as on the
response.</p>
<p>Byte 0 = 0xB3</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
decremented (MSB first). See NXP doc ds206234, table 113.</p>
<p>Byte 3-6 = The 4 bytes value to be decremented in LSB order. For
example, if the value to be decremented by 1, then the value will be
0x01 00 00 00</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Transfer</td>
<td>3</td>
<td><p>Transfer, no MAC on response, MAC on command.</p>
<p>The Transfer command stores the content of the Transfer Buffer to the
specified address.</p>
<p>The Transfer command can be applied to any block. The Transfer
command can only be executed after an Increment, Decrement,
IncrementTransfer, DecrementTransfer or</p>
<p>Restore command has been successfully executed since the latest
authentication. The command is secured by a MAC on a command. No MAC is
calculated on the response.</p>
<p>Byte 0 = 0xB4</p>
<p>Byte 1-2 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer (MSB first). See NXP doc ds206234,
table 113.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Transfer MACed</td>
<td>3</td>
<td><p>Transfer, MAC on response, MAC on command.</p>
<p>The Transfer command stores the content of the Transfer Buffer to the
specified address.</p>
<p>The Transfer command can be applied to any block. The Transfer
command can only be executed after an Increment, Decrement,
IncrementTransfer, DecrementTransfer or</p>
<p>Restore command has been successfully executed since the latest
authentication. The command is secured by a MAC on a command. A MAC is
calculated on the response.</p>
<p>Byte 0 = 0xB5</p>
<p>Byte 1-2 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer (MSB first). See NXP doc ds206234,
table 113.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Increment Transfer</td>
<td>9</td>
<td><p>Increment Transfer encrypted, no MAC on response, MAC on</p>
<p>Command.</p>
<p>This command offers the possibility to make a combined increment and
transfer within one command on a value block where the command is
secured by a MAC calculated, no MAC on the response.</p>
<p>The command updates the Transfer Buffer in the same way as if a
separate Increment and Transfer commands were given</p>
<p>Byte 0 = 0xB6</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
incremented.</p>
<p>Byte 3-4 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer.</p>
<p>Byte 5-8 = The 4 bytes value to be incremented in LSB order.</p>
<p>For example, if the value to be incremented by 1, then the value will
be 0x01 00 00 00</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Increment Transfer MACed</td>
<td>9</td>
<td><p>Increment Transfer encrypted, MAC on response, MAC on
command.</p>
<p>This command offers the possibility to make a combined increment and
transfer within one command on a value block where the command is
secured by a MAC calculated, and as well as a MAC on the response.</p>
<p>The command updates the Transfer Buffer in the same way as if a
separate Increment and Transfer commands were given.</p>
<p>Byte 0 = 0xB7</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
incremented (MSB first).</p>
<p>Byte 3-4 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer (MSB first).</p>
<p>Byte 5-8 = The 4 bytes value to be incremented in LSB order.</p>
<p>For example, if the value to be incremented by 1, then the value will
be 0x01 00 00 00.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Decrement Transfer</td>
<td>9</td>
<td><p>Decrement Transfer encrypted, no MAC on response, MAC on
command</p>
<p>This command offers the possibility to make a combined decrement and
transfer within one command on a value block where the command is
secured by a MAC, but no MAC on the response. The command updates the
Transfer Buffer in the same way as if a separate Decrement and Transfer
commands were given.</p>
<p>Byte 0 = 0xB8</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
decremented (MSB first).</p>
<p>Byte 3-4 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer (MSB first).</p>
<p>Byte 5-8 = The 4 bytes value to be incremented in LSB order.</p>
<p>For example, if the value to be decremented by 1, then the value will
be 0x01 00 00 00.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Decrement Transfer MACed</td>
<td>9</td>
<td><p>Decrement Transfer encrypted, MAC on response, MAC on</p>
<p>Command</p>
<p>This command offers the possibility to make a combined decrement and
transfer within one command on a value block where both the command and
the response are secured by a MAC.</p>
<p>The command updates the Transfer Buffer in the same way as if a
separate Decrement and Transfer commands were given.</p>
<p>Byte 0 = 0xB9</p>
<p>Byte 1-2 = Source Block number. Block Number of the block to be
decremented (MSB first).</p>
<p>Byte 3-4 = Destination Block number, whose content is to be replaced
by the content of the Transfer Buffer (MSB first).</p>
<p>Byte 5-8 = The 4 bytes value to be incremented in LSB order.</p>
<p>For example, if the value to be decremented by 1, then the value will
be 0x01 00 00 00.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Restore</td>
<td>3</td>
<td><p>Restore encrypted, no MAC on response, MAC on command</p>
<p>The Restore command copies the Content found in the Value Block at
the given address to the Transfer Buffer. The Restore command can only
be applied to value blocks. The command is secured by a MAC on a
command, no MAC is calculated on the response.</p>
<p>Byte 0 = 0xC2</p>
<p>Byte 1-2 = Source Block number. Block Number of the block which
content is to be copied to the Transfer Buffer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Restore MACed</td>
<td>3</td>
<td><p>Restore encrypted, MAC on response, MAC on command.</p>
<p>The Restore command copies the Content found in the Value Block at
the given address to the Transfer Buffer. The Restore command can only
be performed to value blocks. The command is secured by a MAC on a
command and a MAC is</p>
<p>calculated on the response.</p>
<p>Byte 0 = 0xC3</p>
<p>Byte 1-2 = Source Block number. Block Number of the block which
content is to be copied to the Transfer Buffer.</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td><strong>Others</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GET_VERSION</td>
<td>1</td>
<td><p>The GET_VERSION command is used to retrieve manufacturing related
data of the MIFARE Plus EV1/EV2 cards</p>
<p>Byte 0 = 0x60</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>READ_SIG</td>
<td>2</td>
<td><p>The READ_SIG command returns an IC-specific, 48-byte ECC
originality check signature of MIFARE Plus EV1/EV2 cards.</p>
<p>Byte 0 = 0x3C</p>
<p>Byte 1 = 0x00, RFU</p></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>CANCEL</td>
<td>1</td>
<td><p>This command is used to terminate the pass-through command
session.</p>
<p>Byte 0 = 0xFF</p></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>

Table 109 - Response Data for Command 0x1103 – Pass Through Command for
MIFARE Plus, Type 2

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">1103 = <strong>Command 0x1103 – Pass Through Command for
MIFARE Plus, Type 2</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Tag Response Code</p>
<p>0x00 = Success</p>
<p>0x01 = Failed</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>Var</td>
<td><p>Encryption Control</p>
<p>If encrypted, see <strong>Table 90 - Payload for Encrypted
NFC/MIFARE</strong> Data</p>
<p>If unencrypted see <strong>Table 91 – Unencrypted NFC/MIFARE</strong>
Data</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Response
Message found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 110 - Request Example (Get Version)

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA 00 81 04 01 DA 11 03 84 0B 11 03 81 01 60 82 01 00 83 01 00 |

Table 111 - Response Example (Get Version)

| Example (Hex) |
|----|
| AA 00 81 04 82 DA 11 03 82 04 01 00 00 00 84 28 11 03 81 01 00 82 21 FC 1F DF 7A 1C 04 02 01 11 00 16 04 04 02 01 01 01 16 04 04 4D 59 5A 3E 18 90 CF 8D 15 61 51 21 23 |

##### Encrypted Data Format

Table 112 - Payload for Encrypted NFC/MIFARE Data

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 342</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of Notification Message found on page <a
href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 113 – Unencrypted NFC/MIFARE Data

| Tag   | Len | Value / Description       | Typ | Req | Default |
|-------|-----|---------------------------|-----|-----|---------|
| FC    | var | NFC/MIFARE Data Container | T   | R   |         |
| /DF7A | var | NFC/MIFARE Data           | B   | O   |         |

### Command Group 0x18nn - User Interface

#### Command 0x1801 - Request Cardholder Signature (Touch Only)

The host uses this command to prompt a cardholder for a signature.

The sequence of events is as follows:

1)  The device completes a transaction after the host invokes **Command
    0x1001 - Start Transaction**. At the end of the transaction, the
    device has provided data to the host in **Notification 0x0105 -
    Transaction Operation Complete**.

2)  The host decides whether to request a signature from the cardholder.
    For example:

    1)  If the Notification Detail in **Notification 0x0105 -
        Transaction Operation Complete** indicates Signature Capture
        Requested.

    2)  If an application-specific rule requires requesting a signature.

3)  If the host determines it should request a signature, it composes a
    command request in the format below.

4)  The device presents a signature capture interface to the cardholder
    on the display.

5)  The device sends **Notification 0x1805 - User Interface Operation
    Complete** to the host to report data available, timeout, or
    hardware failure.

6)  If the device reported data available, the host uses **Command
    0xD821 - Start Get File from Device** to request file type
    **Signature Capture File** to retrieve the data as a **Signature
    Capture File Type**.

Table 114 - Request Data for Command 0x1801 - Request Cardholder
Signature (Touch Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1801 = <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Timeout</p>
<p>Timeout in seconds that the device should wait for the cardholder to
sign and confirm completion.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 115 - Response Data for Command 0x1801 - Request Cardholder
Signature (Touch Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1801 = **Command 0x1801 - Request Cardholder Signature (Touch Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 116 - Request Example

| Example (Hex)                                |
|----------------------------------------------|
| AA 00 81 04 01 00 18 01 84 05 18 01 81 01 1E |

Table 117 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 00 18 01 82 04 01 00 00 00 |

#### Command 0x1802 - Report Cardholder Selection

The host uses this command to provide a cardholder selection to the
device when the device itself does not have a display or inputs to
prompt the cardholder for a selection.

The sequence of events is as follows:

1)  The host has already invoked **Command 0x1001 - Start Transaction**
    and the transaction is still in process.

2)  During the transaction, if the device does not have a display or
    touchscreen but needs to show information to the cardholder or needs
    the cardholder to make a selection, it sends the host **Notification
    0x1803 - User Interface Host Action Request** to report Display /
    Cardholder Selection and supporting information.

3)  The host uses its user interface to request a selection from the
    cardholder based on the information and selectable items provided by
    the notification message.

4)  The host sends the user selection to the device by sending the
    command in the format below.

Table 118 - Request Data for Command 0x1802 - Report Cardholder
Selection

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1802 = <strong>Command 0x1802 - Report Cardholder
Selection</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Cardholder Selection Request Status</p>
<ul>
<li><p>0x00 = Cardholder Selection Request completed, see Selection
Result parameter.</p></li>
<li><p>0x01 = Cardholder Selection Request canceled by cardholder,
Transaction Aborted.</p></li>
<li><p>0x02 = Cardholder Selection Request timed out, Transaction
Aborted.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Selection Result</p>
<p>Menu item index the cardholder selected. If the cardholder made no
selection or the operation terminated abnormally, the device does not
include this parameter.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 119 - Response Data for Command 0x1802 - Report Cardholder
Selection

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1802 = **Command 0x1802 - Report Cardholder Selection** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 120 - Request Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 01 00 18 02 84 08 18 02 81 01 00 82 01 00 |

Table 121 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 00 18 02 82 04 01 00 00 00 |

#### Command 0x1803 - Display Message (Display Only)

The host uses this command to request that the device display a message
for the cardholder.

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction using
    **Command 0x1001 - Start Transaction**.

2)  The host selects the message it wants to display from the list of
    available pre-determined strings.

3)  The host composes a command request in the format below, and sends
    it to the device.

4)  The device displays the requested message.

    1)  If the Timeout parameter is set to Infinite, the device returns
        a command response message with Response Status, Operation
        Status Summary byte set to 0x00 (OK, Done) after which the host
        is free to send further commands.

    2)  If the timeout parameter is not set to Infinite:

        1)  The device returns a command response message with its
            Response Status, Operation Status Summary byte set to 0x01
            (OK, Started / Running).

        2)  While the host is waiting for the timeout to expire, it
            should not send any commands to the device, because the
            device is busy processing the current command.

        3)  After the timeout period expires, the device blanks the
            display and sends **Notification 0x1805 - User Interface
            Operation Complete** to inform the host.

Table 122 - Request Data for Command 0x1803 - Display Message (Display
Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1803 = <strong>Command 0x1803 - Display Message (Display
Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Timeout</p>
<ul>
<li><p>0x00 = Infinite. Device leaves the requested message on the
display until the host initiates a change.</p></li>
<li><p>All other values = Timeout in seconds for the device to display
the message.</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Message ID</p>
<p>Specify a Display String ID from section <strong>4.3 Display
Strings</strong>.</p></td>
<td>B</td>
<td>O</td>
<td>0x14</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 123 - Response Data for Command 0x1803 - Display Message (Display
Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1803 = **Command 0x1803 - Display Message (Display Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 124 - Request Example

| Example (Hex)                             |
|-------------------------------------------|
| AA00 810401551803 8408 1803 810102 820116 |

Table 125 - Response Example

| Example (Hex)                           |
|-----------------------------------------|
| AA00 810482551803 820401000000 84021803 |

#### Command 0x1804 - Read Barcode (BCR Only)

The host uses this command to direct the device to arm or disarm the
barcode reader for reading a barcode outside the scope of a transaction.
This is an immediate directive. To read barcodes within the scope of a
transaction, use **Command 0x1001 - Start Transaction** and its barcode
reader parameters instead.

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction using
    **Command 0x1001 - Start Transaction**.

2)  The host composes a command request in the format below and sends it
    to the device.

3)  If the device has a display, it shows a prompt **SCAN BARCODE**.

4)  The device enables the barcode reader.

    1)  If the **Timeout** parameter is set to **Infinite**:

        1)  The device returns a command response message with Response
            Status, Operation Status Summary byte set to 0x00 (OK, Done)
            after which the host is free to send further commands.

        2)  The host may end the barcode reading session by calling this
            command again with the **Enable** parameter set to
            **Disable**.

    2)  If the **Timeout** parameter is set to a value other than
        **Infinite**:

        1)  The device returns a command response message with its
            Response Status, Operation Status Summary byte set to 0x01
            (OK, Started / Running).

        2)  While the host is waiting for the timeout to expire, it
            should not send any commands to the device, because the
            device is busy processing the current command.

        3)  After the device reads a barcode or the timeout period
            expires, the device sends **Notification 0x1805 - User
            Interface Operation Complete** to report Barcode Reader /
            Read Barcode Result and additional supporting information.

Table 126 - Request Data for Command 0x1804 - Read Barcode (BCR Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1804 = <strong>Command 0x1804 - Read Barcode (BCR
Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Enable</p>
<ul>
<li><p>0x00 = Disable. The device disables the barcode reader. In this
case, the device ignores all other parameters.</p></li>
<li><p>0x01 = Enable. The device enables the barcode reader.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>0x00</td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Timeout</p>
<ul>
<li><p>0x00 = Infinite. The device leaves the barcode reader enabled
until it reads a barcode, or until the host sends this command again to
disable the barcode reader.</p></li>
<li><p>All other values = Timeout in seconds for the device to leave the
barcode reader enabled without reading a barcode.</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>Encrypt Barcode Data</p>
<ul>
<li><p>0x00 = Do Not Encrypt. The device does not encrypt the barcode
data when it sends <strong>Notification 0x1805 - User Interface
Operation Complete</strong>.</p></li>
<li><p>0x01 = Encrypt. The device encrypts the barcode data when it
sends <strong>Notification 0x1805 - User Interface Operation
Complete</strong>.</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>99</td>
<td>var</td>
<td><p>(MAGTEK INTERNAL ONLY)</p>
<p>Send Command to Barcode Reader</p>
<p>The device sends the command to the barcode reader. The host can use
these commands to change the reader’s internal configuration. See
<em><strong>UM10089_NLS-N1_User_Guide</strong></em> for command
details.</p>
<p>If tag 0x99 is included in the command, the device ignores all other
tags.</p>
<p><strong>Do not change communication settings with this feature.
Changes may result is loss of communications with the
reader.</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 127 - Response Data for Command 0x1804 - Read Barcode (BCR Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1804 = **Command 0x1804 - Read Barcode (BCR Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 128 - Request Example

| Example (Hex)                                    |
|--------------------------------------------------|
| AA00 810401031804 840B 1804 810101 82010F 830101 |

Table 129 - Response Example

| Example (Hex)                  |
|--------------------------------|
| AA00 810482031804 820401000000 |

#### Command 0x1805 - Buzzer

The host uses this command to start a buzzer for playing a sequence of
tones. Each sequence can have a minimum of 1 to maximum of 10 tones.

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction using
    **Command 0x1001 - Start Transaction**.

2)  The host composes a command request in the format below and sends it
    to the device.

3)  The device plays a specific tone sequence as the command specified.
    After finish, the device sends **Notification 0x1805 - User
    Interface Operation Complete** to report Buzzer/Buzzer Result.

> The host should wait for **Notification 0x1805 - User Interface
> Operation Complete** before sending another command.
>
> If the buzzer is current playing a sequence of tones and any
> transaction that uses the buzzer to make a sound is started, the
> device will stop the buzzer for that transaction to take over.

Table 130 - Request Data for Command 0x1805 - Buzzer

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1805 = <strong>Command 0x1805 - Buzzer</strong></td>
</tr>
<tr>
<td>81</td>
<td>N*4</td>
<td><p>N = Number of tones</p>
<ul>
<li><p>0x01 – Min (1 tone)</p></li>
<li><p>0x0A – Max (10 tones)</p></li>
</ul>
<p>4 = 4 bytes data parameter for each tone in the sequence</p>
<p>Byte0-Byte1 – Frequency in units of 1 Hz</p>
<ul>
<li><p>0x0000..0x0031 (&lt; 50 Hz, Silent)</p></li>
<li><p>0x0032 - Min (50 Hz)</p></li>
<li><p>0x0FA0 - Max (4000 Hz)</p></li>
<li><p>0x0FA1..0xFFFF (&gt; 4000 Hz, Error)</p></li>
</ul>
<p>Byte 2-Byte3 – Duration of tone in units of 1 millisecond</p>
<ul>
<li><p>0x0001 – Min (1 ms)</p></li>
<li><p>0xFFFF – Max (65535 ms)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 131 - Response Data for Command 0x1805 - Buzzer

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1805 = **Command 0x1805 - Buzzer** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 132 - Request Example for a sequence of 5 tones

| Example (Hex) |
|----|
| AA00 810401031805 8418 1805 8114 00C8 01F4 0190 01F4 0258 01F4 0190 01F4 00C8 01F4 |

Table 133 - Response Example

| Example (Hex)                  |
|--------------------------------|
| AA00 810482031805 820401000000 |

#### Command 0x1821 - Show Image (Display Only)

The host uses this command to trigger the device to immediately show a
pre-loaded image on the display, provided the device is not in a mode
that has exclusive use of the display (such as during a transaction).
This is an immediate and temporary directive. For a solution that
affects the device’s idle page behavior on a more permanent basis, see
**Property 1.2.3.1.1.1 Custom Idle Page Image**. This command is
different from **Command 0x1823 - Show Bitmap Image** in that the
bitmaps are pre-loaded and persistently stored in the device and can not
be composited with each other.

The sequence of events is as follows:

1)  The host makes sure it has loaded the image into at least one of the
    device’s Custom Idle Page Image slots using **Command 0xD812 - Start
    Send File to Device (Unsecured)**.

2)  The host makes sure the device is in Active/Idle state (meaning the
    display is fully powered on and is not in a mode that has exclusive
    use of the display, such as processing a transaction).

3)  The host calls this command to show the image loaded into the
    desired slot number.

4)  The device shows the specified image on the display until the device
    is no longer in Active/Idle.

Table 134 - Request Data for Command 0x1821 - Show Image (Display Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1821 = <strong>Command 0x1821 - Show Image (Display
Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Custom Idle Page Image Number</p>
<ul>
<li><p>0x01 = Show custom image 1</p></li>
<li><p>0x02 = Show custom image 2</p></li>
<li><p>0x03 = Show custom image 3</p></li>
<li><p>0x04 = Show custom image 4</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Display Option</p>
<ul>
<li><p>0x00 = Default to cover/uncover the top status bar depends on the
current status of the display. If the current display shows the top
status bar, the Show Image command won’t cover the top status bar. If
the current display doesn’t show the top status bar, the Show Image
command will cover the top status bar.</p></li>
<li><p>0x01 = Cover the top status bar regardless of the current status
of the display.</p></li>
<li><p>0x02 = Not cover the top status bar regardless of the current
status of the display.</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0</td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>Display Time</p>
<ul>
<li><p>0x00 = Show image until device changes state</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 135 - Response Data for Command 0x1821 - Show Image (Display Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1821 = **Command 0x1821 - Show Image (Display Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **All Good, Requested Operation Was Successful**.

Table 136 - Request Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 01 2C 18 21 84 08 18 21 81 01 03 83 01 00 |

Table 137 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 2C 18 21 82 04 00 00 00 00 |

#### Command 0x1822 - Show QR Code (Display Only)

The host uses this command to direct the device to immediately show a QR
code on the display, provided the device is not in a mode that has
exclusive use of the display (such as during a transaction).

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction using
    **Command 0x1001 - Start Transaction**.

2)  The host selects the data for the QR code it wants to display.

3)  The host composes a command request in the format below and sends it
    to the device.

4)  The device generates and displays the QR code.

    1)  If the **Display Time** parameter is set to **Indefinite**, the
        device returns a command response message with Response Status,
        Operation Status Summary byte set to 0x00 (OK, Done) after which
        the host is free to send further commands.

    2)  If the **Display Time** parameter is set to a number of seconds:

        1)  The device returns a command response message with its
            Response Status, Operation Status Summary byte set to 0x01
            (OK, Started / Running).

        2)  While the host is waiting for the timeout to expire, it
            should not send any commands to the device, because the
            device is busy processing the current command.

        3)  After the timeout period expires, the device unlocks to
            allow other commands and sends **Notification 0x1805 - User
            Interface Operation Complete** to report **Display** /
            **Display Message** / **Timed Out** / **Reserved**.

Table 138 - Request Data for Command 0x1822 - Show QR Code (Display
Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1822 = Command 0x1822 - Show QR Code (Display Only)</td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Display Time</p>
<ul>
<li><p>0x00 = Indefinite</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Data to Encode</p>
<p>See <em><strong>ISO/IEC 18004:2015</strong></em></p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>01</td>
<td><p>Error Correction</p>
<ul>
<li><p>0x00 = Low</p></li>
<li><p>0x01 = Medium</p></li>
<li><p>0x02 = Quartile</p></li>
<li><p>0x03 = High</p></li>
</ul>
<p>See <em><strong>ISO/IEC 18004:2015</strong></em></p></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>84</td>
<td>01</td>
<td><p>Mask Pattern</p>
<ul>
<li><p>0x00 to 0x07 = Mask Pattern</p></li>
<li><p>0xFF = Device Select Optimal Mask Pattern</p></li>
</ul>
<p>See <em><strong>ISO/IEC 18004:2015</strong></em></p></td>
<td>B</td>
<td>O</td>
<td>0xFF</td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>Minimum Version</p>
<p>Must be less than or equal to Maximum Version</p>
<ul>
<li><p>0x01 to 0x28 = Version 1 to Version 40</p></li>
</ul>
<p>See <em><strong>ISO/IEC 18004:2015</strong></em></p></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>86</td>
<td>01</td>
<td><p>Maximum Version</p>
<p>Must be greater than or equal to Minimum Version</p>
<ul>
<li><p>0x01 to 0x28 = Version 1 to Version 40</p></li>
</ul>
<p>See <em><strong>ISO/IEC 18004:2015</strong></em></p></td>
<td>B</td>
<td>O</td>
<td>0x28</td>
</tr>
<tr>
<td>87</td>
<td>03</td>
<td><p>Block Color</p>
<p>Use RRGGBB format.</p></td>
<td>B</td>
<td>O</td>
<td><p>0x000000</p>
<p>(Black)</p></td>
</tr>
<tr>
<td>88</td>
<td>03</td>
<td><p>Background Color</p>
<p>Use RRGGBB format.</p></td>
<td>B</td>
<td>O</td>
<td><p>0xFFFFFF</p>
<p>(White)</p></td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Prompt</p>
<p>Text for the device to display below the QR code. Because the device
shows the Prompt using a proportional font, the maximum length that fits
the display depends on the text and the device’s orientation set by
Property 1.2.3.1.1.2 Custom Idle Page Image Device Locked (Display
Only)<strong>.</strong> In Landscape orientation, the upper limit is
approximately 30 characters. In Portrait orientation, the limit is
approximately 22 characters.</p></td>
<td>B</td>
<td>O</td>
<td>No prompt</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 139 - Response Data for Command 0x1822 - Show QR Code (Display
Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1822 = **Command 0x1822 - Show QR Code (Display Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **All Good, Requested Operation Was Successful**.

Table 140 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 18 22 84 41 18 22 81 01 3C 82 0F 54 68 69 73 20 69 73 20 61 20 74 65 73 74 21 83 01 00 84 01 FF 85 01 01 86 01 28 87 03 00 00 00 88 03 FF FF FF 89 13 50 6c 65 61 73 65 20 73 63 61 6e 20 51 52 20 63 6f 64 65 |

Table 6‑29 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 2C 18 22 82 04 00 00 00 00 |

Table 6‑30 - Notification Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 83 00 18 05 82 04 02 01 00 00 |

#### Command 0x1823 - Show Bitmap Image (Display Only)

The host uses this command to trigger the device to immediately show a
bitmap file the host includes as a parameter, provided the device is not
in a mode that has exclusive use of the display (such as during a
transaction).

This is an immediate and temporary directive. For a solution that
affects the device’s idle page behavior on a more permanent basis, see
**Property 1.2.3.1.1.1 Custom Idle Page Image**. This command is
different from **Command 0x1821 - Show Image (Display Only)** in that
the host sends bitmaps as parameters instead of pre-loading them, and
the host can call this command multiple times without clearing the
display to show multiple bitmaps on the display at the same time.

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction using
    **Command 0x1001 - Start Transaction**.

2)  The host selects a bitmap file it wants to display.

3)  The host composes a command request in the format below and sends it
    to the device.

4)  If the host includes the **Background Color** parameter, the device
    clears the display using the specified color. If the host does not
    include that parameter, the device does not clear the display.

5)  The device shows the bitmap with the upper left corner at the
    specified **X Position** and **Y Position**. If the host omits
    either parameter, the device centers the bitmap along the
    unspecified axis.

    1)  If the **Display Time** parameter is **Indefinite** or is not
        included, the device returns a command response message with
        Response Status, Operation Status Summary byte set to 0x00 (OK,
        Done) after which the host is free to send further commands.

    2)  If the timeout parameter is set to a specific number of seconds:

        1)  The device returns a command response message with its
            Response Status, Operation Status Summary byte set to 0x01
            (OK, Started / Running).

        2)  While the host is waiting for the timeout to expire, it
            should not send any commands to the device, because the
            device is busy processing the current command.

        3)  After the timeout period expires, the device unlocks to
            allow other commands and sends **Notification 0x1805 - User
            Interface Operation Complete** to inform the host.

Table 141 - Request Data for Command 0x1823 - Show Bitmap Image (Display
Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1823 = <strong>Command 0x1823 - Show Bitmap Image
(Display Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Display Time</p>
<ul>
<li><p>0x00 = Indefinite</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>82</td>
<td>03</td>
<td><p>Background Color</p>
<p>Use RRGGBB format.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>83</td>
<td>02</td>
<td><p>X Position</p>
<p>The device places the left edge of the image at this pixel position
relative to the left edge of the display, which is position 0x0000. This
parameter plus the pixel width of the image must be less than the pixel
width of the display. The display’s pixel width depends on the device’s
orientation set by Property 1.2.3.1.1.2 Custom Idle Page Image Device
Locked (Display Only)For information about the resolution of the
display, see the specifications in the device’s <em><strong>Installation
and Operation Manual</strong></em>.</p></td>
<td>B</td>
<td>O</td>
<td>Centered</td>
</tr>
<tr>
<td>84</td>
<td>02</td>
<td><p>Y Position</p>
<p>The device places the top edge of the image at this pixel position
relative to the top edge of the display, which is position 0x0000. This
parameter plus the pixel height of the image must be less than the pixel
height of the display. The display’s pixel height depends on the
device’s orientation set by Property 1.2.3.1.1.2 Custom Idle Page Image
Device Locked (Display Only). For information about the resolution of
the display, see the specifications in the device’s
<em><strong>Installation and Operation Manual</strong></em>.</p></td>
<td>B</td>
<td>O</td>
<td>Centered</td>
</tr>
<tr>
<td>85</td>
<td>var</td>
<td><p>Bitmap</p>
<p>Image encoded in full BMP file format as defined by Microsoft (e.g.,
starting with “BM”)</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>01</td>
<td><p>Display Option</p>
<ul>
<li><p>0x00 = Default to cover/uncover the top status bar depends on the
current status of the display. If the current display shows the top
status bar, the Show Bitmap Image command won’t cover the top status
bar. If the current display doesn’t show the top status bar, the Show
Bitmap Image command will cover the top status bar.</p></li>
<li><p>0x01 = Cover the top status bar regardless of the current status
of the display.</p></li>
<li><p>0x02 = Not cover the top status bar regardless of the current
status of the display.</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including Request
Message found on page <a href="#request-message">23</a></td>
</tr>
</tbody>
</table>

Table 142 - Response Data for Command 0x1823 - Show Bitmap Image
(Display Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1823 = **Command 0x1823 - Show Bitmap Image (Display Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **All Good, Requested Operation Was Successful**.

Table 143 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 18 22 84 41 18 22 81 01 3C 82 0F 54 68 69 73 20 69 73 20 61 20 74 65 73 74 21 83 01 00 84 01 FF 85 01 01 86 01 28 87 03 00 00 00 88 03 FF FF FF 89 13 50 6c 65 61 73 65 20 73 63 61 6e 20 51 52 20 63 6f 64 65 |

Table 6‑29 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 2C 18 22 82 04 00 00 00 00 |

Table 6‑30 - Notification Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 83 00 18 05 82 04 02 01 00 00 |

#### Command 0x1830 - Display Flexible UI Pages (Display Only)

**DF II PED Operation Flow Proposal with Flexible UI Framework**

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image7.png"
style="width:6.5in;height:5.22361in"
alt="A diagram of a device Description automatically generated" />

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image8.png"
style="width:6.42361in;height:2.275in"
alt="A screenshot of a document Description automatically generated" />

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image9.png"
style="width:6.5in;height:4.21806in"
alt="A screenshot of a diagram Description automatically generated" />

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image10.png"
style="width:6.5in;height:3.425in"
alt="A screenshot of a computer program Description automatically generated" />

The host uses this command to display Flexible UI pages in the following
layout:

##### UI Page Option 0x00 Layout

The host uses this option to display a maximum of 5 lines of host
provided text, and 1 optional green functional button, Middle – label
with a String ID that associates it with a configured String message.
See

**Table 343 – Default User Interface String IDs and Strings**. When the
user presses this button, the device sends a notification to the host to
indicate this button is pressed. See **Notification 0x1803 - User
Interface Host Action Request.** After that, the host will decide what
to do next.

Recommend maximum number of characters setting for this page:

- Landscape Screen Orientation:

> Each text line can fit about 18 Upper case wide size characters like
> “WM”, 23 Upper case regular size characters such as “ABC”, 21 lower
> case wide size characters like “wm”, or 30 lower case regular size
> characters like “abc”.
>
> Button text can fit about 5 Upper case wide size characters like “WM”,
> 8 Upper case regular size characters like “ABC”, 6 lower case wide
> size characters like “wm”, or 9 lower case regular size characters
> like “abc”.

- Portrait Screen Orientation:

> Each text line can fit about 13 Upper case wide size characters like
> “WM”, 17 Upper case regular size characters like “ABC”, 14 lower case
> wide size characters like “wm”, or 20 lower case regular size
> characters like abc.
>
> Button text can fit about 4 Upper case wide size characters like “WM”,
> 6 Upper case regular size characters like “ABC”, 5 lower case wide
> size characters like “wm”, or 7 lower case regular size characters
> like “abc”.

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image11.png"
style="width:3.38542in;height:2.54167in"
alt="A screenshot of a computer program Description automatically generated" /><img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image12.png"
style="width:2.54167in;height:3.375in"
alt="A screenshot of a computer Description automatically generated" />

##### UI Page Option 0x01 and 0x02 Layout

The host uses UI Page Option **0x01** to display a page with a title, a
maximum of 6 data buttons (2 rows and 3 columns in Landscape Screen
Orientation, 3 rows and 2 columns in Portrait Screen Orientation) with
text, and maximum 3 functional buttons with a color option of red,
green, or yellow.

The host uses UI Page Option **0x01** to display a page with a title,
maximum of 4 data buttons (2 rows and 2 columns in Landscape Screen
Orientation, 2 rows and 2 columns in Portrait Screen Orientation) with
text, and maximum 3 functional buttons with a color option of red,
green, or yellow.

The host uses UI Page Option **0x02** to display a page with a title,
maximum of 6 data buttons (2 rows and 3 columns in Landscape Screen
Orientation, 3 rows and 2 columns in Portrait Screen Orientation) with
\$Amount, and maximum 3 functional buttons with a color option of red,
green, or yellow.

The host uses UI Page Option **0x02** to display a page with a title,
maximum of 4 data buttons (2 rows and 2 columns in Landscape Screen
Orientation, 2 rows and 2 columns in Portrait Screen Orientation) with
\$Amount, and maximum 3 functional buttons with a color option of red,
green, or yellow.

The button with **\$** Amount value is host provided. The title, data
buttons text, and functional buttons are labeled with String IDs
associated with configured String messages. See

**Table 343 – Default User Interface String IDs and Strings**. When the
user presses any button, the device sends a notification to the host to
indicate the corresponding button is pressed. See **Notification
0x1803 - User Interface Host Action Request.** After that, the host will
decide what to do next.

Recommend maximum number of character settings for this page:

- Landscape Screen Orientation:

  - The title text can fit about 18 Upper case wide size characters like
    “WM”, 23 Upper case regular size characters like “ABC”, 21 lower
    case wide size characters like “wm”, or 30 lower case regular size
    characters like “abc”.

  - The 3 columns data button’s text can fit about 5 Upper case wide
    size characters like “WM”, 8 Upper case regular size characters like
    “ABC”, 6 lower case wide size characters like “wm”, or 9 lower case
    regular size characters like “abc”.

  - The 2 columns data button’s text can fit about 9 Upper case wide
    size characters like “WM”, 13 Upper case regular size characters
    like “ABC”, 9 lower case wide size characters like “wm”, or 15 lower
    case regular size characters like “abc”.

  - The Functional button’s text can fit about 5 Upper case wide size
    characters like “WM”, 8 Upper case regular size characters like
    “ABC”, 6 lower case wide size characters like “wm”, or 9 lower case
    regular size characters like “abc”.

- Portrait Screen Orientation:

  - The title text can fit about 13 Upper case wide size characters like
    “WM”, 17 Upper case regular size characters like “ABC”, 14 lower
    case wide size characters like “wm”, or 20 lower case regular size
    characters like “abc”.

  - The 2 columns data button’s text can fit about 6 Upper case wide
    size characters like “WM”, 10 Upper case regular size characters
    like “ABC”, 7 lower case wide size characters like “wm”, or 11 lower
    case regular size characters like “abc”.

  - The functional button’s text can fit about 4 Upper case wide size
    characters like “WM”, 6 Upper case regular size characters like
    “ABC”, 5 lower case wide size characters like “wm”, or 7 lower case
    regular size characters like “abc”.

**The Layout for a page with a title, a maximum of 4 data buttons with
text/\$Amount, and a maximum of 3 functional buttons:**

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image13.png"
style="width:3.38542in;height:2.55208in"
alt="A screenshot of a computer program Description automatically generated" />
<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image14.png"
style="width:2.5625in;height:3.38542in"
alt="A screenshot of a phone Description automatically generated" />

**The Layout for a page with a title, 5 to 6 data buttons with a
text/\$Amount, and maximum of 3 functional buttons:**

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image15.png"
style="width:3.375in;height:2.54167in"
alt="A screenshot of a computer program Description automatically generated" />
<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image16.png"
style="width:2.5625in;height:3.39583in"
alt="A screenshot of a computer Description automatically generated" />

##### UI Page Option 0x03 Layout

The host uses this option to display a page with the following elements:
a title, a section for uploading a custom image, an option at the
bottom-left corner to display either the Device Serial Number or
host-provided text, and a maximum of one functional green button
positioned on the right.

The title and functional button are labeled with String IDs associated
with configured String message. See

**Table 343 – Default User Interface String IDs and Strings**. When the
user presses this button, the device sends a notification to the host to
indicate the corresponding button is pressed. See **Notification
0x1803 - User Interface Host Action Request.** After that, the host will
decide what to do next.

Recommend maximum number of characters and bitmap image setting for this
page:

- Landscape Screen Orientation:

  - Title text can fit about 18 Upper case wide size characters like
    “WM”, 23 Upper case regular size characters like “ABC”, 21 lower
    case wide size characters like “wm”, or 30 lower case regular size
    characters like “abc”.

  - Bottom left corner text can fit about 8 Upper case wide size
    characters like “WM”, 12 Upper case regular size characters like
    “ABC”, 9 lower case wide size characters like “wm”, or 15 lower case
    regular size characters like “abc”.

  - Functional button text can fit about 5 Upper case wide size
    characters like “WM”, 8 Upper case regular size characters like
    “ABC”, 6 lower case wide size characters like “wm”, or 9 lower case
    regular size characters like “abc”.

  - Bitmap image maximum width is 320px, height is 140px. Color depth
    can be 24-bit (True Color, RGB), 16-bit (5:5:5:1, RGB Hi Color),
    8-bit (256 Color), 4-bit (16 Color), or 1-bit (monochrome)

- Portrait Screen Orientation:

  - Title text can fit about 13 Upper case wide size characters like
    “WM”, 17 Upper case regular size characters like “ABC”, 14 lower
    case wide size characters like “wm”, or20 lower case regular size
    characters like “abc”.

  - Bottom left corner text can fit about 8 Upper case wide size
    characters like “WM”, 12 Upper case regular size characters like
    “ABC”, 9 lower case wide size characters like “wm”, or 15 lower case
    regular size characters like “abc”.

  - Functional button text can fit about 4 Upper case wide size
    characters like “WM”, 6 Upper case regular size characters like
    “ABC”, 5 lower case wide size characters like “wm”, or 7 lower case
    regular size characters like “abc”.

  - Bitmap image maximum width is 240px, height is 220px. Color depth
    can be 24-bit (True Color, RGB), 16-bit (5:5:5:1, RGB Hi Color),
    8-bit (256 Color), 4-bit (16 Color), or 1-bit (monochrome)

<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image17.png"
style="width:3.38542in;height:2.55208in"
alt="A screenshot of a computer error Description automatically generated" />
<img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image18.png"
style="width:2.54167in;height:3.375in"
alt="A screenshot of a computer Description automatically generated" />

Table 144 – Request Data for Command 0x1830

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">1830 = <strong>Command 0x1830 - Display Flexible UI
Pages (Display Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Display Time</p>
<ul>
<li><p>0x00 – Infinitive. Device leaves the requested page on the
display until the host initiates a change.</p></li>
<li><p>0x01 to 0xFF = RFU</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>UI page option</p>
<ul>
<li><p>0x00 – Page with up to 5 lines of text and up to 1 functional
button Middle. See Tag A1.</p></li>
<li><p>0x01 – Page with a title, up to 6 buttons with text, and up to 3
functional buttons. See Tag 83, A2 and A4.</p></li>
<li><p>0x02 – Page with a title, up to 6 buttons with $Amount, and up to
3 functional buttons. See Tag 83, A3 and A4.</p></li>
<li><p>0x03 – Page with a title, a custom image, an optional bottom left
corner with SN or Text, and up to 1 functional button Right. See Tag 83
and A5.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>02</td>
<td><p>Text String ID for a tile of UI page option: 0x01, 0x02, 0x03</p>
<p>See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong></p>
<p>If host wants to disable this title, do not include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A1</td>
<td>var</td>
<td><p>Text string parameters for UI page option: 0x00</p>
<p>The parameter in this TLV data object allow the host to enable and
disable the data base for UI page option 0x00</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>Text string (&lt;= 30 characters) for line 1, end with NULL
char.</p>
<p>If host wants to disable this line, do not include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>Text string (&lt;= 30 characters) for line 2, end with NULL
char.</p>
<p>If host wants to disable this line, do not include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>Text string (&lt;= 30 characters) for line 3, end with NULL
char.</p>
<p>If host wants to disable this line, do not include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>Text string (&lt;= 30 characters) for line 4, end with NULL
char.</p>
<p>If host wants to disable this line, do not include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>var</td>
<td><p>Text string (&lt;= 30 characters) for line 5, end with NULL
char.</p>
<p>If host wants to disable this line, do not include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/86</td>
<td>02</td>
<td><p>Function button Middle option.</p>
<p>String ID = Enable functional button Middle with a String ID
associates with a configured String message. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong></p>
<p>When user presses this button, device sends notification to the host
to indicate the functional button Middle is pressed. See
<strong>Notification 0x1803 - User Interface Host Action
Request</strong></p>
<p>If host wants to disable this button, do not include this
tag</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A2</td>
<td>var</td>
<td><p>Button text String ID parameters for UI page option: 0x01 and
0x02. The parameter in this TLV data object allows the host to enable
and disable the data base.</p>
<p>When user presses any button, device sends notification to the host
to indicate which button is pressed. See <strong>Notification 0x1803 -
User Interface Host Action Request</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>02</td>
<td><p>Text String ID for button 1. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong>.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>02</td>
<td><p>Text String ID for button 2. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong>.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>02</td>
<td><p>Text String ID for button 3. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong>.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/84</td>
<td>02</td>
<td><p>Text String ID for button 4. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>02</td>
<td><p>Text String ID for button 5. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/86</td>
<td>02</td>
<td><p>Text String ID for button 6. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>Button $Amount parameters for UI page option: 0x01, 0x02</p>
<p>The parameter in this TLV data object allows the host to enable and
disable the data base for UI page option 0x01 and 0x02</p>
<p>When user presses any button, device sends notification to the host
to indicate which amount button is pressed. See <strong>Notification
0x1803 - User Interface Host Action Request</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>04</td>
<td><p>Value $Amount for button 1.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>04</td>
<td><p>Value $Amount for button 2.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>04</td>
<td><p>Value $Amount for button 3.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/84</td>
<td>04</td>
<td><p>Value $Amount for button 4.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>04</td>
<td><p>Value $Amount for button 5.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/86</td>
<td>04</td>
<td><p>Value $Amount for button 6.</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A4</td>
<td>var</td>
<td><p>Functional buttons parameters for UI page option: 0x01 and 0x02.
The parameter in this TLV data object allows the host to enable and
disable the data base.</p>
<p>When user presses any button, the device sends notification to the
host to indicate which functional button is pressed. See
<strong>Notification 0x1803 - User Interface Host Action
Request</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>03</td>
<td><p>Text String ID and color option for functional button Left.
See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong>.</p>
<p>Byte 0-1: String ID</p>
<p>Byte 2: color option</p>
<p>0x00 = red</p>
<p>0x01 = green</p>
<p>0x02 = yellow</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>03</td>
<td><p>Text String ID and color option for functional button Middle.
See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>Byte 0-1: String ID</p>
<p>Byte 2: color option</p>
<p>0x00 = red</p>
<p>0x01 = green</p>
<p>0x02 = yellow</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>03</td>
<td><p>Text String ID and color option for functional button Right.
See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>Byte 0-1: String ID</p>
<p>Byte 2: color option</p>
<p>0x00 = red</p>
<p>0x01 = green</p>
<p>0x02 = yellow</p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A5</td>
<td>var</td>
<td><p>Parameters for UI page option 0x03</p>
<p>The parameter in this TLV data object allow the host to enable and
disable the data base</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>02</td>
<td><p>Text String ID for green functional button Right. See</p>
<p><strong>Table 343 – Default User Interface String IDs and
Strings</strong> .</p>
<p>When user presses this button, device sends notification to the host
to indicate the functional button Right is pressed. See
<strong>Notification 0x1803 - User Interface Host Action
Request</strong></p>
<p>If host wants to disable this button, don’t include this
tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>02</td>
<td><p>X Position.</p>
<p>If host wants device to display the image in the center of the
loading image area, don’t include this tag.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>02</td>
<td><p>Y Position.</p>
<p>If host want device to display the image in the center of the loading
image area, don’t include this tag</p>
<p>Note:</p>
<p>Y pos &gt; = 50px</p>
<p>Y pos + Image Height &lt;= 190px Landscape Screen Orientation</p>
<p>Y pos + Image Height &lt;= 270px Portrait Screen Orientation</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>Bitmap</p>
<p>Image encoded in full BMP file format as defined by Microsoft (e.g,
starting with “BM”)</p>
<p>Image Width Max = 320px Landscape Screen Orientation</p>
<p>Image Height Max = 140px Landscape Screen Orientation</p>
<p>Image Width Max = 240px Portrait Screen Orientation</p>
<p>Image Height Max = 220px Portrait Screen Orientation</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>var</td>
<td><p>Bottom left corner option</p>
<p>Byte 0 = option</p>
<ul>
<li><p>0x00 = Disable</p></li>
<li><p>0x01 = show Device Serial Number</p></li>
<li><p>0x02 = show text</p></li>
<li><p>0x03..0x0F = invalid</p></li>
</ul>
<p>Byte 1 = length of the text, should be less than 16 characters.</p>
<p>Byte 2..N = text string value.</p></td>
<td>B</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum <strong>Response
Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Table 145 - Response Data for Command 0x1830 - Display Flexible UI Pages
(Display Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1830 = **Command 0x1830 - Display Flexible UI Pages (Display Only)** |  |  |  |  |  |
| No parameters |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **All good / requested operation was successful**.

Table 146 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 2C 18 30 84 1A 18 30 81 01 00 82 01 00 83 02 00 05 A1 0C 83 0A 54 48 41 4E 4B 20 59 4F 55 00 |

Table 147 - Response Example

| Example (Hex)                |
|------------------------------|
| AA008104822C1830820400000000 |

#### Command 0x1840 – Card Emulation

Card emulation is initiated by receiving a 0x1840 command from the host.
The device will prepare card emulation with the parameters provided in
the command and start card emulation.

The sequence of events is as follows:

1)  The host ensures the device is not currently running another
    command, for example, that it is not running a transaction or PIN
    entry.

2)  The host composes a command request in the format below and sends it
    to the device.

3)  The device receives the command and verifies that the parameters are
    valid and the device is in a state that allows the execution of card
    emulation.

4)  If the device has a display, a prompt will be displayed asking the
    customer to tap their phone to the device.

5)  If the timeout parameter is not included or set to 0x00, then there
    is no timeout. Or, if the timeout parameter is set to a specific
    number of seconds, the device returns a command response message
    with its Operation Status Summary byte set to 0x01 (OK, Started /
    Running).

6)  The host may issue a 0x1840 command with Tag 0x81 set to 0x00 to
    cancel the execution of card emulation.

7)  After the timeout expires, host cancel or the card is read, the
    device sends a 0x1805 notification to inform the host.

<table>
<caption><p>Table 148 - Request Data for Command 0x1840 – Card
Emulation</p></caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 65%" />
<col style="width: 6%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>/81</td>
<td>01</td>
<td><p>Start/Cancel</p>
<ul>
<li><p>0x00 = Cancel (See the example of 0x1840 cancel</p></li>
</ul>
<blockquote>
<p>command below)</p>
</blockquote>
<ul>
<li><p>0x01 = Start</p></li>
</ul></td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Timeout in seconds</p>
<ul>
<li><p>0x00 = No timeout</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td>/83</td>
<td><p>&lt;=</p>
<p>254</p></td>
<td><p>URL</p>
<p>URL to use as card data. Required when starting card emulation.
Optional and ignored if canceling emulation.</p>
<p>Example: <a
href="https://www.magtek.com/">https://www.magtek.com/</a></p></td>
<td>O/R</td>
<td></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA 00 81 04 01 01 18 40 84 21 18 40 81 01 01 82 01 00 83 17 68 74 74 70 73 3A 2F 2F 77 77 77 2E 6D 61 67 74 65 6B 2E 63 6F 6D 2F |

Table 149 - Request Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 01 18 40 82 04 01 00 00 00 |

Table 150 - Response Example

| Example (Hex)                                |
|----------------------------------------------|
| AA 00 81 04 01 01 18 40 84 05 18 40 81 01 00 |

Table 151 - Example of 0x1840 Cancel Command

### Command Group 0x1Fnn - Device Control

#### Command 0x1F01 - Reset Device

The host uses this command to reset the device.

The sequence of events is as follows:

1)  The host constructs the command request for **Command 0x1F01 - Reset
    Device** in the format below.

2)  The host sends the command request to the device.

3)  The device sends a response in the format below to the host.

4)  The device starts an automatic reset within 500ms.

Table 152 - Request Data for Command 0x1F01 - Reset Device

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1F01 = <strong>Command 0x1F01 - Reset
Device</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Power Off Option</p>
<ul>
<li><p>0x00 = Reset</p></li>
<li><p>0x01 = Power Off</p></li>
</ul>
<p>Power off only works while a device is running on its battery. If a
device is powered off while it is powered by USB, the device will
immediately turn back on.</p></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 153 - Response Data for Command 0x1F01 - Reset Device

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1F01 = **Command 0x1F01 - Reset Device** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 154 - Request Example

| Example (Hex)                       |
|-------------------------------------|
| AA 00 81 04 01 12 1F 01 84 02 1F 01 |

Table 155 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 12 1F 01 82 04 00 00 00 00 |

#### Command 0x1F02 - Set Notification Subscriptions

The host uses this command to specify which notifications the device
should send on each of its available interfaces. By default, the device
sends notifications to the host on all interfaces.

The sequence of events is as follows:

1)  The host constructs the command request in the format below.

2)  The host sends the command request to the device.

3)  The device sends a response in the format below to the host.

4)  The device immediately begins routing notifications per the request.

5)  If the device restarts or loses power, the device resets its
    notification subscriptions to defaults, and the host must call this
    command again to change them.

Table 156 - Request Data for Command 0x1F02 - Set Notification
Subscriptions

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">1F02 = <strong>Command 0x1F02 - Set Notification
Subscriptions</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Subscribe</p>
<ul>
<li><p>0x00 = Unsubscribe</p></li>
<li><p>0x01 = Subscribe</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Notifications Affected</p>
<ul>
<li><p>0x00 = Only subscribe or unsubscribe to notification messages in
the Notification Message ID List parameter</p></li>
<li><p>0x01 = Subscribe or unsubscribe to all notifications</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>0x01</td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Notification Message ID List</p>
<p>List of two-byte Notification Message IDs (MSB first) from section
<strong>7 Notifications</strong> to be subscribed / unsubscribed by this
command. For example, to subscribe to <strong>Notification 0x0105 -
Transaction Operation Complete</strong> on the interface being used to
send this command, the host would include 0x0105 as two bytes in the
list. The device ignores any Notification Message IDs in the list that
do not exist.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>A4</td>
<td>var</td>
<td><p>Interfaces</p>
<p>List of interfaces this command should change the subscription
settings for. If the host does not specify any interfaces here, the
command applies only to the interface the host is using to send the
command.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/81</td>
<td>00</td>
<td>Apply changes to the USB interface</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>00</td>
<td>Apply changes to the WLAN interface</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>00</td>
<td>Apply changes to the Bluetooth® LE interface</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/84</td>
<td>00</td>
<td>Apply changes to the UART interface</td>
<td></td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 157 - Response Data for Command 0x1F02 - Set Notification
Subscriptions

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1F02 = **Command 0x1F02 - Set Notification Subscriptions** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 158 - Request Example

| Example (Hex)               |
|-----------------------------|
| AA00 810401551F02 8402 1F02 |

Table 159 - Response Example

| Example (Hex)                            |
|------------------------------------------|
| AA00 810482551F02 820400000000 8402 1F02 |

#### Command 0x1F03 - Extend Session (Session Management Only)

The host can use this command to extend a session for open protocol
interfaces, such as the WLAN interface, which require session management
to meet PCI requirements.

The sequence of events is as follows:

1)  The host establishes a session with the device on a given interface.
    For the WLAN interface, a session starts when the host establishes a
    TLS websocket connection with the device.

2)  The device starts a countdown timer for a 30 minute session timeout
    period.

3)  Five minutes before the session timeout period expires, the device
    starts repeatedly (every minute) sending **Notification 0x1001 -
    Device Information Update** to report **Session Management / Session
    Expiring Soon**.

4)  The host may extend the session multiple times, until the device
    automatically resets to meet PCI’s 24 hour self-test requirement, by
    sending any command request using the same interface before the
    timeout occurs. Upon receiving the command, the device resets the
    session countdown timer to 30 minutes. This helps prevent the
    session from expiring while the host is actively using the device,
    including when the device is performing a transaction. If the host
    wants to extend the session but does not need to send another
    command, it may follow these steps at any time during the session:

    1)  The host constructs the command request in the format below.

    2)  The host sends the command request to the device.

    3)  The device sends a response in the format below to the host.

    4)  The device resets the session countdown timer to 30 minutes.

5)  When the session expires, the device closes the websocket
    connection.

For the WLAN interface, if the device is configured to allow connections
to more than one client at the same time with **Property 1.2.2.1.1.A
Maximum Client Connections** and more than one client is connected, then
the following applies. There is always only a single session and it
applies to all clients. There is not a separate session for each client.
The session starts when the first client connects. Only one client needs
to send a command on its connection to extend the session. The other
clients do not need to send any commands. When the session expires, all
clients will be disconnected.

Table 160 - Request Data for Command 0x1F03 - Extend Session (Session
Management Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| 1F03 = **Command 0x1F03 - Extend Session (Session Management Only)** |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 161 - Response Data for Command 0x1F03 - Extend Session (Session
Management Only)Extend Session

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1F03 = **Command 0x1F03 - Extend Session (Session Management Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 162 - Request Example

| Example (Hex)               |
|-----------------------------|
| AA00 810401551F03 8402 1F03 |

Table 163 - Response Example

| Example (Hex)                            |
|------------------------------------------|
| AA00 810482551F03 820400000000 8402 1F03 |

#### Command 0x1F04 – Terminate Bluetooth® LE Connection (Bluetooth® LE Only)

The host can use this command to terminate a Bluetooth® LE connection.
The host may also be able to terminate a Bluetooth® LE connection
directly without using this command.

The sequence of events is as follows:

1)  The host constructs the command request for **Device in** the format
    below.

2)  The host sends the command request to the device.

3)  The device sends a response in the format below to the host.

4)  The device terminates the Bluetooth® LE connection within around
    500ms.

Table 164 - Request Data for Command 0x1F04 – Terminate Bluetooth® LE
Connection

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| 1F04 = **Command 0x1F04 – Terminate Bluetooth® LE Connection** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 165 - Response Data for Command 0x1F04 – Terminate Bluetooth® LE
Connection

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1F04 = **Command 0x1F04 – Terminate Bluetooth® LE Connection** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 166 - Request Example

| Example (Hex)                       |
|-------------------------------------|
| AA 00 81 04 01 55 1F 04 84 02 1F 04 |

Table 167 - Response Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 82 55 1F 04 82 04 00 00 00 00 84 02 1F 04 |

#### Command 0x1F05 – Erase All Bluetooth® LE Bonds (Bluetooth® LE Only)

The host can use this command to erase all Bluetooth® LE bonds. The user
should then forget the device and re-pair the device on any host that it
was previously paired with if that host needs to communicate with the
device again.

The sequence of events is as follows:

1)  The host constructs the command request for **Command 0x1F01 - Reset
    Device** in the format below.

2)  The host sends the command request to the device.

3)  The device sends a response in the format below to the host.

4)  The device erases all Bluetooth® LE bonds within around 500ms.

Table 168 - Request Data for Command 0x1F05 – Erase All Bluetooth® LE
Bonds

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| 1F05 = **Command 0x1F05 – Erase All Bluetooth® LE Bonds** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 169 - Response Data for Command 0x1F05 – Erase All Bluetooth® LE
Bonds

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 1F05 = **Command 0x1F05 – Erase All Bluetooth® LE Bonds** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 170 - Request Example

| Example (Hex)                       |
|-------------------------------------|
| AA 00 81 04 01 55 1F 05 84 02 1F 05 |

Table 171 - Response Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 82 55 1F 05 82 04 00 00 00 00 84 02 1F 05 |

### Command Group 0x20nn - Banking Functions (Touch/Display Only)

#### Command 0x2001 - Request PIN with Host Supplied Account Data (Banking Functions Only)

This command directs the device to prompt the cardholder to enter a PIN
when a card is not present or is not presented. The host is aware of the
account information and the device is not. To prompt the cardholder to
present a card before prompting for a PIN, use **Command 0x2002 -
Request PIN with Card Supplied Account Data (Banking Functions Only)**
instead.

When the host calls this command, the device enters **PIN Entry Mode**,
meaning it starts a “PIN Entry session.” While in PIN Entry Mode:

- The device ignores most other commands from the host, similar to the
  way it behaves while **Command 0x1001 - Start Transaction** is
  running: Only essential commands and those that are relevant to the
  current PIN entry session are allowed.

- When the device is waiting for the host to take action, it resets the
  timeout clock and shows an interstitial **PLEASE WAIT** page until one
  of the following occurs:

  - The host calls the same PIN entry command again to show another UI
    sequence or to end the PIN entry session, or

  - The host calls another allowed command (ending the PIN entry
    session), or

  - The device has shown **PLEASE WAIT** until the **Timeout** the host
    specified in the command has expired (ending the PIN entry session).

- The host can call this command again and again as needed, to invoke
  any number and any combination of available PIN Entry User Interface
  Sequences. This allows the host to determine the number of retries,
  and to exercise flexible fine-grained control over the end to end
  “sequence of sequences.”

- The host may cancel the PIN entry session by calling this command
  again with **User Interface Sequence = Cancel PIN Session**. In
  response, the device shows an interstitial page **PIN Entry Canceled**
  for 2 seconds, then returns to idle.

The usual sequence is as follows:

1)  The host invokes this command using the format in **Table 172**.

2)  If an error occurs, the device returns a command response message as
    shown in **Table 173** with Response Status, Operation Status
    Summary byte set to 0x80 (Failed to start operation), and terminates
    the command.

3)  If no error occurs, the device returns a command response message as
    shown in **Table 173** with Response Status, Operation Status
    Summary byte set to 0x01 (OK, Started / Running), and enters PIN
    Entry Mode.

4)  The device shows one of the predefined messages specified by the
    **User Interface Sequence** parameter and waits up to the specified
    **Timeout** for the cardholder to enter a PIN.

5)  If the host has specified **User Interface Sequence** = **Enter PIN
    / Enter PIN Again**, the device automatically prompts the cardholder
    to enter the PIN a second time.

6)  When the command completes (PIN entry done, cardholder or operator
    canceled, or **Wait Time** timeout), the device sends **Notification
    0x0205 - Banking Functions Operation Complete** to report
    **Touchscreen** / **PIN Entry**. If PIN entry is successful, the
    report also contains a payload as shown in **Table 315**. The EPB
    format the device uses depends on the parameters the host specified
    in the command:

    1)  If the host provided the **Account Number** data in the command,
        the device creates the EPB using the **PIN Block Format** the
        host specified in the command.

    2)  If the host did not provide the **Account Number** data in the
        command, the device creates the EPB using ISO format 1.

7)  If the host is performing a PIN Verification function (such as
    **User Interface Sequence** = **Enter PIN**), the host software uses
    the financial institution’s backend systems to compare the EPB to
    the account information on file, receives a result as to whether the
    entered PIN was correct, and reports the results to the teller and
    to the device.

    1)  If the PIN is correct, the host calls the same command again
        with parameter **User Interface Sequence = PIN Entry
        Successful** to indicate success and exit PIN Entry Mode. The
        device responds by showing an interstitial page **PIN Entry
        Successful** for 2 seconds, then returns to idle mode. The
        device sounds the EMV success tone to audibly report the result
        and call the cardholder’s attention to the display.

    2)  If the PIN is incorrect, depending on host-driven retry rules
        and the history of the session:

        1)  The host may call the same command again with parameter
            **User Interface Sequence = PIN Incorrect, Try Again** to
            show the **PIN Incorrect, Try Again** prompt. The device
            sounds the EMV failure tone to audibly report the result and
            call the cardholder’s attention to the display.

        2)  The host may call the same command again with other **User
            Interface Sequences** as desired.

        3)  The host must eventually finalize by calling the same
            command again with parameters to end the PIN entry session.
            If the host calls the command with **User Interface Sequence
            = PIN Entry Failed** to trigger final failure (as opposed to
            final success described above), the device shows an
            interstitial page **PIN Entry Failed** for 2 seconds, then
            returns to idle. The device also sounds the EMV failure tone
            to audibly report the result and call the cardholder’s
            attention to the display.

8)  If the host is performing a PIN Entry / Re-PIN function (such as
    **User Interface Sequence** = **Enter PIN / Enter PIN Again**),
    after the cardholder enters the PIN a second time:

    1)  If the PINs match:

        1)  The device sends the Encrypted PIN block to the host by
            sending **Notification 0x0205 - Banking Functions Operation
            Complete** to report **Touchscreen / PIN Entry / Success /
            Data Attached**. The host may pass this PIN block to backend
            systems for processing and storage.

        2)  The host calls the same command again with parameter **User
            Interface Sequence = PIN Entry Successful** to indicate
            success and exit PIN Entry Mode. The device responds by
            showing an interstitial page **PIN Entry Successful** for 2
            seconds, then returns to idle mode. The device also sounds
            the EMV success tone to audibly report the result and call
            the cardholder’s attention to the display.

    2)  If the PINs do not match, the device sends **Notification
        0x0205 - Banking Functions Operation Complete** to report
        **Touchscreen** / **PIN Entry / Operation Failed / PIN Verify
        Failed**. Depending on host-driven retry rules and the history
        of the session:

        1)  The host may call the same command again with parameter
            **User Interface Sequence = Enter PIN /Enter PIN Again** to
            prompt the cardholder to enter a PIN twice again.

        2)  The host must eventually finalize by calling the same
            command again with parameters to end the PIN entry session.
            If the host calls the command with **User Interface Sequence
            = PIN Entry Failed** to trigger final failure (as opposed to
            final success described above), the device shows an
            interstitial page **PIN Entry Failed** for 2 seconds, then
            returns to idle. The device also sounds the EMV failure tone
            to audibly report the result and call the cardholder’s
            attention to the display.

Table 172 - Request Data for Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">2001 = <strong>Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Timeout</p>
<p>Timeout in seconds that the device should wait for the cardholder to
enter PIN and confirm completion.</p>
<ul>
<li><p>0x00 = Reserved, Not Allowed</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>User Interface Sequence</p>
<ul>
<li><p>0x00 = Enter PIN (start session)</p></li>
<li><p>0x02 = PIN Incorrect, Try Again (continue session)</p></li>
<li><p>0x03 = Enter PIN / Enter PIN Again (start session)</p></li>
<li><p>0x05 = Enter PIN Again (continue session)</p></li>
<li><p>0xFD = Cancel PIN Session (end session)</p></li>
<li><p>0xFE = PIN Entry Failed (end session)</p></li>
<li><p>0xFF = PIN Entry Successful (end session)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>02</td>
<td><p>PIN Length Limits</p>
<p>Byte 1 Maximum PIN Length (&lt;= 0x0C)</p>
<p>Byte 2 Minimum PIN Length (&gt;=0x04)</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A1</td>
<td>var</td>
<td>Account Number Options</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>01</td>
<td><p>Account Number Length</p>
<p>When host specifies <strong>PIN Block Format</strong> parameter =
<strong>ISO Format 1</strong> the Account Number length must be 0</p>
<p>When host specifies <strong>PIN Block Format</strong> parameter =
<strong>ISO Format 0 or 3</strong> the Account Number length must be
12</p>
<p>When host specifies <strong>PIN Block Format</strong> parameter =
<strong>ISO Format 4</strong> the Account Number length must be between
12 and 19 , if this length is not an even number, the device ignores the
rightmost nibble, which the host should generally set to zero.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>Account Number</p>
<p>If the host does provide an account number, it must provide it in
Compressed Numeric (CN) format as defined by <em><strong>EMV 4.3 Book
3</strong></em>, section <em><strong>Data Element Format
Conventions</strong></em></p></td>
<td>CN</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>PIN Block Format</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = ISO Format 1</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 173 - Response Data for Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 2001 = **Command 0x2001 - Request PIN with Host Supplied Account Data (Banking Functions Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Response Status in the message
wrapper is **OK, Started/Running**.

Table 174 - Request Example for Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)

| Example (Hex) |
|----|
| AA 00 81 04 01 09 20 01 84 1C 20 01 81 01 3C 82 01 00 83 02 08 04 85 01 00 A1 0B 81 01 0C 82 06 12 34 56 78 90 12 |

Table 175 - Response Example Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 09 20 01 82 04 01 00 00 00 |

#### Command 0x2002 - Request PIN with Card Supplied Account Data (Banking Functions Only)

This command directs the device to prompt the cardholder to present
their card by swiping, dipping or tapping, and to enter a PIN. To prompt
the cardholder for a PIN without presenting a card when the host knows
the account number already, use **Command 0x2001 - Request PIN with Host
Supplied Account Data (Banking Functions Only)** instead.

When the host calls this command, the device enters **PIN Entry Mode**,
meaning it starts a “PIN Entry session.” While in PIN Entry Mode:

- The device ignores most other commands from the host, similar to the
  way it behaves while **Command 0x1001 - Start Transaction** is
  running: Only essential commands and those that are relevant to the
  current PIN Entry session are allowed.

- When the device is waiting for the host to take action, it resets the
  timeout clock and shows an interstitial **PLEASE WAIT** page until one
  of the following occurs:

  - The host calls the same PIN entry command again to show another UI
    sequence or to end the PIN entry session, or

  - The host calls another allowed command (ending the PIN entry
    session), or

  - The device has shown **PLEASE WAIT** until the **Timeout** the host
    specified in the command has expired (ending the PIN entry session).

- The host can call this command again and again as needed, to invoke
  any number and any combination of available PIN Entry User Interface
  Sequences. This allows the host to determine number of retries, and to
  exercise flexible fine-grained control over the end to end “sequence
  of sequences.”

- The host may cancel the PIN entry session by calling this command
  again with **User Interface Sequence = Cancel PIN Session**. In
  response, the device shows an interstitial page **PIN Entry Canceled**
  for 2 seconds, then returns to idle.

The usual sequence is as follows:

1)  The host invokes this command using the format in **Table 176**.

2)  If an error occurs, the device returns a command response message as
    shown in **Table 177** with Response Status, Operation Status
    Summary byte set to 0x80 (Failed to start operation), and terminates
    the command.

3)  If no error occurs, the device returns a command response message as
    shown in **Table 177** with Response Status, Operation Status
    Summary byte set to 0x01 (OK, Started / Running), and enters PIN
    Entry Mode.

4)  The device shows a prompt requesting the cardholder present one of
    the payment technologies specified in the **Reader Options**
    parameter, and waits up to the specified **Timeout** for the
    cardholder to respond.

5)  After the cardholder presents a card, the device sends
    **Notification 0x0201 - Banking Functions Information Update** to
    report the payment technology being used / Card Event / Detected.

6)  If the cardholder swiped a magnetic stripe card, the device reads
    Track 2 data.

7)  If cardholder inserts an ICC or taps a PICC, the device reads
    records from the card and attempts to retrieve tags 57 (Track 2
    Equivalent Data) and 5A (Primary Account number). It then powers off
    the card without performing the first Generate Application
    Cryptogram, so the card does not increment its transaction counters.

8)  If an error occurs, the device terminates the command and PIN entry
    session and sends **Notification 0x0205 - Banking Functions
    Operation Complete** to report Touchscreen / PIN Entry / Operation
    Failed / Account Data Capture Failed.

9)  The device shows one of the predefined messages specified by the
    **User Interface Sequence** parameter, and waits up to the specified
    **Timeout** for the cardholder to enter a PIN.

10) If the host has specified **User Interface Sequence** = **Enter PIN
    / Enter PIN Again**, the device automatically prompts the cardholder
    to enter the PIN a second time.

11) When the command completes (PIN entry done, cardholder or operator
    canceled, or **Wait Time** timeout), the device sends a
    **Notification 0x0205 - Banking Functions Operation Complete** to
    report **Touchscreen** **PIN Entry**. If PIN entry is successful,
    the report also contains a payload as shown in **Table 316**. The
    device creates the EPB using the **PIN Block Format** the host
    specified in the command.

12) If the host is performing a PIN Verification function (such as
    **User Interface Sequence** = **Enter PIN**), the host software uses
    the financial institution’s backend systems to compare the EPB to
    the account information on file, receives a result as to whether the
    entered PIN was correct, and reports the results to the teller and
    to the device.

    1)  If the PIN is correct, the host calls the same command again
        with parameter **User Interface Sequence = PIN Entry
        Successful** to indicate success and exit PIN Entry Mode. The
        device responds by showing an interstitial page **PIN Entry
        Successful** for 2 seconds, then returns to idle mode. The
        device sounds the EMV success tone to audibly report the result
        and call the cardholder’s attention to the display.

    2)  If the PIN is incorrect, depending on host-driven retry rules
        and the history of the session:

        1)  The host may call the same command again with parameter
            **User Interface Sequence = PIN Incorrect, Try Again** to
            show the **PIN Incorrect, Try Again** prompt. The device
            sounds the EMV failure tone to audibly report the result and
            call the cardholder’s attention to the display.

        2)  The host may call the same command again with other **User
            Interface Sequences** as desired.

        3)  The host must eventually finalize by calling the same
            command again with parameters to end the PIN entry session.
            If the host calls the command with **User Interface Sequence
            = PIN Entry Failed** to trigger final failure (as opposed to
            final success described above), the device shows an
            interstitial page **PIN Entry Failed** for 2 seconds, then
            returns to idle. The device also sounds the EMV failure tone
            to audibly report the result and call the cardholder’s
            attention to the display.

13) If the host is performing a PIN Entry / Re-PIN function (such as
    **User Interface Sequence** = **Enter PIN / Enter PIN Again**),
    after the cardholder enters the PIN a second time:

    1)  If the PINs match:

        1)  The device sends the Encrypted PIN block to the host by
            sending **Notification 0x0205 - Banking Functions Operation
            Complete** to report **Touchscreen / PIN Entry / Success /
            Data Attached**. The host may pass this PIN block to backend
            systems for processing and storage.

        2)  The host calls the same command again with parameter **User
            Interface Sequence = PIN Entry Successful** to indicate
            success and exit PIN Entry Mode. The device responds by
            showing an interstitial page **PIN Entry Successful** for 2
            seconds, then returns to idle mode. The device also sounds
            the EMV success tone to audibly report the result and call
            the cardholder’s attention to the display.

    2)  If the PINs do not match, the device sends **Notification
        0x0205 - Banking Functions Operation Complete** to report
        **Touchscreen** / **PIN Entry / Operation Failed / PIN Verify
        Failed**. Depending on host-driven retry rules and the history
        of the session:

        1)  The host may call the same command again with parameter
            **User Interface Sequence = Enter PIN /Enter PIN Again** to
            prompt the cardholder to enter a PIN twice again.

        2)  The host must eventually finalize by calling the same
            command again with parameters to end the PIN entry session.
            If the host calls the command with **User Interface Sequence
            = PIN Entry Failed** to trigger final failure (as opposed to
            final success described above), the device shows an
            interstitial page **PIN Entry Failed** for 2 seconds, then
            returns to idle. The device also sounds the EMV failure tone
            to audibly report the result and call the cardholder’s
            attention to the display.

Table 176 - Request Data for Command 0x2002 - Request PIN with Card
Supplied Account Data (Banking Functions Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">2002 = <strong>Command 0x2002 - Request PIN with Card
Supplied Account Data (Banking Functions Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Timeout</p>
<p>Timeout in seconds that the device should wait for the cardholder to
present card, enter PIN and confirm completion.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>09</td>
<td><p>Reader Options</p>
<p>The parameters inside this TLV data object allow the host to enable
and disable the various payment method interfaces</p></td>
<td>TC</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>01</td>
<td><p>Magnetic Stripe Reader Mode</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = Enabled</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Contact Reader Mode</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = Enabled</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>01</td>
<td><p>Contactless Reader Mode</p>
<ul>
<li><p>0x00 = Disabled</p></li>
<li><p>0x01 = Enabled</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A4</td>
<td>0A</td>
<td>PIN Entry Options</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>User Interface Sequence</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Present Card / Enter PIN (start session)</p></li>
<li><p>0x02 = PIN Incorrect, Try Again (continue session)</p></li>
<li><p>0x03 = Enter PIN / Enter PIN Again (continue session)</p></li>
<li><p>0x04 = Present Card / Enter PIN / Enter PIN Again (start
session)</p></li>
<li><p>0xFD = Cancel PIN Session (end session)</p></li>
<li><p>0xFE = PIN Entry Failed (end session)</p></li>
<li><p>0xFF = PIN Entry Successful (end session)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>02</td>
<td><p>PIN Length Limits (Only when PIN is requested)</p>
<p>Byte 1 Maximum PIN Length (&lt;= 0x0C)</p>
<p>Byte 2 Minimum PIN Length (&gt;=0x04)</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>01</td>
<td><p>PIN Block Format (Only when PIN is requested)</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = Reserved / Invalid</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 177 - Response Data for Command 0x2002 - Request PIN with Card
Supplied Account Data (Banking Functions Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| 2002 = **Command 0x2002 - Request PIN with Card Supplied Account Data (Banking Functions Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK / Operation Started**.

Table 178 - Request Example Command 0x2002 - Request PIN with Card
Supplied Account Data (Banking Functions Only)

| Example (Hex) |
|----|
| AA 00 81 04 01 0C 20 02 84 1C 20 02 81 01 3C A3 09 81 01 01 82 01 01 83 01 01 A4 0A 82 01 01 83 02 08 04 85 01 00 |

Table 179 - Response Example Command 0x2002 - Request PIN with Card
Supplied Account Data (Banking Functions Only)

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 0C 20 02 82 04 01 00 00 00 |

### Command Group 0xD1nn - Settings and Information

#### Command 0xD101 - Get Property

The host uses this command to get information about the device or its
configuration / settings.

Each data element representing device information or device
configuration is part of a tree of values and is uniquely identified by
an Object Identifier (also known as an Object ID or OID) as defined in
***ITU-T X.660 \| ISO/IEC 9834-1***, which can be found by searching for
**X.660** in the publications on [www.itu.int](http://www.itu.int). This
document refers to these data elements collectively as **Properties**.
The list of all properties and their corresponding OIDs and other
characteristics is provided in section **8 Configuration**.

This command can be used in multiple ways. For simplicity, this document
describes one possible way that does not require detailed knowledge of
the ***X.660*** specification.

To get a property, the sequence of events is as follows:

1)  The host determines which property or tree branch of properties it
    wants to get from the device (see section **8 Configuration**).

2)  The host composes the command request in the format below, and sends
    it to the device.

3)  The device sends a response. If the request succeeded, the response
    includes the value(s) of the requested property or properties. If it
    did not succeed, the device returns a failure response with no
    command-specific parameters.

Table 180 - Request Data for Command 0xD101 - Get Property

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D101 = <strong>Command 0xD101 - Get
Property</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Company ID</p>
<p>This value is the root of the “long form” of the Property OID, and is
the same for all MagTek devices. Leave this parameter empty and use the
default.</p></td>
<td>B</td>
<td>O</td>
<td>2B 06 01 04 01 F6 09</td>
</tr>
<tr>
<td>82</td>
<td>03</td>
<td><p>Device Family ID</p>
<p>This value is the second portion of the “long form” of the Property
OID, and is the same for all similar MagTek devices within the same
product family. Unless you have a specific use case that uses this
parameter, leave this parameter empty and use the default otherwise your
software may not work with multiple products.</p>
<p>Byte 1 Platform</p>
<ul>
<li><p>0x02 = Apollo Platform</p></li>
</ul>
<p>Byte 2 Product</p>
<ul>
<li><p>0x01 = DynaFlex, 0x02 = DynaProx, 0x03 = DynaFlex II PED, 0x04 =
DynaFlex II, 0x05 = DynaFlex II Go</p></li>
</ul>
<p>Byte 3 Device Variant</p>
<ul>
<li><p>0x00 = Standard</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>Product dependent</td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>Property Type</p>
<p>This parameter contains the first number of the Property OID as
documented in section <strong>8 Configuration</strong>.</p>
<ul>
<li><p>0x01 = Device Settings</p></li>
<li><p>0x02 = Device Information</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>87</td>
<td>var</td>
<td><p>Property OID Tree Prefix</p>
<p>This optional parameter contains subsequent numbers of the Property’s
OID as documented in section <strong>8 Configuration</strong>, but can
not include the final number.</p>
<p>This can also be populated with fewer numbers from the OID, in which
case the remaining numbers of the OID of the Property or set of
Properties you wish to retrieve must be included in the <strong>Property
OID Remainder</strong>.</p>
<p>For simplicity, populate this with the 2<sup>nd</sup> through the
second-to-last number in the property’s OID.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Property OID Remainder</p>
<p>This contains the remaining numbers of the Property’s OID, BER TLV
encoded per <em><strong>X.660</strong></em> section <em><strong>8 Basic
encoding rules</strong></em>. For details about TLV encoding an OID. To
request a set of properties in a branch of the Property OID structure,
the host should pass a partial Property OID, and the device returns the
value of all properties from the specified tree level downward.</p>
<p>For simplicity, include all numbers except the final number of the
property’s OID in <strong>Property Type</strong> and <strong>Property
OID Tree Prefix</strong>, and include the final number of the OID OR
0xC0 here, then append constant byte 0x00. These two bytes represent a
single empty BER TLV primitive data object.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 181 - Response Data for Command 0xD101 - Get Property

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">D101 = <strong>Command 0xD101 - Get
Property</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Company ID</p>
<p>This contains the Company ID the host included in the request
message. If this parameter is not included in the request, the response
does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>03</td>
<td><p>Device Family ID</p>
<p>This contains the Device Family ID the host included in the request
message. If this parameter is not included in the request, the response
does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>Property Type</p>
<p>This contains the Property Type the host included in the request
message.</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>87</td>
<td>var</td>
<td><p>Property OID Tree Prefix</p>
<p>This contains the Property OID Tree Prefix the host included in the
request message. If this parameter is not included in the request, the
response does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Property OID Remainder</p>
<p>This contains the same TLV-encoded portion of the OID the host
included in the Property OID Remainder of the request message, with leaf
nodes populated with actual values. If the host requested a set of
properties in a branch of the Property OID structure, this contains the
set of requested branches, including branch OIDs, leaf node IDs, and
values.</p>
<p>If the host follows the “for simplicity” recommendation in the
request message to request a single property, it can retrieve the value
of the requested property by stripping off the first few bytes, which
represent the TLV-encoded last number in the OID and the length of the
property’s value, as follows; the remaining bytes are the value of the
property:</p>
<ul>
<li><p>If the second byte is 7F or less, strip off the first two
bytes.</p></li>
<li><p>If the second byte is 81, strip off the first three
bytes.</p></li>
<li><p>If the second byte is 82, strip off the first four
bytes.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 182 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong> using “simple” form:</p>
<p>AA00 8104 0155D101 840F D101 8501 01 8704 02070101 8902 C100</p></td>
</tr>
</tbody>
</table>

Table 183 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong> using “simple” form:</p>
<p>AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070101
8903 C101 00</p></td>
</tr>
</tbody>
</table>

Table 184 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong> using longer Property OID Remainder:</p>
<p>AA00 8104 0155D101 8411 D101 8501 01 890A E208 E706 E104 E102
C100</p></td>
</tr>
</tbody>
</table>

Table 185 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong> using longer Property OID Remainder:</p>
<p>AA00 8104 8255D101 8204 00000000 84820012 D101 8501 01 890B E209 E707
E105 E103 C101 00</p></td>
</tr>
</tbody>
</table>

Table 186 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property Subgroup 2.1.2.2.nn Core Firmware
Information</strong> using “simple” form:</p>
<p>AA00 8104 0155D101 840D D101 8501 02 8702 0102 8902 C200</p></td>
</tr>
</tbody>
</table>

Table 187 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Get <strong>Property Subgroup 2.1.2.2.nn Core Firmware
Information</strong> using “simple” form:</p>
<p>AA00 81 04 8255D101 82 04 00000000 84 820056 D101 85 01 02 87 02 0102
89 820049 E2 820045 E1 820004 C1 00 C2 00 E2 820039 C1 0D
44796E61466C65782050726F00 C2 13 313030303030373138332D41352D5043490000
C3 00 C4 0B 3130303030303731383300 C5 00 C6 02 FF00</p></td>
</tr>
</tbody>
</table>

#### Command 0xD111 - Set Property (Unsecured)

| <img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image19.png"
style="width:1.63in;height:0.3in"
alt="A black and white sign with letters AI-generated content may be incorrect." /> |
|----|
| Properties are stored in flash memory, which inherently has a limited number of read-write cycles before it begins to wear. For this reason, MagTek recommends setting properties as few times as possible over the lifecycle of the device. |

The host uses this command to set device configuration / settings that
do not require security. For setting properties that require security
see **Command 0xD112 - Set Property (Secured)**.

Each data element representing device configuration is part of a tree of
values and is uniquely identified by an Object Identifier (also known as
an Object ID or OID) as defined in ***ITU-T X.660 \| ISO/IEC 9834-1***,
which can be found by searching for **X.660** in the publications on
[www.itu.int](http://www.itu.int). This document refers to these data
elements collectively as **Properties**. The list of all properties and
their corresponding OIDs and other characteristics is provided in
section **8 Configuration**.

This command can be used in multiple ways. For simplicity, this document
describes one possible way that does not require detailed knowledge of
the ***X.660*** specification.

To set a property, the sequence of events is as follows:

1)  The host determines which property it wants to set and the value it
    wants to set in the device (see section **8 Configuration**).

2)  The host composes a command request in the format below, and sends
    it to the device.

3)  The device sends a response in the format below. If the request
    succeeded, the response payload is identical to the request payload.
    If it did not succeed, the device returns a failure response with no
    command-specific parameters.

Table 188 - Request Data for Command 0xD111 - Set Property (Unsecured)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D111 = <strong>Command 0xD111 - Set Property
(Unsecured)</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Company ID</p>
<p>This value is the root of the “long form” of the Property OID, and is
the same for all MagTek devices. Leave this parameter empty and use the
default.</p></td>
<td>B</td>
<td>O</td>
<td>2B 06 01 04 01 F6 09</td>
</tr>
<tr>
<td>82</td>
<td>03</td>
<td><p>Device Family ID</p>
<p>This value is the second portion of the “long form” of the Property
OID, and is the same for all similar MagTek devices within the same
product family. Unless you have a specific use case that uses this
parameter, leave this parameter empty and use the default otherwise your
software may not work with multiple products.</p>
<p>Byte 1 Platform</p>
<p>0x02 = Apollo Platform</p>
<p>Byte 2 Product</p>
<ul>
<li><p>0x01 = DynaFlex, 0x02 = DynaProx, 0x03 = DynaFlex II PED, 0x04 =
DynaFlex II, 0x05 = DynaFlex II Go</p></li>
</ul>
<p>Byte 3 Device Variant</p>
<ul>
<li><p>0x00 = Standard</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>Product dependent</td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>Property Type</p>
<p>This parameter contains the first number of the Property OID as
documented in section <strong>8 Configuration</strong>.</p>
<ul>
<li><p>0x01 = Device Settings</p></li>
<li><p>0x02 = Device Information</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>87</td>
<td>var</td>
<td><p>Property OID Tree Prefix</p>
<p>This optional parameter contains subsequent numbers of the Property’s
OID as documented in section <strong>8 Configuration</strong>, but can
not include the final number. For simplicity, populate this with the
2<sup>nd</sup> through the second-to-last number in the property’s
OID.</p>
<p>This can also be populated with fewer numbers from the OID, in which
case the remaining numbers of the OID must be included in the
<strong>Property OID Remainder</strong>.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Property OID Remainder</p>
<p>This contains the remaining numbers of the Property’s OID, BER TLV
encoded per <em><strong>X.660</strong></em> section <em><strong>8 Basic
encoding rules</strong></em>. For details about TLV encoding an OID.</p>
<p>For simplicity, include all numbers except the final number of the
property’s OID in <strong>Property Type</strong> and <strong>Property
OID Tree Prefix</strong>, and include the final number of the OID OR
0xC0 here, then append a length corresponding one of the following, then
append the value to set the property to:</p>
<ul>
<li><p>If the length of the value you are setting is 0x7F or shorter,
include one byte equal to the length of the value.</p></li>
<li><p>If the length of the value you are setting is greater than 0x7F
but less than 0xFFFF, append 82, then two bytes equal to the length of
the value.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 189 - Response Data for Command 0xD111 - Set Property (Unsecured)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">D111 = <strong>Command 0xD111 - Set Property
(Unsecured)</strong></td>
</tr>
<tr>
<td>81</td>
<td>var</td>
<td><p>Company ID</p>
<p>This contains the Company ID the host included in the request
message. If this parameter is not included in the request, the response
does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>82</td>
<td>03</td>
<td><p>Device Family ID</p>
<p>This contains the Device Family ID the host included in the request
message. If this parameter is not included in the request, the response
does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>85</td>
<td>01</td>
<td><p>Property Type</p>
<p>This contains the Property Type the host included in the request
message.</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td>87</td>
<td>var</td>
<td><p>Property OID Tree Prefix</p>
<p>This contains the Property OID Tree Prefix the host included in the
request message. If this parameter is not included in the request, the
response does not include it.</p></td>
<td>B</td>
<td>O</td>
<td>N/A</td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Property OID Remainder</p>
<p>This contains the same TLV-encoded portion of the OID the host
included in the Property OID Remainder of the request message.</p></td>
<td>B</td>
<td>R</td>
<td>N/A</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Table 190 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Set <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong></p>
<p>AA 00 81 04 01 55 D1 11 84 10 D1 11 85 01 01 87 04 02 07 01 01 89 03
C1 01 00</p></td>
</tr>
</tbody>
</table>

Table 191 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Set <strong>Property 1.2.7.1.1.1 Device Reset Occurred
Notification Control</strong></p>
<p>AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01
87 04 02 07 01 01 89 03 C1 01 00</p></td>
</tr>
</tbody>
</table>

#### Command 0xD112 - Set Property (Secured)

| <img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image19.png"
style="width:1.63in;height:0.3in"
alt="A black and white sign with letters Description automatically generated" /> |
|----|
| Properties are stored in flash memory, which inherently has a limited number of read-write cycles before it begins to wear. For this reason, MagTek recommends setting properties as few times as possible over the lifecycle of the device. |

The host uses this command to set device configuration / settings
securely. Properties that require security should specify that they do
in their documentation. This command can also be used for properties
that do not require security.

The details, request data and response data of this command are
identical to what is documented in **Command 0xD111 - Set Property
(Unsecured),** however, the command must be structured and sent
according to what is documented in sequence of events 1-5 of **Command
0xD811 - Start Send File to Device (Secured)**.

#### Command 0xD201 - Reset Properties to Defaults (MAGTEK INTERNAL ONLY FOR NOW)

The host uses this command to reset the device’s Command 0xD201 - Reset
Properties to Defaults (MAGTEK INTERNAL ONLY FOR NOW) Properties to
their default values. It does not reset configuration values that are
set using **Command 0xD111 - Set Property (Unsecured)** or **Command
0xD112 - Set Property (Secured)**.

The sequence of events is as follows:

1)  The host composes a command request in the format below and sends it
    to the device.

2)  The device resets all properties to the default values specified by
    the command.

3)  The device sends a response in the format below.

4)  The device automatically resets and applies the new settings.

<table>
<caption><p>Table 192 - Request Data for Command 0xD201</p></caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a>.</td>
</tr>
<tr>
<td colspan="6">D201= Command 0xD112 - Set Property (Secured)</td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Default Values to Use</p>
<ul>
<li><p>0x01 = Use Firmware Defaults (see section
<strong>8</strong>)</p></li>
<li><p>Other Values = Reserved for future use</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td>01</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D201= Command 0xD112 - Set Property (Secured) |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 193 - Response Data for Command 0xD201

Table 194 - Request Example

| Example (Hex)                      |
|------------------------------------|
| AA00 81040101D201 8405 D201 810101 |

Table 195 - Response Example

| Example (Hex)                  |
|--------------------------------|
| AA00 81048201D201 820400000000 |

### Command Group 0xD8nn - File Operations

#### About Files

Large blobs of data uploaded to / downloaded from the device are
referred to as “files” and share a common set of commands documented
here, and special message type **Data File Message**. Some file types
can be sent in the File Payload fields in “raw” form (e.g. certificates
and images) with metadata coming from the command request and response.
Other file types require the addition of MagTek metadata included inside
the File Payload blob; these are documented in the “File Type”
subsections of section **4 Data Types and Shared TLV Data Objects**.

Files Types that may come from the host include:

- EMV configuration

- Firmware updates

- Public Key Infrastructure (PKI) Certificates

- User interface images and prompts

- EMV kernels

- SRED BIN tables

File Types that may come from the device include:

- Read back of the above file types

- Signature Capture

- Logs

- Certificate Requests

The commands in this section share a common list of 4-byte file types,
listed in Table. File types marked as Secured = Yes must be loaded using
**Command 0xD811 - Start Send File to Device (Secured)**; file types
that are marked as Secured = No can be loaded using **Command 0xD812 -
Start Send File to Device (Unsecured)**.

­Table 196 - File Types

<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 12%" />
<col style="width: 11%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Description</th>
<th>Secured</th>
<th>File Type</th>
<th>File Type Version</th>
<th>File Subtype</th>
<th>File Instance</th>
</tr>
</thead>
<tbody>
<tr>
<td>EMV configuration, terminal file. See file definition in section 4.8
on page <a href="#emv-terminal-configuration-file-type">55</a>.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, processing file. See file definition in section
4.9 on page <a
href="#emv-processing-configuration-file-type">57</a>.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x01</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, entry point file. See file definition in section
4.10 on page <a
href="#emv-entry-point-configuration-file-type">60</a>.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x02</td>
<td>0x00</td>
</tr>
<tr>
<td><p>EMV configuration, CA keys file. See file definition in section
0</p>
<p>on page <a
href="#jcb-entry-point-table-common-kernel-only">72</a>.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x03</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, Visa DRL set. Reserved for future use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x04</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, American Express DRL set. See file definition in
section 4.12 on page <a
href="#emv-american-express-drl-configuration-file-type-not-supported-on-expresspay-4.x">76</a>.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x05</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, MasterCard update conditions. Reserved for future
use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x06</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, American Express update conditions. Reserved for
future use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x08</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, Discover update conditions. Reserved for future
use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x09</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, CA revocation list. Reserved for future use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x0A</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, exception file list. Reserved for future
use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x0B</td>
<td>0x00</td>
</tr>
<tr>
<td>EMV configuration, DPAS data storage. Reserved for future use.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x00</td>
<td>0x00</td>
<td>0x0C</td>
<td>0x00</td>
</tr>
<tr>
<td>(Touch Only) Signature capture file. See file definition in section
4.15 on page <a href="#security-parameters-type">81</a>.</td>
<td><p>Get: No</p>
<p>Set: NA</p></td>
<td>0x01</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td>(Display Only) Custom Idle Page Image 1. For details, see Property
1.2.3.1.1.1 Custom Idle Page Image.</td>
<td><p>Get: NA</p>
<p>Set: No</p></td>
<td>0x02</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td>(Display Only) Custom Idle Page Image 2. For details, see Property
1.2.3.1.1.1 Custom Idle Page Image.</td>
<td><p>Get: NA</p>
<p>Set: No</p></td>
<td>0x02</td>
<td>0x00</td>
<td>0x00</td>
<td>0x01</td>
</tr>
<tr>
<td>(Display Only) Custom Idle Page Image 3. For details, see Property
1.2.3.1.1.1 Custom Idle Page Image.</td>
<td><p>Get: NA</p>
<p>Set: No</p></td>
<td>0x02</td>
<td>0x00</td>
<td>0x00</td>
<td>0x02</td>
</tr>
<tr>
<td>(Display Only) Custom Idle Page Image 4. For details, see Property
1.2.3.1.1.1 Custom Idle Page Image.</td>
<td><p>Get: NA</p>
<p>Set: No</p></td>
<td>0x02</td>
<td>0x00</td>
<td>0x00</td>
<td>0x03</td>
</tr>
<tr>
<td><p>(WLAN Only) Apollo root CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Apollo intermediate CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x01</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Apollo server certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x02</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Customer root CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x03</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Customer intermediate CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x04</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Customer server certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x05</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Commercial root CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x06</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Commercial intermediate CA certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: Yes</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x07</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Commercial server certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x08</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Apollo trust certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x09</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Customer trust certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x0A</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Apollo client certificate</p>
<p>See Certificate File Types.</p></td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x03</td>
<td>0x00</td>
<td>0x0B</td>
<td>0x00</td>
</tr>
<tr>
<td><p>(WLAN Only) Certificate signing request (CSR)</p>
<p>See Certificate Signing Request (CSR) File Types.</p></td>
<td><p>Get: No</p>
<p>Set: N/A</p></td>
<td>0x04</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td>(WLAN Only) WebSocket Trust configuration file, Request file from
MagTek.</td>
<td><p>Get: N/A</p>
<p>Set: No</p></td>
<td>0x05</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
<tr>
<td>(WLAN Only) MQTT Trust configuration file, Request file from
MagTek.</td>
<td><p>Get: N/A</p>
<p>Set: No</p></td>
<td>0x05</td>
<td>0x00</td>
<td>0x01</td>
<td>0x00</td>
</tr>
<tr>
<td>UI configuration file. See file definition in section 4.29 UI
Configuration File Type.</td>
<td><p>Get: No</p>
<p>Set: No</p></td>
<td>0x06</td>
<td>0x00</td>
<td>0x00</td>
<td>0x00</td>
</tr>
</tbody>
</table>

#### Command 0xD801 - Load Firmware File

The host uses this command to send a firmware image file, signed by
MagTek, to the device as the first step in updating firmware. The host
also uses this command to send a firmware image file, signed by MagTek,
to the device as the first step in updating firmware. If the battery
charge is five percent or less, a response is returned indicating that
the command has not been executed. See **Table 199 - Response Example
for Command 0xD801**.

The sequence of events is as follows:

1)  The host is assumed to have access to a binary file containing a
    firmware image signed by MagTek, which contains a complete instance
    of **Firmware File Type (MAGTEK INTERNAL ONLY)**.

2)  The host composes a command request in the format below, using the
    binary file as the **Payload**, and sends it to the device.

3)  The device sends a response to the host in the format below to
    acknowledge it has received the request. The device will not allow
    the Load Firmware File command to execute if the battery charge is 5
    percent or lower.

4)  The device validates the request and authenticates the firmware file
    with the algorithm specified in the firmware file payload.

> If the upload was not successful, then go to the next step. If the
> upload was successful and auto-commit was disabled, then go to the
> next step. Else, the device will commit the image automatically. If it
> was successful, the device sends **Notification 0x0905 - Firmware
> Update Successful** to the host. If it was unsuccessful, the device
> sends **Notification 0x0906 - Firmware Update Failed**to the host.
> Commit Firmware Notification Detail Codes are used for auto-commit
> mode. In both cases, the device automatically resets.

Table 197 - Request Data for Command 0xD801 - Load Firmware File

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D801 = <strong>Command 0xD801 - Load Firmware
File</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Progress Indicator</p>
<p>Reserved for future use. Populate with 0x03.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>02</td>
<td><p>Image Type</p>
<ul>
<li><p>0x0000 = Boot Loader 1 image</p></li>
<li><p>0x0001 = Main App image</p></li>
<li><p>0x0002 = WiFi Module image­</p></li>
<li><p>0x0003 = BLE Module image</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>This is a SHA-256 hash of the entire object <strong>Firmware
File</strong> <strong>Type (MAGTEK INTERNAL ONLY)</strong> being
uploaded. For backward compatibility, this TLV is required in Default
Mode, it is Optional in Auto-Commit Mode.</p></td>
<td>B</td>
<td>R/O</td>
<td></td>
</tr>
<tr>
<td>87</td>
<td>var</td>
<td><p>Payload</p>
<p>This is the binary file or <strong>Firmware File</strong>
<strong>Type (MAGTEK INTERNAL ONLY)</strong> object being loaded into
the device.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>88</td>
<td>01</td>
<td><p>Load Options</p>
<p>0x00 = Default mode</p>
<p>0x01 = Auto Commit</p></td>
<td>B</td>
<td>O</td>
<td>0x00</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 198 - Response Data for Command 0xD801 - Load Firmware File

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D801 = **Command 0xD801 - Load Firmware File** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 01 D8 01 82 04 80 02 03 16 |

Table 199 - Response Example for Command 0xD801 Battery Charge State

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 200 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00 81 04 01 01 D8 01 84 83 0C 76 58 D8 01 81 01 03 85 02 00 01
86 20 DF C7 1E 09 A3 CE 8E 86 B0 F5 B6 75 BE B7 7A 0E 82 33 BF F1 8A CD
8F 38 34 B0 DB 20 D9 40 4B 28 87 83 0C 76 28</p>
<p>Plus 0C7628 bytes of firmware Payload, excluded here for
brevity.</p></td>
</tr>
</tbody>
</table>

Table 201 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 01 D8 01 82 04 00 00 00 00 |

#### Command 0xD811 - Start Send File to Device (Secured)

The host uses this command to start sending secured files to the device
for storage or processing. It is similar to **Command 0xD812 - Start
Send File to Device (Unsecured)**, but is used to send a different
subset of file types that impact device security and require some form
of authentication from the host. Refer to ­Table 196 to determine which
file type requires a secure command All files require the command to be
authorized via a secure wrapper. In some cases, files include additional
signatures within the file structure itself. This command is paired with
**Command 0xD821 - Start Get File from Device**, which the host can use
to retrieve files. However, some file types are “one way only” and can
not be retrieved using that command after the host sends them to the
device.

The sequence of events is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host determines which file type it will send to the device (see
    section **6.7.1 About Files**), and either opens an existing file in
    its file system for reading, or begins constructing it.

3)  The host constructs **Command 0xD811 - Start Send File to Device
    (Secured)** per **Table 202**.

4)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command as the payload,
    and sends that command to the device as a **Request Message** to
    start the process of uploading a file.

    1)  Use **Command 0xEF04 – Load LTPK Protection Key (MAGTEK INTERNAL
        ONLY FOR NOW)** to gather information about the key to use to
        secure the message payload(s). Because this command requires a
        MAC, use key slot 1111.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using MAC**

            2)  Operation Algorithm = CMAC

            3)  Operation Cipher=AES-256

            4)  Padding = One and zeros

            5)  **MAC Block Size** with any number

        2)  **Key Information Type** populated with the key information
            gathered earlier.

5)  The device sends a **Response Message** so the host knows it can
    begin sending the file.

6)  The host sends a **Data File Message** to the device. If the device
    does not receive file data within a reasonable period of time, it
    times out and stops listening for the data file.

7)  The device checks to make sure the **File ID** and the length and
    hash of the File Payload match with the values the host specified in
    this command.

8)  The device repeats the same **Response Message**, this time with the
    **Message Reference Number** set to the same value the host used in
    the **Data File Message**.

Table 202 - Request Data for Command 0xD811 - Start Send File to Device
(Secured)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D811 = <strong>Command 0xD811 - Start Send File to
Device (Secured)</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>File ID from ­Table 196</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A2</td>
<td>var</td>
<td>File transfer properties</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>Length of File Payload</p>
<p>This is the length of the <strong>File Payload</strong> parameter in
the <strong>Data File Message</strong> the host sends to the
device.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Hash Checksum Type</p>
<ul>
<li><p>0x04 = SHA-256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>Anticipated checksum calculated against the <strong>File
Payload</strong>, according to the standard specified in <strong>Hash
Checksum Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>File Description</p>
<p>The host should populate this value to help identify the file using
<strong>Command 0xD825 - Get File Info from Device</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>File Name</p>
<p>Maximum length 32 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>File Label</p>
<p>Maximum length 16 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>File Version</p>
<p>Maximum length 7 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>File Date</p>
<p>Maximum length 20 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>87</td>
<td>01</td>
<td>Reserved for future use. Leave empty.</td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 203 - Response Data for Command 0xD811 - Start Send File to Device
(Secured)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D811 = **Command 0xD811 - Start Send File to Device (Secured)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

***Note: For additional support, please contact MagTek Support.***

Table 204 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D8 11 84 81 8F EE EE A1 19 81 05 03 03 06 02 08 84 00 85 00 A8 0A 81 02 11 02 82 00 86 00 88 00 A9 00 82 04 FF FF FF F0 83 08 C9 65 45 F2 97 69 85 B1 84 4E D8 11 81 04 00 00 03 00 A2 2B 81 04 00 00 02 99 82 01 04 83 20 87 A4 B3 54 61 C5 CB D3 1D DC BA 9D 65 25 5A D4 6A 22 FA 51 5E FD 65 87 AF AC A8 8C 4F AF 80 9B A3 14 38 31 30 38 33 30 33 30 33 30 33 30 33 30 33 33 33 30 33 30 87 01 01 9E 10 7D E4 27 C8 A0 70 72 08 19 0A 1E 0A 3F 48 BB F1 |

Table 205 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 0C D8 11 82 04 00 00 00 00 |

#### Command 0xD812 - Start Send File to Device (Unsecured)

The host uses this command to start sending unsecured files to the
device for storage or processing. It is similar to **Command 0xD811 -
Start Send File to Device (Secured)** but is used to send a different
subset of file types that do not impact device security, Refer to ­Table
196 to determine which file type can use unsecure command This command
is paired with **Command 0xD821 - Start Get File from Device**, which
the host can use to retrieve files. However, some file types are “one
way only” and can not be retrieved using that command after the host
sends them to the device.

The sequence of events is as follows:

1)  The host determines which file type it will send to the device (see
    section **6.7.1 About Files**), and either opens an existing file in
    its file system for reading, or begins constructing it.

2)  The host constructs **Command 0xD812 - Start Send File to Device
    (Unsecured)** per **­­Table 206**.

3)  The host sends that command to the device as a **Request Message**
    to start the process of uploading a file.

4)  The device sends a **Response Message** so the host knows it can
    begin sending the file.

5)  The host sends a **Data File Message** to the device. (MAGTEK
    INTERNAL ONLY FOR NOW) If the device does not receive file data
    within a reasonable period of time, it times out and stops listening
    for the data file.

6)  The device checks to make sure the **File ID** and the length and
    hash of the **File Payload** match with the values the host
    specified in this command.

7)  The device repeats the same **Response Message**, this time with the
    **Message Reference Number** set to the same value the host used in
    the **Data File Message**.

­­Table 206 - Request Data for Command 0xD812 - Start Send File to Device
(Unsecured)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D812 = <strong>Command 0xD812 - Start Send File to
Device (Unsecured)</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>File ID from ­Table 196</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A2</td>
<td>var</td>
<td>File transfer properties</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>Length of File Payload</p>
<p>This is the length of the <strong>File Payload</strong> parameter in
the <strong>Data File Message</strong> the host sends to the
device.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Hash Checksum Type</p>
<ul>
<li><p>0x04 = SHA-256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>Anticipated checksum calculated against the <strong>File
Payload</strong>, according to the standard specified in <strong>Hash
Checksum Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>File Description</p>
<p>The host should populate this value to help identify the file using
<strong>Command 0xD825 - Get File Info from Device</strong>.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>File Name</p>
<p>Maximum length 32 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>File Label</p>
<p>Maximum length 16 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>File Version</p>
<p>Maximum length 7 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>File Date</p>
<p>Maximum length 20 bytes</p>
<p>Reserved for future use. Leave empty.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>87</td>
<td>01</td>
<td>Reserved for future use. Leave empty.</td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 207 - Response Data for Command 0xD812 - Start Send File to Device
(Unsecured)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D812 = **Command 0xD812 - Start Send File to Device (Unsecured)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

***Note: For additional support, please contact MagTek Support.***

Table 208 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00</p>
<p>81 04 01 07 D8 12</p>
<p>84 44</p>
<p>D8 12</p>
<p>81 04 02 00 00 00</p>
<p>A2 2B</p>
<p>81 04 00 02 58 38</p>
<p>82 01 04</p>
<p>83 20</p>
<p>D5 B8 BF 2F 3A 15 D9 EE 1D 0D E5 8E DD 68 37 73</p>
<p>18 51 C7 3C 3D 79 58 2B A6 07 90 5C 2B 86 3C E5</p>
<p>A3 0A</p>
<p>81 08 30 32 30 30 30 30 30 30 87 01 01</p></td>
</tr>
</tbody>
</table>

Table 209 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 07 D8 12 82 04 00 00 00 00 |

#### Command 0xD821 - Start Get File from Device

The host uses this command to request a file stored on the device. File
types include standard files (images and certificates), MagTek custom
files (configuration, firmware), and in some cases even large data blob
output (such as signature capture data). In many cases, the files
retrieved by this command have been sent by a host previously using
**Command 0xD811 - Start Send File to Device (Secured)** or **Command
0xD812 - Start Send File to Device (Unsecured)**. In other cases, such
as retrieving signature capture data, the data may originate with the
device and the host uses this command to retrieve it. Such data and is
not persistent, in the sense that the device does not retain it through
power cycles.

The sequence of events is as follows:

1)  The host composes a command request in the format below, and sends
    it to the device.

2)  The device sends a response in the format below so the host knows it
    can begin listening for a file message.

3)  The device sends a **Data File Message** to the host. If the host
    does not receive file data within a reasonable period of time, it
    should time out and stop listening for the data file.

4)  Upon receiving the end of the **Data File Message**, the host should
    check to make sure the **File ID**, length, and hash of the **File
    Payload** in the **Data File Message** match the values the device
    specified in its response to ensure the file has not been tampered
    with.

Table 210 - Request Data for Command 0xD821 - Start Get File from Device

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D821 = <strong>Command 0xD821 - Start Get File from
Device</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>File ID from ­Table 196</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>87</td>
<td>01</td>
<td><p>Progress indicator behavior (Reserved for future use / Subject to
change)</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = LED</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 211 - Response Data for Command 0xD821 - Start Get File from
Device

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">D821 = <strong>Command 0xD821 - Start Get File from
Device</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>File ID from ­Table 196</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A2</td>
<td>var</td>
<td>File transfer properties</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>Length of File Payload</p>
<p>This is the length of the <strong>File Payload</strong> parameter in
the <strong>Data File Message</strong> the device sends to the
host.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Hash Checksum Type</p>
<ul>
<li><p>0x04 = SHA-256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>Anticipated checksum calculated against the <strong>File
Payload</strong>, according to the standard specified in <strong>Hash
Checksum Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>File Description</p>
<p>The values the host populated for convenience when it sent the file
to help identify the file. Not all values are required.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>File Name</p>
<p>Maximum length 32 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>File Label</p>
<p>Maximum length 16 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>File Version</p>
<p>Maximum length 7 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>File Date</p>
<p>Maximum length 20 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Done.**

Table 212 - Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA 00 81 04 01 08 D8 21 84 0B D8 21 81 04 00 00 00 01 87 01 01 |

Table 213 - Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 08 D8 21 82 04 00 00 00 00 84 54 D8 21 81 04 00 00 00 01 A2 2B 81 04 00 00 00 40 82 01 04 83 20 FD EA B9 AC F3 71 03 62 BD 26 58 CD C9 A2 9E 8F 9C 75 7F CF 98 11 60 3A 8C 44 7C D1 D9 15 11 08 A3 1D 81 0B 54 45 53 54 5F 31 4B 2E 62 69 6E 82 05 4C 61 62 65 6C 83 07 31 2E 30 2E 30 2E 31 |

***Note: For additional support, please contact MagTek Support.***

#### Command 0xD825 - Get File Info from Device

The host uses this command to request the file information of a file
stored on the device. File types include standard files (images and
certificates), MagTek custom files (configuration, firmware), and in
some cases even large data blob output (such as signature capture data).
In many cases, the file information retrieved by this command have been
sent by a host previously using **Command 0xD811 - Start Send File to
Device (Secured)** or **Command 0xD812 - Start Send File to Device
(Unsecured)**. In other cases, such as retrieving file information of
signature capture data, the data may originate with the device and the
host uses this command to retrieve the information. Such information is
not persistent, in the sense that the device does not retain it through
power cycles.

The sequence of events is as follows:

1)  The host composes a command request in the format below, and sends
    it to the device.

2)  The device sends a response in the format below. The response
    contains the file information.

3)  If the file can not be found, then a response of failure will be
    sent to the host.

Table 214 - Request Data for Command 0xD825 - Get File Info from Device

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| D825 = **Command 0xD825 - Get File Info from Device** |  |  |  |  |  |
| 81 | 04 | File ID from ­Table 196 | B | R |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 215 - Response Data for Command 0xD825 - Get File Info from Device

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">D825 = <strong>Command 0xD825 - Get File Info from
Device</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>File ID from ­Table 196</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A2</td>
<td>var</td>
<td>File transfer properties</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>Length of File</p>
<p>This is the length of the file.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Hash Checksum Type</p>
<ul>
<li><p>0x04 = SHA-256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>Anticipated checksum calculated against the file, according to the
standard specified in <strong>Hash Checksum Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>A3</td>
<td>var</td>
<td><p>File Description</p>
<p>The values the host populated for convenience when it sent the file
to help identify the file. Not all values are required.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/81</td>
<td>var</td>
<td><p>File Name</p>
<p>Maximum length 32 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/82</td>
<td>var</td>
<td><p>File Label</p>
<p>Maximum length 16 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>File Version</p>
<p>Maximum length 7 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td>/84</td>
<td>var</td>
<td><p>File Date</p>
<p>Maximum length 20 bytes</p>
<p>Reserved for future use.</p></td>
<td>B</td>
<td>O</td>
<td>Null</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 216 - Request Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 01 08 D8 21 84 08 D8 25 81 04 00 00 00 01 |

Table 217 - Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 08 D8 25 82 04 00 00 00 00 84 54 D8 25 81 04 00 00 00 01 A2 2B 81 04 00 00 00 40 82 01 04 83 20 FD EA B9 AC F3 71 03 62 BD 26 58 CD C9 A2 9E 8F 9C 75 7F CF 98 11 60 3A 8C 44 7C D1 D9 15 11 08 A3 1D 81 0B 54 45 53 54 5F 31 4B 2E 62 69 6E 82 05 4C 61 62 65 6C 83 07 31 2E 30 2E 30 2E 31 |

***Note: For additional support, please contact MagTek Support.***

#### Command 0xD831 – Delete File from Device

The host uses this command to request the deletion of a file stored on
the device. File types include

Custom Idle Page Image 1 to 4 in **­­Table 206**.

The sequence of events is as follows:

1\) The host composes a command request in the format below and sends it
to the device.

2\) The device reads and erases the file and sends a response to the
host in the format below.

3\) If the file read or the file erase fails, a response of failure will
be sent to the host.

Table 218 - Request Data for Command 0xD831 – Delete File from Device

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| D831 = **Command 0xD831 – Delete File from Device** |  |  |  |  |  |
| 81 | 04 | File ID from ­Table 196 | B | R |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 219 - Response Data for Command 0xD831 – Delete File from Device

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D831 = **Command 0xD831 – Delete File from Device** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 220 - Request Example

| Example (Hex)                                         |
|-------------------------------------------------------|
| AA 00 81 04 01 05 D8 31 84 08 D8 31 81 04 02 00 00 00 |

Table 221 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 05 D8 31 82 04 00 00 00 00 |

### Command Group 0xD9nn - Process Files

#### Command 0xD901 - Commit Firmware from File

The host uses this command to commit a file previously uploaded using
**Command 0xD801 - Load Firmware File** into the device’s permanent
memory after the device has authenticated the file.

The sequence of events is as follows:

1)  The host composes a command request in the format below, and sends
    it to the device.

2)  The device sends a response in the format below.

3)  The device writes the image file to permanent storage.

4)  If the commit operation was successful, the device sends
    **Notification 0x0905 - Firmware Update Successful** to the host. If
    the commit operation was not successful, the device sends
    **Notification 0x0906 - Firmware Update Failed** to the host. In
    both cases, the device automatically resets.

Table 222 - Request Data for Command 0xD901 - Commit Firmware from File

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">D901 = <strong>Command 0xD901 - Commit Firmware from
File</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Progress Indicator</p>
<p>Reserved for future use. Populate with 0x03.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Operation Options</p>
<p>Reserved for future use. Populate with 0x00.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>02</td>
<td><p>Image Type</p>
<ul>
<li><p>0x0000 = Boot Loader 1 image</p></li>
<li><p>0x0001 = Main App image</p></li>
<li><p>0x0002 = WiFi Module image</p></li>
<li><p>0x0003 = BLE Module image</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>20</td>
<td><p>Hash Checksum</p>
<p>This is a SHA-256 hash of the entire <strong>Firmware File Type
(MAGTEK INTERNAL ONLY)</strong> object being uploaded.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 223 - Response Data for Command 0xD901 - Commit Firmware from File

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| D901 = **Command 0xD901 - Commit Firmware from File** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 224 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D9 01 84 2E D9 01 81 01 03 82 01 00 85 02 00 01 86 20 DF C7 1E 09 A3 CE 8E 86 B0 F5 B6 75 BE B7 7A 0E 82 33 BF F1 8A CD 8F 38 34 B0 DB 20 D9 40 4B 28 |

Table 225 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 02 D9 01 82 04 00 00 00 00 |

Table 226 - Notification Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 83 00 09 05 82 04 08 01 0A 03 |

***Note: For additional support, please contact MagTek Support.***

### Command Group 0xDFnn - Diagnostics and Utilities

#### Command 0xDF01 - Echo

The host uses this command to prompt the device for a response that
contains the same payload it sent.

The sequence of events is as follows:

1)  The host constructs the command request for **Command 0xDF01 -
    Echo** in the format below, populating any of the available
    parameters with any data. The total length of data to be echoed
    across all parameters must not exceed 128 bytes.

2)  The host sends the command request to the device.

3)  The device sends a command response in the format below to the host,
    echoing back the exact parameters the host sent in the command
    request.

Table 227 - Request Data for Command 0xDF01 - Echo

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| DF01 = **Command 0xDF01 - Echo** |  |  |  |  |  |
| 81 | var | Data to be echoed | B | O |  |
| 82 | var | Data to be echoed | B | O |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 228 - Response Data for Command 0xDF01 - Echo

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| DF01 = **Command 0xDF01 - Echo** |  |  |  |  |  |
| 81 | var | Data being echoed | B | O |  |
| 82 | var | Data being echoed | B | O |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 229 - Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA 00 81 04 01 01 DF 01 84 07 DF 01 81 03 01 02 03 |

Table 230 - Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA 00 81 04 82 01 DF 01 82 04 00 00 00 00 84 07 DF 01 81 03 01 02 03 |

#### Command 0xDF02 - Convert Binary Tag Data to Text (MAGTEK INTERNAL ONLY FOR NOW)

Reserved for future use per Dave.

### Command Group 0xEnnn - Security

#### Command 0xE001 - Get Challenge

The host uses this command to request challenge data from the device,
which the host can then use to perform a specific sensitive operation /
modify a specific type of device setting. Information about how the host
should pass the required challenge data to the device is included in the
documentation for all commands that use this security mechanism.

The sequence of events is as follows:

1)  The host already wants to perform a secured operation that requires
    a challenge \[for example **Command 0xEEEE - Send Secured Command to
    Device**\].

2)  The host constructs the command request for **Command 0xE001 - Get
    Challenge** in the format below.

3)  The host sends the command request to the device.

4)  The device generates a random number for the challenge, stores it
    locally, and sends a response in the format below to the host.

5)  The device starts a 5 minute countdown timer during which the
    challenge is valid. If the host takes no action within 5 minutes,
    the timer expires, the device erases the challenge data, and the
    device must retrieve a fresh challenge to perform the operation it
    wants to perform. This binding of the command to a specific time
    period allows the device to detect and reject commands that have
    been captured/intercepted at one point in time and replayed later.

Table 231 - Request Data for Command 0xE001 - Get Challenge

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| E001 = **Command 0xE001 - Get Challenge** |  |  |  |  |  |
| 81 | 02 | Request ID to be protected | B | R |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 232 - Response Data for Command 0xE001 - Get ChallengeGet
Challenge

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">E001 = <strong>Command 0xE001 - Get
Challenge</strong></td>
</tr>
<tr>
<td>81</td>
<td>02</td>
<td>Request ID to be protected</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>04</td>
<td>Device Serial Number</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>08</td>
<td><p>Challenge Token</p>
<p>A challenge token includes 8 byte random numbers and must be used
within 5 minutes of being issued. Only one token can be active at a
time. Attempts to use a token for requests other than the one specified
will cause the token to be revoked/erased</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Table 233 - Request Example

| Example (Hex)                                   |
|-------------------------------------------------|
| AA 00 81 04 01 13 E0 01 84 06 E0 01 81 02 F0 12 |

Table 234 - Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 13 E0 01 82 04 00 00 00 00 84 16 A2 14 81 02 E0 01 82 04 B5 03 3D A0 83 08 3B 4F A0 62 69 BB 73 38 |

#### Command 0xEEEE - Send Secured Command to Device

The host uses this command to transmit another command securely. This
“secure wrapper” mechanism provides the device a means to ensure the
wrapped command originated from an authentic, authorized host. In
addition, its implementation includes an operation that starts a
countdown timer, which ensures the command is current and is not an
unauthorized replay of a previously intercepted / stored command. This
command can use multiple authentication methods, including MAC or ECDSA
Signature. The method and parameters to use are specific to the command
being wrapped, and are specified in the documentation for that command.

The sequence of events is as follows:

1)  The host determines what command it wants to call from section **6
    Commands**, determines the command must be secured, and uses the
    Request Data table for that command to compose **Message Payload**.

2)  The host uses **Command 0xE001 - Get Challenge** to retrieve a
    **Challenge Token** and unlock the device for receiving the desired
    command for a limited period of time. When the time expires, the
    device will no longer accept the Challenge Token and the host will
    have to retrieve another one.

3)  The host creates an instance of **Command 0xEEEE - Send Secured
    Command to Device** in the format below, and includes the Message
    Payload and Challenge Token inside it. In the **Request Message**,
    it fills in **Command ID** as the command number of the wrapped
    Message Payload, instead of 0xEEEE. Some parameters are
    command-specific; see the documentation for the command that is
    being wrapped to determine what values to use.

4)  The host sends the resulting composite command request to the
    device.

5)  The device validates the serial number and challenge token, then
    examines the parameters to determine which authentication method is
    being used, and authenticates the command accordingly.

6)  If the device determines the command request is authentic, it will
    start executing the secure command defined by the Message Payload.

7)  The device sends a response to the host reporting success or
    failure. In both cases, the response uses the format that
    corresponds to the command invoked by the Message Payload. See the
    documentation for that command to determine the format of the
    response.

Table 235 - Request Data for Command 0xEEEE - Send Secured Command to
Device

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EEEE = <strong>Command 0xEEEE - Send Secured Command to
Device</strong></td>
</tr>
<tr>
<td>A1</td>
<td>var</td>
<td><p>Security Parameters</p>
<p>This parameter describes how the Signature parameter in this data
object is calculated, and is a <strong>Security Parameters Type</strong>
TLV data object. To determine which values to use in that TLV data
object, see the documentation for the command being wrapped.</p></td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>04</td>
<td>Serial Number</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>08</td>
<td><p>Challenge Token</p>
<p>The token the device returned when the host called <strong>Command
0xE001 - Get Challenge</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Message Payload</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>9E</td>
<td>var</td>
<td>MAC or Signature</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 236 - Request Example Using MAC

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>This example wraps <strong>Command 0xD811 - Start Send File to
Device (Secured)</strong>.</p>
<p>AA 00 81 04 01 04 D8 11 84 81 8F EE EE A1 19 81 05 03 03 06 02 08 84
00 85 00 A8 0A 81 02 11 02 82 00 86 00 88 00 A9 00 82 04 FF FF FF F0 83
08 C9 65 45 F2 97 69 85 B1 84 4E D8 11 81 04 00 00 03 00 A2 2B 81 04 00
00 02 99 82 01 04 83 20 87 A4 B3 54 61 C5 CB D3 1D DC BA 9D 65 25 5A D4
6A 22 FA 51 5E FD 65 87 AF AC A8 8C 4F AF 80 9B A3 14 38 31 30 38 33 30
33 30 33 30 33 30 33 30 33 33 33 30 33 30 87 01 01 9E 10 7D E4 27 C8 A0
70 72 08 19 0A 1E 0A 3F 48 BB F1</p></td>
</tr>
</tbody>
</table>

Table 237 - Request Example Using ECDSA

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>This example wraps <strong>Command 0xF015 - Read Log &amp; Clear
Tamper (MAGTEK INTERNAL ONLY)</strong>:</p>
<p>AA 00 // Marker</p>
<p>81 04 01 0F F0 15 // Message Information</p>
<p>84 81 C8 // Request Payload</p>
<p>EE EE // 0xEEEE, Secure Wrapper</p>
<p>A1 24 // P4-A1, Security Parameters</p>
<p>81 04 02 01 04 05 // 02=Cmd Auth-sign, 01=ECDSA, 04=SHA-256,
05=P-521</p>
<p>84 00 // Data (for IV, nonce, as needed)</p>
<p>85 00 // Extra data item (reserved for future use)</p>
<p>A8 16 // Key Info</p>
<p>81 02 00 00 // Key Slot ID</p>
<p>82 07 45 43 43 53 49 47 4E // Key Label, “ECCSIGN”</p>
<p>86 05 45 43 44 53 41 // KSN or derive info, ECDSA</p>
<p>88 00 // Added Info</p>
<p>A9 00 // 2nd Key Info (reserved for future use)</p>
<p>82 04 B5 03 3D A0 // P4-P2, Device Serial Number</p>
<p>83 08 5B 6B 45 4B 00 5B CE 31 // P4-P3, Challenge Token</p>
<p>84 02 F0 15 // P4-P4, Payload Command 0xF015</p>
<p>9E 81 89 // P4-P30, Signature for Secure Wrapper</p>
<p>30 81 86</p>
<p>02 41 // Sig-&gt;R</p>
<p>52 5B 04 9A C7 CC 56 DE 5A EA 89 62 47 BB B8 0D</p>
<p>93 80 CE C8 AD 6E 16 F7 6E DA 08 42 0B 9C 69 77</p>
<p>61 B0 99 FC 05 7D AE AF 75 79 9C 7B B3 81 72 5C</p>
<p>4E 5B 92 DC F3 B6 85 5E B3 A2 71 0D 1D 93 B5 0D</p>
<p>0C</p>
<p>02 41 // Sig-&gt;S</p>
<p>46 47 0A EF 6F D5 97 ED 4F 41 E8 3C FD 20 A1 CE</p>
<p>7D E5 CA D3 E8 22 3B ED BC 2A 8A A0 BF 73 72 81</p>
<p>35 4F CB 52 B6 A9 07 6F 36 7F 5D 35 D5 29 3D 5D</p>
<p>78 17 0E B2 D6 AA A5 0D B3 4D B9 04 2C 03 6A AC</p>
<p>A5</p></td>
</tr>
</tbody>
</table>

***Note: For additional support, please contact MagTek Support.***

#### Command 0xEF01 - Load Key Using TR-31

The host uses this command to load a key into one of several available
slots in the device’s secure memory.

| **ID** | **Label** | **Description**                   | **Load TK** |
|--------|-----------|-----------------------------------|-------------|
| 1000   | TMPTK     | Temporary KBPK                    | agree       |
| 1001   | MTK       | Master Transport                  | TMPTK       |
| 1002   | DEVTK     | Device Master                     | MTK         |
| 1003   | FINTK     | Financial Master                  | MTK         |
| 1021   | PRODTK    | Production - MagTek Internal Only | DEVTK       |
| 1022   | MFGTK     | MagTek Only Internal/External     | DEVTK       |
| 1081   | MKIFTK    | MagTek KIF Financial Keys         | FINTK       |
| 1101   | FREQMK    | Factory Request MAC               | PRODTK      |
| 1102   | MREQMK    | Mfg Device Request MAC            | MFGTK       |
| 1111   | MFRQMK    | Mfg Financial Request MAC         | MKIFTK      |
| 20xx   | DKPTM0-1F | MagTek DUKPT Initial Key          | MKIFTK      |

Table 238 - Device Key ID / Slot

To inject a specific key in the above table, the corresponding Load TK
shall be injected previously

As shown in the table, MTK injection requires that a TMPTK has been
created. See **Command 0xF017 - Establish Ephemeral KBPK**.

After MTK has been injected successfully, the sequence of injecting
other keys is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host constructs a TR-31 (X9.143) key block for the key it is
    going to load. (Note that the Load Key must be injected previously.)

3)  The host constructs the command request for **Command 0xEF01 - Load
    Key Using TR-31** in the format below.

4)  The host sends the command request to the device.

5)  The device sends a response in the format below to the host.

Table 239 - Request Data for Command 0xEF01 - Load Key Using TR-31

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th><br />
Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF01 = <strong>Command 0xEF01 - Load Key Using
TR-31</strong></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Key Block</p>
<p>This is a populated, secured <strong>TR-31 Key Block
Type</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 240 - Response Data for Command 0xEF01 - Load Key Using TR-31

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF01 = **Command 0xEF01 - Load Key Using TR-31** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 241 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1A EF 01 84 82 01 36 EF 01 84 82 01 30 44 30 33 30 34 42 31 54 58 30 30 4E 30 36 30 30 49 4B 31 38 46 46 46 46 39 38 37 36 35 34 33 32 31 30 33 30 30 30 30 30 32 31 35 38 4D 47 54 4B 31 30 30 31 54 31 31 30 34 32 30 30 37 31 32 30 34 31 30 38 31 32 31 30 34 30 30 33 46 33 31 30 37 42 35 30 41 46 44 32 33 32 31 30 43 39 33 36 31 39 44 44 41 41 32 31 33 36 43 37 33 33 31 30 32 30 32 30 31 32 30 34 54 31 37 31 36 33 30 5A 4B 50 30 45 30 31 39 33 36 46 41 33 32 45 4B 43 30 41 30 30 34 35 30 30 54 53 31 34 32 30 32 30 30 39 30 32 54 31 35 35 38 30 32 5A 50 42 30 34 35 37 32 31 37 46 33 34 37 31 34 43 32 42 38 38 46 33 39 35 35 32 32 32 46 46 35 39 41 41 30 35 37 44 39 39 41 46 38 32 41 37 35 37 32 46 39 33 38 46 38 33 38 42 43 36 35 45 45 35 34 46 39 34 37 46 35 39 41 30 36 43 44 34 35 35 31 39 32 32 37 41 32 35 35 43 37 44 35 44 37 43 38 36 37 34 35 30 33 46 41 43 36 46 41 37 31 33 32 43 38 46 41 39 39 36 42 34 45 42 36 41 41 31 31 34 46 45 |

Table 242 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 1A EF 01 82 04 00 00 00 00 |

***Note: For additional support, please contact MagTek Support.***

#### Command 0xEF02 – Generate CSR keys (WLAN Only)

The host uses this command to generate a key pair to be used for a
certificate signing request (CSR). The key pair generated will be 256
bit elliptic-curve (EC) keys. The key pair generated will be saved to
non-volatile memory in the device and will overwrite any existing CSR
key pair. The key pair will persist in non-volatile memory associated
with a CSR until it is either overwritten or until a leaf certificate is
loaded into the device with **Command 0xD811 - Start Send File to Device
(Secured)** that contains a public key that matches the key pair at
which point the key pair will be associated with that certificate
instead of a CSR.

The sequence of events is as follows:

1)  The host constructs the command request in the format below and
    sends it to the device.

2)  The device sends a response in the format below to the host to
    indicate that key pair generation has been started.

3)  Once the device finishes generating the key pair, it will send
    **Notification 0x1001 - Device Information Update** with the
    category set to key management and the reason set to CSR keys
    generated to indicate that the key pair generation process has
    completed. The device typically takes around a second or two to
    generate a 256 bit EC key pair. If this command is extended in the
    future to support 2048 bit RSA keys, then it will take an average of
    30 seconds and sometimes much longer to generate the RSA keys. That
    is why a notification is used to indicate that the key pair has been
    generated instead of a command response that indicates that it is
    complete.

4)  The host will typically send **Command 0xEF03 – Generate CSR (WLAN
    Only)** as the next step. See this command for more detail and more
    potential steps.

Table 243 - Request Data for Command 0xEF02 – Generate CSR keys (WLAN
Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| EF02 = **Command 0xEF02 – Generate CSR keys (WLAN Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 244 - Response Data for Command 0xEF02 – Generate CSR keys (WLAN
Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF02 = **Command 0xEF02 – Generate CSR keys (WLAN Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 245 - Request Example

| Example (Hex)                  |
|--------------------------------|
| AA00 81 04 0155EF02 84 02 EF02 |

Table 246 - Response Example

| Example (Hex)                                 |
|-----------------------------------------------|
| AA00 81 04 8205EF02 82 04 01000000 84 02 EF02 |

#### Command 0xEF03 – Generate CSR (WLAN Only)

The host uses this command to generate a certificate signing request
(CSR) in PEM format. The CSR generated will be saved to volatile memory
in the device and will overwrite any existing CSR. The CSR will persist
in volatile memory until it is overwritten, fetched with **Command
0xD821 - Start Get File from Device** or the device is power cycled or
reset.

The sequence of events is as follows:

1)  The host will use **Command 0xEF02 – Generate CSR keys (WLAN Only)**
    if it wants generate a CSR using a new CSR key pair.

2)  The host constructs the command request in the format below and
    sends it to the device.

3)  The device sends a response in the format below to the host to
    indicate that CSR generation has completed.

4)  The host fetches the CSR with **Command 0xD821 - Start Get File from
    Device.**

5)  The CSR is used to create a certificate.

6)  The host loads the certificate into the device with **Command
    0xD811 - Start Send File to Device (Secured)**.

Table 247 - Request Data for Command 0xEF03 – Generate CSR (WLAN Only)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF03 = <strong>Command 0xEF03 – Generate CSR (WLAN
Only)</strong></td>
</tr>
<tr>
<td>81</td>
<td>1</td>
<td><p>Key Identifier</p>
<p>The key identifier to use to generate the CSR. The key pair
associated with the identifier must already be present in the device for
the command to succeed.</p>
<p>0 = CSR keys</p>
<p>1 = Apollo server cert keys</p>
<p>2 = Customer server cert keys</p>
<p>3 = Commercial server cert keys</p>
<p>4 = Apollo client cert keys</p></td>
<td>B</td>
<td>O</td>
<td>0</td>
</tr>
<tr>
<td>82</td>
<td>var</td>
<td><p>Subject</p>
<p>Including this optional parameter will override the default subject.
This parameter should contain a null terminated string. This string
should contain a list of attributes separated by commas. If an
attribute’s value contains a comma, the comma should be replaced with
“\\,” Each attribute value should be prefixed with its attribute name
followed by “=”. The following is a list of valid attribute names.</p>
<p>"CN"</p>
<p>"commonName"</p>
<p>"C"</p>
<p>"countryName”</p>
<p>"O"</p>
<p>"organizationName"</p>
<p>“L”</p>
<p>“locality”</p>
<p>"R"</p>
<p>“OU”</p>
<p>"organizationalUnitName"</p>
<p>“ST”</p>
<p>"stateOrProvinceName"</p>
<p>"emailAddress"</p>
<p>"serialNumber"</p>
<p>“postalAddress”</p>
<p>"postalCode"</p>
<p>“dnQualifier”</p>
<p>"title"</p>
<p>“surname”</p>
<p>"SN"</p>
<p>“givenName”</p>
<p>"GN"</p>
<p>“initials”</p>
<p>"pseudonym"</p>
<p>"generationQualifier"</p>
<p>“domainComponent”</p>
<p>"DC"</p>
<p>“O=MagTek Inc,CN= test1.com” is an example with two
attributes.</p></td>
<td>B</td>
<td>O</td>
<td>“serialNumber=XXXXXXX,CN=df-xxxxxxx” where XXXXXXX is
<strong>Property 2.2.1.1.1.1 Serial Number</strong> and so is xxxxxxx
but in lower case</td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Subject Alternative Names</p>
<p>Including this optional parameter will override the default subject
alternative names. This parameter should contain a null terminated
string. Only DNS names and IP addresses are supported and only a maximum
of two each. DNS names must be prefixed with “DNS=” and IP addresses
must be prefixed with “IPA=”. All Subject Alternative Names</p>
<p>Must be separated with a comma and not spaces. Subject Alternative
Names may not be ordered in the CSR the same as they are ordered
here.</p>
<p>"DNS=test1.com,DNS=test2.,IPA=1.10.16.255,IPA=2.10.16.254" is an
example.</p></td>
<td>B</td>
<td>O</td>
<td>“DNS=df-xxxxxxx,IPA=192.168.0.1” where xxxxxxx is <strong>Property
2.2.1.1.1.1 Serial Number</strong> but in lower case</td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 248 - Response Data for Command 0xEF03 – Generate CSR (WLAN Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF03 = **Command 0xEF03 – Generate CSR (WLAN Only)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 249 - Request Example

| Example (Hex)                  |
|--------------------------------|
| AA00 81 04 0155EF03 84 02 EF03 |

Table 250 - Response Example

| Example (Hex)                                 |
|-----------------------------------------------|
| AA00 81 04 8255EF03 82 04 00000000 84 02 EF03 |

#### Command 0xEF04 – Load LTPK Protection Key (MAGTEK INTERNAL ONLY FOR NOW)

The sequence of events is as follows:

1)  The hose uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host determines which file type it will send to the device (See
    section **6.7.1** About files) and either opens an existing file in
    its file system for reading or begins constructing it.

3)  The host constructs **Command 0xD811 - Start Send File to Device
    (Secured)** per **Table 202**.

4)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command as the payload,
    and send that command to the device as a Request Message to start
    the process of uploading a file.

    1)  Use **Command 0xEF04 – Load LTPK Protection Key (MAGTEK INTERNAL
        ONLY FOR NOW)**

The host uses this command to load the 256-bit AES LTPK protection key.
The key is encrypted and

MAC’d with the DKEK and DKMK respectively before saving it through KPM.
This key can be loaded

at the factory or the customer’s secure site before deployment.

The sequence of events is as follows:

1)  The host composes a command request in the format below, and sends
    it to the device.

2)  The device reads the Action, if Action == 0, the device will check
    and return the key status. If Action == 1, the device will verify
    the CRC-checksum and then save the key through KPM.

3)  If the key status read, key verify or key save fails, then a
    response of failure will be sent to the host.

Table 251 - Request Data for Command 0xEF04 – Load LTPK Protection Key
(MAGTEK INTERNAL ONLY FOR NOW)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF04 = <strong>Command 0xEF04 – Load LTPK Protection Key
(MAGTEK INTERNAL ONLY FOR NOW)</strong></td>
</tr>
<tr>
<td>81</td>
<td>1</td>
<td><p>Action</p>
<p>0 = Check key status.</p>
<p>1 = Load key.</p>
<p>If Action==0, ignore the TLVs below.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>20</td>
<td><p>AES-256 Key</p>
<p>32 bytes of key.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>2</td>
<td><p>CRC-16-CCITT Checksum</p>
<p>Polynomial X16 + X12 + X5 + 1, initial value=0xFFFF.</p>
<p>2-byte checksum of the 32-byte key.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 252 - Response Data for Command 0xEF04 – Load LTPK Protection Key
(MAGTEK INTERNAL ONLY FOR NOW)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF04 = **Command 0xEF04 – Load LTPK Protection Key (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 253 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00 81 04 01 06 EF 04 84 2B EF 04 81 01 01 82 20 22 F0 66 59 0B
DA 04 F7 B9 99 B6 B4 B4 BC 2E</p>
<p>0D 95 92 C2 7A B1 55 98 2A 31 D3 06 CC E6 6B CF 85 83 02 84
99</p></td>
</tr>
</tbody>
</table>

Table 254 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 06 EF 04 82 04 00 00 00 00 |

#### Command 0xEF05 – Load Encrypted LTPK and Version (MAGTEK INTERNAL ONLY FOR NOW)

The host uses this command to load the encrypted LTPK and Version. The
data will first be decrypted

using the LTPK protection key, then encrypted and MAC’d with the DKEK
and DKMK respectively

before saving it through KPM.

The sequence of events is as follows:

1\) The host composes a command request in the format below, and sends
it to the device.

2\) The device reads the Action, if Action == 0, the device will check
and return the key status.

If Action == 1, the device will verify the CRC, decrypt and then save
the key through KPM.

3\) If the key status read, key verify or key save fails, then a
response of failure will be sent to the host.

Table 255 - Request Data for Command 0xEF05 – Load Encrypted LTPK and
Version (MAGTEK INTERNAL ONLY FOR NOW)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF05 = <strong>Command 0xEF05 – Load Encrypted LTPK and
Version (MAGTEK INTERNAL ONLY FOR NOW)Load Encrypted LTPK and
Version</strong></td>
</tr>
<tr>
<td>81</td>
<td>1</td>
<td><p>Action</p>
<p>0 = Check key status.</p>
<p>1 = Load key.</p>
<p>If Action==0, ignore the TLVs below.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>4</td>
<td><p>Key Version</p>
<p>00 00 00 01=0x00000001.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>2</td>
<td><p>Raw Key Length (before the padding &amp; encryption)</p>
<p>01 23=0x0123 bytes.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>var</td>
<td><p>Encrypted Key Length</p>
<p>The length of the encrypted LTPK shall be 16-byte aligned.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>2</td>
<td><p>CRC-16-CCITT Checksum</p>
<p>Polynomial X16 + X12 + X5 + 1, initial value=0xFFFF.</p>
<p>2-byte checksum of the encrypted key.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 256 - Response Data for Command 0xEF05 – Load Encrypted LTPK and
Version (MAGTEK INTERNAL ONLY FOR NOW)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF05 = **Command 0xEF05 – Load Encrypted LTPK and Version (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
| 81 | 4 | LTPK Key Version | B | R |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 257 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 07 EF 05 84 81 96 EF 05 81 01 01 82 04 00 00 00 02 83 02 00 79 85 81 80 A1 9A 2D F7 B9 99 57 9B 89 5E 58 1B AD 26 52 77 EB B8 AC 6F 6A BE A8 21 D6 38 0D 54 0B 24 65 F4 EC D4 1D 73 E1 5A BE 9F 13 6B 85 DD 96 60 FD 33 6C 23 15 14 0B 53 AC FF EF 1C 1B 22 BD 56 D7 86 6D 82 D4 E0 E6 0B F5 07 E6 5D A5 EF C2 89 A1 33 28 E1 C7 D2 00 7C 8C B8 C5 D5 F9 5B D7 4F ED BB 40 9F 10 1D 43 08 97 5B 4A 1F D4 50 EB 2B 73 82 C9 C9 6C 4C 9C BC 05 F0 74 11 3E 7E 9C 60 02 DC 86 02 69 DF |

Table 258 - Response Example

| Example (Hex)                                                           |
|-------------------------------------------------------------------------|
| AA 00 81 04 82 07 EF 05 82 04 00 00 00 00 84 08 EF 05 81 04 00 00 00 02 |

#### Command 0xEF06 – Change Device Lock State 

The host can use this command to change the device’s lock state. To get
the device’s lock state or to set it using MagTek security see
**Property 1.2.5.2.1.1 Device Lock State**. The value of the device lock
state will revert to the value of **Property 1.2.5.2.1.2 Device Lock
State After Reset** after a reset or a power cycle. See **Device Lock
Feature** for more information.

Table 259 - Request Data for Command 0xEF06 – Change Device Lock State

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF06 = <strong>Command 0xEF06 – Change Device Lock
State</strong></td>
</tr>
<tr>
<td>81</td>
<td>01</td>
<td><p>Device Lock State</p>
<ul>
<li><p>0x00 = Unlocked</p></li>
<li><p>0x01 = Locked</p></li>
</ul></td>
<td>B</td>
<td>M</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>01</td>
<td><p>Passcode Format</p>
<ul>
<li><p>0x00 = Clear</p></li>
<li><p>0x01 = Fixed SHA-256</p></li>
<li><p>0x02 = Variable SHA-256</p></li>
</ul></td>
<td>B</td>
<td>M</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>04-63</td>
<td><p>Passcode</p>
<p>The value of the passcode depends on the value of the passcode format
parameter.</p>
<p>If the passcode format is set to clear, then the value of the
passcode is the passcode in the clear and can have a length of 4-63
bytes.</p>
<p>If the passcode format is set to fixed SHA-256, then the value of the
passcode is the 32 byte SHA-256 hash value of the passcode.</p>
<p>If the passcode format is set to variable SHA-256, then the value of
the passcode is the 32 byte SHA-256 hash value of a 8 byte random
challenge token followed by the 4-63 byte passcode. The challenge token
must have been retrieved from the device within the last 5 minutes using
Command 0xE001 - Get Challenge.</p></td>
<td>B</td>
<td>M</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 260 - Response Data for Command 0xEF06 – Change Device Lock State

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF06 = **Command 0xEF06 – Change Device Lock State** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 261 - Request Example

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA00 81 04 0155EF06 84 0E EF06 810100 820100 8304 34333231 |

Table 262 - Response Example

| Example (Hex)                           |
|-----------------------------------------|
| AA00 81048255EF06 820400000000 8402EF06 |

#### Command 0xEF07 – Change Device Lock Passcode

The host can use this command to change the device’s lock passcode. The
value of the device lock passcode is stored in non-volatile memory so
changes made to it will persist after the device is reset or power
cycled. To change the device lock passcode using MagTek security or to
see its default value see **Property 1.2.5.2.1.3 Device Lock Passcode**.
See **Device Lock Feature** for more information.

Table 263 - Request Data for Command 0xEF07 – Change Device Lock
Passcode

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF07 = Command <strong>0xEF07 – Change Device Lock
Passcode</strong></td>
</tr>
<tr>
<td>81</td>
<td>4-63</td>
<td><p>Current Passcode</p>
<p>The current passcode in the clear. This must match the value of the
current passcode or the command will fail.</p></td>
<td>B</td>
<td>M</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>04-63</td>
<td><p>New Passcode</p>
<p>The new passcode in the clear. It can only contain any printable
ASCII character or the command will fail.</p></td>
<td>B</td>
<td>M</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 264 - Response Data for Command 0xEF07 – Change Device Lock
Passcode

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF07 = Command **0xEF07 – Change Device Lock Passcode** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 265 - Request Example

| Example (Hex)                                            |
|----------------------------------------------------------|
| AA00 81 04 0155EF07 84 0E EF07 810434333231 820434333231 |

Table 266 - Response Example

| Example (Hex)                           |
|-----------------------------------------|
| AA00 81048255EF07 820400000000 8402EF07 |

#### Command 0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR NOW)

The host can use this command to reset the device’s lock passcode to its
default value. The value of the device lock passcode is stored in
non-volatile memory so changes made to it will persist after the device
is reset or power cycled. To change the device lock passcode using
MagTek security or to see its default value see **Property 1.2.5.2.1.3
Device Lock Passcode**. See **Device Lock Feature** for more
information.

Table 267 - Request Data for Command 0xEF08 – Reset Device Lock Passcode
(MAGTEK INTERNAL ONLY FOR NOW)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| EF08 = Command **0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
| 81 | 4 | Device Serial Number. See **Property 2.2.1.1.1.1 Serial Number** for the format. | B | M |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 268 - Response Data for Command 0xEF08 – Reset Device Lock
Passcode (MAGTEK INTERNAL ONLY FOR NOW)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| EF08 = Command **0xEF08 – Reset Device Lock Passcode (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 269 - Request Example

| Example (Hex)                                 |
|-----------------------------------------------|
| AA00 81 04 0155EF08 84 08 EF08 81 04 BE001BB0 |

Table 270 - Response Example

| Example (Hex)                                 |
|-----------------------------------------------|
| AA00 81 04 8255EF08 82 04 00000000 84 02 EF08 |

#### Command 0xEF11 - Get Key Info

The host uses this command to retrieve information about a key slot,
including details about the key stored in that slot. It can be used for
several purposes, including:

- Determine if a key exists / has been loaded

- Get key derivation data to derive a DUKPT key

- Get transport key information to retrieve the appropriate transport
  key

The sequence of events is as follows:

1)  The host constructs the command request in the format below.

2)  The host sends the command request to the device.

3)  The device sends a response in the format below to the host.

Table 271 - Request Data for Command 0xEF11 - Get Key Info

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">EF11 = <strong>Command 0xEF11 - Get Key
Info</strong></td>
</tr>
<tr>
<td>81</td>
<td>02</td>
<td><p>Key Slot ID</p>
<p>See <strong>Table 56 - Key Slot ID</strong> on page <a
href="#_Ref49929758"><strong>85</strong></a>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 272 - Response Data for Command 0xEF11 - Get Key Info

<table style="width:100%;">
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">EF11 = <strong>Command 0xEF11 - Get Key
Info</strong></td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td>Key Slot Information</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Key Slot Status</p>
<ul>
<li><p>0x00 = Empty</p></li>
<li><p>0x01 = Loaded (Key not assigned purpose)</p></li>
<li><p>0x02 = Loaded &amp; Active</p></li>
<li><p>0x03 = Exhausted (End of DUKPT key sequence</p></li>
<li><p>0x04 = Expired (Reserved, certificate status)</p></li>
<li><p>0xFF = Not supported in this device</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Key Slot Type</p>
<p>First byte of the Key Slot ID in the host’s request message.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Transport Key Slot ID</p>
<p>This specifies the key used to secure and load the key that the host
is retrieving information about. See <strong>Table 56 - Key Slot
ID</strong> on page <a
href="#_Ref49929758"><strong>85</strong></a>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>06</td>
<td>Loaded Key Information</td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Key Environment</p>
<ul>
<li><p>‘T’ = Test</p></li>
<li><p>‘P’ = Production</p></li>
</ul></td>
<td>A</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(4)</td>
<td><p>TR-31 Attributes</p>
<p>See <strong>Table 52 - TR-31 Key Type Table -
Usage/Algorithm/Mode.</strong></p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Encoding of Algorithm &amp; Length</p>
<ul>
<li><p>0x01 = DEA</p></li>
<li><p>0x02 = 2TDEA</p></li>
<li><p>0x03 = 3TDEA</p></li>
<li><p>0x04 = AES128</p></li>
<li><p>0x05 = AES192</p></li>
<li><p>0x06 = AES256</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Key Check Value</p>
<ul>
<li><p>For AES-CMAC, 5 bytes.</p></li>
<li><p>For TDES-CMAC or TDES-CBCMAC, 3 bytes</p></li>
</ul></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td><p>Key Derivation Information</p>
<p>This contains the derivation block, key serial number (KSN), or key
label, as appropriate for the key type.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>A6</td>
<td>var</td>
<td><p>Restrictions</p>
<p>Reserved. Do not include.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>81</td>
<td>02</td>
<td><p>DUKPT Restrictions</p>
<p>These restrictions come from the TR-31 block.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>Timestamp</p>
<p>This comes from the TR-31 block or from device’s real-time
clock.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
</tbody>
</table>

Table 273 - Request Example

| Example (Hex)                                   |
|-------------------------------------------------|
| AA 00 81 04 01 21 EF 11 84 06 EF 11 81 02 20 07 |

Table 274 - Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 21 EF 11 82 04 00 00 00 00 84 34 A2 32 81 04 02 20 10 81 82 06 54 42 31 54 58 03 84 0A FF FF 98 76 54 32 10 30 00 00 A6 04 81 02 00 3F 89 10 32 30 32 30 30 39 30 32 54 31 35 35 38 30 32 5A |

***Note: For additional support, please contact MagTek Support.***

### Command Group 0xFnnn - Manufacturing

#### Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)

This command is used to force the device’s tamper protection mechanisms
to register a tamper event.

The sequence of events is as follows:

1)  The device’s tamper protection features must first be enabled. See
    **Command 0xF016 - Activate Device Security (MAGTEK INTERNAL
    ONLY)**.

2)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

3)  The host constructs the command request for **Command 0xF012 - Force
    Tamper (MAGTEK INTERNAL ONLY)** in the format below.

4)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command request as the
    payload, and sends that command request to the device as a **Request
    Message**.

    1)  Because this command is secured using a signature, read
        **Property 2.1.2.2.2.6 Key Type** to determine which fixed key
        to use to generate the signature.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using
                Signature**

            2)  Operation Algorithm = **ECDSA (indeterministic)**

            3)  Operation Hash = **SHA-256**

            4)  Operation Curve = **P521**.

5)  The device validates the request:

    1)  If the request is valid and properly authenticated, it forces
        the tamper event and automatically resets. The device does not
        send a response to the host in this case.

    2)  If the request fails validation, the device sends a response in
        the format below to report the failure to the host.

Table 275 - Request Data for Command 0xF012 - Force Tamper (MAGTEK
INTERNAL ONLY)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| F012 = **Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 276 - Response Data for Command 0xF012 - Force Tamper (MAGTEK
INTERNAL ONLY)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| F012 = **Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

Table 277 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 14 F0 12 84 81 CA EE EE A1 24 81 04 02 01 04 05 84 00 85 00 A8 16 81 02 00 00 82 07 45 43 43 53 49 47 4E 86 05 45 43 44 53 41 88 00 A9 00 82 04 B5 03 3D A0 83 08 3B 4F A0 62 69 BB 73 38 84 02 F0 12 9E 81 8B 30 81 88 02 42 01 F7 60 F4 89 8A 81 6D E2 4E 6C 5D D1 66 41 A4 34 54 E7 32 93 48 3D E5 7D 2C C6 16 F6 E8 CC 98 C6 5D 26 A6 20 60 B7 D1 EF 78 DB 85 32 82 72 67 23 8B 04 00 93 98 14 4E 2C 47 1A 3B F6 B6 B8 93 D2 EA 02 42 01 84 B4 A4 5C 9F D8 EC AD E2 29 F8 AD 8B DD AF 4C 4E 85 F9 B9 E2 AC 7E 7D 3B AE DB 83 47 AD 1B 95 91 32 C4 AA 0F 31 B0 8C 1B 2D AD C0 76 4C A1 AB D2 9F 3B 25 6A 87 36 AC 40 67 B9 33 5B 20 36 50 30 |

Table 278 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Response only occurs in the failure case.</p>
<p>AA 00 81 04 82 0F F0 12 82 04 81 00 00 00</p></td>
</tr>
</tbody>
</table>

#### Command 0xF014 - Read Log (MAGTEK INTERNAL ONLY)

The host uses this command to read the system event log from the device.

The sequence of events is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host constructs the command request for **Tamper in** the format
    below.

3)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command request as the
    payload, and sends that command request to the device as a **Request
    Message**.

    1)  Because this command is secured using a signature, read
        **Property 2.1.2.2.2.6 Key Type** to determine which fixed key
        to use to generate the signature.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using
                Signature**

            2)  Operation Algorithm = **ECDSA (indeterministic)**

            3)  Operation Hash = **SHA-256**

            4)  Operation Curve = **P521**.

4)  The device validates the request, then read the system event log.

5)  The device sends a response in the format below to report the result
    to the host.

Table 279 - Request Data for Command 0xF014 - Read Log (MAGTEK INTERNAL
ONLY)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| F014 = **Command 0xF014 - Read Log (MAGTEK INTERNAL ONLY)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 280 - Response Data for Command 0xF014 - Read Log (MAGTEK INTERNAL
ONLY)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">F014 = <strong>Command 0xF014 - Read Log (MAGTEK
INTERNAL ONLY)</strong></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td>System Event Log</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Number of Events</p>
<p>This specifies the number of events in the log that follows.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Length of Each Event</p>
<p>This specifies the fixed length used for each event reported in the
log that follows.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(var)</td>
<td><p>Event Log</p>
<p>This text blob contains the specified <strong>Number of
Events</strong>, up to 10 events total, of constant length equal to
<strong>Length of Each Event</strong>. If there are any empty events,
they are filled with 0x00 (Null). Each non-null contains:</p>
<ul>
<li><p>20 bytes of human readable date-time indicating when the device
wrote the entry into the log. If the device is powered on when a tamper
occurs, it records the event, reboots, then writes the event to the log.
If the device is powered off when a tamper occurs, it records the event,
then write the event to the log the next time it powers on.</p></li>
<li><p>A block of human readable text describing the event</p></li>
<li><p>Padding with 0x20 (Space)</p></li>
</ul></td>
<td>AN</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Each Event Log text block can contain one of several human readable
strings describing the event. The following is an example of two log
entries indicating Forced Tamper:

2023-12-08 02:57 @ID:0, sensor_status=0x1, active_sensors=0xaa0374

2023-12-08 02:57 @ID:0, tamper_time_in_seconds=1702004228

In the first log entry above:

- The value after **sensor_status=** is a 32-bit hex encoded number with
  a bit set to 1 for each tamper sensor that registered an actual tamper
  event.

- The value after **active_sensors =** is a 32-bit hex encoded number
  with a bit set to 1 for each tamper sensor that was active when the
  device logged the tamper event.

- The bit values for both numbers are listed in **Table 286 below**.

In the second log entry above, the value after
**tamper_time_in_seconds=** is the value of the device’s real time clock
at the time the tamper occurred, expressed as a decimal a number of
seconds in Unix epoch time format. This is expected to differ from the
human readable date-time stamp that indicates when the device wrote the
event to the log, because the device’s always-active security subsystem
registers a basic but indelible version of the tamper event immediately,
whereas the logging subsystem may need to wait for the device to
automatically reboot after tamper, or wait to be powered up after a
powered-off tamper, before system resources are available to write the
event to the log.

Table 281 - Sensor Bit Values In Tamper Log

| Bit | Tamper Sensor |
|----|----|
| 0 | Any Tamper: This is only used for **sensor_status=**. It is reserved and set to 0 for **active_sensors=**. Note that if **Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)** is used, only this bit will be set. |
| 1 | Reserved and set to 0 |
| 2 | Time Overflow |
| 3 | Reserved and set to 0 |
| 4 | Voltage |
| 5 | Clock |
| 6 | Temperature |
| 7 | Reserved and set to 0 |
| 8 | Flash Security |
| 9 | Test Mode |
| 10..16 | Reserved and set to 0 |
| 17 | Tamper Pin Input 1 |
| 18 | Reserved and set to 0 |
| 19 | Tamper Pin Input 3 |
| 20 | Reserved and set to 0 |
| 21 | Tamper Pin Input 5 |
| 22 | Reserved and set to 0 |
| 23 | Tamper Pin Input 7 |
| 24..31 | Reserved and set to 0 |

Table 282 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 32 F0 14 84 81 CA EE EE A1 24 81 04 02 01 04 05 84 00 85 00 A8 16 81 02 00 00 82 07 45 43 43 53 49 47 4E 86 05 45 43 44 53 41 88 00 A9 00 82 04 BE 00 06 80 83 08 88 D3 F5 28 2B CF 07 ED 84 02 F0 14 9E 81 8B 30 81 88 02 42 00 99 F6 96 30 7D 27 CB 59 B8 A9 F1 C1 7A C5 A8 D1 62 C2 8A 5A 9A F2 82 25 DD AF A7 C6 62 D3 57 70 DB 52 E6 EC 77 7F 20 2D CE DB F0 5E 84 77 B4 7B EA 8F 42 FB 6B 49 41 6F 78 33 08 DB 31 94 D0 2A 18 02 42 00 93 06 2A CF 5C 29 4E D5 FE 7B 1D 00 3E 68 C9 DA 4D 94 16 DA F9 86 CC BB 18 54 2E C4 44 28 B8 1C 62 CF 9E 47 46 20 7C 20 EF DF 71 05 49 B7 F9 F7 A0 0B 4D 7C 6C 77 EB 93 AF D3 40 ED 3A 28 10 A9 B4 |

Table 283 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00 81 04 82 32 F0 14 82 04 00 00 00 00 83 82 03 4C 00 02 00
54</p>
<p>32 30 32 33 2D 31 32 2D 30 38 20 30 32 3A 35 37 20 20 20 20 40 49 44
3A 30 2C 20 73 65 6E 73 6F 72 5F 73 74 61 74 75 73 3D 30 78 31 2C 20 61
63 74 69 76 65 5F 73 65 6E 73 6F 72 73 3D 30 78 61 61 30 33 37 34 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20</p>
<p>32 30 32 33 2D 31 32 2D 30 38 20 30 32 3A 35 37 20 20 20 20 40 49 44
3A 30 2C 20 74 61 6D 70 65 72 5F 74 69 6D 65 5F 69 6E 5F 73 65 63 6F 6E
64 73 3D 31 37 30 32 30 30 34 32 32 38 20 20 20 20 20 20 20 20 20 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20</p></td>
</tr>
</tbody>
</table>

#### Command 0xF015 - Read Log & Clear Tamper (MAGTEK INTERNAL ONLY)

The host uses this command to clear the device’s tamper status and read
the system event log from the device.

The sequence of events is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host constructs the command request for **Command 0xF015 - Read
    Log & Clear Tamper** in the format below.

3)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command request as the
    payload, and sends that command request to the device as a **Request
    Message**.

    1)  Because this command is secured using a signature, read
        **Property 2.1.2.2.2.6 Key Type** to determine which fixed key
        to use to generate the signature.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using
                Signature**

            2)  Operation Algorithm = **ECDSA (indeterministic)**

            3)  Operation Hash = **SHA-256**

            4)  Operation Curve = **P521**.

4)  The device validates the request, then does the following:

    1)  Read and clear the system event log.

    2)  Clear the device’s tamper status.

    3)  Check the device’s tamper status.

5)  The device sends a response in the format below to report the result
    to the host. If the request started successfully, the Request Status
    in the message wrapper is **OK, Started / Running, All good /
    requested operation was successful**. If the device is still in a
    tampered state after it clears the tamper, the response reports a
    failure.

Table 284 - Request Data for Command 0xF015 - Read Log & Clear Tamper
(MAGTEK INTERNAL ONLY)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |
| F015 = **Command 0xF015 - Read Log & Clear Tamper (MAGTEK INTERNAL ONLY)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Request Message** found on page [**23**](#request-message) |  |  |  |  |  |

Table 285 - Response Data for Command 0xF015 - Read Log & Clear Tamper
(MAGTEK INTERNAL ONLY)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="6">F015 = <strong>Command 0xF015 - Read Log &amp; Clear
Tamper (MAGTEK INTERNAL ONLY)</strong></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td>System Event Log</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Number of Events</p>
<p>This specifies the number of events in the log that follows.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(2)</td>
<td><p>Length of Each Event</p>
<p>This specifies the fixed length used for each event reported in the
log that follows.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(var)</td>
<td><p>Event Log</p>
<p>This text blob contains the specified <strong>Number of
Events</strong>, up to 10 events total, of constant length equal to
<strong>Length of Each Event</strong>. If there are any empty events,
they are filled with 0x00 (Null). Each non-null contains:</p>
<ul>
<li><p>20 bytes of human readable date-time indicating when the device
wrote the entry into the log. If the device is powered on when a tamper
occurs, it records the event, reboots, then writes the event to the log.
If the device is powered off when a tamper occurs, it records the event,
then write the event to the log the next time it powers on.</p></li>
<li><p>A block of human readable text describing the event</p></li>
<li><p>Padding with 0x20 (Space)</p></li>
</ul></td>
<td>AN</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Each **Event Log** text block can contain one of several human readable
strings describing the event. The following is an example of two log
entries indicating **Tamper Pin 3 Input** tampered:

2021-02-05 00:16 @ID:0, sensor_status=0x80001, active_sensors =0xaa0374

2021-02-05 00:16 @ID:0, tamper_time_in_seconds=1612484188

In the first log entry above:

- The value after **sensor_status=** is a 32-bit hex encoded number with
  a bit set to 1 for each tamper sensor that registered an actual tamper
  event.

- The value after **active_sensors =** is a 32 bit hex encoded number
  with a bit set to 1 for each tamper sensor that was active when the
  device logged the tamper event.

- The bit values for both numbers are listed in **Table 286 below**.

In the second log entry above, the value after
**tamper_time_in_seconds=** is the value of the device’s real time clock
at the time the tamper occurred, expressed as a decimal a number of
seconds in Unix epoch time format. This is expected to differ from the
human readable date-time stamp that indicates when the device wrote the
event to the log, because the device’s always-active security subsystem
registers a basic but indelible version of the tamper event immediately,
whereas the logging subsystem may need to wait for the device to
automatically reboot after tamper, or wait to be powered up after a
powered-off tamper, before system resources are available to write the
event to the log.

Table 286 - Sensor Bit Values in Tamper Log

| Bit | Tamper Sensor |
|----|----|
| 0 | Any Tamper: This is only used for **sensor_status=**. It is reserved and set to 0 for **active_sensors=**. Note that if **Command 0xF012 - Force Tamper (MAGTEK INTERNAL ONLY)** is used, only this bit will be set. |
| 1 | Reserved and set to 0 |
| 2 | Time Overflow |
| 3 | Reserved and set to 0 |
| 4 | Voltage |
| 5 | Clock |
| 6 | Temperature |
| 7 | Reserved and set to 0 |
| 8 | Flash Security |
| 9 | Test Mode |
| 10..16 | Reserved and set to 0 |
| 17 | Tamper Pin Input 1 |
| 18 | Reserved and set to 0 |
| 19 | Tamper Pin Input 3 |
| 20 | Reserved and set to 0 |
| 21 | Tamper Pin Input 5 |
| 22 | Reserved and set to 0 |
| 23 | Tamper Pin Input 7 |
| 24..31 | Reserved and set to 0 |

Table 287 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F F0 15 84 81 C8 EE EE A1 24 81 04 02 01 06 05 84 00 85 00 A8 16 81 02 00 00 82 07 45 43 43 53 49 47 4E 86 05 45 43 44 53 41 88 00 A9 00 82 04 B5 03 3D A0 83 08 5B 6B 45 4B 00 5B CE 31 84 02 F0 15 9E 81 89 30 81 86 02 41 52 5B 04 9A C7 CC 56 DE 5A EA 89 62 47 BB B8 0D 93 80 CE C8 AD 6E 16 F7 6E DA 08 42 0B 9C 69 77 61 B0 99 FC 05 7D AE AF 75 79 9C 7B B3 81 72 5C 4E 5B 92 DC F3 B6 85 5E B3 A2 71 0D 1D 93 B5 0D 0C 02 41 46 47 0A EF 6F D5 97 ED 4F 41 E8 3C FD 20 A1 CE 7D E5 CA D3 E8 22 3B ED BC 2A 8A A0 BF 73 72 81 35 4F CB 52 B6 A9 07 6F 36 7F 5D 35 D5 29 3D 5D 78 17 0E B2 D6 AA A5 0D B3 4D B9 04 2C 03 6A AC A5 |

Table 288 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00</p>
<p>81 04 82 0F F0 15 // Message Info</p>
<p>82 04 00 00 00 00 // Status is OK</p>
<p>83 82 03 50 // Payload, System Event LOG</p>
<p>00 02 // 2 events in the LOG</p>
<p>00 54 // 0x54 (84) bytes per event</p>
<p>32 30 32 30 2D 30 38 2D 32 36 2D 31 34 3A 30 30 // Event #1:
2020-08-26-14:00 @ID:0,</p>
<p>20 20 20 20 40 49 44 3A 30 2C 20 73 65 6E 73 6F // sensor_status=0x1,
active_sensors=0xaa0374</p>
<p>72 5F 73 74 61 74 75 73 3D 30 78 31 2C 20 61 63</p>
<p>74 69 76 65 5F 73 65 6E 73 6F 72 73 3D 30 78 61</p>
<p>61 30 33 37 34 20 20 20 20 20 20 20 20 20 20 20</p>
<p>20 20 20 20</p>
<p>32 30 32 30 2D 30 38 2D 32 36 2D 31 34 3A 30 30 // Event #2:
2020-08-26-14:00 @ID:0,</p>
<p>20 20 20 20 40 49 44 3A 30 2C 20 74 61 6D 70 65 //
tamper_time_in_seconds=1598450397</p>
<p>72 5F 74 69 6D 65 5F 69 6E 5F 73 65 63 6F 6E 64</p>
<p>73 3D 31 35 39 38 34 35 30 33 39 37 20 20 20 20</p>
<p>20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20</p>
<p>20 20 20 20</p></td>
</tr>
</tbody>
</table>

#### Command 0xF016 - Activate Device Security (MAGTEK INTERNAL ONLY)

The host uses this command to activate the security on the device. This
allows the manufacturer to perform initial operations on an unsecured
device, then enable security before shipping. This command is intended
to only be executed once during manufacturing, and can not be undone or
redone.

The sequence of events is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host constructs a request for **Command 0xF016 - Activate Device
    Security** as shown below.

3)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command request as the
    payload, and sends that command request to the device as a **Request
    Message**.

    1)  Because this command is secured using a signature, read
        **Property 2.1.2.2.2.6 Key Type** to determine which fixed key
        to use to generate the signature.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using
                Signature**

            2)  Operation Algorithm = **ECDSA (indeterministic)**

            3)  Operation Hash = **SHA-256**

            4)  Operation Curve = **P521**.

4)  The device does the following:

    1)  Validates the secure wrapper around the command and terminates
        if the signature is invalid.

    2)  Set the specified date and time on the device’s real-time clock
        (RTC).

    3)  Store the specified PCI Hardware ID in the device’s battery
        backed secure RAM.

    4)  Store the specified Hardware Configuration Profile in the
        device’s battery backed secure RAM.

    5)  Store the specified MAC Address in the device’s battery backed
        secure RAM.

    6)  Enable the 23-hour automatic restart.

    7)  Generate the Master Key Derivation Key (MKDK) and four Derived
        Key Encrypting Keys (DKEK/DDEK/DKMK/DDMK).

    8)  Store the specified WLAN SoftAP MagTek Password in the device’s
        EEPROM AES 256 CBC encrypted using the DKEK.

    9)  Activate and lock the tamper protection mechanism.

5)  The device sends a **Response Message** to the host to indicate the
    result.

Table 289 - Request Data for Command 0xF016 - Activate Device Security
(MAGTEK INTERNAL ONLY)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">F016 = <strong>Command 0xF016 - Activate Device Security
(MAGTEK INTERNAL ONLY)</strong></td>
</tr>
<tr>
<td>81</td>
<td>07</td>
<td><p>Current Date and Time</p>
<p>This initializes the device’s real-time clock (RTC) to the specified
date and time. The specified date and time should be Universal Time
Coordinated (UTC).</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Month</p>
<p>From 0x01 January to 0x0C December.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Day of Month</p>
<p>From 0x01 to 0x1F (31st).</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Hour</p>
<p>Hour in 24-hour format from 0x00 Midnight to 0x17 11PM</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Minute</p>
<p>Minutes after the hour from 0x00 0 minutes after the hour to 0x3B 59
minutes after the hour.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Seconds</p>
<p>Seconds after the minute from 0x00 0 seconds to 0x3B 59 seconds after
the minute.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td>Reserved. Set to 0x00.</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Year</p>
<p>Current year minus 2008</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>85</td>
<td>var</td>
<td><p>PCI Hardware ID</p>
<p>This specifies the PCI Hardware ID the device uses to uniquely
identify its model family on the touchscreen and via host
commands.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>86</td>
<td>var</td>
<td><p>Hardware Configuration Profile</p>
<p>This parameter contains a tightly encoded block of bytes that tells
the device’s firmware what hardware is installed. Note some values
inside this parameter must be prefixed with explicit lengths, but for
compactness they do not include tags. Such values do not have
parentheses in the <strong>Len</strong> column. This data is stored in
the secure processor’s battery-backed (VBAT) Register File and, like
keys, can only be erased by forcing a tamper event.</p>
<p>Example:</p>
<p>02</p>
<p>05 01 02 01 02 00</p>
<p>04 01 01 01 01</p>
<p>02 01 01</p>
<p>05 01 00 00 00 01</p>
<p>05 01 01 01 01 01</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(1)</td>
<td><p>Hardware Configuration Profile Version</p>
<p>This identifies the version of the Hardware Configuration Profile to
provide future extensibility.</p>
<ul>
<li><p>0x01 = Initial release</p></li>
<li><p>0x02 = Added in specification revision 30</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>05</td>
<td><p>System Core Hardware</p>
<p>Length is included in the hardware configuration profile
value.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Processor / SOC</p>
<ul>
<li><p>0x01 = K81</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>External Flash RAM</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Parallel NOR 2MB</p></li>
<li><p>0x02 = Parallel NOR 4MB</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>External RAM</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Parallel PSRAM 2MB</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>External non-volatile RAM/EEPROM</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = SPI 32KB</p></li>
<li><p>0x02 = SPI 64KB</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>On-board Host</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Android Tablet</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>04</td>
<td><p>Readers</p>
<p>Length is included in the hardware configuration profile
value.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>MSR</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = 3 Track MagnePrint Head and MagnePrint ASIC</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>ICCR (Contact)</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Contact block with analog chip</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>PCD (Contactless)</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = PN5180</p></li>
<li><p>0x02 = PN5190</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>BCR (Barcode Reader)</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Barcode Reader (NLS-N1)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>02</td>
<td><p>Power</p>
<p>Length is included in the hardware configuration profile
value.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Battery</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = xxxx LiPo</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>PMIC</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = PF1550A9</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>05</td>
<td><p>Communication</p>
<p>Length is included in the hardware configuration profile
value.</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>USB</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Internal FS available</p></li>
<li><p>0x03 = Internal FS available and Apple Authentication Coprocessor
present</p></li>
</ul>
<p>This configuration is bitwise.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>RS-232</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Present</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Ethernet</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Present</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Wireless LAN (WLAN)</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Present</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Bluetooth® Low Energy</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Present</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>05</td>
<td><p>User Interface</p>
<p>Length is included in the hardware configuration profile
value.</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Display</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = 320x240 16-bit RGB</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Touchpad</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = 320x240 integrated with display</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>LEDs</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Four RGB on face</p></li>
<li><p>0x02 = Four monochrome on face</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Audio / Sound</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = Buzzer Transducer 3.6V 2.7kHz 85dB with PMIC output
voltage volume control</p></li>
<li><p>0x02 = Buzzer Transducer 3V 2kHz 80dB with GPIO high-low volume
control</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//null</td>
<td>(1)</td>
<td><p>Buttons</p>
<ul>
<li><p>0x00 = None</p></li>
<li><p>0x01 = One pushbutton and one recessed switch</p></li>
<li><p>0x02 = One pushbutton and one virtual recessed switch</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>88</td>
<td>var</td>
<td><p>MAC Address</p>
<p>For devices with TCP/IP hardware, such as Ethernet or WLAN, this
specifies the device’s MAC address.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>89</td>
<td>var</td>
<td><p>WLAN SoftAP MagTek Password</p>
<p>The length can be a maximum of 63 bytes.</p>
<p>For devices with WLAN, this specifies the device’s SoftAP MagTek
Password. MagTek shall load this password and it shall be printed on the
device’s label. This passwork shall be unique per device. The device
will use this password for its SoftAP until a SoftAP Customer Password
is loaded.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td>8A</td>
<td>4</td>
<td><p>WLAN Firmware Sequence Number</p>
<p>The length is 4 bytes, ms byte first</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
</tbody>
</table>

Table 290 - Response Data for Command 0xF016 - Activate Device Security
(MAGTEK INTERNAL ONLY)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |
| F016 = **Command 0xF016 - Activate Device Security (MAGTEK INTERNAL ONLY)** |  |  |  |  |  |
| No parameters. |  |  |  |  |  |
| End of any wrappers, at minimum including **Response Message** found on page [**24**](#response-message) |  |  |  |  |  |

If the request started successfully, the Request Status in the message
wrapper is **OK, Started / Running, All good / requested operation was
successful**.

Table 291 - Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F F0 16 84 81 EA EE EE A1 24 81 04 02 01 06 05 84 00 85 00 A8 16 81 02 00 00 82 07 45 43 43 53 49 47 4E 86 05 45 43 44 53 41 88 00 A9 00 82 04 B5 03 3D A0 83 08 BE A5 45 81 90 C9 28 0C 84 22 F0 16 81 07 08 1A 0E 16 28 04 0C 85 0B 44 65 76 65 6C 6F 70 6D 65 6E 74 86 08 31 32 33 34 35 36 37 38 9E 81 8B 30 81 88 02 42 00 CD C1 EC 9E D1 30 A6 19 0A 8D 27 F6 65 26 4A 97 3C 79 94 60 BA 57 4D 64 4A 47 FC 72 6B 83 1F 1F DB 05 40 E3 70 16 17 DB 5E A6 93 77 1D 40 F5 DE 0A 9E 01 7A B3 6D DA 8A 73 94 46 1A 68 99 B6 8C 9F 02 42 01 5E 40 4E 4C F9 BF 1B 10 4D BE 7C F6 F9 FE F8 77 1E D0 1A FE AA FC 8B BD 06 BB 8A E5 A5 B3 0E 2E B4 CC DE 60 48 96 2A 84 38 E0 41 45 CD A2 4B F9 36 DA 61 BE 06 A6 CA F2 2F 17 EC DA 0D 59 D0 01 EC |

Table 292 - Response Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 82 0F F0 16 82 04 00 00 00 00 |

#### Command 0xF017 - Establish Ephemeral KBPK

The host uses this command to complete the ***ECDHE-ECDSA Key
Exchange*** protocol, which enables the host and the device to generate
the same TEMP KBPK key to use with **Command 0xEF01 - Load Key Using
TR-31** to load the Master Transport Key (MTK).

The sequence of events is as follows:

1)  The host uses **Command 0xE001 - Get Challenge** to establish a
    secure session with the device.

2)  The host constructs **Command 0xF017 - Establish Ephemeral KBPK**
    per the request table below.

3)  The host constructs **Command 0xEEEE - Send Secured Command to
    Device** using the previously constructed command request as the
    payload, and sends that command request to the device as a **Request
    Message**.

    1)  Because this command is secured using a signature, read
        **Property 2.1.2.2.2.6 Key Type** to determine which fixed key
        to use to generate the signature.

    2)  Build the **Security Parameters Type** portion of the wrapper
        with:

        1)  **Security Operation Type** populated with the following
            values:

            1)  Operation Type = **Command Authorization Using
                Signature**

            2)  Operation Algorithm = **ECDSA (indeterministic)**

            3)  Operation Hash = **SHA-256**

            4)  Operation Curve = **P521**.

4)  The device does the following:

    1)  Validates the secure wrapper around the command, and terminates
        if the signature is invalid.

    2)  Determine if the Master Transport Key (MTK) has already been
        loaded. If it has, the device rejects the command request.

    3)  Generates a pair of keys, saves the Device Private Key for
        calculation.

    4)  Generates and saves 8 bytes of Device Random Token for
        calculation.

    5)  Calculates the TEMP KBPK based on Host Public Key and Host
        Random Token passed in with the command request, and the Device
        Private Key and Device Random Token the device generated.

5)  The device sends a **Response Message** to the host to indicate the
    result. The response message includes Device Random Token and Device
    Public Key.

6)  The host calculates a matching TEMP KBPK as defined in as defined in
    ***NIST SP800-56A***, using the Host Private Key, Host Random Token,
    Device Public Key, and Device Random Token. It can then use this key
    to perform encryption operations on secret data in the Master
    Transport Key (MTK).

7)  The device uses its copy of the matching TEMP KBPK to decrypt the
    secret information encrypted by the host using the same key. On
    successful MTK load, the device erases the TEMP KBPK. It also erases
    the TEMP KBPK if the device is power cycled or reset, and the host
    would need to restart the process with a new TEMP KBPK.

Table 293 - Request Data for Command 0xF017 - Establish Ephemeral KBPK

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of any wrappers, at minimum including
<strong>Request Message</strong> found on page <a
href="#request-message"><strong>23</strong></a></td>
</tr>
<tr>
<td colspan="6">F017 = <strong>Command 0xF017 - Establish Ephemeral
KBPK</strong></td>
</tr>
<tr>
<td>A1</td>
<td>var</td>
<td><p>Security Parameters</p>
<p>This contains a <strong>Security Parameters Type</strong> TLV data
object with only the first parameter populated with:</p>
<p>01 = Key Agreement,</p>
<p>01 = ECDHE,</p>
<p>05 = Curve P521,</p>
<p>01 = SP800-56A</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>var</td>
<td><p>Host Ephemeral Public Key</p>
<p>This parameter is in ASN.1 format. The information of the cipher and
key size are included in the ASN.1 Public Key file (PKCS#8).</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>84</td>
<td>08</td>
<td><p>Host Random Token</p>
<p>This contains an 8 byte random number generated by the host.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
</tbody>
</table>

Table 294 - Response Data for Command 0xF017 - Establish Ephemeral KBPK

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 0%" />
<col style="width: 5%" />
<col style="width: 61%" />
<col style="width: 0%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th colspan="2">Len</th>
<th>Value / Description</th>
<th colspan="2">Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="8">Beginning of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
<tr>
<td colspan="8">F017 = <strong>Command 0xF017 - Establish Ephemeral
KBPK</strong></td>
</tr>
<tr>
<td colspan="2">A1</td>
<td>var</td>
<td colspan="2"><p>Security Parameters</p>
<p>This contains a <strong>Security Parameters Type</strong> TLV data
object populated entirely with 0x00 padding to indicate that all values
are the same as the corresponding values in the Request.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="2">83</td>
<td>var</td>
<td colspan="2"><p>Device Ephemeral Public Key</p>
<p>This parameter is in ASN.1 format. The information of the cipher and
key size are included in the ASN.1 key file.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="2">84</td>
<td>08</td>
<td colspan="2"><p>Device Random Token</p>
<p>This contains an 8 byte random number generated by the
device.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="8">End of any wrappers, at minimum including
<strong>Response Message</strong> found on page <a
href="#response-message"><strong>24</strong></a></td>
</tr>
</tbody>
</table>

Table 295 - Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00</p>
<p>81 04 01 10 F0 17</p>
<p>84 82 01 8C</p>
<p>EE EE // Secure Wrapper</p>
<p>A1 24</p>
<p>81 04 02 01 04 05</p>
<p>84 00 85 00</p>
<p>A8 16</p>
<p>81 02 00 00</p>
<p>82 07 45 43 43 53 49 47 4E</p>
<p>86 05 45 43 44 53 41</p>
<p>88 00 A9 00</p>
<p>82 04 B5 03 3D A0</p>
<p>83 08 ED B0 79 E6 E3 F1 83 AE</p>
<p>84 81 C3 // payload is 0xF017 command body</p>
<p>F0 17</p>
<p>A1 14 // Security parameters</p>
<p>81 04 01 01 05 01</p>
<p>84 00</p>
<p>A8 0A</p>
<p>81 02 00 00</p>
<p>82 00</p>
<p>86 00</p>
<p>88 00</p>
<p>83 81 9E // TL of PKCS8 public key</p>
<p>30 81 9B // V of PKCS8 public key</p>
<p>30 10</p>
<p>06 07 2A 86 48 CE 3D 02 01</p>
<p>06 05 2B 81 04 00 23</p>
<p>03 81 86</p>
<p>00</p>
<p>04</p>
<p>01 64 1C DA 45 C5 56 B3 8B 31 29 8C 94 A1 E7 95</p>
<p>C9 D3 85 C0 4D F3 15 13 D9 91 43 84 58 15 CD 45</p>
<p>6B 67 F6 AC 7C 56 DF F8 0C 65 A7 CF 81 F1 13 2F</p>
<p>AA E5 22 10 78 23 C9 4F 1D CD 24 42 EC 1A 3F A4</p>
<p>75 58</p>
<p>00 97 59 96 9E 01 D0 62 47 B7 EF 5F 0B D0 8B E6</p>
<p>CA 12 F0 3C 13 43 AF 15 21 92 3D 6B FE 47 74 68</p>
<p>38 3F DD 1E 90 2B FD 0F D6 DA 7A A1 E9 A1 98 85</p>
<p>3A DA 93 6D EE 05 61 87 8B 81 BF 6A 78 2F 40 A5</p>
<p>E8 66</p>
<p>84 08 BD E3 77 88 83 0C F6 37 // TLV of 8-byte random # for
TEMP-KBPK</p>
<p>// end of 0xF017 command body</p>
<p>9E 81 8B</p>
<p>30 81 88</p>
<p>02 42</p>
<p>00 C4 13 1D C2 13 7A F6 FD F0 F1 BB BD 14 C2 4A</p>
<p>FE D7 6F BC 80 91 84 26 43 85 40 B6 5D BE 1D 9C</p>
<p>74 90 77 B6 41 62 69 52 04 72 93 C0 9C 59 2A DB</p>
<p>03 31 0F 8A 28 C0 DB 1A B7 1B 51 B3 E6 BD FF 50</p>
<p>77 CA</p>
<p>02 42</p>
<p>01 EE D8 2D 9F A3 D1 98 4E 74 C8 85 11 52 93 15</p>
<p>FF 9D 7D 5A 03 FD 84 B8 B9 09 20 8B 15 98 7A 5E</p>
<p>56 A5 61 71 9A 0A B9 D1 DA 1C 96 1D 0C EF F0 D2</p>
<p>E3 A4 22 84 60 E2 AA 8C AA 2B 8B AE 02 50 D8 B3</p>
<p>CF 84</p></td>
</tr>
</tbody>
</table>

Table 296 - Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA 00</p>
<p>81 04 82 10 F0 17</p>
<p>82 04 00 00 00 00</p>
<p>84 81 B5 // Response Payload</p>
<p>F0 17</p>
<p>A1 06</p>
<p>81 01 00</p>
<p>82 01 00</p>
<p>83 81 9E // TL of PKCS8 public key</p>
<p>30 81 9B // V of PKCS8 public key</p>
<p>30 10</p>
<p>06 07 2A 86 48 CE 3D 02 01</p>
<p>06 05 2B 81 04 00 23</p>
<p>03 81 86</p>
<p>00</p>
<p>04</p>
<p>01 77 CD 91 56 96 34 2B C6 5A 6C EC 5D 74 96 41</p>
<p>B3 F9 2B 12 85 19 90 F8 73 BF FF 3C 10 44 E3 CB</p>
<p>21 4E CA F6 CE FC F8 C8 80 52 44 13 FA B1 97 A1</p>
<p>8C 44 FE 95 A2 0A F3 3D A4 3A 8F 2E 39 41 23 22</p>
<p>B1 AB</p>
<p>01 29 26 4F CC 0E 86 11 16 92 FF BC E1 BF DA FC</p>
<p>21 BA B1 5A C4 DE 7B C1 6F A9 17 F8 4B 1E B2 1F</p>
<p>5F 21 7D 54 00 15 41 C3 21 75 0D 21 DC 95 13 A7</p>
<p>2C 8C 11 77 96 38 87 51 08 7A 1F 63 EC A8 8F C4</p>
<p>AB B3</p>
<p>84 08 4C 4A EC 0B 47 E4 53 EB // TLV of 8-byte random # for
TEMP-KBPK</p></td>
</tr>
</tbody>
</table>

***Note: For additional support, please contact MagTek Support.***

### 

## Notifications

This section provides definitions and practical information about
**Notification Message**s, which follow the format described in section
**3.2.2.3**. To find documentation about a specific notification:

1)  Use the **Notification Source** byte in the message to find the
    Notification Source subsection below. For example, Notification
    Source **0x01 Transaction** leads to subsection **7.1 Notification
    Source 0x01nn - Notifications from Transactions**.

2)  Within that subsection, use the **Notification Source** byte plus
    the **Notification Type** byte in the message to find the
    Notification subsection. For example, Notification Source **0x01
    Transaction** plus Notification Type **0x01 Information Update**
    leads to **Notification 0x0101 - Transaction Information Update**.

3)  Within that subsection, use the four bytes of **Notification Detail
    Code** in the message to look up the notification in the
    **Notification Detail Code** table. For example, **0x07080302**
    leads to a row in **Table 297** that provides practical information
    about what event led to the notification, and how to interpret the
    Notification Payload.

### Notification Source 0x01nn - Notifications from Transactions

#### Notification 0x0101 - Transaction Information Update

This notification reports information about progress and state changes
that occur during a transaction.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 297**, to indicate:

- The **Payment Technology** (PT) involved

- The **Reason** (Rsn) for the notification

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 297 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>PT</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x07 Manual Card Entry
(MCE)</strong> contains transaction notification detail codes involving
manual card entry (MCE Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>07</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td>Manual Card Entry, Card Event, Data Entered, Reserved (MCE
Only)</td>
</tr>
<tr>
<td>07</td>
<td>08</td>
<td>02</td>
<td>02</td>
<td><p>Manual Card Entry, Data Update, ARQC Update (Quick Chip), Data
Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (MCE
Only).</p></td>
</tr>
<tr>
<td>07</td>
<td>08</td>
<td>03</td>
<td>02</td>
<td><p>Manual Card Entry, Data Update, Batch Data, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (MCE
Only).</p></td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x08 Magnetic Stripe
Reader (MSR)</strong> contains transaction notification detail codes
involving magnetic stripe cards (MSR Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td>MSR, Card Event, Swiped, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td>MSR, Card Event, Inserted, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>MSR, Card Event, Removed, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>MSR, Card Event, Detected, Reserved</td>
</tr>
<tr>
<td>08</td>
<td>08</td>
<td>02</td>
<td>02</td>
<td><p>MSR, Data Update, ARQC Update (Quick Chip), Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (MSR
Only).</p></td>
</tr>
<tr>
<td>08</td>
<td>08</td>
<td>03</td>
<td>02</td>
<td><p>MSR, Data Update, Batch Data, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (MSR
Only).</p></td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x10 EMV Contact</strong>
contains transaction notification detail codes involving contact chip
cards (EMV Contact Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x02 = Online PIN Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td>EMV Contact, Card Event, Inserted, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>EMV Contact, Card Event, Removed, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>EMV Contact, Card Event, Detected, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>02</td>
<td>06</td>
<td>01</td>
<td>EMV Contact, Online PIN Event, PIN Entry, PIN Pad Error (EMV Contact
Only)</td>
</tr>
<tr>
<td>10</td>
<td>02</td>
<td>06</td>
<td>02</td>
<td>EMV Contact, Online PIN Event, PIN Entry, PIN Block Encryption Error
(EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>08</td>
<td>02</td>
<td>02</td>
<td><p>EMV Contact, Data Update, ARQC Update (Quick Chip), Data
Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contact
Only).</p></td>
</tr>
<tr>
<td>10</td>
<td>08</td>
<td>03</td>
<td>02</td>
<td><p>EMV Contact, Data Update, Batch Data, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contact
Only).</p></td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x20 EMV
Contactless</strong> contains transaction notification detail codes
involving contactless cards and contactless payment devices.</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x02 = Online PIN Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>00</td>
<td>10</td>
<td>01</td>
<td>00</td>
<td>None, State Update, Transaction Started by Device, Legacy EMV Flow
(Touch Only)</td>
</tr>
<tr>
<td>00</td>
<td>10</td>
<td>01</td>
<td>01</td>
<td>None, State Update, Transaction Started by Device, Quick Chip Flow
(Touch Only)</td>
</tr>
<tr>
<td>00</td>
<td>10</td>
<td>02</td>
<td>00</td>
<td>None, State Update, Transaction Canceled, Reserved (Touch Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>EMV Contactless, Card Event, Removed, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>EMV Contactless, Card Event, Detected, EMV (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>01</td>
<td>EMV Contactless, Card Event, Detected, NFC/MIFARE Ultralight (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>02</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Classic 1K (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>03</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Classic 4K (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>04</td>
<td>EMV Contactless, Card Event, Detected, MIFARE DESFire Light (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>05</td>
<td>EMV Contactless, Card Event, Detected, MIFARE MINI® (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>06</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Plus EV1 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>07</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Plus EV2 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>08</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Plus SE (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>09</td>
<td>EMV Contactless, Card Event, Detected, MIFARE Plus X (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>0A</td>
<td>EMV Contactless, Card Event, Detected, MIFARE DESFire EV1 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>0B</td>
<td>EMV Contactless, Card Event, Detected, MIFARE DESFire EV2 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>0C</td>
<td>EMV Contactless, Card Event, Detected, MIFARE DESFire EV3 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>05</td>
<td>00</td>
<td>EMV Contactless, Card Event, Collision, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>10</td>
<td>02</td>
<td><p>EMV Contactless, Card Event, Apple VAS Error, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 301</strong> – <strong>VAS Error Report</strong>, in the
<strong>Notification Payload</strong> portion of the
<strong>Notification Message</strong> (Apple VAS Only).</p></td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>20</td>
<td>02</td>
<td><p>EMV Contactless, Card Event, Google Smart Tap Error, Data
Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 301</strong> – <strong>VAS</strong> <strong>Error
Report</strong>, in the <strong>Notification Payload</strong> portion of
the <strong>Notification Message</strong> (Google Smart Tap
Only).</p></td>
</tr>
<tr>
<td>20</td>
<td>02</td>
<td>06</td>
<td>01</td>
<td>EMV Contactless, Online PIN Event, PIN Entry, PIN Pad Error (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>02</td>
<td>06</td>
<td>02</td>
<td>EMV Contactless, Online PIN Event, PIN Block Encryption Error (EMV
Contactless Only)</td>
</tr>
<tr>
<td>20</td>
<td>08</td>
<td>02</td>
<td>02</td>
<td><p>EMV Contactless, Data Update, ARQC Update (Quick Chip), Data
Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contactless
Only).</p></td>
</tr>
<tr>
<td>20</td>
<td>08</td>
<td>03</td>
<td>02</td>
<td><p>EMV Contactless, Data Update, Batch data, Data attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contactless
Only)</p></td>
</tr>
<tr>
<td>20</td>
<td>08</td>
<td>04</td>
<td>02</td>
<td><p>EMV Contactless, Data Update, NFC UID data, Data attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contactless
Only)</p></td>
</tr>
<tr>
<td>20</td>
<td>08</td>
<td>07</td>
<td>02</td>
<td><p>EMV Contactless, Data Update, GPO Response, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong> (EMV Contactless
Only)</p></td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x30 Barcode
Reader</strong> contains transaction notification detail codes involving
barcodes (BCR Only).</p>
<ul>
<li><p>Reason 0x01 = Barcode Event</p></li>
</ul></td>
</tr>
<tr>
<td>30</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td><p>(BCR Only)</p>
<p>Barcode Reader, Barcode Event, Read, Reserved</p></td>
</tr>
<tr>
<td>30</td>
<td>08</td>
<td>00</td>
<td>02</td>
<td><p>Barcode Reader, Barcode Update, Type, Data Attached</p>
<ul>
<li><p>Type 0x00 = Unknown</p></li>
<li><p>Type 0x01 = MagTek</p></li>
<li><p>Type 0x02 = EMV</p></li>
</ul>
<p>The barcode reader has successfully read a barcode. In this case, the
device includes barcode data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
If the data is encrypted, the data is in the format described in
<strong>Table 341</strong>. Data that is not encrypted is in the format
described in <strong>Table 342</strong></p>
<p>(BCR Only)</p>
<p>Barcode Reader, Barcode Event, MagTek Blob Type, Data Attached</p>
<p>In this case, the device includes additional data, defined in
<strong>Table 298</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong>.</p></td>
</tr>
</tbody>
</table>

**Table 298 - Notification Payload for Data Update, ARQC Update (Quick
Chip), Data Attached**

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">0101 = DynaPro Format Transaction Data</td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Transaction Data</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/null</td>
<td>(v)</td>
<td><p><strong>EMV ARQC Type</strong> data blob, if the notification is
an ARQC Update (Quick Chip) notification. (MCE Only) If the notification
is for manual card entry, the data blob does not contain Track 3 Data or
MagnePrint Data.</p>
<p><strong>EMV Batch Data Type</strong> data blob, if the notification
is a Batch Data notification. (MCE Only) If the notification is for
manual card entry, the data blob does not contain Track 3 Data or
MagnePrint Data.</p>
<p>Decoded raw barcode data, if the notification is a Barcode event
notification. If the barcode data is Base64 encoded, the device sends
the decoded version in binary format.</p>
<p><strong>NFC UID Type</strong> reports the unique ID from the NFC tag
(EMV Contactless Only)</p>
<p><a href="#gpo-response-type-emv-contactless-only"><strong>GPO
Response Type</strong></a> <strong>reports the card’s GPO Response (EMV
Contactless Only)</strong></p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 299 - Notification Payload for Barcode Reader, Barcode Event, Type
(Encrypted Data Attached)

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1805 = User Interface Operation Complete</td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Notification Payload</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 300</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 300 - Notification Payload for Barcode Reader, Barcode Event,
Type, Data Attached (Unencrypted Data)

| Tag   | Len | Value / Description    | Typ | Req | Default |
|-------|-----|------------------------|-----|-----|---------|
| FC    | var | Barcode Data Container | T   | R   |         |
| /DF74 | var | Barcode Data           | B   | O   |         |

Table 301 – VAS Error Report

<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 5%" />
<col style="width: 57%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FC</td>
<td>var</td>
<td>VAS Error Container</td>
<td>T</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF25</td>
<td>var</td>
<td>Device Serial Number (IFD Serial Number)</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DF75</td>
<td>var</td>
<td><p>VAS Error Report</p>
<p>Byte 1 = SW1 returned by the Apple or Android device</p>
<p>Byte 2 = SW2 returned by the Apple or Android device</p>
<p>Byte 3 = Slot Number</p>
<p>Byte 4 = Where in the VAS command sequence the error occurred.</p>
<ul>
<li><p>0x00 = Select OSE Error</p></li>
<li><p>0x01 = Get VAS Data Error (Apple only)</p></li>
<li><p>0x02 = Select Smart Tap Error (Google only)</p></li>
<li><p>0x03 = Negotiate Secure Session Error (Google only)</p></li>
<li><p>0x04 = Get Select Smart Tap Error (Google only)</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
</tbody>
</table>

Table 302 - Notification Example

| Example (Hex) |
|----|
| AA 00 81 04 83 00 01 01 82 04 10 08 02 02 84 82 01 F8 01 01 84 82 01 F2 01 E9 F9 82 01 E5 DF DF 54 0A 00 00 00 00 00 00 00 00 00 00 DF DF 55 01 82 DF DF 25 0F 42 34 44 42 38 31 37 31 31 31 39 31 39 41 41 FA 82 01 BB 70 82 01 B7 DF DF 53 01 00 5F 20 12 47 55 53 54 49 4E 2F 53 54 45 50 48 41 4E 49 45 20 4D 5F 30 02 02 01 DF DF 4D 25 3B 35 33 32 32 30 30 30 30 36 30 30 30 31 36 37 34 3D 31 38 30 39 32 30 31 30 30 30 30 30 30 30 30 30 30 30 3F DF DF 52 01 05 F8 82 01 66 DF DF 59 82 01 48 36 69 98 57 4C 81 08 66 28 B6 1F DD 69 B1 C3 43 F7 BA 98 B2 5A 92 53 5F DA 63 6D DA 44 95 F1 15 2D 01 07 9A 4C EB 28 0B 30 5C 21 B2 39 ED E7 EE B6 1A 79 43 56 2E 26 1E C9 87 86 19 68 FA EB 4A 2B BD F5 5D 54 6F C4 67 97 FF 42 2C D6 CF 36 03 48 58 A4 23 9B 51 03 5C 32 0B DC 5E 4E E5 95 1B B5 C5 18 E7 33 0B D2 FE 8D E8 5C 47 4D 3C 16 79 42 48 1D CD 83 D5 58 64 48 23 17 F3 29 A7 F1 F1 75 F4 B9 C6 45 F3 02 28 1C 90 C7 83 B9 49 AF 56 BD 76 73 E7 45 7D 25 C5 77 3F C7 9A 1B ED 52 0A 05 54 15 B7 9A 2A 59 C1 67 6D E2 8C 02 8B 97 64 96 5D 4C F8 31 A2 20 75 12 8D 99 C1 A2 DF AB 55 0A 62 24 79 CF A8 51 3D AE 84 91 A5 80 19 9F BC 75 B0 F9 56 5E BA 57 A3 B1 61 AA 84 43 F0 D8 E6 44 C1 FA 51 0E 0A B0 F7 F2 61 57 5B 86 7E AB DC 49 00 87 A0 3B 69 5F C1 45 C4 10 9A A8 5F B6 30 59 2C 25 FA 15 A5 44 83 24 96 3D 5A 03 50 36 02 EC 6B 15 7C 8D CC 66 BF B7 F4 CF 4C 6D 67 75 87 B9 4E D4 08 76 25 F8 B8 EF BF A8 A0 72 F9 81 AB FF 49 84 E7 BC 8F C5 DD A0 86 B2 74 DD 59 8A B2 83 5D DD CC 0C 30 01 96 DF DF 56 0A 90 10 01 0B 4D B8 17 00 00 03 DF DF 57 01 80 DF DF 58 01 05 00 00 00 00 00 00 00 |

#### Notification 0x0103 - Transaction Host Action Request (MAGTEK INTERNAL ONLY FOR NOW)

This notification requests the host take action to support a transaction
in progress.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 303**, to indicate:

- The **Payment Technology**, which is always set to 0x00.

- The **Reason** (Rsn) for the notification

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 303 - Notification Detail Codes

| PT | Rsn | Det | Ext | Meaning |
|----|----|----|----|----|
| Payment Technology **0x00 All** contains all transaction host request detail codes. |  |  |  |  |
|  |  |  |  |  |

**Notification Payload** described in section **3.2.2.3 Notification
Message** is only included in some cases, described in **Table 297**.
When a Notification Payload is included, it follows the structure shown
in **Table 304**.

Table 304 - Notification Payload for Transaction Host Action Request

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 0103 = **Notification 0x0103 - Transaction Host Action Request (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
|  |  |  |  |  |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 305 - Notification Example for Display Message Request
Notifications (No Display Only)

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Display Message Request to show PROCESSING</p>
<p>AA 00</p>
<p>81 04 83 00 01 03 // Notification source/type = 0x0103</p>
<p>82 04</p>
<p>00</p>
<p>01 // 0x01=Display Message Request</p>
<p>01 // 0x01=Data Attached</p>
<p>00</p>
<p>84 82 00 12 // Payload, 18 bytes (using two-byte Length)</p>
<p>81 01 01 // Clear Screen is enabled</p>
<p>82 82 00 0B // Messages, 11 bytes (using two-byte Length)</p>
<p>50 52 4F 43 45 53 53 49 4E 47 00 // “PROCESSING” (line terminator is
0x00)</p></td>
</tr>
</tbody>
</table>

Table 306 - Notification Example for Cardholder Selection Request (No
Display Only)

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Cardholder Selection Request to show:</p>
<p>APPLICATION SELECT</p>
<p>1 - VISA CREDIT</p>
<p>2 - VISA DEBIT</p>
<p>3 - VISA ELECTRON</p>
<p>AA 00</p>
<p>81 04 83 00 01 03 // Notification source/type = 0x0103</p>
<p>82 04</p>
<p>00</p>
<p>02 // 0x02=Cardholder Selection Request</p>
<p>00</p>
<p>00 // Timeout, TT=0x00</p>
<p>84 82 00 4B // Payload, 75 bytes (using two-byte Length)</p>
<p>81 01 01 // Clear Display</p>
<p>82 82 00 44 // Messages, 68 bytes (using two-byte Length)</p>
<p>41 50 50 4C 49 43 41 54 49 4F 4E 20 53 45 4C 45 43 54 0A</p>
<p>31 20 2D 20 56 49 53 41 20 43 52 45 44 49 54 0A</p>
<p>32 20 2D 20 56 49 53 41 20 44 45 42 49 54 0A</p>
<p>33 20 2D 20 56 49 53 41 20 45 4C 45 43 54 52 4F 4E 00</p></td>
</tr>
</tbody>
</table>

Table 307 - Notification Example for Online PIN Request (MAGTEK INTERNAL
ONLY FOR NOW, No Display Only)

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>(MAGTEK INTERNAL ONLY FOR NOW)</p>
<p>Online PIN Request to show:</p>
<p>VISA DEBIT</p>
<p>100.00</p>
<p>AA 00 81 04 83 00 01 05 82 04 00 03 00 00 84 16 9F 12 0A 56 49 53 41
20 44 45 42 49 54 9F 02 06 00 00 00 01 00 00</p></td>
</tr>
</tbody>
</table>

#### Notification 0x0104 - Transaction Callback (MAGTEK INTERNAL ONLY FOR NOW)

This notification fulfills callback subscriptions the host has
requested.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 308**, to indicate:

- The …

- The …

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 308 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>??</th>
<th>??</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>xxx <strong>0x00 None</strong> contains transaction
notification detail codes xxx</p>
<ul>
<li><p>xxx 0x01 = xxx</p></li>
</ul></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="5"><p>xxx <strong>0x00 None</strong> contains transaction
notification detail codes xxx</p>
<ul>
<li><p>xxx 0x01 = xxx</p></li>
</ul></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="5"><p>xxx <strong>0x00 None</strong> contains transaction
notification detail codes xxx</p>
<ul>
<li><p>xxx 0x01 = xxx</p></li>
</ul></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

**Notification Payload** described in section **3.2.2.3 Notification
Message** is only included in some cases, described in **Table 297**.
When a Notification Payload is included, it follows the structure shown
in **Table 309**.

Table 309 - Notification Payload

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 0103 = **Notification 0x0104 - Transaction Callback (MAGTEK INTERNAL ONLY FOR NOW)** |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 310 - Notification Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 83 00 01 05 82 04 20 00 00 00 |

#### Notification 0x0105 - Transaction Operation Complete

This notification reports the final result of a transaction the host
initiated using **Command 0x1001 - Start Transaction**.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 311**, to indicate:

- The **Payment Technology** (PT) involved

- The **Reason** (Rsn) for the notification

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 311 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 1%" />
<col style="width: 4%" />
<col style="width: 1%" />
<col style="width: 6%" />
<col style="width: 4%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr>
<th colspan="2">PT</th>
<th colspan="2">Res</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="7"><p>Payment Technology <strong>0x00 None</strong>
contains transaction notification detail codes that are not specific to
a particular payment technology.</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Timeout/No Cards Detected</p></li>
<li><p>0x02 = Kernel Outcome</p></li>
<li><p>0x03 = Transaction Terminated</p></li>
<li><p>0x04 = Transaction Completed</p></li>
</ul></td>
</tr>
<tr>
<td>00</td>
<td colspan="2">01</td>
<td colspan="2">00</td>
<td>00</td>
<td>None, Timeout/No Cards Detected, Transaction Timed Out,
Reserved</td>
</tr>
<tr>
<td>00</td>
<td colspan="2">03</td>
<td colspan="2">01</td>
<td>00</td>
<td>None, Transaction Terminated, Transaction Canceled by Host,
Reserved</td>
</tr>
<tr>
<td>00</td>
<td colspan="2">03</td>
<td colspan="2">02</td>
<td>00</td>
<td>None, Transaction Terminated, Transaction Canceled by User, Reserved
(Display Only)</td>
</tr>
<tr>
<td colspan="7"><p>Payment Technology <strong>0x07 Manual Card
Entry</strong> contains transaction notification detail codes involving
manual card entry (MCE Only).</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Timeout/No Cards Detected</p></li>
<li><p>0x02 = Kernel Outcome</p></li>
<li><p>0x03 = Transaction Terminated</p></li>
<li><p>0x04 = Transaction Completed</p></li>
</ul></td>
</tr>
<tr>
<td>07</td>
<td colspan="2">03</td>
<td colspan="2">05</td>
<td>00</td>
<td>MCE, Transaction Terminated, Transaction Canceled due to entry
error, Reserved (MCE Only)</td>
</tr>
<tr>
<td>07</td>
<td colspan="2">04</td>
<td colspan="2">00</td>
<td>00</td>
<td>MCE, Transaction Completed, Reserved, Reserved (MCE Only)</td>
</tr>
<tr>
<td colspan="7"><p>Payment Technology <strong>0x08 Magnetic Stripe
Reader (MSR)</strong> contains transaction notification detail codes
involving magnetic stripe cards (MSR Only).</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Timeout/No Cards Detected</p></li>
<li><p>0x02 = Kernel Outcome</p></li>
<li><p>0x03 = Transaction Terminated</p></li>
<li><p>0x04 = Transaction Completed</p></li>
</ul></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">03</td>
<td>05</td>
<td>00</td>
<td>MSR, Transaction Terminated, Transaction Canceled Due to Card Read
Error, Reserved (MSR Only)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>06</td>
<td>00</td>
<td>MSR, Outcome, Approved, Reserved (MSR Only)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>06</td>
<td>01</td>
<td><p>MSR, Outcome, Approved, Signature Capture Requested (MSR
Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>06</td>
<td>04</td>
<td>MSR, Outcome, Approved, Signature Capture Available (MSR Only)
(MAGTEK INTERNAL ONLY FOR NOW, not yet implemented)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>06</td>
<td>05</td>
<td><p>MSR, Outcome, Approved, Signature Capture Success (MSR Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>06</td>
<td>06</td>
<td><p>MSR, Outcome, Approved, Signature Capture Fail (MSR Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>07</td>
<td>00</td>
<td>MSR, Outcome, Quick Chip Deferred, Reserved (MSR Only)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>07</td>
<td>01</td>
<td><p>MSR, Outcome, Quick Chip Deferred, Signature Capture Requested
(MSR Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>07</td>
<td>04</td>
<td>MSR, Outcome, Quick Chip Deferred, Signature Capture Available (MSR
Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet implemented)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>07</td>
<td>05</td>
<td><p>MSR, Outcome, Quick Chip Deferred, Signature Capture Success (MSR
Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>07</td>
<td>06</td>
<td><p>MSR, Outcome, Quick Chip Deferred, Signature Capture Fail (MSR
Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>80</td>
<td>00</td>
<td>MSR, Outcome, Declined, Reserved (MSR Only)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>80</td>
<td>01</td>
<td><p>MSR, Outcome, Declined, Signature Capture Requested (MSR
Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>80</td>
<td>04</td>
<td>MSR, Outcome, Declined, Signature Capture Available (MSR Only)
(MAGTEK INTERNAL ONLY FOR NOW, not yet implemented)</td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>80</td>
<td>05</td>
<td><p>MSR, Outcome, Declined, Signature Capture Success (MSR Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">08</td>
<td colspan="2">02</td>
<td>80</td>
<td>06</td>
<td><p>MSR, Outcome, Declined, Signature Capture Fail (MSR Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="7"><p>Payment Technology <strong>0x10 EMV Contact</strong>
(“ICC”) contains transaction notification detail codes involving contact
chip cards (EMV Contact Only).</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Timeout, no cards detected</p></li>
<li><p>0x02 = Kernel Outcome</p></li>
<li><p>0x03 = Transaction Terminated</p></li>
<li><p>0x04 = Transaction Completed</p></li>
</ul></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>08</td>
<td>03</td>
<td>ICC, Kernel Outcome, Failed, MSR Fallback (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>09</td>
<td>03</td>
<td>ICC, Kernel Outcome, Empty Candidate List, MSR Fallback (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>00</td>
<td>00</td>
<td>ICC, Kernel Outcome, None, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>00</td>
<td>02</td>
<td>ICC, Kernel Outcome, None, Technical Fallback (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0F</td>
<td>02</td>
<td>ICC, Kernel Outcome, End Application, Technical Fallback (EMV
Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>01</td>
<td>00</td>
<td>ICC, Kernel Outcome, Try Another Interface, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>02</td>
<td>00</td>
<td>ICC, Kernel Outcome, Offline Approved, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>02</td>
<td>01</td>
<td><p>ICC, Kernel Outcome, Offline Approved, Signature Capture
Requested (EMV Contact Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>02</td>
<td>04</td>
<td>ICC, Kernel Outcome, Offline Approved, Signature Capture Available
(EMV Contact Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>02</td>
<td>05</td>
<td><p>ICC, Kernel Outcome, Offline Approved, Signature Capture Success
(EMV Contact Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>02</td>
<td>06</td>
<td><p>ICC, Kernel Outcome, Offline Approved, Signature Capture Fail
(EMV Contact Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>03</td>
<td>00</td>
<td>ICC, Kernel Outcome, Offline Declined, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>04</td>
<td>00</td>
<td>ICC, Kernel Outcome, Offline Failed, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>05</td>
<td>00</td>
<td>ICC, Kernel Outcome, Offline Not Accepted, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>06</td>
<td>00</td>
<td>ICC, Kernel Outcome, Approved, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>06</td>
<td>01</td>
<td><p>ICC, Kernel Outcome, Approved, Signature Capture Requested (EMV
Contact Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>06</td>
<td>04</td>
<td>ICC, Kernel Outcome, Approved, Signature Capture Available (EMV
Contact Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet implemented)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>06</td>
<td>05</td>
<td><p>ICC, Kernel Outcome, Approved, Signature Capture Success (EMV
Contact Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>06</td>
<td>06</td>
<td><p>ICC, Kernel Outcome, Approved, Signature Capture Fail (EMV
Contact Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>07</td>
<td>00</td>
<td>ICC, Kernel Outcome, Quick Chip Deferred, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>07</td>
<td>01</td>
<td><p>ICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Requested (EMV Contact Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>07</td>
<td>04</td>
<td>ICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Available (EMV Contact Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>07</td>
<td>05</td>
<td><p>ICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Success (EMV Contact Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>07</td>
<td>06</td>
<td><p>ICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Failed (EMV Contact Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>08</td>
<td>00</td>
<td>ICC, Kernel Outcome, Failed, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>09</td>
<td>00</td>
<td>ICC, Kernel Outcome, Not Accepted, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0A</td>
<td>00</td>
<td>ICC, Kernel Outcome, Transaction Canceled, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0B</td>
<td>00</td>
<td>ICC, Kernel Outcome, Select Next Not Accepted, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0C</td>
<td>00</td>
<td>ICC, Kernel Outcome, Select Next Retry, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0D</td>
<td>00</td>
<td>ICC, Kernel Outcome, Try Again, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0E</td>
<td>00</td>
<td>ICC, Kernel Outcome, Online Request, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>0F</td>
<td>00</td>
<td>ICC, Kernel Outcome, End Application, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>10</td>
<td>00</td>
<td>ICC, Kernel Outcome, Not EMV Card Pooled, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>80</td>
<td>00</td>
<td>ICC, Kernel Outcome, Declined, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>80</td>
<td>01</td>
<td><p>ICC, Kernel Outcome, Declined, Signature Capture Requested (EMV
Contact Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>80</td>
<td>04</td>
<td>ICC, Kernel Outcome, Declined, Signature Capture Available (EMV
Contact Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet implemented)</td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>80</td>
<td>05</td>
<td><p>ICC, Kernel Outcome, Declined, Signature Capture Success (EMV
Contact Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">02</td>
<td>80</td>
<td>06</td>
<td><p>ICC, Kernel Outcome, Declined, Signature Capture Failed (EMV
Contact Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">10</td>
<td colspan="2">04</td>
<td>07</td>
<td>00</td>
<td>ICC, Transaction Completed, Declined, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td colspan="7"><p>Payment Technology <strong>0x20 EMV
Contactless</strong> (“PICC”) contains transaction notification detail
codes involving contactless cards and contactless payment devices (EMV
Contactless Only).</p>
<ul>
<li><p>0x00 = Reserved</p></li>
<li><p>0x01 = Timeout, no cards detected</p></li>
<li><p>0x02 = Kernel Outcome</p></li>
<li><p>0x03 = Transaction Terminated</p></li>
<li><p>0x04 = Transaction Completed</p></li>
</ul></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>00</td>
<td>00</td>
<td>PICC, Kernel Outcome, None, Reserved (EMV Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>01</td>
<td>00</td>
<td>PICC, Kernel Outcome, Try Another Interface, Reserved (EMV
Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>02</td>
<td>00</td>
<td>PICC, Kernel Outcome, Offline Approved, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>02</td>
<td>01</td>
<td><p>PICC, Kernel Outcome, Offline Approved, Signature Capture
Requested (EMV Contactless Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>02</td>
<td>04</td>
<td>PICC, Kernel Outcome, Offline Approved, Signature Capture Available
(EMV Contactless Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>02</td>
<td>05</td>
<td><p>PICC, Kernel Outcome, Offline Approved, Signature Capture Success
(EMV Contactless Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>02</td>
<td>06</td>
<td><p>PICC, Kernel Outcome, Offline Approved, Signature Capture Fail
(EMV Contactless Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>03</td>
<td>00</td>
<td>PICC, Kernel Outcome, Offline Declined, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>04</td>
<td>00</td>
<td>PICC, Kernel Outcome, Offline Failed, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>05</td>
<td>00</td>
<td>PICC, Kernel Outcome, Offline Not Accepted, Reserved (EMV
Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>06</td>
<td>00</td>
<td>PICC, Kernel Outcome, Approved, Reserved (EMV Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>06</td>
<td>01</td>
<td><p>PICC, Kernel Outcome, Approved, Signature Capture Requested (EMV
Contactless Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>06</td>
<td>04</td>
<td>PICC, Kernel Outcome, Approved, Signature Capture Available (EMV
Contactless Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>06</td>
<td>05</td>
<td><p>PICC, Kernel Outcome, Approved, Signature Capture Success (EMV
Contactless Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>06</td>
<td>06</td>
<td><p>PICC, Kernel Outcome, Approved, Signature Capture Fail (EMV
Contactless Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>07</td>
<td>00</td>
<td>PICC, Kernel Outcome, Quick Chip Deferred, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>07</td>
<td>01</td>
<td><p>PICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Requested (EMV Contactless Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>07</td>
<td>04</td>
<td>PICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Available (EMV Contactless Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>07</td>
<td>05</td>
<td><p>PICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Success (EMV Contactless Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>07</td>
<td>06</td>
<td><p>PICC, Kernel Outcome, Quick Chip Deferred, Signature Capture
Failed (EMV Contactless Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>08</td>
<td>00</td>
<td>PICC, Kernel Outcome, Failed, Reserved (EMV Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>09</td>
<td>00</td>
<td>PICC, Kernel Outcome, Not Accepted, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0A</td>
<td>00</td>
<td>PICC, Kernel Outcome, Transaction Canceled, Reserved (EMV
Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0B</td>
<td>00</td>
<td>PICC, Kernel Outcome, Select Next Not Accepted, Reserved (EMV
Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0C</td>
<td>00</td>
<td>PICC, Kernel Outcome, Select Next Retry, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0D</td>
<td>00</td>
<td>PICC, Kernel Outcome, Try Again, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0E</td>
<td>00</td>
<td>PICC, Kernel Outcome, Online Request, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>0F</td>
<td>00</td>
<td>PICC, Kernel Outcome, End Application, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>10</td>
<td>00</td>
<td>PICC, Kernel Outcome, Not EMV Card Pooled, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>80</td>
<td>00</td>
<td>PICC, Kernel Outcome, Declined, Reserved (EMV Contactless Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>80</td>
<td>01</td>
<td><p>PICC, Kernel Outcome, Declined, Signature Capture Requested (EMV
Contactless Only)</p>
<p>If the device includes a touchscreen, the host should respond by
sending <strong>Command 0x1801 - Request Cardholder Signature (Touch
Only)</strong>.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>80</td>
<td>04</td>
<td>PICC, Kernel Outcome, Declined, Signature Capture Available (EMV
Contactless Only) (MAGTEK INTERNAL ONLY FOR NOW, not yet
implemented)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>80</td>
<td>05</td>
<td><p>PICC, Kernel Outcome, Declined, Signature Capture Success (EMV
Contactless Only)</p>
<p>The device includes signature data inside <strong>EMV Batch Data
Type</strong> tag DFDF3E.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">02</td>
<td>80</td>
<td>06</td>
<td><p>PICC, Kernel Outcome, Declined, Signature Capture Failed (EMV
Contactless Only)</p>
<p>The host may send <strong>Command 0x1801 - Request Cardholder
Signature (Touch Only)</strong> to retry capturing a signature.</p></td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">04</td>
<td>07</td>
<td>00</td>
<td>PICC, Transaction Completed, Declined, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td colspan="2">20</td>
<td colspan="2">05</td>
<td>00</td>
<td>00</td>
<td>PICC, NFC TAG, Tag Removed, Reserved (EMV Contactless Only)</td>
</tr>
</tbody>
</table>

Table 312 - Notification Example

| Example (Hex)                             |
|-------------------------------------------|
| AA 00 81 04 83 00 01 05 82 04 20 00 00 00 |

### Notification Source 0x02nn - Notifications from Banking Functions (Banking Functions Only)

#### Notification 0x0201 - Banking Functions Information Update

This notification reports information about progress and state changes
involving the device’s Banking Functions modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 313 - Notification Detail Codes**, to indicate:

- The **Payment Technology** (PT) involved

- The **Reason** (Rsn) for the notification

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 313 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>PT</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x07 Manual Card Entry
(MCE)</strong> contains transaction notification detail codes involving
manual card entry (MCE Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>07</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td>Manual Card Entry, Card Event, Data Entered, Reserved</td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x08 Magnetic Stripe
Reader (MSR)</strong> contains transaction notification detail codes
involving magnetic stripe cards (MSR Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td>MSR, Card Event, Swiped, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td>MSR, Card Event, Inserted, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>MSR, Card Event, Removed, Reserved (MSR Only)</td>
</tr>
<tr>
<td>08</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>MSR, Card Event, Detected, Reserved (MSR Only)</td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x10 EMV Contact</strong>
contains transaction notification detail codes involving contact chip
cards (EMV Contact Only).</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td>EMV Contact, Card Event, Inserted, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>EMV Contact, Card Event, Removed, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td>10</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>EMV Contact, Card Event, Detected, Reserved (EMV Contact Only)</td>
</tr>
<tr>
<td colspan="5"><p>Payment Technology <strong>0x20 EMV
Contactless</strong> contains transaction notification detail codes
involving contactless cards and contactless payment devices. (EMV
Contactless Only)</p>
<ul>
<li><p>Reason 0x01 = Card Event</p></li>
<li><p>Reason 0x08 = Data Update</p></li>
<li><p>Reason 0x10 = State Update</p></li>
</ul></td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>EMV Contactless, Card Event, Removed, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>EMV Contactless, Card Event, Detected, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td>20</td>
<td>01</td>
<td>05</td>
<td>00</td>
<td>EMV Contactless, Card Event, Collision, Reserved (EMV Contactless
Only)</td>
</tr>
</tbody>
</table>

#### Notification 0x0203 - Banking Functions Host Action Request(MAGTEK INTERNAL ONLY FOR NOW)

This notification requests that the host take action during operations
involving the device’s Banking Functions modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 334**, to indicate:

- The **User Interface Module** (UI) involved

- The **Reason** (Rsn) for the notification (UI Event)

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

#### Notification 0x0205 - Banking Functions Operation Complete

This notification reports information about progress and state changes
that occur during interaction with the Banking Functions modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 339**, to indicate:

- The **User Interface Module** (UI) involved

- The **Reason** (Rsn) for the notification (UI Event)

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 314 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>UI</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>Module <strong>0x01 Touchscreen</strong> contains UI
notification detail codes that are specific to the touchscreen module
(Touch Only)</p>
<ul>
<li><p>Reason 0x01 = Signature Capture</p></li>
<li><p>Reason 0x02 = PIN Entry (Banking Functions Only)</p></li>
</ul></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>01</td>
<td>01</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Success, Data Attached</p>
<p>In this case, the device includes additional data defined in
<strong>Table 315</strong>, or in <strong>Table 316</strong> if the
device is including account data with PIN data.</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>01</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, Timeout</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>02</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, Hardware Not
Available</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>03</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, Canceled</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>04</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, Error</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>05</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, PIN Verify Failed</p></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>06</td>
<td><p>(Banking Functions Only)</p>
<p>Touchscreen, PIN Entry, Operation Failed, Account Data Capture
Failed</p></td>
</tr>
</tbody>
</table>

Table 315 - Notification Payload for Touchscreen, PIN Entry, Success,
Data Attached without Account Data (Banking Functions Only)

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">0205 = User Interface Operation Complete</td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Notification Payload</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/F5</td>
<td>var</td>
<td>Container for Encrypted PIN Data</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DF71</td>
<td>01</td>
<td><p>PIN Block Format</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = ISO Format 1</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//99</td>
<td>var</td>
<td><p>Encrypted PIN Block</p>
<p>ISO Formats 0, 1, and 3 are 8 bytes</p>
<p>ISO Format 4 is 16 bytes</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DFDF41</td>
<td>var</td>
<td>PIN Key Serial Number (KSN)</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DFDF42</td>
<td>01</td>
<td><p>PIN Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 316 - Notification Payload for Touchscreen, PIN Entry, Success,
Data Attached with Account Data (Banking Functions Only)

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">0205 = User Interface Operation Complete</td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Notification Payload</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 317</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF56</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF57</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/F5</td>
<td>var</td>
<td>Container for Encrypted PIN Data</td>
<td>TC</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DF71</td>
<td>01</td>
<td><p>PIN Block Format</p>
<ul>
<li><p>0x00 = ISO Format 0</p></li>
<li><p>0x01 = ISO Format 1</p></li>
<li><p>0x03 = ISO Format 3</p></li>
<li><p>0x04 = ISO Format 4</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//99</td>
<td>var</td>
<td><p>Encrypted PIN Block</p>
<p>ISO Formats 0, 1, and 3 are 8 bytes</p>
<p>ISO Format 4 is 16 bytes</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DFDF41</td>
<td>var</td>
<td>PIN KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>//DFDF42</td>
<td>01</td>
<td><p>PIN Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 317 - Account Data DFDF59 Decrypted Contents (Banking Functions
Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| FC | var | Decrypted Data Container | T | R |  |
| /DF42 | var | MSR Track 2 Clear Text Data | B | O |  |
| /57 | var | Track 2 Equivalent Data | B | O |  |
| /5A | var | Primary Account Number | B | O |  |
| Padding to force DFDF59 plus padding to be a multiple of 8 bytes |  |  |  |  |  |

### Notification Source 0x09nn - Notifications from Firmware Updates

#### Notification 0x0905 - Firmware Update Successful

This notification reports the successful completion of firmware update
operations the host initiated using **Command 0xD801 - Load Firmware
File** and **Command 0xD901 - Commit Firmware from File**. The
**Notification Detail** for those two commands are shown in the table
below.

Table 318 - Notification Detail Codes

| B1  | B2  | B3  | B4  | Meaning                                     |
|-----|-----|-----|-----|---------------------------------------------|
| 08  | 01  | 0A  | 03  | Commit Firmware from File Complete, Success |
| 08  | 01  | 09  | 03  | Load Firmware File Complete, Success        |

#### Notification 0x0906 - Firmware Update Failed

This notification reports the failure of a Firmware Update command the
host initiated using **Command 0xD801 - Load Firmware File** and
**Command 0xD901 - Commit Firmware from File**. The **Notification
Detail** for those two commands are shown in the table below.

Table 319 - Notification Detail Codes

| B1  | B2  | B3  | B4  | Meaning                                    |
|-----|-----|-----|-----|--------------------------------------------|
| 08  | 01  | 0A  | 04  | Commit Firmware from File Complete, Failed |
| 08  | 01  | 09  | 04  | Load Firmware File Complete, Failed        |

####  Notification 0x0907 - Firmware is Up to Date

This notification reports Firmware is up to date for host initiated
**Command 0xD801 - Load Firmware File**. The **Notification Detail** for
this command is shown in the table below.

Table 7.3‑3 - Notification Detail Codes

| B1  | B2  | B3  | B4  | Meaning                               |
|-----|-----|-----|-----|---------------------------------------|
| 08  | 01  | 09  | 03  | Load Firmware File Complete, Complete |

### Notification Source 0x10nn - Notifications from Device

#### Notification 0x1001 - Device Information Update

This notification reports information about general state changes that
occur within the device, outside the context of specific operations like
transactions (**Notification Source 0x01nn - Notifications from
Transactions**), requests the host receives from the firmware’s
integrated display interface (**Notification Source 0x18nn -
Notifications from User Interface**), and so on.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 320** **below**, to indicate:

- The **Category** (Cat) of notification (for example, the subsystem the
  notification is originating from)

- The **Reason** (Rsn) for the notification (Device Event)

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

The other optional message parameters in the **Notification Message**
depend on which combination of four bytes is included in **Notification
Detail**, and are described in **Table 320**.

Table 320 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr>
<th>Cat</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>Category <strong>0x00 Power / Reset</strong> contains
notification detail codes involving the device’s power and reset
functionality. Each possible notification has a unique
<strong>Reason</strong> value:</p>
<ul>
<li><p>Reason 0x00 = Device Reset Occurred</p></li>
<li><p>Reason 0x01 = Device Reset Will Occur Soon</p></li>
<li><p>Reason 0x02 = Low Battery</p></li>
<li><p>Reason 0x03 = Key Management</p></li>
<li><p>Reason 0x04 = Temperature</p></li>
</ul></td>
</tr>
<tr>
<td>00</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td><p>Power/Reset, Device Reset Occurred, Reserved, Reserved</p>
<p>The device sends and repeats this notification after the device power
cycles or resets, depending on the setting in <strong>Property
1.2.7.1.1.1 Device Reset Occurred Notification Control</strong>. If it
is set to repeat, it does so until the host acknowledges it using
<strong>Property 1.2.7.1.1.2 Device Reset Occurred Notification
Acknowledged</strong>.</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
as shown in <strong>Table 334</strong>.</p></td>
</tr>
<tr>
<td>00</td>
<td>01</td>
<td>00</td>
<td>00</td>
<td><p>Power/Reset, Device Reset Will Occur Soon, Reserved, Reserved</p>
<p>The device sends this notification before it automatically resets to
conform to PCI’s 24 hour Self-Test requirement, and behaves according to
the setting in <a
href="#property-1.2.7.1.1.3-device-reset-will-occur-soon-notification-control"><strong>Property
1.2.7.1.1.3 Device Reset Will Occur Soon Notification
Control</strong></a>.</p>
<p>See <strong>24 Hour Automatic Reset PCI Requirement</strong> for more
information.</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
which directly contains one byte indicating the number of minutes (0x01
to 0xFF) until the device will perform the reset.</p></td>
</tr>
<tr>
<td>00</td>
<td>02</td>
<td>00</td>
<td>00</td>
<td><p>Power/Reset, Battery, Low Battery Warning, Percent</p>
<p>The device sends this notification when the battery charge reaches 15
percent. If a device is powered on with a charge that is already 15
percent or below, this notification is sent shortly after power up and
includes the current battery charge percentage. Percent indicates the
percent of battery charge remaining.</p></td>
</tr>
<tr>
<td>00</td>
<td>02</td>
<td>01</td>
<td>00</td>
<td><p>Power/Reset, Battery, Power Down Imminent, Reserved</p>
<p>The device sends this notification one minute before it automatically
powers down the device because the battery charge has reached 0
percent.</p></td>
</tr>
<tr>
<td>00</td>
<td>02</td>
<td>02</td>
<td>00</td>
<td><p>Power/Reset, Battery, Battery Charge Complete, Reserved</p>
<p>The device sends this notification when the battery charger detects
that the battery is fully charged.</p></td>
</tr>
<tr>
<td>00</td>
<td>03</td>
<td>00</td>
<td>00</td>
<td><p>Power/Reset, Device reset per Command 0x1F01.</p>
<p>The device sends this notification to notify the host when Device
executes Reset Command 0x1F01.</p></td>
</tr>
<tr>
<td colspan="5"><p>Category <strong>0x01 User Event</strong> contains
notification detail codes involving events triggered by user actions.
Each possible notification has a unique <strong>Reason</strong>
value:</p>
<ul>
<li><p>Reason 0x00 = Contactless Card Presented (EMV Contactless
Only)</p></li>
<li><p>Reason 0x01 = Contactless Card Removed (EMV Contactless
Only)</p></li>
<li><p>Reason 0x02 = Card Seated in Slot (EMV Contact Only)</p></li>
<li><p>Reason 0x03 = Card Unseated from Slot (EMV Contact Only)</p></li>
<li><p>Reason 0x04 = Card Swiped (MSR Only)</p></li>
<li><p>Reason 0x05 = Touch Sensor Press On Display (Touch Only)</p></li>
<li><p>Reason 0x06 = Touch Sensor Release On Display (Touch
Only)</p></li>
<li><p>Reason 0x07 = Barcode Read (BCR Only)</p></li>
</ul>
<p>The host can use <strong>Property 1.2.7.1.2.1 User Event Notification
Controls</strong> Enable to enable these notification reasons
individually.</p>
<p>The host may choose to use these notifications to determine when to
send additional commands. For example, it may send <strong>Command
0x1001 - Start Transaction</strong>. The host should do this as quickly
as possible to minimize the response time between when the cardholder
presents a card and when the device provides feedback via a visible or
audible state change or attempts to read a chip card. Note there are
cases where the device may send a notification with
<strong>Reason</strong> = <strong>Contactless Card Presented</strong>
while the cardholder is inserting or swiping a card, so the host should
start transactions with all supported card interfaces enabled to
maximize the chances of a successful card read.</p></td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td>User Event, Contactless Card Presented, EMV, Reserved (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>00</td>
<td>00</td>
<td>User Event, Contactless Card Removed, EMV, Reserved (EMV Contactless
Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>01</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, NTag/MIFARE Ultralite,
Reserved (EMV Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td>User Event, Contactless Card Removed, NTag/MIFARE Ultralite,
Reserved (EMV Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>02</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Classic, 1K (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Classic, 1K (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>03</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Classic, 4K (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>03</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Classic, 4K (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>04</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE DESFire Light (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>04</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE DESFire Light (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>05</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE MINI® (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>05</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE MINI® (EMV Contactless
Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>06</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Plus EV1 (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read an NFC tag. In this
case, the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>06</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Plus EV1 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>07</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Plus EV2 (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read an NFC tag. In this
case, the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID.</strong></p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>07</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Plus EV2 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>08</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Plus SE (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read an NFC tag. In this
case, the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>08</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Plus SE (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>09</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE Plus X (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read an NFC tag. In this
case, the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>09</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE Plus X (EMV Contactless
Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>0A</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE DESFire EV1 (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>0A</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE DESFire EV1 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>0B</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE DESFire EV2 (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>0B</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE DESFire EV2 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>00</td>
<td>0C</td>
<td>00</td>
<td><p>User Event, Contactless Card Presented, MIFARE DESFire EV3 (EMV
Contactless Only)</p>
<p>The contactless reader has successfully read a NFC tag. In this case,
the device includes UID data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
UID Data is in the format described in <strong>Table 332 - Notification
Payload for UID</strong>.</p>
<p>A sample notification is shown here: <strong>Table 333 – Notification
Payload for UID Example</strong></p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>0C</td>
<td>00</td>
<td>User Event, Contactless Card Removed, MIFARE DESFire EV3 (EMV
Contactless Only)</td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>00</td>
<td>00</td>
<td>User Event, Card Seated in Slot, Reserved, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>00</td>
<td>00</td>
<td>User Event, Card Unseated from Slot, Reserved, Reserved (EMV Contact
Only)</td>
</tr>
<tr>
<td>01</td>
<td>04</td>
<td>00</td>
<td>00</td>
<td><p>User Event, Card Swiped, Reserved, Reserved (MSR Only)</p>
<p>When the host receives this notification, it should call
<strong>Command 0x1001 - Start Transaction</strong> before the timeout
configured in <strong>Property 1.2.7.1.2.2 User Event Notification MSR
Data Timeout (MSR Only)</strong> to process the MSR swipe data the
device is temporarily storing in memory.</p></td>
</tr>
<tr>
<td>01</td>
<td>05</td>
<td>00</td>
<td>00</td>
<td><p>User Event, Touch Sensor Press On Display, Reserved, Reserved
(Touch Only)</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
as shown in <strong>Table 326</strong>.</p></td>
</tr>
<tr>
<td>01</td>
<td>06</td>
<td>00</td>
<td>00</td>
<td><p>User Event, Touch Sensor Release On Display, Reserved, Reserved
(Touch Only)</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
as shown in <strong>Table 326</strong>.</p></td>
</tr>
<tr>
<td>01</td>
<td>07</td>
<td>00</td>
<td>00</td>
<td><p>Barcode Reader, Read Barcode Result, Type, Reserved (BCR
Only)</p>
<ul>
<li><p>Type 0x00 = Unknown</p></li>
<li><p>Type 0x01 = MagTek</p></li>
<li><p>Type 0x02 = EMV</p></li>
</ul>
<p>The barcode reader has successfully read a barcode. In this case, the
device includes barcode data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
If the data is encrypted, the data is in the format described in
<strong>Table 341</strong>. Data that is not encrypted is in the format
described in <strong>Table 342</strong>.</p></td>
</tr>
<tr>
<td colspan="5"><p>Category <strong>0x02 Session Management</strong>
contains notification detail codes involving session management
functionality (Session Management Only). Each possible notification has
a unique <strong>Reason</strong> value:</p>
<ul>
<li><p>Reason 0x00 = Session Expiring Soon</p></li>
</ul></td>
</tr>
<tr>
<td style="text-align: center;">02</td>
<td style="text-align: center;">00</td>
<td>00</td>
<td>00</td>
<td><p>Session Management, Session Expiring Soon, Reserved, Reserved</p>
<p>The device sends this notification 5 minutes before a session expires
and every minute after that until the session is extended or the
connection is closed. The host can optionally extend the session with
<strong>Command 0x1F03 - Extend Session</strong> or by sending any
command request.</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
as shown in <strong>Table 328</strong>.</p></td>
</tr>
<tr>
<td colspan="5"><p>Category <strong>0x03 Key Management</strong>
contains notification detail codes involving key management
functionality (WLAN Only). Each possible notification has a unique
<strong>Reason</strong> value:</p>
<ul>
<li><p>Reason 0x00 = CSR keys generated Reason</p></li>
<li><p>0x01 = Certificate Expiring Soon</p></li>
</ul></td>
</tr>
<tr>
<td>03</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td><p>Key management, CSR keys generated, Reserved, Reserved</p>
<p>This notification does not include a Notification Payload. See
<strong>Command 0xEF02 – Generate CSR keys (WLAN Only)</strong> for more
information.</p></td>
</tr>
<tr>
<td>03</td>
<td>01</td>
<td>00</td>
<td>00</td>
<td><p>Key management, Certificate Expiring Soon, Reserved, Reserved</p>
<p>See <strong>Property 1.2.2.1.1.B Certificate Expiring Soon
Notification Threshold</strong> for more information.</p>
<p>These notifications always include the <strong>Notification
Payload</strong> parameter in the <strong>Notification Message</strong>,
as shown in <strong>Table 330 - Notification Payload for Key management,
Certificate Expiring Soon</strong>.</p></td>
</tr>
<tr>
<td colspan="5"><p>Category <strong>0x04 Temperature</strong> contains
notification detail codes involving temperature reporting. Each possible
notification has a unique <strong>Reason</strong> value:</p>
<ul>
<li><p>Reason 0x00 = Temperature out of range</p></li>
</ul></td>
</tr>
<tr>
<td>04</td>
<td>00</td>
<td>00</td>
<td>00</td>
<td><p>Temperature, Out of Range, Low Warning, Temperature</p>
<p>The device sends this notification when the device’s temperature
falls below the temperature set in Low Temperature Notification Level
(1.2.7.1.4.1). The temperature reported is in Celsius.</p></td>
</tr>
<tr>
<td>04</td>
<td>00</td>
<td>01</td>
<td>00</td>
<td><p>Temperature, Out of Range, High Warning, Temperature</p>
<p>The device sends this notification when the device’s temperature
rises above the temperature set in High Temperature Notification Level
(1.2.7.1.4.2). The temperature reported is in Celsius.</p></td>
</tr>
</tbody>
</table>

##### Notification 0x1001 – Low Battery Warning

The device sends this notification when the battery charge reaches 15
percent. If a device is powered on with a charge that is already 15
percent or below, this notification is sent shortly after power up and
includes the current battery charge percentage. Percent indicates the
percent of battery charge remaining. It is recommended that the device
is charged using a USB power source soon after receiving this
notification. See **Table 13 - Notification Message Format** and **Table
321 Low Battery Notification Example**.

| Example (Hex)                          |
|----------------------------------------|
| AA 00 81 04 83 00 10 01 82 00 02 00 0D |

Table 321 Low Battery Notification Example

##### Notification 0x1001 - Low Battery Shutdown

The device sends this notification one minute before it automatically
powers down the device. This occurs when the battery charge has reached
0 percent. Shutdown can be prevented by connecting the device to a USB
power source. See **Table 13 - Notification Message Format** and **Table
322 Low Battery Shutdown Response Example**.

**Table 322 Low Battery Shutdown Response Example**

| Example (Hex)                          |
|----------------------------------------|
| AA 00 81 04 83 00 10 01 82 00 02 01 00 |

##### Notification 0x1001 - Battery Charged

The device sends this notification when the battery charger detects that
the battery is fully charged. This only occurs when the device is
powered by a USB power source. See **Table 13 - Notification Message
Format** and **Table 323 - Battery Charged Notification Example**.

Table 323 - Battery Charged Notification Example

| Example (Hex)                          |
|----------------------------------------|
| AA 00 81 04 83 00 10 01 82 00 02 02 00 |

Table 324 - Notification Payload for Device Reset Occurred

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 1001 = Device Information Update |  |  |  |  |  |
| 81 | var | This parameter has the same length and value described by **Property 2.3.1.2.1.1 Device Operational Status**. | B | R |  |
| 82 | var | This parameter has the same length and value described by **Property 2.3.1.2.1.2 Offline Status Detail**. | B | R |  |
| xx | var | More data objects may be added in future firmware revisions. |  |  |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 325 - Notification Example for Device Reset Occurred

| Example (Hex)                                                   |
|-----------------------------------------------------------------|
| AA00 81 04 83001001 82 04 00000000 84 08 1001 81 01 02 82 01 00 |

Table 326 - Notification Payload for Touch Sensor Press or Release On
Display (Touch Only)

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1001 = Device Information Update</td>
</tr>
<tr>
<td>81</td>
<td>04</td>
<td><p>Press / Release Coordinates</p>
<p>Coordinates of the press / release from origin 0,0 at the top left
corner of the display, automatically adjusted to match the device’s
orientation as configured by Property 1.2.3.1.1.2 Custom Idle Page Image
Device Locked (Display Only).</p>
<p>Bytes 1..2 X Coordinate</p>
<p>X coordinate of press / release, in big endian order.</p>
<p>Bytes 3..4 Y Coordinate</p>
<p>Y Coordinate of press / release, in big endian order.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 327 - Notification Example for Touch Sensor Press or Release On
Display (Touch Only)

| Example (Hex)                                                   |
|-----------------------------------------------------------------|
| AA00 81 04 83001001 82 04 00000000 84 08 1001 81 04 00 80 00 80 |

Table 328 - Notification Payload for Session Expiring Soon (Session
Management Only)

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1001 = Device Information Update</td>
</tr>
<tr>
<td>81</td>
<td>1</td>
<td><p>Interface</p>
<p>0x00 = WLAN</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>82</td>
<td>1</td>
<td><p>Connection</p>
<p>0x00 = Connection 0, Interfaces that only support one connection will
use connection 0. WLAN will always set this to 0 even if the device is
configured to support more than one connection with <strong>Property
1.2.2.1.1.A Maximum Client Connections</strong> since there is only a
single session for all clients. See <strong>Command 0x1F03 - Extend
Session (Session Management Only)</strong> for more information on this
scenario.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>83</td>
<td>1</td>
<td><p>Expiration Time</p>
<p>The time in minutes until the session expires.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>xx</td>
<td>var</td>
<td>More data objects may be added in future firmware revisions.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 329 - Notification Example for Session Expiring Soon (Session
Management Only)

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA00 81 04 83001001 82 04 00000000 84 0B 1001 81 01 00 82 01 00 83 01 05 |

Table 330 - Notification Payload for Key management, Certificate
Expiring Soon (Session Management Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 1001 = Device Information Update |  |  |  |  |  |
| 81 | 1 | This parameter has the same length and value described by **Property 1.2.2.1.1.B Certificate Expiring Soon Notification Threshold**. | B | R |  |
| 82 | 1 | This parameter contains the certificate identifier. See the certificate file type section (File Type 0x03) from ­Table 196 to identify this certificate by locating the certificate that has a File Subtype that matches this certificate identifier. | B | R |  |
| 83 | 1 | The number of days the certificate is still valid. | B | R |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 331 - Notification Example for Key management, Certificate
Expiring Soon (Session Management Only)

| Example (Hex)                                                   |
|-----------------------------------------------------------------|
| AA00 81 04 83001001 82 04 00000000 84 08 1001 81 01 02 82 01 00 |

Table 332 - Notification Payload for UID

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 1001 = Device Information Update |  |  |  |  |  |
| 84 | var | NFC Payload | B | R |  |
| /DF79 | var | NFC UID | B | R |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 333 – Notification Payload for UID Example

| Example (Hex) |
|----|
| AA 00 81 04 83 00 10 01 82 04 01 00 01 00 84 0E 10 01 84 0A DF 79 07 04 37 1F 71 BF 61 80 |

### Notification Source 0x18nn - Notifications from User Interface

#### Notification 0x1801 - User Interface Information Update (MAGTEK INTERNAL ONLY FOR NOW)

This notification reports information about progress and state changes
involving the device’s User Interface modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, to indicate:

- The **Payment Technology** (PT) involved

- The **Reason** (Rsn) for the notification

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

#### Notification 0x1803 - User Interface Host Action Request

This notification requests that the host take action during operations
involving the device’s User Interface modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 334**, to indicate:

- The **User Interface Module** (UI) involved

- The **Reason** (Rsn) for the notification (UI Event)

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 334 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>UI</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5">Module <strong>0x00 Miscellaneous</strong> contains UI
notification detail codes that are not specific to a particular UI
module.</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x01 Touchscreen</strong> contains UI
notification detail codes that are specific to the touchscreen module
(Touch Only).</p>
<ul>
<li><p>Reason 0x01 = Signature Capture</p></li>
<li><p>Reason 0x02 = Functional button selected</p></li>
<li><p>Reason 0x03 = Button text string selected</p></li>
<li><p>Reason 0x04 = Button $Amount selected</p></li>
<li><p>Reason 0x05 = Present card functional button Right is
selected</p></li>
</ul></td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>01</td>
<td>00</td>
<td>Touchscreen, Functional button Left selected</td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>02</td>
<td>00</td>
<td>Touchscreen, Functional button Middle selected</td>
</tr>
<tr>
<td>01</td>
<td>02</td>
<td>03</td>
<td>00</td>
<td>Touchscreen, Functional button Right selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>01</td>
<td>00</td>
<td>Touchscreen, Text string button 1 selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>02</td>
<td>00</td>
<td>Touchscreen, Text string button 2 selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>03</td>
<td>00</td>
<td>Touchscreen, Text string button 3 selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>04</td>
<td>00</td>
<td>Touchscreen, Text string button 4 selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>05</td>
<td>00</td>
<td>Touchscreen, Text string button 5 selected</td>
</tr>
<tr>
<td>01</td>
<td>03</td>
<td>06</td>
<td>00</td>
<td>Touchscreen, Text string button 6 selected</td>
</tr>
<tr>
<td>01</td>
<td>04</td>
<td>00</td>
<td>00</td>
<td>Touchscreen, $Amount button selected, Data Attached contain the
amount selected as described in <strong>Table 336 - Notification Payload
for $ Amount button selected, Data Attached</strong></td>
</tr>
<tr>
<td>01</td>
<td>05</td>
<td>00</td>
<td>00</td>
<td>Touchscreen, Present card functional button Right selected</td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x02 Display</strong> contains UI
notification detail codes that are specific to the display module. The
device primarily uses these notifications to request that the host stand
in as a display to interact with cardholders / operators when the device
does not have a display of its own (No Display Only).</p>
<ul>
<li><p>Reason 0x01 = Display Message Request</p></li>
<li><p>Reason 0x02 = Cardholder Selection Request</p></li>
<li><p>Reason 0x03 = Online PIN Request (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
</ul></td>
</tr>
<tr>
<td>02</td>
<td>01</td>
<td>00</td>
<td>00</td>
<td><p>Display, Display Message, No Data Attached, Clear Display.</p>
<p>The host should clear any existing messages it is currently
displaying (No Display Only).</p></td>
</tr>
<tr>
<td>02</td>
<td>01</td>
<td>01</td>
<td>00</td>
<td><p>Display, Display Message, Data Attached, No Cancel Function (No
Display Only)</p>
<p>In this case, the notification includes additional data and display
control, defined in <strong>Table 335</strong>, in the
<strong>Notification Payload</strong> portion of the
<strong>Notification Message</strong>.</p>
<p>This notification is for simple messages. The host should show the
requested message until another notification arrives or until the host
needs to use the display for its own purposes. For example, during a
transaction, this notification will pass along the simple messages in
the transaction sequence like <strong>CARD READ OK - REMOVE
CARD</strong>, <strong>THANK YOU</strong>, and
<strong>WELCOME</strong>.</p></td>
</tr>
<tr>
<td>02</td>
<td>01</td>
<td>02</td>
<td>00</td>
<td><p>Display, Display Message, Data Attached, Include Cancel Function
(No Display Only)</p>
<p>In this case, the notification includes additional data and display
control, defined in <strong>Table 335</strong>, in the
<strong>Notification Payload</strong> portion of the
<strong>Notification Message</strong>.</p>
<p>The host should show the requested message and should allow the
request to be canceled by a cardholder or operator. For example, during
a transaction, this notification will pass along the simple messages in
the transaction sequence like “TAP, INSERT, or SWIPE CARD,” where
cancelation is appropriate. If the cancel button involves canceling the
whole transaction, the host should send <strong>Command 0x1008 - Cancel
Transaction</strong>.</p></td>
</tr>
<tr>
<td>02</td>
<td>02</td>
<td>00</td>
<td>00</td>
<td><p>Display, Cardholder Selection, Data Attached, Reserved (No
Display Only)</p>
<p>In this case, the notification includes additional data and display
control, defined in <strong>Table 337</strong>, in the
<strong>Notification Payload</strong> portion of the
<strong>Notification Message</strong>.</p>
<p>The host should show the requested selection, then send
<strong>Command 0x1802 - Report Cardholder Selection</strong> to device
to return the cardholder’s selection to the device.</p></td>
</tr>
<tr>
<td>02</td>
<td>03</td>
<td>00</td>
<td>00</td>
<td><p>(MAGTEK INTERNAL ONLY FOR NOW, No Display Only)</p>
<p>Display, Online PIN Request, Application ID / Amount, Data Attached,
Reserved.</p>
<p>In this case, the notification includes additional data, defined in
<strong>Table 338</strong>, in the <strong>Notification Payload</strong>
portion of the <strong>Notification Message</strong>.</p>
<p>The host must send Command TBD to the device to indicate PIN Capture
data and result.</p></td>
</tr>
</tbody>
</table>

Table 335 - Notification Payload for Display Message Request
Notifications (No Display Only)

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1803 = <strong>Notification 0x1803 - User Interface Host
Action Request</strong></td>
</tr>
<tr>
<td>/81</td>
<td>01</td>
<td><p>Reserved for time functions.</p>
<p>0x00</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Append or Clear Display</p>
<ul>
<li><p>0x00 = Append the message(s) on the next available row.</p></li>
<li><p>0x01 = Clear the display first and display the requested message
on the first row.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>Message</p>
<p>This parameter is a set of one or more ASCII strings the host should
show, with each string terminated by any one of the following
characters. MagTek recommends proceeding to the next row on receiving
any of these characters:</p>
<ul>
<li><p>Null (0x00)</p></li>
<li><p>LF (0x0A)</p></li>
<li><p>The end of the Message parameter.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/85</td>
<td>var</td>
<td><p>Enhanced Application Select Message</p>
<p>For Contactless, this parameter will return the PPSE response
starting from tag BF0C</p>
<p>BF0C &lt;LEN&gt;&lt;VALUE&gt;</p>
<p>For Contact, this parameter will return all available AID returned
from the PSE or List Of AIDs, from tag 70</p>
<p>70 &lt;len&gt;</p>
<p>61 &lt;len&gt;</p>
<p>4F&lt;len&gt;&lt;value of AID&gt;</p>
<p>50&lt;len&gt;&lt;value of Application Label&gt;</p>
<p>87&lt;len&gt;&lt;value of Application Priority Indicator&gt;</p>
<p>61 &lt;len&gt;</p>
<p>4F&lt;len&gt;&lt;value of AID&gt;</p>
<p>50&lt;len&gt;&lt;value of Application Label&gt;</p>
<p>87&lt;len&gt;&lt;value of Application Priority Indicator,
optional&gt;</p>
<p>If the GPO Response returns a <strong>Notification 0x0101 -
Transaction Information Update of</strong>’69 85’, the response will be
sent first by the device and this Enhanced Application Select Message
will be sent again.</p></td>
<td>B</td>
<td>O</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <strong><a href="#notification-message">30</a>.</strong></td>
</tr>
</tbody>
</table>

**Table 336 - Notification Payload for \$ Amount button selected, Data
Attached**

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page **[30](#notification-message).** |  |  |  |  |  |
| 1803 = **Command 0x1803 - Display Message (Display Only)** |  |  |  |  |  |
| 84 | 9 | Amount selected payload | B | R |  |
| /9F02 | 6 | Dollar and cents amount selected in BCD format | B | R |  |
| End of **Notification Message** found on page **[30](#notification-message).** |  |  |  |  |  |

Table 337 - Notification Payload for Cardholder Selection Notifications
(No Display Only)

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1803 = <strong>Notification 0x1803 - User Interface Host
Action Request</strong></td>
</tr>
<tr>
<td>/81</td>
<td>01</td>
<td>Time in seconds the device will wait for host to respond with
<strong>Command 0x1802 - Report Cardholder Selection</strong>.</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/82</td>
<td>01</td>
<td><p>Append or Clear Display</p>
<ul>
<li><p>0x00 = Append, display the messages on the next line.</p></li>
<li><p>0x01 = Clear, clear the display first and display the requested
message on the first line.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/83</td>
<td>var</td>
<td><p>Message</p>
<p>This parameter is a set of one or more ASCII strings the host should
show, with each string terminated by any one of the following
characters. MagTek recommends proceeding to the next row on receiving
any of these characters:</p>
<ul>
<li><p>Null (0x00)</p></li>
<li><p>LF (0x0A)</p></li>
<li><p>The end of the Message parameter.</p></li>
</ul></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 338 - Notification Payload for Display Online PIN Request
Notifications (MAGTEK INTERNAL ONLY FOR NOW, No Display Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 1803 = **Notification 0x1803 - User Interface Host Action Request** |  |  |  |  |  |
| /9F12 | var | This contains AID Preferred Name (Tag 9F12) if it is provided by the card. | B | O |  |
| /9F06 | var | This contains the AID (Tag) if Tag 9F12 is not provided by the card. | B | O |  |
| /9F02 | 06 | This contains the Amount (Tag 9F02) if it should be displayed. For example, the device excludes this when using a provisional amount for a Quick Chip transaction. | B | O |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

#### Notification 0x1805 - User Interface Operation Complete

This notification reports information about progress and state changes
that occur during interaction with the User Interface modules.

For this notification, **Notification Detail** described in section
**3.2.2.3 Notification Message** contains one byte each, shown in
**Table 339**, to indicate:

- The **User Interface Module** (UI) involved

- The **Reason** (Rsn) for the notification (UI Event)

- **Detail** (Det) about the notification that has different meanings
  depending on the Reason, and

- An **Extra** field (Ext) that has different meanings depending on the
  Reason.

Table 339 - Notification Detail Codes

<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th>UI</th>
<th>Rsn</th>
<th>Det</th>
<th>Ext</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5"><p>Module <strong>0x01 Touchscreen</strong> contains UI
notification detail codes that are specific to the touchscreen module
(Touch Only)</p>
<ul>
<li><p>Reason 0x01 = Signature Capture</p></li>
<li></li>
</ul></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>01</td>
<td>01</td>
<td><p>Touchscreen, Signature Capture, Success, Data Available (Touch
Only)</p>
<p>In this case, the device includes the File ID as defined in
<strong>Table 340</strong> in the <strong>Additional Detail</strong>
portion of the <strong>Notification Message</strong>. The host should
use this File ID and call <a href="#_Command_0xD821_-"><strong>Command
0xD825 – Start Get File from Device</strong></a>.</p></td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>02</td>
<td>01</td>
<td>Touchscreen, Signature Capture, Operation Failed, Timeout (Touch
Only)</td>
</tr>
<tr>
<td>01</td>
<td>01</td>
<td>02</td>
<td>02</td>
<td>Touchscreen, Signature Capture, Operation Failed, Hardware Not
Available (Touch Only)</td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x02 Display</strong> contains UI
notification detail codes that are specific to the display module
(Display Only).</p>
<ul>
<li><p>Reason 0x01 = Display Message Request</p></li>
<li><p>Reason 0x02 = Cardholder Selection Request</p></li>
<li><p>Reason 0x03 = Online PIN Request (MAGTEK INTERNAL ONLY FOR
NOW)</p></li>
</ul></td>
</tr>
<tr>
<td>02</td>
<td>01</td>
<td>00</td>
<td>00</td>
<td><p>Display, Display Message, Timed Out, Reserved</p>
<p>The device has finished displaying a message requested by the host
using <strong>Command 0x1803 - Display Message</strong>.</p></td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x04 Barcode Reader</strong> contains
notification detail codes that are specific to the barcode reader
module.</p>
<ul>
<li><p>Reason 0x03 = Read Barcode Result</p></li>
</ul></td>
</tr>
<tr>
<td>04</td>
<td>03</td>
<td>01</td>
<td>00</td>
<td><p>Barcode Reader, Read Barcode Result, Success, Unidentified
Type</p>
<p>The barcode reader has successfully read a barcode. In this case, the
device includes barcode data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
If the data is encrypted, the data is in the format described in
<strong>Table 341</strong>. Data that is not encrypted is in the format
described in <strong>Table 342</strong>.</p></td>
</tr>
<tr>
<td>04</td>
<td>03</td>
<td>01</td>
<td>01</td>
<td><p>Barcode Reader, Read Barcode Result, Success, MagTek Blob
Type</p>
<p>The barcode reader has successfully read a barcode. In this case, the
device includes barcode data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
MagTek Blob data is always encrypted. The data is in the format
described in <strong>Table 341</strong>.</p></td>
</tr>
<tr>
<td>04</td>
<td>03</td>
<td>01</td>
<td>02</td>
<td><p>Barcode Reader, Read Barcode Result, Success, EMV Type</p>
<p>The barcode reader has successfully read a barcode. In this case, the
device includes barcode data in the <strong>Notification
Payload</strong> portion of the <strong>Notification Message</strong>.
EMV barcode data is always encrypted. The data is in the format
described in <strong>Table 341.</strong></p></td>
</tr>
<tr>
<td>04</td>
<td>03</td>
<td>02</td>
<td>01</td>
<td>Barcode Reader, Read Barcode Result, Operation Failed, Timeout</td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x05 Buzzer</strong> contains
notification detail codes that are specific to the buzzer module.</p>
<ul>
<li><p>Reason 0x04 = Buzzer Result</p></li>
</ul></td>
</tr>
<tr>
<td>05</td>
<td>04</td>
<td>01</td>
<td>00</td>
<td>Buzzer, Buzzer Result, Operation Success, Reserve</td>
</tr>
<tr>
<td>05</td>
<td>04</td>
<td>02</td>
<td>00</td>
<td>Buzzer, Buzzer Result, Operation Fail, Reserve</td>
</tr>
<tr>
<td colspan="5"><p>Module <strong>0x06 Card Emulation</strong> contains
notification detail codes that are specific to card emulation.</p>
<ul>
<li><p>Reason 0x05 = Card Emulation Result</p></li>
</ul></td>
</tr>
<tr>
<td>06</td>
<td>05</td>
<td>01</td>
<td>00</td>
<td>Card Emulation, Card Emulation Result, Operation Success,
Reserve</td>
</tr>
<tr>
<td>06</td>
<td>05</td>
<td>02</td>
<td>01</td>
<td>Card Emulation, Card Emulation Result, Operation Fail, Timeout</td>
</tr>
<tr>
<td>06</td>
<td>05</td>
<td>02</td>
<td>03</td>
<td>Card Emulation, Card Emulation Result, Operation Fail, Cancel</td>
</tr>
<tr>
<td>06</td>
<td>05</td>
<td>02</td>
<td>04</td>
<td>Card Emulation, Card Emulation Result, Operation Fail, Error</td>
</tr>
</tbody>
</table>

Table 340 - Additional Detail for Touchscreen, Signature Capture,
Success, Data Available (Touch Only)

| Tag | Len | Value / Description | Typ | Req | Default |
|----|----|----|----|----|----|
| Beginning of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |
| 83 | 04 | File ID from ­Table 196 | B | R |  |
| End of **Notification Message** found on page [**30**](#notification-message) |  |  |  |  |  |

Table 341 - Notification Payload for Barcode Reader, Read Barcode
Result, Success (Encrypted Data Attached)

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 5%" />
<col style="width: 59%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="6">Beginning of <strong>Notification Message</strong> found
on page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
<tr>
<td colspan="6">1805 = User Interface Operation Complete</td>
</tr>
<tr>
<td>84</td>
<td>var</td>
<td>Notification Payload</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF59</td>
<td>var</td>
<td><p>Encrypted Data Primitive</p>
<p>Decrypt the value of this TLV data object using the algorithm and
variant specified in the <strong>Encrypted Data KSN</strong> parameter
and the <strong>Encrypted Data Encryption Type</strong> parameter to
read its contents. The format of the decrypted data is shown in
<strong>Table 342</strong>.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF50</td>
<td>var</td>
<td>Encrypted Data KSN</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>/DFDF51</td>
<td>01</td>
<td><p>Encrypted Data Encryption Type</p>
<p>See section <strong>4.4 Encryption Type</strong> for a list of valid
values.</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td colspan="6">End of <strong>Notification Message</strong> found on
page <a href="#notification-message"><strong>30</strong></a></td>
</tr>
</tbody>
</table>

Table 342 - Notification Payload for Barcode Reader, Read Barcode
Result, Success (Unencrypted Data)

| Tag   | Len | Value / Description    | Typ | Req | Default |
|-------|-----|------------------------|-----|-----|---------|
| FC    | var | Barcode Data Container | T   | R   |         |
| /DF74 | var | Barcode Data           | B   | O   |         |

**Table 343 – Default User Interface String IDs and Strings**

| Display String ID | Display String               |
|-------------------|------------------------------|
| 0x0000            | “ ”                          |
| 0x0001            | “Thank You”                  |
| 0x0002            | “Hello”                      |
| 0x0003            | “Please Select”              |
| 0x0004            | “Touch Screen To Continue”   |
| 0x0005            | “Cancel”                     |
| 0x0006            | “Select a Transaction”       |
| 0x0007            | “Deposit”                    |
| 0x0008            | “Withdrawal”                 |
| 0x0009            | “Choose PIN”                 |
| 0x000A            | “Change PIN”                 |
| 0x000B            | “Balance”                    |
| 0x000C            | “Cash Advance”               |
| 0x000D            | “Authenticate Me”            |
| 0x000E            | “Transfer”                   |
| 0x000F            | “Make Payment”               |
| 0x0010            | “On Sale”                    |
| 0x0011            | “Discount”                   |
| 0x0012            | “Clearance”                  |
| 0x0013            | “\$5.00 /5 Mins.”            |
| 0x0014            | “\$6.00 /7 Mins.”            |
| 0x0015            | “\$7.00 /9 Mins.”            |
| 0x0016            | “\$8.00 /15 Mins.”           |
| 0x0017            | “Call Attendant”             |
| 0x0018            | “Print Receipt”              |
| 0x0019            | “Email Receipt”              |
| 0x001A            | “Text Receipt”               |
| 0x001B            | “Please Select An Amount”    |
| 0x001C            | “Please Select A Tip Amount” |
| 0x001D            | “Menu Selection 1”           |
| 0x001E            | “Menu Selection 2”           |
| 0x001F            | “Menu Selection 3”           |
| 0x0020            | “Menu Selection 4”           |
| 0x0021            | “Service Request”            |
| 0x0022            | “Show More”                  |
| 0x0023            | “Options”                    |
| 0x0024            | “What is the issue?”         |
| 0x0025            | “Exit”                       |
| 0x0026            | “No Hot Water”               |
| 0x0027            | “Doesn't Spin”               |
| 0x0028            | “Water Leakage”              |
| 0x0029            | “No Heat”                    |
| 0x002A            | “Please select a Machine”    |
| 0x002B            | “Pump 1”                     |
| 0x002C            | “Pump 2”                     |
| 0x002D            | “Pump 3”                     |
| 0x002E            | “Pump 4”                     |
| 0x002F            | “A1”                         |
| 0x0030            | “A2”                         |
| 0x0031            | “A3”                         |
| 0x0032            | “A4”                         |
| 0x0033            | “B1”                         |
| 0x0034            | “B2”                         |
| 0x0035            | “B3”                         |
| 0x0036            | “B4”                         |
| 0x0037            | “C1”                         |
| 0x0038            | “C2”                         |
| 0x0039            | “C3”                         |
| 0x003A            | “C4”                         |
| 0x003B            | “\$5.50 – Cake”              |
| 0x003C            | “\$5.00 – Muffin”            |
| 0x003D            | “\$6.50 – Croissant”         |
| 0x003E            | “\$4.50 – Danish”            |
| 0x003F            | “Req. QR Code”               |
| 0x0040            | “Scan QR Code”               |
| 0x0041            | “Scan NFC”                   |
| 0x0042            | “Call Server”                |
| 0x0043            | “Request Bill”               |
| 0x0044            | “Approve”                    |
| 0x0045            | “Reject”                     |
| 0x0046            | “Verify SMS”                 |
| 0x0047            | “Verify Email”               |
| 0x0048            | “English”                    |
| 0x0049            | “Spanish”                    |
| 0x0080            | “Hola”                       |
| 0x0081            | “Por Favor Seleccione”       |
| 0x0082            | “Toca Para Continuar”        |
| 0x0083            | “Cancelar”                   |
| 0x0084            | “Seleccione Una Transaccion” |
| 0x0085            | “Deposito”                   |
| 0x0086            | “Retiro”                     |
| 0x0087            | “Elija PIN”                  |
| 0x0088            | “Cambiar PIN”                |
| 0x0089            | “Adelanto En Efectivo”       |
| 0x008A            | “Autenticarme”               |
| 0x008B            | “Verificar SMS”              |
| 0x008C            | “Confirmar”                  |
| 0x008D            | “Mostrar Mas”                |
| 0x008E            | “Opciones”                   |
| 0x008F            | “Salida”                     |
| 0x0090            | “Transferir”                 |
| 0x0091            | “Realizar Pago”              |
| 0x0092            | “En Venta”                   |
| 0x0093            | “Descuento”                  |
| 0x0094            | “Autorizacion”               |
| 0x0095            | “Operador De Llamada”        |
| 0x0096            | “Imprimir Recibo”            |
| 0x0097            | “Correo Electronico”         |
| 0x0098            | “Recibo De Texto”            |
| 0x0099            | “Seleccione Una Cantidad”    |
| 0x009A            | “Anadir Un Consejo”          |
| 0x009B            | “Requerido Codigo QR”        |
| 0x009C            | “Escanear Codigo QR”         |
| 0x009D            | “Escanear NFC”               |
| 0x009E            | “Servidor De Llamadas”       |
| 0x009F            | “Solicitar Factura”          |
| 0x00A0            | “Aprobar”                    |
| 0x00A1            | “Rechazar”                   |
| 0x00A2            | “Gracias”                    |
| 0x00A3            | “Ingles”                     |
| 0x00A4            | “Espanol”                    |

String ID value can be from 0x0000 to 0x012B, and String length maximum
is 30 characters. This default configured Strings can be changed and
uploaded to the device. See **4.29 UI Configuration File Type**

## Configuration

### About Configuration

The device provides two mechanisms for the host to retrieve information
about the device and to configure / customize device behavior:

- **Properties** are smaller configuration values (generally up to 255
  bytes and often significantly smaller). The device stores properties
  in a hierarchical tree, where each property has its own unique ID
  (sometimes referred to as an Object Identifier or OID) that identifies
  its position in the tree. The host can set and get properties using
  the commands in Command Group 0xD1nn - Settings and Information. For
  further information about OIDs, see **Appendix A Object IDs (OIDs) and
  ITU-T X660**.

<!-- -->

- **Files** are larger configuration values, which include custom
  graphics files and large configuration data blobs such as EMV terminal
  and application settings. Each file has a unique identifier more akin
  to a file path in a file system. The host can set and get files using
  the commands in **Command Group 0xD8nn - File Operations**.

This section focuses on **properties**, which the host can either read
from the device to retrieve device information (such as its PCI hardware
ID, serial number, firmware revision numbers, etc.), or write to the
device to change device behavior, or to store values for future
reference.

Property unique IDs represent a tree structure, where each property is
at the “leaf” level of the tree. Some operations allow the host to work
with entire groups of properties (branches or even the trunk containing
all its leaves) by using a property number representing a higher level
of the tree.

Each property (a “leaf” in the tree) is described in a subsection below,
including whether it can be written to, how it is secured, how to
construct or interpret its value(s), and how it affects device behavior.

To reflect this hierarchy, this section of the document groups settings
by major categories that correspond to the tree structure, which roughly
breaks down into overall property **type**, **module**, and
**submodule**.

### Property Group 1.1.nnnn Financial Settings

#### Property Subgroup 1.1.1.nnn EMV Settings

##### Property 1.1.1.1.1.1 EMV Terminal Identification

Table 344 - Property 1.1.1.1.1.1 EMV Terminal Identification

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.1 / 0x010101010101 |
| Name | EMV Terminal Identification |
| Description | The device uses this property to report its Terminal ID / Terminal Identification in tag **9F1C** in all EMV-related communication. Merchants usually configure each device with a different terminal ID per their own proprietary system standards to help identify the source of a transaction. |
| Securing Key | None |
| Min. Len (b) | 8 |
| Max. Len (b) | 8 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default | “00000000” (0x3030303030303030) |

Table 345 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E1 06 E1 04 E1 02 C1 00 |

Table 346 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 04 D1 01 82 04 00 00 00 00 84 82 00 22 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 12 E1 10 E1 0E E1 0C E1 0A C1 08 30 30 30 30 30 30 30 30 |

Table 347 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 3E D1 11 84 22 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 12 E1 10 E1 0E E1 0C E1 0A C1 08 31 31 31 31 31 31 31 31 |

Table 348 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 3E D1 11 82 04 00 00 00 00 84 82 00 22 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 12 E1 10 E1 0E E1 0C E1 0A C1 08 31 31 31 31 31 31 31 31 |

##### Property 1.1.1.1.1.2 EMV ARQC Message Tag List

Table 349 - Property 1.1.1.1.1.2 EMV ARQC Message Tag List

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.2 / 0x010101010102 |
| Name | EMV ARQC Message Tag List |
| Description | The device uses this property when it generates an **EMV ARQC Type** data object, to determine what tags to include in the data object. It serves the same purpose that MagTek custom tag DFDF02 serves on some other MagTek devices. |
| Securing Key | None |
| Min. Len (b) | 0 |
| Max. Len (b) | 255 |
| Data Type | Binary |
| Valid Values | List of any valid standard EMV message tags and device custom tags |
| Default | 50 5A 57 82 84 95 9A 9B 9C F4 5F 1A 5F 20 5F 24 5F 2A 5F 30 5F 34 9F 02 9F 03 9F 06 9F 09 9F 10 9F 15 9F 1A 9F 1D 9F 1E 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 9F 39 9F 41 9F 45 9F 4C 9F 4E 9F 5D 9F 66 9F 6E 9F 7C |

Table 350 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 08 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E1 06 E1 04 E1 02 C2 00 |

Table 351 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 08 D1 01 82 04 00 00 00 00 84 82 00 64 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 54 E1 52 E1 50 E1 4E E1 4C C2 4A 50 5A 57 82 84 95 9A 9B 9C F4 5F 1A 5F 20 5F 24 5F 2A 5F 30 5F 34 9F 02 9F 03 9F 06 9F 09 9F 10 9F 15 9F 1A 9F 1D 9F 1E 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 9F 39 9F 41 9F 45 9F 4C 9F 4E 9F 5D 9F 66 9F 6E 9F 7C |

Table 352 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 09 D1 11 84 64 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 54 E1 52 E1 50 E1 4E E1 4C C2 4A 50 5A 57 82 84 95 9A 9B 9C F4 5F 1A 5F 20 5F 24 5F 2A 5F 30 5F 34 9F 02 9F 03 9F 06 9F 09 9F 10 9F 15 9F 1A 9F 1D 9F 1E 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 9F 39 9F 41 9F 45 9F 4C 9F 4E 9F 5D 9F 66 9F 6E 9F 7C |

Table 353 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 09 D1 11 82 04 00 00 00 00 84 82 00 64 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 54 E1 52 E1 50 E1 4E E1 4C C2 4A 50 5A 57 82 84 95 9A 9B 9C F4 5F 1A 5F 20 5F 24 5F 2A 5F 30 5F 34 9F 02 9F 03 9F 06 9F 09 9F 10 9F 15 9F 1A 9F 1D 9F 1E 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 9F 39 9F 41 9F 45 9F 4C 9F 4E 9F 5D 9F 66 9F 6E 9F 7C |

##### Property 1.1.1.1.1.3 EMV Batch Data Tag List

Table 354 - Property 1.1.1.1.1.3 EMV Batch Data Tag List

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.3 / 0x010101010103 |
| Name | EMV Batch Data Tag List |
| Description | The device uses this property when it generates an **EMV Batch Data Type** data object to contain **transaction result data**, to determine what tags to include in the data object. It serves the same purpose that MagTek custom tag DFDF17 serves on some other MagTek devices. |
| Securing Key | None |
| Min. Len (b) | 0 |
| Max. Len (b) | 255 |
| Data Type | Binary |
| Valid Values | List of any valid standard EMV message tags and device custom tags |
| Default | 50 57 5A 82 84 8E 95 9A 9C F4 5F 20 5F 24 5F 25 5F 28 5F 2A 5F 2D 5F 34 9F 02 9F 03 9F 07 9F 09 9F 0B 9F 0D 9F 0E 9F 0F 9F 10 9F 11 9F 12 9F 15 9F 16 9F 1A 9F 1C 9F 1E 9F 21 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 DF DF 25 |

Table 355 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 15 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E1 06 E1 04 E1 02 C3 00 |

Table 356 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 15 D1 01 82 04 00 00 00 00 84 82 00 66 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 56 E1 54 E1 52 E1 50 E1 4E C3 4C 50 57 5A 82 84 8E 95 9A 9C 5F 20 5F 24 5F 25 5F 28 5F 2A 5F 2D 5F 34 9F 02 9F 03 9F 07 9F 09 9F 0B 9F 0D 9F 0E 9F 0F 9F 10 9F 11 9F 12 9F 15 9F 16 9F 1A 9F 1C 9F 1E 9F 21 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 DF DF 25 |

Table 357 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0B D1 11 84 66 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 56 E1 54 E1 52 E1 50 E1 4E C3 4C 50 57 5A 82 84 8E 95 9A 9C 5F 20 5F 24 5F 25 5F 28 5F 2A 5F 2D 5F 34 9F 02 9F 03 9F 07 9F 09 9F 0B 9F 0D 9F 0E 9F 0F 9F 10 9F 11 9F 12 9F 15 9F 16 9F 1A 9F 1C 9F 1E 9F 21 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 DF DF 25 |

Table 358 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0B D1 11 82 04 00 00 00 00 84 82 00 66 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 56 E1 54 E1 52 E1 50 E1 4E C3 4C 50 57 5A 82 84 8E 95 9A 9C 5F 20 5F 24 5F 25 5F 28 5F 2A 5F 2D 5F 34 9F 02 9F 03 9F 07 9F 09 9F 0B 9F 0D 9F 0E 9F 0F 9F 10 9F 11 9F 12 9F 15 9F 16 9F 1A 9F 1C 9F 1E 9F 21 9F 24 9F 26 9F 27 9F 33 9F 34 9F 35 9F 36 9F 37 DF DF 25 |

##### Property 1.1.1.1.1.4 EMV Reversal Data Tag List (EMV Contact Only)

Table 359 - Property 1.1.1.1.1.4 EMV Reversal Data Tag List (EMV Contact
Only)

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.4 / 0x010101010104 |
| Name | EMV Reversal Data Tag List |
| Description | The device uses this property when it generates an **EMV Batch Data Type** data object to contain **reversal data**, to determine what tags to include in the data object. It serves the same purpose that MagTek custom tag DFDF05 serves on some other MagTek devices. |
| Securing Key | None |
| Min. Len (b) | 0 |
| Max. Len (b) | 255 |
| Data Type | Binary |
| Valid Values | List of any valid standard EMV message tags and device custom tags |
| Default | 57 5A 82 8A 95 9A 9C 5F 24 5F 2A 5F 34 9F 01 9F 02 9F 10 9F 15 9F 16 9F 1A 9F 1C 9F 21 9F 33 9F 35 9F 36 9F 39 9F 5B DF DF 25 |

Table 360 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 16 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E1 06 E1 04 E1 02 C4 00 |

Table 361 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 16 D1 01 82 04 00 00 00 00 84 82 00 44 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 34 E1 32 E1 30 E1 2E E1 2C C4 2A 57 5A 82 8A 95 9A 9C 5F 24 5F 2A 5F 34 9F 01 9F 02 9F 10 9F 15 9F 16 9F 1A 9F 1C 9F 21 9F 33 9F 35 9F 36 9F 39 9F 5B DF DF 25 |

Table 362 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0D D1 11 84 44 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 34 E1 32 E1 30 E1 2E E1 2C C4 2A 57 5A 82 8A 95 9A 9C 5F 24 5F 2A 5F 34 9F 01 9F 02 9F 10 9F 15 9F 16 9F 1A 9F 1C 9F 21 9F 33 9F 35 9F 36 9F 39 9F 5B DF DF 25 |

Table 363 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0D D1 11 82 04 00 00 00 00 84 82 00 44 D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 34 E1 32 E1 30 E1 2E E1 2C C4 2A 57 5A 82 8A 95 9A 9C 5F 24 5F 2A 5F 34 9F 01 9F 02 9F 10 9F 15 9F 16 9F 1A 9F 1C 9F 21 9F 33 9F 35 9F 36 9F 39 9F 5B DF DF 25 |

##### Property 1.1.1.1.1.5 ARPC Receive Timeout

Table 364 - Property 1.1.1.1.1.5 ARPC Receive Timeout

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.1.5 / 0x010101010105</td>
</tr>
<tr>
<td>Name</td>
<td>ARPC Receive Timeout</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine how long to wait for the
host to send <strong>Command 0x1004 - Resume Transaction</strong> with
ARPC data before it times out and continues a transaction the host
started with <strong>Command 0x1001 - Start Transaction</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Infinite timeout</p>
<p>0x01..0xFE = Timeout in seconds</p>
<p>0xFF = Use Transaction Timeout parameter in <strong>Command 0x1001 -
Start Transaction</strong></p></td>
</tr>
<tr>
<td>Default</td>
<td>0xFF</td>
</tr>
</tbody>
</table>

Table 365 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 C500 |

Table 366 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 01 01 01 01 89 03 C5 01 FF |

Table 367 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 C501FF |

Table 368 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 C5 01 FF |

##### Property 1.1.1.1.1.6 ARPC Retry Attempts

Table 369 - Property 1.1.1.1.1.6 ARPC Retry Attempts

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.6 / 0x010101010106 |
| Name | ARPC Retry Attempts |
| Description | The device uses this property to control its ARPC Retry Attempts. If a timeout occurs when the device is waiting for the host to send **Command 0x1004 - Resume Transaction** with ARPC data, the device re-sends **Notification 0x0101 - Transaction Information Update** to report **ARQC Update** and waits for ARPC data again, up to the number of retries specified by this property. After the final retry, the device continues with the transaction. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00..0xFF |
| Default | 0x00 |

Table 370 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 C600 |

Table 371 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 01 01 01 01 89 03 C6 01 00 |

Table 372 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 C60100 |

Table 373 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 C6 01 00 |

##### Property 1.1.1.1.1.7 Apple VAS Merchant ID and URL Slot 1

Table 374 - Property 1.1.1.1.1.7 Apple VAS Merchant ID and URL Slot 1

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.7 / 0x010101010107 |
| Name | Apple VAS Merchant ID and URL Slot 1 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 375 - VAS Merchant ID and URL Type

| Tag  | Len            | Value / Description | Typ | Req | Default |
|------|----------------|---------------------|-----|-----|---------|
| 9F25 | 0x20           | Merchant ID         | B   | O   |         |
| 9F29 | Var up to 0x40 | Merchant URL        | B   | O   |         |

Table 376 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 C700 |

Table 377 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C C7 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 378 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 C70100 |

Table 379 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 C7 01 00 |

##### Property 1.1.1.1.1.8 Apple VAS Merchant ID and URL Slot 2

Table 380 - Property 1.1.1.1.1.8 Apple VAS Merchant ID and URL Slot 2

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.8 / 0x010101010108 |
| Name | Apple VAS Merchant ID and URL Slot 2 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 381 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 C800 |

Table 382 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C C8 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 383 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 C80100 |

Table 384 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 C8 01 00 |

##### Property 1.1.1.1.1.9 Apple VAS Merchant ID and URL Slot 3

Table 385 - Property 1.1.1.1.1.9 Apple VAS Merchant ID and URL Slot 3

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.9 / 0x010101010109 |
| Name | Apple VAS Merchant ID and URL Slot 3 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 386 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 C900 |

Table 387 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C C9 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 388 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 C90100 |

Table 389 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 C9 01 00 |

##### Property 1.1.1.1.1.A Apple VAS Merchant ID and URL Slot 4

Table 390 - Property 1.1.1.1.1.A Apple VAS Merchant ID and URL Slot 4

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.A / 0x01010101010A |
| Name | Apple VAS Merchant ID and URL Slot 4 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 391 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 CA00 |

Table 392 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C CA 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 393 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 CA0100 |

Table 394 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 CA 01 00 |

##### Property 1.1.1.1.1.B Apple VAS Merchant ID and URL Slot 5

Table 395 - Property 1.1.1.1.1.B Apple VAS Merchant ID and URL Slot 5

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.B / 0x01010101010B |
| Name | Apple VAS Merchant ID and URL Slot 5 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 396 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 CB00 |

Table 397 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C CB 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 398 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 CB0100 |

Table 399 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 CB 01 00 |

##### Property 1.1.1.1.1.C Apple VAS Merchant ID and URL Slot 6

Table 400 - Property 1.1.1.1.1.C Apple VAS Merchant ID and URL Slot 6

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.C / 0x01010101010C |
| Name | Apple VAS Merchant ID and URL Slot 6 |
| Description | The device uses this property for Apple VAS processing to configure the device’s supported Merchant ID and URL. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 102 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Type** |
| Default | 0x00 |

Table 401 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 CC00 |

Table 402 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 49 D1 01 85 01 01 87 04 01 01 01 01 89 3C CC 3A 9F 25 20 3E 22 54 3A AF 0A C5 E4 AC FC 25 67 1A 6E BF 6E DE 5A C1 96 74 6C 55 F3 D4 37 08 19 FF F9 22 C3 9F 29 14 77 77 77 2E 65 78 61 6D 70 6C 65 2D 75 72 6C 2E 63 6F 6D |

Table 403 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870401010101 8903 CC0100 |

Table 404 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 01 01 01 01 89 03 CC 01 00 |

##### Property 1.1.1.1.1.D Apple iAP2 AppBundleID 

Table 405 - Property 1.1.1.1.1.D Apple iAP2 AppBundleID

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.D / 0x01010101010D |
| Name | Apple iAP2 AppBundleID |
| Description | This setting allows the iOS device to recommend installation of a specific app or set of apps to use with the iOS device when connects to an accessory. |
| Securing Key | None |
| Min. Len (b) | A valid reverse-DNS similar to the Default below |
| Max. Len (b) | 50 |
| Data Type | ASCII |
| Valid Values | ASCII |
| Default | com.magtek.dynaflex2go |

Table 406 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E1 06 E1 04 E1 02 CD 00 |

Table 407 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 4C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 3C E1 3A E1 38 E1 36 E1 34 CD 32 63 6F 6D 2E 6D 61 67 74 65 6B 2E 64 79 6E 61 66 6C 65 78 32 67 6F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |

Table 408 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 07 D1 11 84 4C D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 3C E1 3A E1 38 E1 36 E1 34 CD 32 63 6F 6D 2E 6D 61 67 74 65 6B 2E 64 79 6E 61 66 6C 65 78 32 67 6F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |

Table 409 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 07 D1 11 82 04 00 00 00 00 84 82 00 4C D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 3C E1 3A E1 38 E1 36 E1 34 CD 32 63 6F 6D 2E 6D 61 67 74 65 6B 2E 64 79 6E 61 66 6C 65 78 32 67 6F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |

##### Property 1.1.1.1.1.10 Google Smart Tap Collector ID Slot 1

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.10 / 0x010101010110 |
| Name | Google Smart Tap Collector ID Slot 1 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 410 - Property 1.1.1.1.1.10 Google Smart Tap Collector ID Slot 1

Table 411 - Google Smart Tap Collector ID and Service Types

<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 13%" />
<col style="width: 29%" />
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr>
<th>Tag</th>
<th>Len</th>
<th>Value / Description</th>
<th>Typ</th>
<th>Req</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>DF7C</td>
<td>0x08</td>
<td>GWST Collector ID</td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
<tr>
<td>DF7D</td>
<td>Var up to 0x0E</td>
<td><p>GWST Service Types</p>
<p>0x00 = All services</p>
<p>0x01 = All services except PPSE</p>
<p>0x02 = PPSE</p>
<p>0x03 = Loyalty</p>
<p>0x04 = Offer</p>
<p>0x05 = Gift card</p>
<p>0x06 = Private label card</p>
<p>0x07 = Event ticket</p>
<p>0x08 = Flight</p>
<p>0x09 = Transit</p>
<p>0x10 = Cloud-based wallet</p>
<p>0x11 = Mobil marketing platform</p>
<p>0x12 = Generic</p>
<p>0x13 = Generic private pass</p>
<p>0x40 = Wallet customer</p></td>
<td>B</td>
<td>R</td>
<td></td>
</tr>
</tbody>
</table>

Table 412 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D000 |

Table 413 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D0 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 414 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D00F DF7C083230313830363038DF7D0100 |

Table 415 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D0 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.11 Google Smart Tap Collector ID Slot 2

Table 416 - Property 1.1.1.1.1.11 Google Smart Tap Collector ID Slot 2

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.11 / 0x010101010111 |
| Name | Google Smart Tap Collector ID Slot 2 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 417 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D100 |

Table 418 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D1 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 419 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D10F DF7C083230313830363038DF7D0100 |

Table 420 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D1 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.12 Google Smart Tap Collector ID Slot 3

Table 421- Property 1.1.1.1.1.12 Google Smart Tap Collector ID Slot 3

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.12 / 0x010101010112 |
| Name | Google Smart Tap Collector ID Slot 3 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 422 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D200 |

Table 423 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D2 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 424 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D20F DF7C083230313830363038DF7D0100 |

Table 425 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D2 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.13 Google Smart Tap Collector ID Slot 4

Table 426 - Property 1.1.1.1.1.13 Google Smart Tap Collector ID Slot 4

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.13 / 0x010101010113 |
| Name | Google Smart Tap Collector ID Slot 4 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 427 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D300 |

Table 428 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D3 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 429 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D30F DF7C083230313830363038DF7D0100 |

Table 430 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D3 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.14 Google Smart Tap Collector ID Slot 5

Table 431 - Property 1.1.1.1.1.14 Google Smart Tap Collector ID Slot 5

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.14 / 0x010101010114 |
| Name | Google Smart Tap Collector ID Slot 5 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 432 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D400 |

Table 433 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D4 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 434 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D40F DF7C083230313830363038DF7D0100 |

Table 435 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D4 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.15 Google Smart Tap Collector ID Slot 6

Table 436 - Property 1.1.1.1.1.15 Google Smart Tap Collector ID Slot 6

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.1.15 / 0x010101010115 |
| Name | Google Smart Tap Collector ID Slot 6 |
| Description | The device uses this property for Google Smart Tap processing to configure the device’s supported Collector ID and Service Types. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 25 |
| Data Type | Binary |
| Valid Values | 00 or see **Table 375 - VAS Merchant ID and URL Types** |
| Default | 0x00 |

Table 437 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D500 |

Table 438 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D5 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 439 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D50F DF7C083230313830363038DF7D0100 |

Table 440 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D5 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.1.1A Google Smart Tap POS Capabilities

Table 441 - Property 1.1.1.1.1.1A Google Smart Tap POS CapabilitiesPOS
Capabilities

<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.1.1A / 0x01010101011A</td>
</tr>
<tr>
<td>Name</td>
<td>Google Smart Tap POS Capabilities</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property for Google Smart Tap processing to
configure the device’s supported POS Capabilities.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Byte value where each bit of the byte indicates a particular POS
capability. Bit 0 is the least significant bit. The Tap byte is
generated by the device.</p>
<p>Byte 1 – System:</p>
<p>Bit 0: Standalone</p>
<p>Bit 1: Semi-integrated</p>
<p>Bit 2: Unattended</p>
<p>Bit 3: Online</p>
<p>Bit 4: Offline</p>
<p>Bit 5: MMP</p>
<p>Bit 6: zlib support</p>
<p>Bit 7: RFU</p>
<p>Byte 2 – UI:</p>
<p>Bit 0: Printer</p>
<p>Bit 1: Printer graphics</p>
<p>Bit 2: Display</p>
<p>Bit 3: Images</p>
<p>Bit 4: Audio</p>
<p>Bit 5: Animation</p>
<p>Bit 6: Video</p>
<p>Bit 7: RFU</p>
<p>Byte 3 – Checkout:</p>
<p>Bit 0: Support payment</p>
<p>Bit 1: Support digital receipt</p>
<p>Bit 2: Support service issuance</p>
<p>Bit 3: Support OTA POS data</p>
<p>Bit 4: RFU</p>
<p>Bit 5: RFU</p>
<p>Bit 6: RFU</p>
<p>Bit 7: RFU</p>
<p>Byte 4 – CVM</p>
<p>Bit 0: Online PIN</p>
<p>Bit 1: CD PIN</p>
<p>Bit 2: Signature</p>
<p>Bit 3: No CVM</p>
<p>Bit 4: Device-generated code</p>
<p>Bit 5: SP-generated code</p>
<p>Bit 6: ID capture</p>
<p>Bit 7: Biometric</p></td>
</tr>
<tr>
<td>Default</td>
<td><p>DynaProx, DynaFlex II Go and DynaFlex II: 0x08, 0x10, 0x03,
0x00</p>
<p>All Other devices: 0x08, 0x14, 0x03, 0x05</p></td>
</tr>
</tbody>
</table>

Table 442 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010101 8902 D400 |

Table 443 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 85 01 01 87 04 01 01 01 01 89 11 D4 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

Table 444 - Set Request Example

| Example (Hex) |
|----|
| AA00 81048255D111 8427 D111 8107 2B06010401F609 8501 01 8704 01010101 8911 D40F DF7C083230313830363038DF7D0100 |

Table 445 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 2 7D 11 18 10 7 2B 06 01 04 01 F6 09 85 01 01 87 04 01 01 01 01 89 11 D4 0F DF 7C 08 32 30 31 38 30 36 30 38 DF 7D 01 00 |

##### Property 1.1.1.1.2.1 Start Transaction on Touchscreen Event Control(Touch Only)

Table 446 - Property 1.1.1.1.2.1 Start Transaction on Touchscreen Event
Control(Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.1 / 0x010101010201</td>
</tr>
<tr>
<td>Name</td>
<td>Start Transaction on Touchscreen Event Control</td>
</tr>
<tr>
<td>Description</td>
<td>The device use this property to determine if a transaction operation
is to be started when a Touchscreen event is detected.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 – Do not start Transaction on Touchscreen event</p>
<p>0x01 – Start Transaction on Touchscreen Event</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 - Do not start Transaction on Touchscreen event s</td>
</tr>
</tbody>
</table>

Table 447 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101028902C100 |

Table 448 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704010101028903C10100 |

Table 449 - Set Request Example

| Example (Hex)                                        |
|------------------------------------------------------|
| AA0081040155D1118410D1118501018704010101028903C10100 |

Table 450 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704010101028903C10100 |

##### Property 1.1.1.1.2.2 Tip Mode(Touch Only)

Table 451 - Property 1.1.1.1.2.2 Tip Mode(Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.2 / 0x010101010202</td>
</tr>
<tr>
<td>Name</td>
<td>Tip Mode</td>
</tr>
<tr>
<td>Description</td>
<td>The Tip Mode to use when in Event Driven mode</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1F</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1F</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Byte 1 Tip Mode</p>
<p>0x00 – Disable Tip Mode</p>
<p>0x01 – Show Tip GUI immediately using % value</p>
<p>0x02 – Show Tip GUI immediately using $ amount</p>
<p>Byte 2, Display Mode for Button1</p>
<p>0 - % or Amount</p>
<p>1 – Display Custom</p>
<p>2 – Display NO TIP</p>
<p>3 – Disabled (An OID controls whether the button is blank, grayed out
or not showing)</p>
<p>Bytes 3 to 6 Value in % or Amount for Button 1, if applicable</p>
<p>Byte 7, Display Mode for Button 2 (See Byte 2 for Details)</p>
<p>Bytes 8 to 11 Value in % or Amount for Button 2, if applicable</p>
<p>Byte 12, Display Mode for Button 3 (See Byte 2 for Details)</p>
<p>Bytes 13 to 16 Value in % or Amount for Button 3, if applicable</p>
<p>Byte 17, Display Mode for Button 4 (See Byte 2 for Details)</p>
<p>Bytes 18 to 21 Value in % or Amount for Button 4, if applicable</p>
<p>Byte 22, Display Mode for Button 5 (See Byte 2 for Details)</p>
<p>Bytes 23 to 26 Value in % or Amount for Button 5, if applicable</p>
<p>Byte 27, Display Mode for Button 6 (See Byte 2 for Details)</p>
<p>Bytes 28 to 31 Value in % or Amount for Button 6, if
applicable</p></td>
</tr>
<tr>
<td>Default</td>
<td><p>0x1, // show tip GUI using %</p>
<p>0x0, 0x0, 0x0, 0x0, 0x15, // button 1, %, value 15</p>
<p>0x0, 0x0, 0x0, 0x0, 0x20, // button 2, %, value 20</p>
<p>0x0, 0x0, 0x0, 0x0, 0x25, // button 3, %, value 25</p>
<p>0x2, 0x0, 0x0, 0x0, 0x0, // button 4 'no tip'</p>
<p>0x1, 0x0, 0x0, 0x0, 0x0, // button 5 'custom'</p>
<p>0x3, 0x0, 0x0, 0x0, 0x0, // button 6 disabled</p></td>
</tr>
</tbody>
</table>

Table 452 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 01010102 8902 C200 |

Table 453 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D1018204000000008482002ED1018501018704010101028921C21F00000000001500000000200000000025020000000001000000000300000000 |

Table 454 - Set Request Example

| Example (Hex) |
|----|
| AA0081040155D111842ED1118501018704010101028921C21F00000000001500000000200000000025020000000001000000000300000000 |

Table 455 - Set Response Example

| Example (Hex) |
|----|
| AA0081048255D1118204000000008482002ED1118501018704010101028921C21F00000000001500000000200000000025020000000001000000000300000000 |

##### Property 1.1.1.1.2.3 Tax Rate (Touch Only)

Table 456 - Property 1.1.1.1.2.3 Tax Rate (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.3/ 0x010101010203</td>
</tr>
<tr>
<td>Name</td>
<td>Tax Rate</td>
</tr>
<tr>
<td>Description</td>
<td>Tax Rate that is used when in Event Driven Mode</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>3</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>3</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x000000 – Tax Display and Calculation Disabled</p>
<p>0x000001 thru 0x999999- Tax Rate (0.0001% thru 99.9999%)</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x000000 - Tax Display and Calculation Disabled</td>
</tr>
</tbody>
</table>

Table 457 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101028902C300 |

Table 458 - Get Response Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081048255D10182040000000084820012D1018501018704010101028905C303000000 |

Table 459 - Set Request Example

| Example (Hex)                                            |
|----------------------------------------------------------|
| AA0081040155D1118412D1118501018704010101028905C303108725 |

Table 460 - Set Response Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081048255D11182040000000084820012D1118501018704010101028905C303108725 |

##### Property 1.1.1.1.2.4 Display Tax or Surcharge (Touch Only)

Table 461 - Property 1.1.1.1.2.4 Display Tax or Surcharge (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.4 / 0x010101010204</td>
</tr>
<tr>
<td>Name</td>
<td>Display Tax or Surcharge Control</td>
</tr>
<tr>
<td>Description</td>
<td>The device will check this property to determine to display Tax or
Surcharge label.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 – Display Tax</p>
<p>0x01 – Display Surcharge</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 – Display Tax</td>
</tr>
</tbody>
</table>

Table 462 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101028902C400 |

Table 463 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704010101028903C40100 |

Table 464 - Set Request Example

| Example (Hex)                                        |
|------------------------------------------------------|
| AA0081040155D1118410D1118501018704010101028903C40100 |

Table 465 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704010101028903C40100 |

##### Property 1.1.1.1.2.5 Disabled Tip Button Display Mode (Touch Only)

Table 466 - Property 1.1.1.1.2.5 Disabled Tip Button Display Mode (Touch
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.5 / 0x010101010205</td>
</tr>
<tr>
<td>Name</td>
<td>Disabled Tip Button Display Mode</td>
</tr>
<tr>
<td>Description</td>
<td>The device will check this property to determine how to handle or
display a disabled Tip button.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 – Display as Blank</p>
<p>0x01 – Display as Disabled (grayed-out)</p>
<p>0x02 - Invisible</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x02 - Invisible</td>
</tr>
</tbody>
</table>

Table 467 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101028902C500 |

Table 468 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704010101028903C50100 |

Table 469 - Set Request Example

| Example (Hex)                                        |
|------------------------------------------------------|
| AA0081040155D1118410D1118501018704010101028903C50100 |

Table 470 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704010101028903C50100 |

##### Property 1.1.1.1.2.6 Tip Mode Enable Submit on Amount Button Press

Table 471 - Property 1.1.1.1.2.6 Tip Mode Enable Submit on Amount Button
Press

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.2.6 / 0x010101010206</td>
</tr>
<tr>
<td>Name</td>
<td>Tip Mode Enable Submit on Amount Button Press</td>
</tr>
<tr>
<td>Description</td>
<td>When enabled, pressing an amount, percent, or ‘no tip’ button on the
tip entry page will proceed immediately without requiring a subsequent
tap of the ‘Submit’ button.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 – Disabled: Require submit button tap</p>
<p>0x01 – Enabled: Don’t require submit button tap</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 - Disabled</td>
</tr>
</tbody>
</table>

Table 472 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101028902C600 |

Table 473 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704010101028903C60101 |

Table 474 - Set Request Example

| Example (Hex)                                        |
|------------------------------------------------------|
| AA0081040155D1118410D1118501018704010101028903C60101 |

Table 475 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704010101028903C60101 |

##### Property 1.1.1.1.3.1 Timeout (Touch Only)

Table 476 - Property 1.1.1.1.3.1 Timeout (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.3.1 / 0x010101010301</td>
</tr>
<tr>
<td>Name</td>
<td>Timeout</td>
</tr>
<tr>
<td>Description</td>
<td>Transaction Timeout in seconds</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 – No Timeout</p>
<p>0x01 – 0xFF (1 to 255 Seconds)</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x78 – 120 seconds</td>
</tr>
</tbody>
</table>

Table 477 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101038902C100 |

Table 478 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704010101038903C10178 |

Table 479 - Set Request Example

| Example (Hex)                                        |
|------------------------------------------------------|
| AA0081040155D1118410D1118501018704010101038903C10150 |

Table 480 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704010101038903C10150 |

##### Property 1.1.1.1.3.2 Reader Options (Touch Only)

Table 481 - Property 1.1.1.1.3.2 Reader Options (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.3.2 / 0x010101010302</td>
</tr>
<tr>
<td>Name</td>
<td>Reader Options</td>
</tr>
<tr>
<td>Description</td>
<td>Configures which payment method interface is enabled, PIN Block
format</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>9</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>20</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td><p>810101 820101 830101 85020101 860100</p>
<p>MSR Enabled</p>
<p>Contact Enabled</p>
<p>Contactless Enabled</p>
<p>BCR Enabled and Encrypt Non-EMV</p>
<p>PIN Block Format 0</p></td>
</tr>
</tbody>
</table>

Table 482 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101038902C200 |

Table 483 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D10182040000000084820023D1018501018704010101038916C2148101018201018301018400000085020101860100 |

Table 484 - Set Request Example

| Example (Hex) |
|----|
| AA0081040155D111841FD1118501018704010101038912C21081010182010183010185020101860100 |

Table 485 - Set Response Example

| Example (Hex) |
|----|
| AA0081048255D1118204000000008482001FD1118501018704010101038912C21081010182010183010185020101860100 |

##### Property 1.1.1.1.3.3 Transaction Options (Touch Only)

Table 486 - Property 1.1.1.1.3.3 Transaction Options (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.3.3 / 0x010101010303</td>
</tr>
<tr>
<td>Name</td>
<td>Transaction Options</td>
</tr>
<tr>
<td>Description</td>
<td>Sets various device behaviors that change the transaction flow or
the way the device reports transaction results</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>20</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td><p>84020007</p>
<p>Apple VAS Disabled</p>
<p>Quickchip</p>
<p>Skip MSR signature capture if service code is chip card</p>
<p>Do not display amount in Quickchip</p></td>
</tr>
</tbody>
</table>

Table 487 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101038902C300 |

Table 488 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D10182040000000084820023D1018501018704010101038916C3148402000700000000000000000000000000000000 |

Table 489 - Set Request Example

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA0081040155D1118413D1118501018704010101038906C30484020007 |

Table 490 - Set Response Example

| Example (Hex) |
|----|
| AA0081048255D11182040000000084820013D1118501018704010101038906C30484020007 |

##### Property 1.1.1.1.3.4 Other TLV (Touch Only)

Table 491 - Property 1.1.1.1.3.4 Other TLV (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.1.1.3.4 / 0x010101010304</td>
</tr>
<tr>
<td>Name</td>
<td>Other TLV</td>
</tr>
<tr>
<td>Description</td>
<td>This is a list of self-contained TLV data objects that defines the
basic parameters for the transaction.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>3</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>100</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td><p>9C0100 9F0206000000000100 9F0306000000000000 5F2A020840
5F360102</p>
<p>Transaction Type = Purchase</p>
<p>Default Amount for Quickchip = $1.00</p>
<p>Amount, Other = 0</p>
<p>Transaction Currency Code = US Dollar</p>
<p>Transaction Currency Exponent = 2</p></td>
</tr>
</tbody>
</table>

Table 492 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501018704010101038902C400 |

Table 493 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D1018204000000008482002DD1018501018704010101038920C41E9C01009F02060000000001009F03060000000000005F2A0208405F360102 |

Table 494 - Set Request Example

| Example (Hex) |
|----|
| AA0081040155D111842DD1118501018704010101038920C41E9C01009F02060000000001009F03060000000000005F2A0208405F360102 |

Table 495 - Set Response Example

| Example (Hex) |
|----|
| AA0081048255D1118204000000008482002DD1118501018704010101038920C41E9C01009F02060000000001009F03060000000000005F2A0208405F360102 |

##### Property 1.1.1.1.4.1 EMV Configuration Filename

Table 496 - Property 1.1.1.1.4.1 EMV Configuration Filename

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.4.1 / 0x010101010401 |
| Name | EMV Configuration Filename |
| Description | This string contains the part number and the revision of the EMV Configuration File. |
| Securing Key | None |
| Min. Len (b) | 14 |
| Max. Len (b) | 14 |
| Data Type | ASCII |
| Valid Values | CFG000xxxx-xxx |
| Default | None |

Table 497 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040106D101841AD10181072B06010401F609850101890AE108E106E104E402C100 |

Table 498 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048206D10182040000000084820028D10181072B06010401F609850101</p>
<p>8918E116E114E112E410C10E434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

Table 499 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081040106D1118428D11181072B06010401F6098501018918E116E114E112E410C10E</p>
<p>434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

Table 500 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048206D11182040000000084820028D11181072B06010401F609850101</p>
<p>8918E116E114E112E410C10E434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.1.1.4.2 CA Public Key Configuration Filename

Table 501 - Property 1.1.1.1.4.2 CA Public Key Configuration Filename

| Property Description |  |
|----|----|
| Property OID | 1.1.1.1.4.2 / 0x010101010402 |
| Name | CA Public Key Configuration Filename |
| Description | This string contains the part number and the revision of the CA Public Key Configuration File. |
| Securing Key | None |
| Min. Len (b) | 14 |
| Max. Len (b) | 14 |
| Data Type | ASCII |
| Valid Values | CFG000xxxx-xxx |
| Default | None |

Table 502 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040106D101841AD10181072B06010401F609850101890AE108E106E104E402C200 |

Table 503 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048206D10182040000000084820028D10181072B06010401F609850101</p>
<p>8918E116E114E112E410C20E434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

Table 504 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081040106D1118428D11181072B06010401F6098501018918E116E114E112E410C20E</p>
<p>434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

Table 505 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048206D11182040000000084820028D11181072B06010401F609850101</p>
<p>8918E116E114E112E410C20E434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

#### Property Subgroup 1.1.2.nnn SRED Settings

##### Property 1.1.2.2.1.2 ISO/ABA Masking Character

Table 506 - Property 1.1.2.2.1.2 ISO/ABA Masking Character

| Property Description |  |
|----|----|
| Property OID | 1.1.2.2.1.2 / 0x010102020102 |
| Name | ISO/ABA Masking Character |
| Description | The device uses this property to determine what character it should use when sending masked ISO/ABA track data. If the **Property 1.1.2.2.1.5 PAN MOD 10 Check Digit Correction** is enabled, the masked portions of the track will always be masked with ‘0’. For more information about masking, see the information at the bottom of this section. |
| Securing Key | None |
| Min. Len (b) | 0x00 |
| Max. Len (b) | 0x01 |
| Data Type | Character |
| Valid Values | Any ASCII character |
| Default | ‘0’ |

Table 507 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 17 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E2 04 E1 02 C2 00 |

Table 508 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 17 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C2 01 2A |

Table 509 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C2 01 30 |

Table 510 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0F D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C2 01 30 |

When the device sends masked track data, it replaces some characters in
the track data with a specified mask character. The specific characters
the device masks depends on the card encode type. The device only
selectively masks data that came from ISO/ABA cards (Financial Cards
with ***ISO/IEC 7813*** Format code B); it sends data from all other
card types entirely unmasked.

The device masks all fields from ISO/ABA cards except a number of
configurable leading and trailing characters of the PAN. See **Property
1.1.2.2.1.3 PAN Number of Leading Unmasked Characters** and **Property
1.1.2.2.1.4 PAN Number of Trailing Unmasked Characters**.

For chip card transactions, masked track 2 data is contained in TLV data
object DFDF4D. For magnetic stripe transactions, masked track 1, 2 and 3
data is contained in TLV data objects DFDF31, DFDF33 and DFDF35,
respectively.

**Table 511** **below** provides an example of data from tracks 1, 2,
and 3 of an ISO/ABA card after it has been decrypted or if the device
has sent it in the clear. **Table 512** shows the same data as it might
appear with a specific set of masking rules applied.

Table 511 - Sample ISO/ABA Track Data, Clear Text / Decrypted

| Sample ISO/ABA Track Data, Clear Text / Decrypted |  |
|----|----|
| Track 1 | %B6011000995500000^ TEST CARD ^15121015432112345678? |
| Track 2 | ;6011000995500000=15121015432112345678? |
| Track 3 | ;6011000995500000=15121015432112345678333333333333333333333? |

Table 512 - Sample ISO/ABA Track Data, Masked

| Sample ISO/ABA Track Data, Masked |  |
|----|----|
| Track 1 | %B6011000020000000^0000000000^00000000000000000000? |
| Track 2 | ;6011000020000000=00000000000000000000? |
| Track 3 | ;6011000020000000=00000000000000000000000000000000000000000? |

##### Property 1.1.2.2.1.3 PAN Number of Leading Unmasked Characters

Table 513 - Property 1.1.2.2.1.3 PAN Number of Leading Unmasked
Characters

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.2.1.3 / 0x010102020103</td>
</tr>
<tr>
<td>Name</td>
<td>PAN Number of Leading Unmasked Characters</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine how many of the leading
characters of the PAN the device sends unmasked in <strong>Masked Track
x Data</strong> in ISO/ABA account information For details about ISO/ABA
track masking, see <strong>Property 1.1.2.2.1.2 ISO/ABA</strong> Masking
Character.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Min 0x00</p>
<p>Max 0x08, if PAN length is less than 16, the number of unmasked
characters will be limited to 6.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x04</td>
</tr>
</tbody>
</table>

Table 514 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 18 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E2 04 E1 02 C3 00 |

Table 515 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 18 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C3 01 04 |

Table 516 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 10 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C3 01 04 |

Table 517 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 10 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C3 01 04 |

##### Property 1.1.2.2.1.4 PAN Number of Trailing Unmasked Characters

Table 518 - Property 1.1.2.2.1.4 PAN Number of Trailing Unmasked
Characters

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.2.1.4 / 0x010102020104</td>
</tr>
<tr>
<td>Name</td>
<td>PAN Number of Trailing Unmasked Characters</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine how many of the trailing
characters of the PAN the device sends unmasked in <strong>Masked Track
x Data</strong> in ISO/ABA account information For details about ISO/ABA
track masking, see <strong>Property 1.1.2.2.1.2 ISO/ABA Masking
Character</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Min 0x00</p>
<p>Max 0x04</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x04</td>
</tr>
</tbody>
</table>

Table 519 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 19 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E2 04 E1 02 C4 00 |

Table 520 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 19 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C4 01 04 |

Table 521 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C4 01 04 |

Table 522 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 11 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C4 01 04 |

##### Property 1.1.2.2.1.5 PAN MOD 10 Check Digit Correction

Table 523 - Property 1.1.2.2.1.5 PAN MOD 10 Check Digit Correction

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.2.1.5 / 0x010102020105</td>
</tr>
<tr>
<td>Name</td>
<td>PAN MOD 10 Check Digit Correction</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should modify
one of the masked PAN digits such that the masked PAN passes the Luhn
MOD-10 algorithm check. If this property is enabled, the device uses
masking character ‘0’ to mask the PAN, regardless of the setting in
<strong>Property 1.1.2.2.1.2 ISO/ABA Masking Character</strong>, and
masks the remainder of the track data with the configured masking
character.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 524 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E2 04 E1 02 C5 00 |

Table 525 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1A D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C5 01 01 |

Table 526 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 12 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C5 01 01 |

Table 527 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 12 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C5 01 01 |

##### Property 1.1.2.2.1.6 PAN MOD 10 Check Digit Validation (MCE Only)

Table 528 - Property 1.1.2.2.1.6 PAN MOD 10 Check Digit Validation (MCE
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.2.1.6 / 0x010102020106</td>
</tr>
<tr>
<td>Name</td>
<td>PAN MOD 10 Check Digit Validation</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether to use the Luhn
MOD-10 algorithm to validate card number (PAN) digits a cardholder or
operator enters in manual card entry mode during <strong>Command 0x1001
- Start Transaction</strong>. If validation is enabled, the device
checks the PAN digits during entry, and until the PAN passes the check,
the device disables the ENTER key, sounds an error tone when the Enter
key is pressed (if the command has audio feedback enabled), and stays at
the Card Number prompt until the cardholder or operator presses the
Cancel button or corrects the PAN.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 529 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E2 04 E1 02 C6 00 |

Table 530 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1A D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C6 01 00 |

Table 531 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 12 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C6 01 01 |

Table 532 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 12 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E2 05 E1 03 C6 01 01 |

##### Property 1.1.2.4.1.1 Key Mapping of PIN-TDES (Touch Only)

Table 533 - Property 1.1.2.4.1.1 Key Mapping of PIN-TDES (Touch Only)Key
Mapping of PIN-TDES

| Property Description |  |
|----|----|
| Property OID | 1.1.2.4.1.1 / 0x010102040101 |
| Name | Key Mapping of PIN-TDES |
| Description | The device uses this property to determine which DUKPT Key Set and Variant shall be used for PIN-TDES. |
| Securing Key | None |
| Min. Len (b) | 0x03 |
| Max. Len (b) | 0x03 |
| Data Type | Binary |
| Valid Values | See DUKPT Key Mapping for detail information. |
| Default | 0x00, 0x00, 0x01 |

Table 534 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040159D101 841AD101 81072B06010401F609 850101 890AE108E206E404E102C100 |

Table 535 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 81048259D101 820400000000 8482001DD101 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C1 03200701</p></td>
</tr>
</tbody>
</table>

Table 536 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104015AD111 841DD111 81072B06010401F609 850101
890DE10BE209E407E105C1</p>
<p>03200701</p></td>
</tr>
</tbody>
</table>

Table 537 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104825AD111 820400000000 8482001DD111 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C1 03200701</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.2.4.1.2 Key Mapping of Account Data

Table 538 - Property 1.1.2.4.1.2 Key Mapping of Account DataKey Mapping
of Account Data

| Property Description |  |
|----|----|
| Property OID | 1.1.2.4.1.2 / 0x010102040102 |
| Name | Key Mapping of Account Data |
| Description | The device uses this property to determine which DUKPT Key Set and Variant/Usage shall be used for Account Data. |
| Securing Key | None |
| Min. Len (b) | 0x03 |
| Max. Len (b) | 0x03 |
| Data Type | Binary |
| Valid Values | See DUKPT Key Mapping for detail information. |
| Default | 0x20, 0x07, 0x04 |

Table 539 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040159D101 841AD101 81072B06010401F609 850101 890AE108E206E404E102C200 |

Table 540 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 81048259D101 820400000000 8482001DD101 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C2 03200704</p></td>
</tr>
</tbody>
</table>

Table 541 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104015AD111 841DD111 81072B06010401F609 850101
890DE10BE209E407E105C2</p>
<p>03200704</p></td>
</tr>
</tbody>
</table>

Table 542 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104825AD111 820400000000 8482001DD111 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C2 03200704</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.2.4.1.3 Key Mapping of MAC

Table 543 - Property 1.1.2.4.1.3 Key Mapping of MACKey Mapping of MAC

| Property Description |  |
|----|----|
| Property OID | 1.1.2.4.1.3 / 0x010102040103 |
| Name | Key Mapping of MAC |
| Description | The device uses this property to determine which DUKPT Key Set and Variant/Usage shall be used for MAC. |
| Securing Key | None |
| Min. Len (b) | 0x03 |
| Max. Len (b) | 0x03 |
| Data Type | Binary |
| Valid Values | See DUKPT Key Mapping for detail information. |
| Default | 0x20, 0x07, 0x02 |

Table 544 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040159D101 841AD101 81072B06010401F609 850101 890AE108E206E404E102C300 |

Table 545 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 81048259D101 820400000000 8482001DD101 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C3 03200702</p></td>
</tr>
</tbody>
</table>

Table 546 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104015AD111 841DD111 81072B06010401F609 850101
890DE10BE209E407E105C3</p>
<p>03200702</p></td>
</tr>
</tbody>
</table>

Table 547 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104825AD111 820400000000 8482001DD111 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C3 03200702</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.2.4.1.4 Key Mapping of Magneprint (MSR Only)

Table 548 - Property 1.1.2.4.1.4 Key Mapping of Magneprint (MSR Only)Key
Mapping of Magneprint

| Property Description |  |
|----|----|
| Property OID | 1.1.2.4.1.4 / 0x010102040104 |
| Name | Key Mapping of Magneprint |
| Description | The device uses this property to determine which DUKPT Key Set and Variant/Usage shall be used for Magneprint. |
| Securing Key | None |
| Min. Len (b) | 0x03 |
| Max. Len (b) | 0x03 |
| Data Type | Binary |
| Valid Values | See DUKPT Key Mapping for detail information. |
| Default | 0x20, 0x07, 0x04 |

Table 549 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040159D101 841AD101 81072B06010401F609 850101 890AE108E206E404E102C400 |

Table 550 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 81048259D101 820400000000 8482001DD101 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C4 03200704</p></td>
</tr>
</tbody>
</table>

Table 551 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104015AD111 841DD111 81072B06010401F609 850101
890DE10BE209E407E105C4</p>
<p>03200704</p></td>
</tr>
</tbody>
</table>

Table 552 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104825AD111 820400000000 8482001DD111 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C4 03200704</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.2.4.1.5 Key Mapping of MagTek Token

This OID is reserved for Mey Mapping of MagTek Token.

##### Property 1.1.2.4.1.6 Key Mapping of User Data 1

This OID is reserved for Mey Mapping of User Data 1.

##### Property 1.1.2.4.1.7 Key Mapping of PIN-AES (Touch Only)

Table 553 - Property 1.1.2.4.1.7 Key Mapping of PIN-AES (Touch Only)Key
Mapping of PIN-AES

| Property Description |  |
|----|----|
| Property OID | 1.1.2.4.1.7 / 0x010102040107 |
| Name | Key Mapping of PIN-AES |
| Description | The device uses this property to determine which DUKPT Key Set and Usage shall be used for PIN-AES. |
| Securing Key | None |
| Min. Len (b) | 0x03 |
| Max. Len (b) | 0x03 |
| Data Type | Binary |
| Valid Values | See DUKPT Key Mapping for detail information. |
| Default | 0x00, 0x00, 0x07 |

Table 554 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040159D101 841AD101 81072B06010401F609 850101 890AE108E206E404E102C700 |

Table 555 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 81048259D101 820400000000 8482001DD101 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C7 03200207</p></td>
</tr>
</tbody>
</table>

Table 556 - Set Request Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104015AD111 841DD111 81072B06010401F609 850101
890DE10BE209E407E105C7</p>
<p>03200207</p></td>
</tr>
</tbody>
</table>

Table 557 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104825AD111 820400000000 8482001DD111 81072B06010401F609
850101</p>
<p>890DE10BE209E407E105C7 03200207</p></td>
</tr>
</tbody>
</table>

##### Property 1.1.2.5.1.1 AAMVA Allowed (MSR Only)

Table 558 - Property 1.1.2.5.1.1 AAMVA Allowed (MSR Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.5.1.1 / 0x010102 050101</td>
</tr>
<tr>
<td>Name</td>
<td>AAMVA Allowed</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should accept
AAMVA (driver’s license) and other permutations of ISO encoded cards in
addition to ISO/ABA financial cards. If this is disabled, the
<strong>EMV ARQC Type</strong> the device returns to the host includes
Track Status = <strong>Error</strong> for any track that exists but does
not comply with ISO/ABA financial card format.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 559 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1B D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E5 04 E1 02 C1 00 |

Table 560 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1B D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C1 01 01 |

Table 561 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 14 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C1 01 01 |

Table 562 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 14 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C1 01 01s |

##### Property 1.1.2.5.1.2 Track 1 Enable (MSR Only)

Table 563 - Property 1.1.2.5.1.2 Track 1 Enable (MSR Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.5.1.2 / 0x010102050102</td>
</tr>
<tr>
<td>Name</td>
<td>Track 1 Enable</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should read
include or suppress Track 1 data when reading and transmitting ISO/ABA
account information from a card’s magnetic stripe.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 564 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1C D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E5 04 E1 02 C2 00 |

Table 565 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1C D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C2 01 01 |

Table 566 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 17 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C2 01 01 |

Table 567 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 17 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C2 01 01 |

##### Property 1.1.2.5.1.3 Track 2 Enable (MSR Only)

Table 568 - Property 1.1.2.5.1.3 Track 2 Enable (MSR Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.5.1.3 / 0x010102050103</td>
</tr>
<tr>
<td>Name</td>
<td>Track 2 Enable</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should read
include or suppress Track 2 data when reading and transmitting ISO/ABA
account information from a card’s magnetic stripe.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 569 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1D D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E5 04 E1 02 C3 00 |

Table 570 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1D D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C3 01 01 |

Table 571 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 09 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C3 01 01 |

Table 572 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 09 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C3 01 01 |

##### Property 1.1.2.5.1.4 Track 3 Enable (MSR Only)

Table 573 - Property 1.1.2.5.1.4 Track 3 Enable (MSR Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.5.1.4 / 0x010102050104</td>
</tr>
<tr>
<td>Name</td>
<td>Track 2 Enable</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should read
include or suppress Track 3 data when reading and transmitting ISO/ABA
account information from a card’s magnetic stripe.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x01</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 574 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E5 04 E1 02 C4 00 |

Table 575 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 02 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C4 01 01 |

Table 576 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0A D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C4 01 01 |

Table 577 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0A D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E1 09 E2 07 E5 05 E1 03 C4 01 01 |

##### Property 1.1.2.6.1.1 Selectable Card Data Encryption Enable (MAGTEK INTERNAL ONLY FOR NOW)

<table>
<caption><p>Table 578 - Property 1.1.2.6.1.1 Selectable Card Data
Encryption Enable (MAGTEK INTERNAL ONLY FOR NOW)</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.1.2.6.1.1 / 0x010102060101</td>
</tr>
<tr>
<td>Name</td>
<td>Selectable Card Data Encryption Enable</td>
</tr>
<tr>
<td>Description</td>
<td>The host can use this property to enable Selectable Card Data
Encryption. Each bit enables a specific card data encryption by setting
that bit to 1. Byte 0 is the first byte, bit 0 is the LSB of each byte.
This is a secured OID, the set request shall be from 0xD112 command. If
the Key DKPTM1F has not been injected, enabling any bits in this OID
will return failure response status 80-02-05-27 (TR31 errors, Key not
present). If the Key DKPTM1F becomes unavailable after this OID has been
enabled, then this OID will be reset to 0 as a status indicator.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>Refer to 0xD112 Command.</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0x02</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>0x02</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>This OID is bit mapped as follows:</p>
<p>Byte 0</p>
<p>• bit 0: Card Holder Name</p>
<p>• bit 1: Reserved</p>
<p>• bit 2: Expiration Date</p>
<p>• bit 3: Service Code</p>
<p>• bit 4: T1 Discretionary Data</p>
<p>• bit 5: T2 Discretionary Data</p>
<p>• bit 6 - 7: Reserved</p>
<p>Byte 1</p>
<p>• bit 0 - 7: Reserved</p>
<p>The host shall set all the reserved bits to 0.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x0000</td>
</tr>
</tbody>
</table>

Table 579 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E1 08 E2 06 E6 04 E1 02 C1 00 |

Table 580 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 1C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0C E1 0A E2 08 E6 06 E1 04 C1 02 3F 00 |

Table 581 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0B D1 12 84 5D EE EE A1 19 81 05 03 03 06 02 08 84 00 85 00 A8 0A 81 02 11 11 82 00 86 00 88 00 A9 00 82 04 BE 00 11 D0 83 08 E7 9F B1 FE 99 9F 8D A2 84 1C D1 12 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0C E1 0A E2 08 E6 06 E1 04 C1 02 3F 00 9E 10 D9 38 F1 6E 7F 8C CE 87 02 35 0F DF 8C C2 75 64 |

Table 582 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0B D1 12 82 04 00 00 00 00 84 82 00 1C D1 12 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0C E1 0A E2 08 E6 06 E1 04 C1 02 3F 00 |

### Property Group 1.2.nnnn Device Settings

#### Property Subgroup 1.2.1.nnn Transaction Settings

##### Property 1.2.1.1.1.1 Device-Driven Fallback Behavior (MSR Only)

Table 583 - Property 1.2.1.1.1.1 Device-Driven Fallback Behavior (MSR
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.1.1 / 0x010201010101</td>
</tr>
<tr>
<td>Name</td>
<td>Device-Driven Fallback Behavior</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether it should
automatically implement payment brand fallback rules without host
intervention when running <strong>Command 0x1001 - Start
Transaction</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = No device-driven fallback</p>
<p>0x01 = Device-driven fallback enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 584 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E1 02 C1 00 |

Table 585 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 04 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E1 03 C1 01 01 |

Table 586 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E1 03 C1 01 01 |

Table 587 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 02 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E1 03 C1 01 01 |

##### Property 1.2.1.1.1.2 Application Selection Behavior (Contactless Only)

Table 588 - Property 1.2.1.1.1.2 Application Selection Behavior
(Contactless Only)Application Selection Behavior

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.1.2 / 0x010201010102</td>
</tr>
<tr>
<td>Name</td>
<td>Application Selection Behavior</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the device’s application
selection behavior for payment brand selection.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 –Card Preference.</p>
<p>The device automatically chooses the application that is mutually
supported by the card and the terminal, based on the priority order
specified by the card. This is the default and is standard EMV
transaction flow behavior.</p>
<p>0x01 – Reserved</p>
<p>0x02 – Reserved</p>
<p>0x03 – Enhanced Prompt Cardholder.</p>
<p>The device sends the host <strong>Notification 0x1803 – 02 02 00
00</strong> (Display Cardholder, Data Attached, Reserved) to request
that the cardholder select from a list of available applications. Each
application may include additional tags such as - priority indicator,
Issuer Country Code and Issuer Identification Number. After the
cardholder selects an application, the host passes the selection to the
device using <strong>Command 0x1802 - Report Cardholder
Selection</strong> to device to return the cardholder’s selection to the
device.</p>
<p>Note that if the device is configured to use this option, the
cardholder must hold the card or contactless payment device in contact
with the device for until cardholder application selection is complete,
otherwise the device will report the transaction failed. For this
reason, MagTek does not recommend using this setting.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 – Card Preference</td>
</tr>
</tbody>
</table>

Table 589 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02010101 8902 C200 |

Table 590 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 02 01 01 01 89 03 C2 01 00 |

Table 591 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402010101 8903 C20103 |

Table 592 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 02 01 01 01 89 03 C2 01 03 |

##### Property 1.2.1.1.2.1 Signature Capture Control

Table 593 - Property 1.2.1.1.2.1 Signature Capture Control

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.2.1 / 0x010201010201</td>
</tr>
<tr>
<td>Name</td>
<td>Signature Capture Control</td>
</tr>
<tr>
<td>Description</td>
<td>The host can use this property to change whether the device
automatically prompts the cardholder for a signature when running
<strong>Command 0x1001 - Start Transaction</strong>, or leaves the
triggering of signature capture prompts to the host.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Device-driven Signature Capture</p>
<p>0x01 = Host-driven Signature Capture</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 594 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E2 02 C1 00 |

Table 595 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 04 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C1 01 01 |

Table 596 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C1 01 01 |

Table 597 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 02 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C1 01 01 |

##### Property 1.2.1.1.2.2 Include Signature Data in EMV Batch Data (Touch Only)

Table 598 - Property 1.2.1.1.2.2 Include Signature Data in EMV Batch
Data (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.2.2 / 0x010201010202</td>
</tr>
<tr>
<td>Name</td>
<td>Include Signature Data in EMV Batch Data</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine whether to include
signature capture coordinate data in TLV data object DFDF3E when it
returns <strong>EMV Batch Data Type</strong> while running
<strong>Command 0x1001 - Start Transaction</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Include signature data in <strong>EMV Batch Data
Type</strong></p>
<p>0x01 = RESERVED. Make signature data available as file. Use
<strong>Command 0xD821 - Start Get File from Device</strong> to request
file type <strong>Signature Capture File</strong> to retrieve the data
as a <strong>Signature Capture File Type</strong>.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 599 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E2 02 C2 00 |

Table 600 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 04 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C2 01 01 |

Table 601 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C2 01 01 |

Table 602 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 02 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C2 01 01 |

##### Property 1.2.1.1.2.3 Signature Timing Window (Touch Only)

Table 603 - Property 1.2.1.1.2.3 Signature Timing Window (Touch Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.2.3 / 0x010201010203</td>
</tr>
<tr>
<td>Name</td>
<td>Signature Timing Window</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine how long to wait, in
seconds, for <strong>Command 0x1801 - Request Cardholder
Signature</strong> while running <strong>Command 0x1001 - Start
Transaction</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = No Wait Time. If the device uses this setting, the host
must wait at least one second after receiving <strong>Notification
0x0105 - Transaction Operation Complete</strong> before performing any
other operations.</p>
<p>0x01..0xFF = Wait the Specified Number of Seconds</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01 (second)</td>
</tr>
</tbody>
</table>

Table 604 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 04 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E2 02 C3 00 |

Table 605 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 04 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C3 01 03 |

Table 606 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 02 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C3 01 01 |

Table 607 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 02 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E2 03 C3 01 01 |

##### Property 1.2.1.1.3.1 Contactless Low Power Card Detect (Contactless Only)

Table 608 - Property 1.2.1.1.3.1 Contactless Low Power Card Detect
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.3.1 / 0x0102010100301</td>
</tr>
<tr>
<td>Name</td>
<td>Contactless Low Power Card Detect</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to enable/disable contactless low
power card detect (Proximity Detection Mode). When disabled, device will
read a contactless card as soon as the card is detected. If enabled,
device will track and delay reading a contactless card, allowing user to
use Contact or MSR card slots.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disable</p>
<p>0x01 = Enable</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 - Disabled</td>
</tr>
</tbody>
</table>

Table 609 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 01 84 0F D1 01 85 01 01 87 04 02 01 01 03 89 02 C1 00 |

Table 610 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 02 01 01 03 89 03 C1 01 00 |

Table 611 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 10 D1 11 85 01 01 87 04 02 01 01 03 89 03 C1 01 00 |

Table 612 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 02 01 01 03 89 03 C1 01 00 |

##### Property 1.2.1.1.4.1 MIFARE Ultralight C 2keys3DES

Table 613 - Property 1.2.1.1.4.1 MIFARE Ultralight C 2keys3DES

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.1 / 0x0102010100401</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Ultralight C 2keys3DES</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the 2keys 3DES
for MIFARE Ultralight C authentication.</p>
<p>On an example of Key1 = 0001020304050607h and Key2 =
08090A0B0C0D0E0Fh, the setting should be
000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
3-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>49454D4B 41455242 214E4143 554F5946</td>
</tr>
</tbody>
</table>

Table 614 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C1 00 |

Table 615 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 1D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0D E2 0B E1 09 E1 07 E4 05 C1 03 29 07 96 |

Table 616 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C1 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 617 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C1 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

##### Property 1.2.1.1.4.2 MIFARE Ultralight AES DataProtKey.

Table 618 - Property 1.2.1.1.4.2 MIFARE Ultralight AES DataProtKey.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.2 / 0x0102010100402</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Ultralight AES DataProtKey.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the
AES_DataProtKey for MIFARE Ultralight AES authentication.</p>
<p>On an example of ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 619 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C2 00 |

Table 620 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C204763CBCDE |

Table 621 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C2 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 622 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C210000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.3 MIFARE Ultralight AES UIDRetrKey.

Table 623 - Property 1.2.1.1.4.3 MIFARE Ultralight AES UIDRetrKey.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.3 / 0x0102010100403</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Ultralight AES UIDRetrKey.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES
UIDRetrKey for MIFARE Ultralight AES authentication.</p>
<p>On an example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 624 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C3 00 |

Table 625 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C304B548CFB4 |

Table 626 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C3 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 627 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C310000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.4 MIFARE Ultralight AES OriginalityKey.

Table 628 - Property 1.2.1.1.4.4 MIFARE Ultralight AES OriginalityKey.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.4 / 0x0102010100404</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Ultralight AES OriginalityKey.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES
OriginalityKey for MIFARE Ultralight AES.</p>
<p>On an example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 629 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C4 00 |

Table 630 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C404763CBCDE |

Table 631 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C4 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 632 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C410000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.5 MIFARE Plus AES_Key1.

Table 633 - Property 1.2.1.1.4.5 MIFARE Plus AES_Key1.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.5 / 0x0102010100405</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key1.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key1 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 634 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C5 00 |

Table 635 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C504763CBCDE |

Table 636 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C5 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 637 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C510000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.6 MIFARE Plus AES_Key2.

Table 638 - Property 1.2.1.1.4.6 MIFARE Plus AES_Key2.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.6 / 0x0102010100406</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key2.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key2 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 639 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C6 00 |

Table 640 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C604763CBCDE |

Table 641 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C6 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 642 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C610000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.7 MIFARE Plus AES_Key3.

Table 643 - Property 1.2.1.1.4.7 MIFARE Plus AES_Key3.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.7 / 0x0102010100407</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key3.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key3 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 644 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C7 00 |

Table 645 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C704763CBCDE |

Table 646 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C7 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 647 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C710000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.8 MIFARE Plus AES_Key4.

Table 648 - Property 1.2.1.1.4.8 MIFARE Plus AES_Key4.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.8 / 0x0102010100408</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key4.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key4 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 649 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C8 00 |

Table 650 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C804763CBCDE |

Table 651 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C8 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 652 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C810000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.9 MIFARE Plus AES_Key5.

Table 653 - Property 1.2.1.1.4.9 MIFARE Plus AES_Key5.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.9 / 0x0102010100409</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key5.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key5 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 654 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 C9 00 |

Table 655 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406C904763CBCDE |

Table 656 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 C9 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 657 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412C910000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.4.A MIFARE Plus AES_Key6.

Table 658 - Property 1.2.1.1.4.A MIFARE Plus AES_Key6.

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.4.A / 0x010201010040A</td>
</tr>
<tr>
<td>Name</td>
<td>MIFARE Plus AES_Key6.</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set 16-byte of the AES_Key6 for
MIFARE Plus.</p>
<p>On example of the ASE Key = 000102030405060708090A0B0C0D0E0Fh, the
setting should be 000102030405060708090A0B0C0D0E0F</p>
<p>For security, the Get request for this property will always return
4-MSB of KCV.</p>
<p>This key will be encrypted and stored in KPM.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>00000000 00000000 00000000 00000000</td>
</tr>
</tbody>
</table>

Table 659 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E4 02 CA 00 |

Table 660 - Get Response Example

| Example (Hex) |
|----|
| AA00810482D3D1018204000000008482001ED10181072B06010401F609850101890EE20CE10AE108E406CA04763CBCDE |

Table 661 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 1F D1 11 85 01 01 87 04 02 01 01 04 89 12 CA 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F |

Table 662 - Set Response Example

| Example (Hex) |
|----|
| AA00810482E5D1118204000000008482002AD11181072B06010401F609850101891AE218E116E114E412CA10000102030405060708090A0B0C0D0E0F |

##### Property 1.2.1.1.5.1 MCE Mode Setting

Table 663 - Property 1.2.1.1.5.1 MCE Mode Setting

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.1.1.5.1 / 0x0102010100501</td>
</tr>
<tr>
<td>Name</td>
<td>MCE Mode Setting (MCE: Manual Card Entry)</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine how to present a sequence
of pages to the host, prompting the cardholder or operator to enter the
specified sequence of values.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Card Number, Expiration Date, CVV/CVC/Card ID</p>
<p>0x01 = Card Number, Expiration Date</p>
<p>0x02 = Card Number, CVV/CVC/Card ID</p>
<p>0x03 = Card Number</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 664 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E1 06 E1 04 E5 02 C1 00 |

Table 665 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E5 03 C1 01 03 |

Table 666 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E5 03 C1 01 03 |

Table 667 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E1 07 E1 05 E5 03 C1 01 03 |

#### Property Subgroup 1.2.2.1.nn WLAN Settings (WLAN Only)

##### Property 1.2.2.1.1.1 SSID

Table 668 - Property 1.2.2.1.1.1 SSID

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.1 / 0x010202010101 |
| Name | SSID |
| Description | The device uses this property to set SSID for WLAN settings. If the SSID is shorter than 32 bytes, all remaining bytes after the SSID should be set to zeros. |
| Securing Key | None |
| Min. Len (b) | 32 |
| Max. Len (b) | 32 |
| Data Type | Binary |
| Valid Values |  |
| Default | None |

Table 669 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040122D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C100 |

Table 670 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048222D101 820400000000 8482003AD101 81072B06010401F609 850101 892AE228E226E124E122C1204D79535349440000000000000000000000000000000000000000000000000000 |

Table 671 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040121D111 843AD111 81072B06010401F609 850101 892AE228E226E124E122C120 4D79535349440000000000000000000000000000000000000000000000000000 |

Table 672 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048221D111 820400000000 8482003AD111 81072B06010401F609 850101 892AE228E226E124E122C1204D79535349440000000000000000000000000000000000000000000000000000 |

##### Property 1.2.2.1.1.2 Password

Table 673 - Property 1.2.2.1.1.2 Password

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.2 / 0x010202010102</td>
</tr>
<tr>
<td>Name</td>
<td>Password</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set password for WLAN settings.
If the password is shorter than 63 bytes, all remaining bytes after the
password should be set to zeros.</p>
<p>For EAP-PEAP authentication, the maximum length of password is 32
bytes. The real password has to be &lt;= 32 bytes, all bytes after the
desired password must be set to zeroes.</p>
<p>For security, the Get request for this property will always return a
value with 63 zeroes, so you can only set the password and not get
it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>63</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>63</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 674 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040110D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C200 |

Table 675 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820CD101 820400000000 84820059D101 81072B06010401F609 850101 8949E247E245E143E141C23F00000000 |

Table 676 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040112D111 8459D111 81072B06010401F609 850101 8949E247E245E143E141C23F546F744031386342 |

Table 677 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048212D111 820400000000 84820059D111 81072B06010401F609 850101 8949E247E245E143E141C23F546F744031386342 |

##### Property 1.2.2.1.1.3 Security Mode

Table 678 - Property 1.2.2.1.1.3 Security Mode

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.3 / 0x010202010103</td>
</tr>
<tr>
<td>Name</td>
<td>Security Mode</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to determine the authentication method
to be used to connect to an WiFi Access Point.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = PSK (Personal) Mode, requires <strong>Property 1.2.2.1.1.2
Password</strong></p>
<p>0x01 = EAP-PEAP (Enterprise) Mode, requires <strong>Property
1.2.2.1.1.2 Password</strong>, <strong>Property 1.2.2.1.1.C
Username</strong></p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 679 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040103D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C300 |

Table 680 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048203D101 820400000000 8482001BD101 81072B06010401F609 850101 890BE209E207E105E103C30100 |

Table 681 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040104D111 841BD111 81072B06010401F609 850101 890BE209E207E105E103C30101 |

Table 682 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048204D111 820400000000 8482001BD111 81072B06010401F609 850101 890BE209E207E105E103C30101 |

##### Property 1.2.2.1.1.4 Static IP Address

Table 683 - Property 1.2.2.1.1.4 Static IP Address

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.4 / 0x010202010104 |
| Name | Static_IP_Address |
| Description | The device uses this property as its IP address in web socket mode if **Property 1.2.2.1.1.5 Use DHCP** is set to 0000 (Static IP mode). |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | IP4 Format/quad decimal (x.x.x.x) |
| Valid Values | 0.0.0.0 to 255.255.255 |
| Default | None |

Table 684 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040105D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C400 |

Table 685 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048205D101 820400000000 8482001ED101 81072B06010401F609 850101 890EE20CE20AE108E106C404C0A80177 |

Table 686 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040111D111 841ED111 81072B06010401F609 850101 890EE20CE20AE108E106C404C0A8016D |

Table 687 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048211D111 820400000000 8482001ED111 81072B06010401F609 850101 890EE20CE20AE108E106C404C0A8016D |

##### Property 1.2.2.1.1.5 Use DHCP

Table 688 - Property 1.2.2.1.1.5 Use DHCP

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.5 / 0x010202010105</td>
</tr>
<tr>
<td>Name</td>
<td>Use_DHCP</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if it gets its IP from
a DHCP server or uses a static IP.</p>
<p>0000—use static IP address;</p>
<p>othervalue—get IP address from DHCP server</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0000 to FFFF</td>
</tr>
<tr>
<td>Default</td>
<td>0001</td>
</tr>
</tbody>
</table>

Table 689 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040117D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C500 |

Table 690 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048217D101 820400000000 8482001ED101 81072B06010401F609 850101 890EE20CE20AE108E106C50400000001 |

Table 691 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040116D111 841ED111 81072B06010401F609 850101 890EE20CE20AE108E106C50400000001 |

Table 692 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048216D111 820400000000 8482001ED111 81072B06010401F609 850101 890EE20CE20AE108E106C50400000001 |

##### Property 1.2.2.1.1.6 Static IP Netmask

Table 693 - Property 1.2.2.1.1.6 Static IP Netmask

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.6 / 0x010202010106 |
| Name | Static_IP_Netmask |
| Description | The device uses this property as its network mask in web socket mode. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | IP4 Format/quad decimal (x.x.x.x) |
| Valid Values | 0.0.0.0 to 255.255.255.255 |
| Default | None |

Table 694 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040118D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C600 |

Table 695 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048218D101 820400000000 8482001ED101 81072B06010401F609 850101 890EE20CE20AE108E106C604FFFFFF00 |

Table 696 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040119D111 841ED111 81072B06010401F609 850101 890EE20CE20AE108E106C604FFFFFF00 |

Table 697 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048219D111 820400000000 8482001ED111 81072B06010401F609 850101 890EE20CE20AE108E106C604FFFFFF00 |

##### Property 1.2.2.1.1.7 Static IP Gateway

Table 698 - Property 1.2.2.1.1.7 Static IP Gateway

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.7 / 0x010202010107 |
| Name | Static_IP_Gateway |
| Description | The device uses this property as its network gateway IP address. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | IP4 Format/quad decimal (x.x.x.x) |
| Valid Values | 0.0.0.0 to 255.255.255.255 |
| Default | None |

Table 699 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104011AD101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C700 |

Table 700 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104821BD101 820400000000 8482001ED101 81072B06010401F609 850101 890EE20CE20AE108E106C704C0A801FE |

Table 701 - Set Request Example

| Example (Hex) |
|----|
| AA00 8104011CD111 841ED111 81072B06010401F609 850101 890EE20CE20AE108E106C704C0A801FE |

Table 702 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104821CD111 820400000000 8482001ED111 81072B06010401F609 850101 890EE20CE20AE108E106C704C0A801FE |

##### Property 1.2.2.1.1.8 Device Name

Table 703 - Property 1.2.2.1.1.8 Device Name

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.8 / 0x010202010108 |
| Name | Device Name |
| Description | The device uses this property to set Device Name for WLAN settings. Device Name is registered to the DNS which adds the domain name to create a hostname. Use Hostname to connect to device WebSocket. If the Device Name is shorter than 64 bytes, all remaining bytes after the Device Name should be set to zeros. |
| Securing Key | None |
| Min. Len (b) | 64 |
| Max. Len (b) | 64 |
| Data Type | Binary |
| Valid Values |  |
| Default | None |

Table 704 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C800 |

Table 705 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048228D101 820400000000 8482005AD101 81072B06010401F609 850101 894AE248E246E144E142C84064662D78787878787878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 |

Table 706 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040127D111 845AD111 81072B06010401F609 850101 894AE248E246E144E142C840 64662D78787878787878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 |

Table 707 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048227D111 820400000000 8482005AD111 81072B06010401F609 850101 894AE248E246E144E142C84064662D78787878787878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 |

##### Property 1.2.2.1.1.9 Wireless Heartbeat Time

Table 708 - Property 1.2.2.1.1.9 Wireless Heartbeat Time

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.9 / 0x010202010109 |
| Name | Wireless Heartbeat Time |
| Description | The device uses this property to set Heartbeat Time for WLAN settings. Device will check the Websocket connection based on this timer setting. The unit is second. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00 to 0xFF |
| Default | 0x00 (disabled) |

Table 709 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104011AD101 841AD101 81072B06010401F609 850101 890AE208E206E104E102C900 |

Table 710 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104821AD101 820400000000 8482001BD101 81072B06010401F609 850101 890BE209E207E105E103C90100 |

Table 711 - Set Request Example

| Example (Hex) |
|----|
| AA00 8104011CD111 841BD111 81072B06010401F609 850101 890BE209E207E105E103C90120 |

Table 712 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104821CD111 820400000000 8482001BD111 81072B06010401F609 850101 890BE209E207E105E103C90120 |

##### Property 1.2.2.1.1.A Maximum Client Connections

Table 713 - Property 1.2.2.1.1.A Maximum Client Connections

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.A / 0x01020201010A</td>
</tr>
<tr>
<td>Name</td>
<td>Maximum Client Connections</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine how many clients it
will allow to connect to its WLAN WebSocket server at one time. Most use
cases will only want to allow one client at a time. If more than one
client is connected, all outgoing data from the device will be sent to
all clients. For example, all notifications and all command responses
will be sent to all clients. If more than one client is connected, any
client can send a command to the device at any time. Since having more
than one client send commands to the device at the same time can result
in command collisions and unexpected device behavior, it is recommended
that only one client be in charge of sending commands and that other
clients only listen to outgoing messages. A use case for allowing more
than once client may be to have a second client for diagnostic or
monitoring purposes.</p>
<p><strong>Property 2.1.2.5.6.4 Active Client Connections</strong> is
related.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x01 – 0x04</td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 714 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020101 8902 CA00 |

Table 715 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020201018903CA0101 |

Table 716 - Set Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020101 8903 CA0101 |

Table 717 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020201018903CA0101 |

##### Property 1.2.2.1.1.B Certificate Expiring Soon Notification Threshold

Table 718 - Property 1.2.2.1.1.B Certificate Expiring Soon Notification
Threshold

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.B / 0x01020201010B</td>
</tr>
<tr>
<td>Name</td>
<td>Certificate Expiring Soon Notification Threshold</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine how many days before a
certificate expires it should start notifying the host that it is about
to expire. If the value is set to 0, the notification will be
disabled.</p>
<p>The notification will only be sent if TLS is enabled, and the
notification will only be sent for they server certificate that the
device is configured to use. The notification will be sent every time
the first client connects to the device shortly after it connects.</p>
<p><strong>Notification 0x1001 - Device Information Update</strong>
category Key management, reason Certificate Expiring Soon is
related.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0xFF</td>
</tr>
<tr>
<td>Default</td>
<td>0x1E (30 days)</td>
</tr>
</tbody>
</table>

Table 719 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020101 8902 CB00 |

Table 720 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020201018903CB011E |

Table 721 - Set Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020101 8903 CB011E |

Table 722 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020201018903CB011E |

##### Property 1.2.2.1.1.C Username

Table 723 - Property 1.2.2.1.1.C Username

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.C / 0x01020201010C</td>
</tr>
<tr>
<td>Name</td>
<td>Username</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set up the Username for EAP-PEAP
authentication method which is used to connect to an WiFi Access Point.
Username is not used by</p>
<p>PSK authentication method.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>32</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Example: joe@MagTek.com</td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 724 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010DD101 841AD101 81072B06010401F609 850101 890AE208E206E104E102CC00 |

Table 725 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104820DD101 820400000000 8482003AD101 81072B06010401F609
850101</p>
<p>892AE228E226E124E122CC
206A6F65406D616774656B2E636F6D00000000000000</p>
<p>0000000000000000000000</p></td>
</tr>
</tbody>
</table>

Table 726 - Set Request Example

| Example (Hex) |
|----|
| AA00 8104010ED111 843AD111 81072B06010401F609 850101 892AE228E226E124E122CC 206A6F65406D616774656B2E636F6D000000000000000000 |

Table 727 - Set Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104820ED111 820400000000 8482003AD111 81072B06010401F609
850101</p>
<p>892AE228E226E124E122CC 206A6F65406D616774656B2E636F6D</p>
<p>000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.1.D SoftAP IP Address

Table 728 - Property 1.2.2.1.1.D SoftAP IP Address

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.D / 0x01020201010D |
| Name | SoftAP_IP_Address |
| Description | This OID is used to store a soft AP IP address. When a device starts AP mode, it reads this value as its IP address. A new value will be stored with this OID if a user modifies the soft AP IP address. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | IP4 Format/quad decimal (x.x.x.x) |
| Valid Values | 0.0.0.0 to 255.255.255 |
| Default | 192.168.0.1 |

Table 729 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040103D101 841AD101 81072B06010401F609 850101 890AE208E206E104E102CD00 |

Table 730 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048203D101 820400000000 8482001ED101 81072B06010401F609 850101 890EE20CE20AE108E106CD0400000000 |

Table 731 - Set Request Example

| Example (Hex) |
|----|
| AA00 81040107D111 841ED111 81072B06010401F609 850101 890EE20CE20AE108E106CD04C0A80177 |

Table 732 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048207D111 820400000000 8482001ED111 81072B06010401F609 850101 890EE20CE20AE108E106CD04C0A80177 |

##### Property 1.2.2.1.1.E Web App Enabled (MAGTEK INTERNAL ONLY FOR NOW)

Table 733 - Property 1.2.2.1.1.E Web App Enabled (MAGTEK INTERNAL ONLY
FOR NOW)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.E / 0x01020201010E</td>
</tr>
<tr>
<td>Name</td>
<td>Web App Enabled</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if its web application
is enabled. The web app can be used to send commands to the device over
the WLAN interface using a web browser. The web app appears as a web
page on a browser.</p>
<p>The URL and port used to access the web page depend on how the device
is configured. The default port is 26 (not 80 or 443). See
<strong>Property 1.2.2.1.1.F Web App Port</strong> for changing the web
app port. The security required to access the web page depends on if the
device has been configured to use TLS or not.</p>
<p>https://df-b62b3aa.lan:26 and https://192.168.86.31:26 are examples
of how to access the web page on a device that has TLS enabled.
http://df-b62b3aa.lan:26 and http://192.168.86.31:26 are examples of how
to access the web page on a device that does not have TLS enabled.</p>
<p>If this property is changed, the device must be or power cycled or
reset before the change will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 (not enabled), 0x01 (enabled)</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 (not enabled)</td>
</tr>
</tbody>
</table>

Table 734 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020101 8902 CE00 |

Table 735 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020201018903CE0101 |

Table 736 - Set Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020101 8903 CE0101 |

Table 737 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020201018903CE0101 |

##### Property 1.2.2.1.1.F Web App Port (MAGTEK INTERNAL ONLY FOR NOW)

Table 738 - Property 1.2.2.1.1.F Web App Port (MAGTEK INTERNAL ONLY FOR
NOW)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.F / 0x01020201010F</td>
</tr>
<tr>
<td>Name</td>
<td>Web App Port</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine which port the web app
can be accessed on. See <strong>Web App Enabled</strong> for more
details about the web app.</p>
<p>The device does not support having both WLAN web socket and the web
app accessible on the same port. By default, the device will use port
443 for the WLAN web socket port when TLS is enabled and port 80 when
TLS is not enabled. If the web app port is set to the same port
configured for the WLAN web socket port, then the web app will not be
accessible.</p>
<p>If this property is changed, the device must be power cycled or reset
before the change will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x00 (0) - 0xFF 0xFF (65535) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0x1A (26)</td>
</tr>
</tbody>
</table>

Table 739 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020101 8902 CF00 |

Table 740 - Get Response Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D10182040000000084820011D1018501018704020201018904CF02001A |

Table 741 - Set Request Example

| Example (Hex)                                                 |
|---------------------------------------------------------------|
| AA00 81040155D111 8411 D111 850101 870402020101 8904 CF02001A |

Table 742 - Set Response Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D11182040000000084820011D1118501018704020201018904CF02001A |

##### Property 1.2.2.1.1.10 Firmware Authentication Hash (MAGTEK INTERNAL ONLY)

Table 743 - Property 1.2.2.1.1.10 Firmware Authentication Hash (MAGTEK
INTERNAL ONLY)

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.1.10 / 0x010202010110 |
| Name | Firmware Authentication Hash |
| Description | The device uses this property to get and set the WLAN firmware hash. Only required when WLAN firmware is preloaded using JTAG during production. Allows MFG CFG to validate WLAN firmware is loaded properly. |
| Securing Key | None |
| Min. Len (b) | 44 |
| Max. Len (b) | 44 |
| Data Type | Binary |
| Valid Values | FW_adr\[4\], FW_len\[4\], hash_len\[4\], hash\[32\] |
| Default | None |

Table 744 - Get Request Example

| Example (Hex)                                          |
|--------------------------------------------------------|
| AA00 81040155D101 840FD101 850101870402020101 8902D000 |

Table 745 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D1018204000000008482003BD101850101870402020101892ED02C0000C000000F40000000002013160562C59F77F9EAC8EEA603BCC6C7E0DCED13B640C14BF550AB8520FAF758 |

Table 746 - Set Request Example

| Example (Hex) |
|----|
| AA0081040155D111843BD111850101870402020101892ED02C0000C000000F4000000000201F1E1D1C1B1A191817161514131211100F0E0D0C0B0A09080706050403020100 |

Table 8.3‑75 - Set Response Example

| Example (Hex) |
|----|
| AA0081048255D1118204000000008482003BD111850101870402020101892ED02C0000C000000F4000000000201F1E1D1C1B1A191817161514131211100F0E0D0C0B0A09080706050403020100 |

##### Property 1.2.2.1.1.11 WLAN Protocol

<table>
<caption><p>Table 747 - Property 1.2.2.1.2.11 WLAN
Protocol</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.1.11 / 0x010202010111</td>
</tr>
<tr>
<td>Name</td>
<td>WLAN Protocol</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set the WLAN Protocol.</p>
<p>0x00 = MQTT</p>
<p>0x01 = RFU</p>
<p>0x02 = WebSocket Server</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0x02</td>
</tr>
<tr>
<td>Default</td>
<td>0x02</td>
</tr>
</tbody>
</table>

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 870402020101 8902 D100 |

Table 748 - Get Request Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020201018903D10102 |

Table 749 - Get Response Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402020101 8903 D101 02 |

Table 750 - Set Request Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020201018903D10102 |

Table 751 -Set Response Example

##### Property 1.2.2.1.2.1 MQTT Broker Address

<table>
<caption><p>Table 752 - Property 1.2.2.1.2.1 MQTT Broker
Address</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.1 / 0x010202010201</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Broker Address</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to connect to broker on network.
Address can be an URL or IP address.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: test.mosquitto.org</p></td>
</tr>
<tr>
<td>Default</td>
<td>test.mosquitto.org</td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C100 |

Table 753 -Get Request Example

<table>
<caption><p>Table 754 -Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482004FD1018501018704020201028942C140</p>
<p>746573742E6D6F7371756974746F2E6F726700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 844F D111 850101 870402020102 8942 C140 746573742E6D6F7371756974746F2E6F 72670000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 |

Table 755 -Set Request Example

<table>
<caption><p>Table 756 -Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482004FD1118501018704020201028942C140</p>
<p>746573742E6D6F7371756974746F2E6F726700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.2 MQTT Port

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.2.2 / 0x010202010202 |
| Name | MQTT Port |
| Description | The device uses this property to connect to broker on this network port. MQTT Port addresses are normally 8883 for secure (Recommended), 1883 for unsecure. |
| Securing Key | None |
| Min. Len (b) | 2 |
| Max. Len (b) | 2 |
| Data Type | Binary |
| Valid Values | 0x00 0x00 (0) – 0xFF 0xFF (65535) MSB first |
| Default | 8883 |

Table 757 -Property 1.2.2.1.2.2 MQTT Port

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 870402020102 8902 C200 |

Table 758 -Get Request Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D10182040000000084820011D1018501018704020201028904C20222B3 |

Table 759 -Get Response Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8411 D111 850101 870402020102 8904 C202 22B3 |

Table 760 -Set Request Example

| Example (Hex)                                                           |
|-------------------------------------------------------------------------|
| AA0081048255D11182040000000084820011D1118501018704020201028904C202 22B3 |

Table 761 -Set Response Example

##### Property 1.2.2.1.2.3 MQTT QoS Quality of Service

<table>
<caption><p>Table 762 -Property 1.2.2.1.2.3 MQTT QoS Quality of
Service</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.3 / 0x010202010203</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT QoS</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set the MQTT QoS.</p>
<p>0x00 = At most once (Recomnended)</p>
<p>0x01 = At least once</p>
<p>0x02 = Exactly once</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0x02</td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 870402020102 8902 C300 |

Table 763 -Get Request Example

| Example (Hex)                                                         |
|-----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020201028903C301 00 |

Table 764 -Get Response Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402020102 8903C301 00 |

Table 765 -Set Request Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020201028903C30100 |

Table 766 -Set Response Example

##### Property 1.2.2.1.2.4 MQTT Subscribe Topic

<table>
<caption><p>Table 767 -Property 1.2.2.1.2.4 MQTT Subscribe
Topic</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.4 / 0x010202010204</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Subscribe Topic</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the MQTT Subscribe Topic for
receiving MMS message payloads</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: <strong>MagTek/Device/DynaFlexIIPED/B62B3C6</strong><em>[MMS
Message Payload]</em></p></td>
</tr>
<tr>
<td>Default</td>
<td><p>MagTek/Device/[DevModelName]/[DevSN]</p>
<p>[DevModelName] = DynaFlexIIPED, Device Model Name with no spaces.</p>
<p>[DevSN] = Device Serial #</p></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C400 |

Table 768 -Get Request Example

<table>
<caption><p>Table 769 -Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482004FD1018501018704020201028942C440</p>
<p>4D616754656B2F4465766963652F44796E61466C657849495045442F423632423343360000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 844F D111 850101 870402020102 8942 C440 4D616754656B2F4465766963652F4479 6E61466C657849495045442F42363242 33433600000000000000000000000000 00000000000000000000000000000000 |

Table 770 -Set Request Example

<table>
<caption><p>Table 771 - Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482004FD1118501018704020201028942C440</p>
<p>4D616754656B2F4465766963652F44796E61466C657849495045442F423632423343360000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.5 MQTT Publish Topic

<table>
<caption><p>Table 772 -Property 1.2.2.1.2.5 MQTT Publish
Topic</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.5 / 0x010202010205</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Publish Topic</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set the MQTT Publish Topic for
sending MMS message payloads.</p>
<p>Device will add append the string <em>/MMSMessage</em> to the MQTT
Publish Topic string set in this property.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example:
<strong>MagTek/Server/DynaFlexIIPED/B62B3C6</strong><em>/MMSMessage[MMS
Message Payload]</em></p></td>
</tr>
<tr>
<td>Default</td>
<td><p>MagTek/Server/[DevModelName]/[DevSN]</p>
<p>[DevModelName] = DynaFlexIIPED, Device Model Name with no spaces.</p>
<p>[DevSN] = Device Serial #</p></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C500 |

Table 773 -Get Request Example

<table>
<caption><p>Table 774 -Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482004FD1018501018704020201028942C540</p>
<p>4D616754656B2F5365727665722F44796E61466C657849495045442F423632423343360000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 844F D111 850101 870402020102 8942 C540 4D616754656B2F5365727665722F4479 6E61466C657849495045442F42363242 33433600000000000000000000000000 00000000000000000000000000000000 |

Table 775 -Set Request Example

<table>
<caption><p>Table 776 -Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482004FD1118501018704020201028942C540</p>
<p>4D616754656B2F5365727665722F44796E61466C657849495045442F423632423343360000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.6 MQTT Client ID

<table>
<caption><p>Table 777 -Property 1.2.2.1.2.6 MQTT Client IDClient
ID</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.6 / 0x010202010206</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Client ID</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the MQTT Client ID.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>32</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: MagTek_Device-B62B3C6</p></td>
</tr>
<tr>
<td>Default</td>
<td><p>MagTek_Device-[DevSN]</p>
<p>[DevSN] = Device Serial #</p></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C600 |

Table 778 -Get Request Example

<table>
<caption><p>Table 779 -Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482002FD1018501018704020201028922C620</p>
<p>4D616754656B5F4465766963652D423632423343360000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 842F D111 850101 870402020102 8922 C620 4D616754656B5F4465766963652D4236 32423343360000000000000000000000 |

Table 780 -Set Request Example

<table>
<caption><p>Table 781 - Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482002FD1118501018704020201028922C620</p>
<p>4D616754656B5F4465766963652D423632423343360000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.7 MQTT Username

<table>
<caption><p>Table 782 - Property 1.2.2.1.2.7 MQTT
UsernameUsername</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.7 / 0x010202010207</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT UserName</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the MQTT Username.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>32</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: magtek_testonly1</p></td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C700 |

Table 783 - Get Request Example

<table>
<caption><p>Table 784 - Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482002FD1018501018704020201028922C720</p>
<p>6D616774656B5F746573746F6E6C793100000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 842F D111 850101 870402020102 8922 C720 6D616774656B5F746573746F6E6C7931 00000000000000000000000000000000 |

Table 785 - Set Request Example

<table>
<caption><p>Table 786 - Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482002FD1118501018704020201028922C720</p>
<p>6D616774656B5F746573746F6E6C793100000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.8 MQTT Password

<table>
<caption><p>Table 787 - Property 1.2.2.1.2.8 MQTT
PasswordPassword</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.8 / 0x010202010208</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Password</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the MQTT Password.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>32</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: emqx-tST1!</p></td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C800 |

Table 788 -Get Request Example

<table>
<caption><p>Table 789 - Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482002FD1018501018704020201028922C820</p>
<p>656D71782D745354312100000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 842F D111 850101 870402020102 8922 C820 656d71782d7453543121000000000000 00000000000000000000000000000000 |

Table 790 - Set Request Example

<table>
<caption><p>Table 791 -Set Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1118204000000008482002FD1118501018704020201028922C820</p>
<p>656D71782D745354312100000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

##### Property 1.2.2.1.2.8 MQTT Peer Common Name

<table>
<caption><p>Table 792 - Property 1.2.2.1.2.8 MQTT Peer Common NamePeer
Common Name</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.1.2.9 / 0x010202010209</td>
</tr>
<tr>
<td>Name</td>
<td>MQTT Peer Common Name</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the MQTT Peer Common Name. If
not set device will use Broker Address for server authentication.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>N/A</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Data Type</td>
<td>ASCII String with no spaces</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Any string</p>
<p>Example: test.mosquitto.org</p></td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 8704 02020102 8902 C900 |

Table 793 - Get Request Example

<table>
<caption><p>Table 794 - Get Response Example</p></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048255D1018204000000008482004FD1018501018704020201028942C940</p>
<p>746573742E6D6F7371756974746F2E6F726700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>

| Example (Hex) |
|----|
| AA00 81040155D111 844F D111 850101 870402020102 8942 C940 746573742E6D6F7371756974746F2E6F 72670000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 |

Table 795 - Set Request Example

| Example (Hex) |
|----|
| AA0081048255D1118204000000008482004FD1118501018704020201028942C940746573742E6D6F7371756974746F2E6F726700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 |

Table 796 - Set Response Example

##### Property 1.2.2.1.2.A MQTT Keep Alive

| Property Description |  |
|----|----|
| Property OID | 1.2.2.1.2.A / 0x01020201020A |
| Name | MQTT Keep Alive |
| Description | The device uses this property to set the MQTT Keep Alive timing. Value is in seconds, used to guarantee the connection between device and MQTT broker remains active. A value of 0 disables Keep Alive monitoring. |
| Securing Key | None |
| Min. Len (b) | 2 |
| Max. Len (b) | 2 |
| Data Type | Binary |
| Valid Values | 0x00 0x00 (0) – 0xFF 0xFF (0 = Disabled, 1 🡪 65535 seconds) MSB first |
| Default | 300 seconds |

Table 797 - Property 1.2.2.1.2.A MQTT Keep Alive

| Example (Hex)                                              |
|------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 850101 870402020102 8902 CA00 |

Table 798 - Get Request Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D10182040000000084820011D1018501018704020201028904CA02012C |

Table 799 - Get Response Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8411 D111 850101 870402020102 8904 CA02 012C |

Table 800 - Set Request Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D11182040000000084820011D1118501018704020201028904CA02012C |

Table 801 - Set Response Example

#### Property Subgroup 1.2.2.2.nn USB Settings (USB Only)

##### Property 1.2.2.2.1.1 Reduce Power During USB Suspend

Table 802 - Property 1.2.2.2.1.1 Reduce Power During USB Suspend

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.2.1.1 / 0x010202020101</td>
</tr>
<tr>
<td>Name</td>
<td>Reduce Power During USB Suspend</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine whether it should
reduce its power consumption when a USB host directs it to suspend. If
this property is set to Disabled, the device will not have a USB
compliant current draw when suspended, which, for example, allows it to
continue to turn on LEDs and the display if present.</p>
<p>To activate changes made to this property, the device must be reset
or power cycled.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disabled</p>
<p>0x01 = Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01</td>
</tr>
</tbody>
</table>

Table 803 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020201 8902 C100 |

Table 804 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020202018903C10101 |

Table 805 - Set Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020201 8903 C10101 |

Table 806 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020202018903C10101 |

##### Property 1.2.2.2.1.2 USB Configuration Type

Table 807 - Property 1.2.2.2.1.2 USB Configuration Type

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.2.1.2 / 0x010202020102</td>
</tr>
<tr>
<td>Name</td>
<td>USB Configuration Type</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if it should behave as
a USB HID device or an USB iAP2 device. USB HID devices can communicate
with most hosts except for Apple hosts. USB iAP2 devices can communicate
to Apple hosts like iPads and iPhones. The behavior affects USB
enumeration and communications.</p>
<p>To activate changes made to this property, the device must be reset
or power cycled.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = HID only</p>
<p>0x01 = iAP2 only</p>
<p>0x02 = autodetect (iAP2 with HID fallback)</p>
<p>The autodetect option can allow a device to work with iAP2 hosts and
HID hosts. With this option, every time the device is attached to a USB
host it will first enumerate as an iAP2 device, if the device does not
receive an iAP2 initialization sequence response from the host within 2
seconds the device will perform a soft USB detach from the host and then
a soft USB attach and next enumerate as a USB HID device.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x02</td>
</tr>
</tbody>
</table>

Table 808 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020201 8902 C200 |

Table 809 - Get Response Example (HID only)

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020202018903C20100 |

Table 810 - Set Request Example (HID only)

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020201 8903 C20100 |

Table 811 - Set Response Example (HID only)

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020202018903C20100 |

Table 812 - Set Request Example (iAP2 only)

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020201 8903 C20101 |

Table 813 - Set Response Example (iAP2 only)

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020202018903C20101 |

Table 814 - Set Request Example (autodetect (iAP2 with HID fallback))

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 8704 02020201 8903 C20102 |

Table 815 - Set Response Example (autodetect (iAP2 with HID fallback))

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020202018903C20102 |

#### Property Subgroup 1.2.2.3.nn Bluetooth® LE Settings (Bluetooth® LE Only)

##### Property 1.2.2.3.1.1 Bluetooth® LE Device Name

Table 816 - Property 1.2.2.3.1.1 Bluetooth® LE Device Name

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.1 / 0x010202030101</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Device Name</td>
</tr>
<tr>
<td>Description</td>
<td><p>This property contains the Bluetooth® device name, which is
typically used by the host software to present an operator with a list
of devices to interact with. To avoid ambiguity, if the solution
specifies that more than one device of the same name will be available,
MagTek recommends including a unique identifier in the device name so
the operator can differentiate.</p>
<p>The name should not contain any null string characters (0x00) at the
beginning or in the middle, 0x00 can be used at the end of the name for
padding to a total length of 20 characters. When setting this property,
you can enter 0 to 20 characters. If set to a length of 0, the value
reverts to its original default value described below. After modifying
the Bluetooth® device name, you must reset the Bluetooth® LE module.</p>
<p>When getting this property, device will always return 20 characters
If the name is less than 20 characters long, device will return 0x00 for
the remaining characters.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>0</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>20</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td><p>A prefix, such as “DF II Go-“ for DynaFlex II Go, followed by the
device’s serial number. For example, “DF II Go-B603226”.</p>
<p>Devices are always deployed with the serial number loaded, but prior
to loading the serial number at MagTek, the prefix will be followed by
the second to last and the last least significant bytes of the
Bluetooth® device address converted to ASCII hex. For example, “DF II
Go-97C2”.</p></td>
</tr>
</tbody>
</table>

Table 817 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C100 |

Table 818 - Get Response Example

| Example (Hex) |
|----|
| AA008104825CD10182040000000084820020D10181072B06010401F6098501028910E10EE20CE70AE208C106943469B297A5 |

Table 819 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111842ED11181072B06010401F609850101891EE21CE21AE318E116C11444594E41464C4558000000000000000000000000 |

Table 820 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482002ED11181072B06010401F609850101891EE21CE21AE318E116C11444594E41464C4558000000000000000000000000 |

##### Property 1.2.2.3.1.2 Bluetooth® LE Desired Minimum Connection Interval

Table 821 - Property 1.2.2.3.1.2 Bluetooth® LE Desired Minimum
Connection Interval

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.2 / 0x010202030102</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Desired Minimum Connection Interval</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two-byte property, in most significant byte order, contains
the Interval Min value in 1.25 millisecond units that the device sends
to a Bluetooth® LE host in a CONNECTION PARAMETER UPDATE REQUEST. See
the Core Bluetooth® Specification for details. Only values between 6 and
3200 are valid.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x06 (6) - 0x0C 0x80 (3200) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0x0C (15.0 milliseconds)</td>
</tr>
</tbody>
</table>

Table 822 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C200 |

Table 823 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C202000C |

Table 824 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C2020010 |

Table 825 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C2020010 |

##### Property 1.2.2.3.1.3 Bluetooth® LE Desired Maximum Connection Interval

Table 826 - Property 1.2.2.3.1.3 Bluetooth® LE Desired Maximum
Connection Interval

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.3 / 0x010202030103</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Desired Maximum Connection Interval</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two-byte property, in most significant byte order, contains
the Interval Max value in 1.25 millisecond units that the device sends
to a Bluetooth® LE host in a CONNECTION PARAMETER UPDATE REQUEST. See
the Core Bluetooth® Specification for more details. Only values between
6 and 3200 are valid.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x06 (6) - 0x0C 0x80 (3200) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0x00C (15.0 milliseconds)</td>
</tr>
</tbody>
</table>

Table 827 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C300 |

Table 828 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C302000C |

Table 829 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C3020010 |

Table 830 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C3020010 |

##### Property 1.2.2.3.1.4 Bluetooth® LE Desired Slave Latency

Table 831 - Property 1.2.2.3.1.4 Bluetooth® LE Desired Slave Latency

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.4 / 0x010202030104</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Desired Slave Latency</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two byte property, in most significant byte order, contains
the Slave Latency value the device sends to the Bluetooth® LE host in a
CONNECTION PARAMETER UPDATE REQUEST. See the Core Bluetooth®
Specification for details. Only values between 0 and 499 are valid.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x00 (0) – 0x01 0xF3 (499) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0x00</td>
</tr>
</tbody>
</table>

Table 832 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C400 |

Table 833 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C4020004 |

Table 834 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C4020004 |

Table 835 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C4020004 |

##### Property 1.2.2.3.1.5 Bluetooth® LE Desired Supervision Timeout

Table 836 - Property 1.2.2.3.1.5 Bluetooth® LE Desired Supervision
Timeout

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.5 / 0x010202030105</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Desired Supervision Timeout</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two-byte property, in most significant byte order, contains
the value of the Timeout Multiplier sent in 10 millisecond units that
the device sends to a Bluetooth® LE host in a CONNECTION PARAMETER
UPDATE REQUEST. See the Core Bluetooth® Specification for details. Only
values between 10 and 3200 are valid.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x0A (10) - 0x0C 0x80 (3200) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x01 0xF4 (5000 milliseconds)</td>
</tr>
</tbody>
</table>

Table 837 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C500 |

Table 838 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C50201F4 |

Table 839 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C50201F4 |

Table 840 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C50201F4 |

##### Property 1.2.2.3.1.6 Bluetooth® LE Connection Parameter Update Request Control

Table 841 - Property 1.2.2.3.1.6 Bluetooth® LE Connection Parameter
Update Request Control

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.6 / 0x010202030106</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Connection Parameter Update Request Control</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if the Bluetooth® LE
connection parameter update request control is enabled. When it is
enabled, the device sends a connection parameter update request once
after each Bluetooth® LE connection.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 (Disabled)</p>
<p>0x01 (Enabled)</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x01 (Enabled)</td>
</tr>
</tbody>
</table>

Table 842 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C600 |

Table 843 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001BD10181072B06010401F609850101890BE209E207E305E103C60100 |

Table 844 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841BD11181072B06010401F609850101890BE209E207E305E103C60100 |

Table 845 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001BD11181072B06010401F609850101890BE209E207E305E103C60100 |

##### Property 1.2.2.3.1.7 Bluetooth® LE Minimum Advertising Interval

Table 846 - Property 1.2.2.3.1.7 Bluetooth® LE Minimum Advertising
Interval

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.7 / 0x010202030107</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Minimum Advertising Interval</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two property, in most significant byte order, contains the
device’s minimum Bluetooth® LE advertising interval in 625 microsecond
increments. This property, combined with <strong>Property 1.2.2.3.1.8
Bluetooth® LE Maximum Advertising Interval,</strong> specifies the
Bluetooth® LE advertising interval the device uses. Smaller advertising
intervals cause the device to consume more power when advertising, which
may be a concern when running on battery power.</p>
<p>Only values between 32 (20ms) and 65535 (40.96s) are valid. The host
may need to adjust the maximum advertising interval property when
changing this property; if the maximum advertising interval is less than
the minimum, the device may behave unpredictably.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x20 (32) - 0xFF 0xFF (65535) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0xA0 = 160 (100 milliseconds)</td>
</tr>
</tbody>
</table>

Table 847 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C700 |

Table 848 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C70200A0 |

Table 849 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C70200B0 |

Table 850 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C70200B0 |

##### Property 1.2.2.3.1.8 Bluetooth® LE Maximum Advertising Interval

Table 851 - Property 1.2.2.3.1.8 Bluetooth® LE Maximum Advertising
Interval

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.8 / 0x010202030108</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Maximum Advertising Interval</td>
</tr>
<tr>
<td>Description</td>
<td><p>This two-byte property, in most significant byte order, contains
the device’s maximum Bluetooth® LE advertising interval in 625
microsecond increments. This property, combined with <strong>Interval,
specifies</strong> the Bluetooth® LE advertising interval the device
uses. Smaller advertising intervals cause the device to consume more
power when advertising, which may be a concern when running on battery
power.</p>
<p>Only values between 32 (20ms) and 65535 (40.96s) are valid. The host
may need to adjust the minimum advertising interval property when
changing this property. If the minimum advertising interval is greater
than the maximum, the device may behave unpredictably.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 0x20 (32) - 0xFF 0xFF (65535) MSB first</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 0xA0 = 160 (100 milliseconds)</td>
</tr>
</tbody>
</table>

Table 852 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C800 |

Table 853 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001CD10181072B06010401F609850101890CE20AE208E306E104C80200A0 |

Table 854 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841CD11181072B06010401F609850101890CE20AE208E306E104C80200B0 |

Table 855 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001CD11181072B06010401F609850101890CE20AE208E306E104C80200B0 |

##### Property 1.2.2.3.1.9 Bluetooth® LE Passkey

Table 856 - Property 1.2.2.3.1.9 Bluetooth® LE Passkey

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.9 / 0x010202030109</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Passkey</td>
</tr>
<tr>
<td>Description</td>
<td><p>This six-byte property contains the device’s Bluetooth® passkey
as a six-character with valid value for each character between ‘0’ and
‘9’</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p>
<p>For security, the Get request for this property will always return a
length of zero and no value, so you can only set the passkey and not get
it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>6</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>6</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>'000000' - '999999'</td>
</tr>
<tr>
<td>Default</td>
<td>'000000'</td>
</tr>
</tbody>
</table>

Table 857 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102C900 |

Table 858 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001AD10181072B06010401F609850101890AE208E206E304E102C900 |

Table 859 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D1118420D11181072B06010401F6098501018910E20EE20CE30AE108C906303132333435 |

Table 860 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D11182040000000084820020D11181072B06010401F6098501018910E20EE20CE30AE108C906303132333435 |

##### Property 1.2.2.3.1.A Bluetooth® LE Never Advertise

Table 861 - Property 1.2.2.3.1.A Bluetooth® LE Never Advertise

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.A / 0x01020203010A</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Never Advertise</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if the Bluetooth® LE
Never Advertise is enabled. When it is enabled, the device never
advertises. This mode may be useful for operators who only want to use
the USB interface and don’t want the device to advertise.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 (Disabled)</p>
<p>0x01 (Enabled)</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00 (Disabled)</td>
</tr>
</tbody>
</table>

Table 862 - Get Request Example

| Example (Hex) |
|----|
| AA00 81040128D101 841AD101 81072B06010401F609 850101 890AE208E206E304E102CA00 |

Table 863 - Get Response Example

| Example (Hex) |
|----|
| AA0081048232D1018204000000008482001BD10181072B06010401F609850101890BE209E207E305E103CA0100 |

Table 864 - Set Request Example

| Example (Hex) |
|----|
| AA0081040112D111841BD11181072B06010401F609850101890BE209E207E305E103CA0100 |

Table 865 - Set Response Example

| Example (Hex) |
|----|
| AA0081048212D1118204000000008482001BD11181072B06010401F609850101890BE209E207E305E103CA0100 |

##### Property 1.2.2.3.1.B Bluetooth® LE FCC Test Control (MAGTEK INTERNAL ONLY)

Table 866 - Property 1.2.2.3.1.B Bluetooth® LE FCC Test Control (MAGTEK
INTERNAL ONLY)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.B / 0x01020203010B</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE FCC Test Control</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if Bluetooth® LE FCC
test mode is enabled and to control it. FCC test mode is only used by
MagTek for FCC testing. When it is enabled, the device sends packets
continuously with a fixed interval and all other Bluetooth® LE
communications are disabled.</p>
<p>If the value of this property is set between 0 and 39 (0x27) FCC test
mode is enabled and the value is the transmit channel C. The transmit
frequency is (2C + 2402) Mhz. If the value is greater than 39 (0x27)
then FCC test mode is disabled.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0xFF</td>
</tr>
<tr>
<td>Default</td>
<td>0xFF (FCC test disabled)</td>
</tr>
</tbody>
</table>

Table 867 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020301 8902 CB00 |

Table 868 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020203018903CB01FF |

Table 869 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402020301 8903 CB01FF |

Table 870 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020203018903CB01FF |

##### Property 1.2.2.3.1.C Bluetooth® LE Sleep Enabled 

Table 871 - Property 1.2.2.3.1.C Bluetooth® LE Sleep Enabled

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.C / 0x01020203010C</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Sleep Enabled</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if Bluetooth® LE Sleep
is enabled. When it is enabled, the device will conserve battery power
when USB power is not present and the device is not in a secure
Bluetooth® LE connection with notifications enabled (not able to
exchange messages with a host). The device will conserve battery power
by turning off various hardware features and by going into low power
modes.</p>
<p>The battery life when the device is idle can be increased by about 3
times for DynaFlex II Go when the host application takes advantage of
this feature.</p>
<p>Here is an example of how the host application can be written to take
advantage of this feature and extend battery life.</p>
<p>1) Establish a BLE connection with the device only when the host
needs to perform a transaction or other operation.</p>
<p>2) Perform the transaction or other operation.</p>
<p>3) Close the BLE connection.</p>
<p>4) The device will sleep at this point and use less power.</p>
<p>Some operations in addition to connecting USB power or establishing a
BLE connection will wake the device from sleep mode temporarily. The
following are examples of these operations.</p>
<p>1) Pressing the button.</p>
<p>2) Putting the device into pairing mode.</p>
<p>When the device is sleeping, all LEDs will go off so the device will
look similar to when it is off.</p>
<p>If the value of this property is set to 0, sleep is disabled. If it
is set to 1, sleep is enabled.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0x01</td>
</tr>
<tr>
<td>Default</td>
<td>0x01 (Bluetooth® LE Sleep enabled)</td>
</tr>
</tbody>
</table>

Table 872 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020301 8902 CC00 |

Table 873 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020203018903CC0100 |

Table 874 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402020301 8903 CC0100 |

Table 875 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020203018903CC0100 |

##### Property 1.2.2.3.1.D Bluetooth® LE Debug Mode Enabled 

Table 876 - Property 1.2.2.3.1.D Bluetooth® LE Debug Mode Enabled

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.2.3.1.D / 0x01020203010D</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Debug Mode Enabled</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to determine if Bluetooth® LE Debug
Mode is enabled. When it is enabled, the secure connections bonding uses
known debug keys, so that the encrypted packet can be opened by a
Bluetooth® protocol analyzer. Bondings made in debug mode are unsecure.
This mode should only be enabled for debugging for development purposes
and not for regular device use.</p>
<p>Prior to enabling or disabling Debug Mode, the following should be
done. Erase all of the device's bonds with <strong>Command 0x1F05 –
Erase All Bluetooth® LE Bonds (Bluetooth® LE Only)</strong>. Forget the
device on all hosts that have paired with it by using the host's
Bluetooth® settings application. Reboot all of those hosts.</p>
<p>Some hosts like Windows 10 will not pair with devices that use known
debug keys.</p>
<p>If the value of this property is set to 0, Debug Mode is disabled. If
it is set to 1, Debug Mode is enabled.</p>
<p>After the host changes this property, the device must be reset before
the changes will take effect.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0x01</td>
</tr>
<tr>
<td>Default</td>
<td>0x00 (Bluetooth® LE Debug Mode disabled)</td>
</tr>
</tbody>
</table>

Table 877 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02020301 8902 CD00 |

Table 878 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501018704020203018903CD0100 |

Table 879 - Set Request Example

| Example (Hex)                                               |
|-------------------------------------------------------------|
| AA00 81040155D111 8410 D111 850101 870402020301 8903 CD0100 |

Table 880 - Set Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D11182040000000084820010D1118501018704020203018903CD0100 |

#### Property Subgroup 1.2.3.nnn User Interface Settings

##### Property 1.2.3.1.1.1 Custom Idle Page Image (Display Only)

Table 881- Property 1.2.3.1.1.1 Custom Idle Page Image (Display Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.1.1 / 0x010203010101</td>
</tr>
<tr>
<td>Name</td>
<td>Custom Idle Page Image</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set which custom image it
displays when idle. If the selected image does not exist, the device
falls back to showing text. This property does not take effect
instantly; it takes effect the next time the device transitions to idle
(for example, after a transaction or after resetting).</p>
<ul>
<li><p>0x00 = Show text “Welcome”</p></li>
<li><p>0x01 = Show custom image 1</p></li>
<li><p>0x02 = Show custom image 2</p></li>
<li><p>0x03 = Show custom image 3</p></li>
<li><p>0x04 = Show custom image 4</p></li>
</ul>
<p>To use this feature, the host must first load an image into the
selected slot using <strong>Command 0xD812 - Start Send File to Device
(Unsecured)</strong>. Images must be BMP format, 160KB or smaller with
no compression, maximum 320px by 240px, with color depth 16 color, 256
color, 16-bit color, 24-bit color. Images smaller than the maximum size
are centered on the display. Note images at full screen size must be
16-bit color or lower to meet the size requirement.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any number</td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 882 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E3 06 E1 04 E1 02 C1 00 |

Table 883 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5E D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E1 03 C1 01 03 |

Table 884 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5D D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E1 03 C1 01 03 |

Table 885 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5D D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E1 03 C1 01 03 |

##### Property 1.2.3.1.1.2 Custom Idle Page Image Device Locked (Display Only)

Table 886- Property 1.2.3.1.1.2 Custom Idle Page Image Device Locked
(Display Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.1.2 / 0x010203010102</td>
</tr>
<tr>
<td>Name</td>
<td>Custom Idle Page Image Device Locked</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set which custom image it
displays when idle and locked. If the selected image does not exist, the
device falls back to showing text. This property does not take effect
instantly; it takes effect the next time the device transitions to idle
(for example, after a transaction or after resetting). See
<strong>Device Lock Feature</strong> for more information.</p>
<ul>
<li><p>0x00 = Show text “Welcome” “Device is Locked”</p></li>
<li><p>0x01 = Show custom image 1</p></li>
<li><p>0x02 = Show custom image 2</p></li>
<li><p>0x03 = Show custom image 3</p></li>
<li><p>0x04 = Show custom image 4</p></li>
</ul>
<p>To use this feature, the host must first load an image into the
selected slot using <strong>Command 0xD812 - Start Send File to Device
(Unsecured)</strong>. Images must be BMP format, 160KB or smaller with
no compression, maximum 320px by 240px, with color depth 16 color, 256
color, 16-bit color, 24-bit color. Images smaller than the maximum size
are centered on the display. Note images at full screen size must be
16-bit color or lower to meet the size requirement.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any number</td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 887 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02030101 8902 C200 |

Table 888 - Get Response Example

| Example (Hex) |
|----|
| AA00 81 04 8255D101 82 04 00000000 84 820010 D101 85 01 01 87 04 02030101 89 03 C2 01 00 |

Table 889 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02030101 8903 C201 00 |

Table 890 - Set Response Example

| Example (Hex) |
|----|
| AA00 81 04 8255D111 82 04 00000000 84 820010 D111 85 01 01 87 04 02030101 89 03 C2 01 00 |

##### Property 1.2.3.1.2.1 Display Orientation (Display Only)

Table 891- Property 1.2.3.1.2.1 Display Orientation (Display Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.2.1 / 0x010203010201</td>
</tr>
<tr>
<td>Name</td>
<td>Display Orientation</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to set the orientation of the display.
There are four modes: Landscape with magnetic stripe reader (MSR) on the
top, Landscape with MSR on the bottom, Portrait with MSR on the right,
and Portrait with MSR on the left. This property does not take effect
immediately, it takes effect the next time the device transitions to
idle (for example, after a transaction or after power cycle /
reset).</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Landscape with MSR on Top</p>
<p>0x01 = Portrait with MSR on Right</p>
<p>0x02 = Portrait with MSR on Left</p>
<p>0x03 = Landscape with MSR on Bottom</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 892 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E3 06 E1 04 E2 02 C1 00 |

Table 893 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5E D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E2 03 C1 01 00 |

Table 894 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5D D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E2 03 C1 01 01 |

Table 895 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5D D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E2 03 C1 01 01 |

##### Property 1.2.3.1.3.1 Enable Card Logos Page at Startup

Table 896- Property 1.2.3.1.3.1 Enable Card Logos Page at Startup

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.3.1 / 0x010203010301</td>
</tr>
<tr>
<td>Name</td>
<td>Enable Card Logos Page at Startup</td>
</tr>
<tr>
<td>Description</td>
<td>Enables a page at startup that displays supported payment type brand
logos.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disable Logo Page at Startup</p>
<p>0x01 = Enable Logo Page at Startup</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 897 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E3 06 E1 04 E3 02 C1 00 |

Table 898 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5E D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C1 01 00 |

Table 899 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5D D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C1 01 01 |

Table 900 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5D D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C1 01 01 |

##### Property 1.2.3.1.3.2 Display Card Logo While Authorizing

Table 901- Property 1.2.3.1.3.2 Display Card Logo While Authorizing

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.3.2 / 0x010203010302</td>
</tr>
<tr>
<td>Name</td>
<td>Display Card Logo While Authorizing</td>
</tr>
<tr>
<td>Description</td>
<td>Enable display of logo for card brand used in transaction</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Disable Logo</p>
<p>0x01 = Enable Logo</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 902 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E3 06 E1 04 E3 02 C2 00 |

Table 903 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5E D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C2 01 00 |

Table 904 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5D D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C2 01 01 |

Table 905 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5D D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E1 05 E3 03 C2 01 01 |

##### Property 1.2.3.1.2.2 Display Backlight Intensity (Display Only)

Table 906- Property 1.2.3.1.2.2 Display Backlight Intensity (Display
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.1.2.2 / 0x010203010202</td>
</tr>
<tr>
<td>Name</td>
<td>Display Backlight Intensity</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to set the intensity of the
display’s backlight, expressed as a percentage range from 1% to
100%.</p>
<p>The backlight setting takes effect immediately after the host changes
it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x01..0x64</td>
</tr>
<tr>
<td>Default</td>
<td>0x5A (90%)</td>
</tr>
</tbody>
</table>

Table 907 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 01 84 0F D1 01 85 01 01 87 04 02 03 01 02 89 02 C2 00 |

Table 908 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 02 03 01 02 89 03 C2 01 5A |

Table 909 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 10 D1 11 85 01 01 87 04 02 03 01 02 89 03 C2 0164 |

Table 910 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 02 03 01 02 89 03 C2 01 64 |

##### Property 1.2.3.2.1.1 System Volume Control

Table 911- Property 1.2.3.2.1.1 System Volume Control

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.3.2.1.1 / 0x010203020101</td>
</tr>
<tr>
<td>Name</td>
<td>System Volume Control</td>
</tr>
<tr>
<td>Description</td>
<td><p>This property sets the output volume for all sounds the device
produces after startup, expressed as a percentage range from 0% (no
sound) to 100%. The volume setting takes effect immediately after the
host changes it.</p>
<p>Note that devices with limited volume control hardware allocate
ranges of numbers to represent the same physical volume level (for
example, 1..49 = Low, 50..100 = High).</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00..0x64</td>
</tr>
<tr>
<td>Default</td>
<td>0x32 (50%)</td>
</tr>
</tbody>
</table>

Table 912 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0A E2 08 E3 06 E2 04 E1 02 C1 00 |

Table 913 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5E D1 01 82 04 00 00 00 00 84 82 00 1B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E2 05 E1 03 C1 01 32 |

Table 914 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 5D D1 11 84 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E2 05 E1 03 C1 01 01 |

Table 915 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 5D D1 11 82 04 00 00 00 00 84 82 00 1B D1 11 81 07 2B 06 01 04 01 F6 09 85 01 01 89 0B E2 09 E3 07 E2 05 E1 03 C1 01 01 |

#### Property Subgroup 1.2.5.nnn Security Settings

##### Property 1.2.5.2.1.1 Device Lock State

Table 916- Property 1.2.5.2.1.1 Device Lock State

| Property Description |  |
|----|----|
| Property OID | 1.2.5.2.1.1 / 0x010205020101 |
| Name | Device Lock State |
| Description | This property can be used to get or set the device lock state. Getting this property does not require security, however setting it does. Setting it requires the use of **Command 0xD112 - Set Property (Secured)** which requires MagTek's involvement. To set the device lock state without involving MagTek use Command 0xEF04 – Load LTPK Protection Key. The value of the device lock state will revert to the value of **Property 1.2.5.2.1.2 Device Lock State After Reset** after a reset or a power cycle. See **Device Lock Feature** for more information. |
| Securing Key | See **Command 0xD112 - Set Property (Secured).** |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00 = Unlocked, 0x01 = Locked |
| Default | See **Property 1.2.5.2.1.2 Device Lock State After Reset.** |

Table 917 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02050201 8902 C100 |

Table 918 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850101 870402050201 8903 C101 00 |

Table 919 - Set Request Example

| Example (Hex) |
|---------------|
| TBD           |

Table 920 - Set Response Example

| Example (Hex) |
|---------------|
| TBD           |

##### Property 1.2.5.2.1.2 Device Lock State After Reset

Table 921- Property 1.2.5.2.1.2 Device Lock State After Reset

| Property Description |  |
|----|----|
| Property OID | 1.2.5.2.1.2 / 0x010205020102 |
| Name | Device Lock State After Reset |
| Description | This property can be used to get or set what **Property 1.2.5.2.1.1 Device Lock State** will be set to after the device is reset or power cycled. Systems that use the optional device lock feature should set this property to locked, otherwise all someone would need to do to unlock the device would be to power cycle or reset it. The value of the device lock state after reset property is stored in non-volatile memory so changes made to it will persist after the device is reset or power cycled. See **Device Lock Feature** for more information. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00 = Unlocked, 0x01 = Locked |
| Default | 0x00 |

Table 922 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02050201 8902 C200 |

Table 923 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850101 870402050201 8903 C201 00 |

Table 924 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02050201 8903 C201 00 |

Table 925 - Set Response Example

| Example (Hex) |
|----|
| AA00 81048255D111 820400000000 84820010 D111 850101 870402050201 8903 C201 00 |

##### Property 1.2.5.2.1.3 Device Lock Passcode

Table 926- Property 1.2.5.2.1.3 Device Lock Passcode

| Property Description |  |
|----|----|
| Property OID | 1.2.5.2.1.3 / 0x010205020103 |
| Name | Device Lock Passcode |
| Description | This property can be used to set the device lock passcode. The value of the device lock passcode is stored in non-volatile memory so changes made to it will persist after the device is reset or power cycled. For security, the host can’t get the value of the device lock passcode from the device. If the host gets this property, the device will always return a length of 0 and no value. Setting this property requires security. Setting it requires the use of **Command 0xD112 - Set Property (Secured)** which requires MagTek's involvement. To set the device lock passcode without involving MagTek use **Command 0xEF07 – Change Device Lock Passcode**. See **Device Lock Feature** for more information. |
| Securing Key | See **Command 0xD112 - Set Property (Secured).** |
| Min. Len (b) | 4 |
| Max. Len (b) | 63 |
| Data Type | Binary |
| Valid Values | It can only contain any printable ASCII character. |
| Default | 0x34 0x33 0x32 0x31 (“4321”) |

Table 927 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02050201 8902 C300 |

Table 928 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 8482000F D101 850101 870402050201 8902 C300 |

Table 929 - Set Request Example

| Example (Hex) |
|---------------|
| TBD           |

Table 930 - Set Response Example

| Example (Hex) |
|---------------|
| TBD           |

#### Property Subgroup 1.2.7.nnn System Settings

##### Property 1.2.7.1.1.1 Device Reset Occurred Notification Control

Table 931 - Property 1.2.7.1.1.1 Device Reset Occurred Notification
Control

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.1.1 / 0x010207010101</td>
</tr>
<tr>
<td>Name</td>
<td>Device Reset Occurred Notification Control</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to control behavior of the
<strong>Device Reset Occurred</strong> notification in
<strong>Notification 0x1001 - Device Information Update</strong>.</p>
<p>Changes to this property do not take effect until the device is power
cycled or reset.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Never send this notification.</p>
<p>0x01..0xFE = The frequency in seconds the device should repeat
sending the notification until the host requests that it stop with
<strong>Property 1.2.7.1.1.2 Device Reset Occurred Notification
Acknowledged</strong>.</p>
<p>0xFF = Only send this notification once.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 932 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 01 84 0F D1 01 85 01 01 87 04 02 07 01 01 89 02 C1 00 |

Table 933 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 02 07 01 01 89 03 C1 01 00 |

Table 934 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 10 D1 11 85 01 01 87 04 02 07 01 01 89 03 C1 01 05 |

Table 935 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 02 07 01 01 89 03 C1 01 05 |

##### Property 1.2.7.1.1.2 Device Reset Occurred Notification Acknowledged

Table 936 - Property 1.2.7.1.1.2 Device Reset Occurred Notification
Acknowledged

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.1.2 / 0x010207010102</td>
</tr>
<tr>
<td>Name</td>
<td>Device Reset Occurred Notification Acknowledged</td>
</tr>
<tr>
<td>Description</td>
<td><p>The host can use this property to acknowledge it has received the
<strong>Device Reset Occurred</strong> notification in
<strong>Notification 0x1001 - Device Information Update</strong> and to
request that the device stop sending it.</p>
<p>Alternatively, because the device automatically sets the value of
this property to 0x00 on boot, the host can use this property to detect
power cycles or resets using a polling method. To implement this, the
host should read the value on a set schedule (for example, every 2
seconds). If the host finds a value of 0x00, a power cycle or reset has
occurred, and the host should set the value back to 0x01. From that
point until the next power cycle or reset, the value will remain
0x01.</p>
<p>Changes made to this property will not persist after a power cycle or
reset. After a power cycle or reset, this property has a value of 0x00
until the host changes it to 0x01.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Not acknowledged. Only the device can set to this
value.</p>
<p>0x01 = Acknowledged. Do not continue to send the
notification.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00</td>
</tr>
</tbody>
</table>

Table 937 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070101 8902 C200 |

Table 938 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070101 8903 C201 00 |

Table 939 - Set Request Example

| Example (Hex)                                                 |
|---------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02070101 8903 C20101 |

Table 940 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820010 D111 8501 01 8704 02070101 8903 C201 01 |

##### Property 1.2.7.1.1.3 Device Reset Will Occur Soon Notification Control

Table 941 - Property 1.2.7.1.1.3 Device Reset Will Occur Soon
Notification Control

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.1.3 / 0x010207010103</td>
</tr>
<tr>
<td>Name</td>
<td>Device Reset Will Occur Soon Notification Control</td>
</tr>
<tr>
<td>Description</td>
<td><p>The host can use this property to control behavior of the
<strong>Device Reset Will Occur Soon</strong> notification in
<strong>Notification 0x1001 - Device Information Update</strong>.</p>
<p>See <strong>24 Hour Automatic Reset PCI Requirement</strong> for more
information.</p>
<p>Changes to this property do not take effect until the device is power
cycled or reset.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Never send this notification.</p>
<p>0x01..0xFF = Number of minutes before a reset to send the
notification message.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x03</td>
</tr>
</tbody>
</table>

Table 942 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 01 84 0F D1 01 85 01 01 87 04 02 07 01 01 89 02 C3 00 |

Table 943 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 01 82 04 00 00 00 00 84 82 00 10 D1 01 85 01 01 87 04 02 07 01 01 89 03 C3 01 05 |

Table 944 - Set Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 55 D1 11 84 10 D1 11 85 01 01 87 04 02 07 01 01 89 03 C1 01 05 |

Table 8‑115 - Set Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 55 D1 11 82 04 00 00 00 00 84 82 00 10 D1 11 85 01 01 87 04 02 07 01 01 89 03 C1 01 05 |

##### Property 1.2.7.1.1.4 Auto Reset Configuration

Table 945 - Property 1.2.7.1.1.4 Auto Reset Configuration

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.1.4 / 0x010207010104</td>
</tr>
<tr>
<td>Name</td>
<td>Auto Reset Configuration</td>
</tr>
<tr>
<td>Description</td>
<td><p>This property controls the device’s auto reset feature. The auto
reset feature can be configured such that the device automatically
resets 23 hours after booting up or at a specific time of day. The
auto-reset feature cannot be disabled.</p>
<p>See <strong>24 Hour Automatic Reset PCI Requirement</strong> for more
information.</p>
<p>Changes to this property do not take effect until the device is power
cycled or reset.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>First byte 0 - 23 hours and second byte 0 - 59 minutes = Reset at
the time of day specified. The time of day specified should be 24-hour
Universal Time Coordinated (UTC). For example, values of 0 0 would be
12:00am UTC and values of 23 59 (0x17 0x3B) would be 11:59pm UTC.</p>
<p>First byte 0xFF and second byte 0xFF = Auto reset 23 hours after
booting up.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0xFF 0xFF</td>
</tr>
</tbody>
</table>

Table 946 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070101 8902 C400 |

Table 947 - Get Response Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D10182040000000084820011D1018501018704020701018904C402FFFF |

Table 948 - Set Request Example

| Example (Hex)                                                    |
|------------------------------------------------------------------|
| AA00 81040155D111 8411 D111 8501 01 8704 02070101 8904 C402 FFFF |

Table 949 - Set Response Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D11182040000000084820011D1118501018704020701018904C402FFFF |

##### Property 1.2.7.1.2.1 User Event Notification Controls Enable

Table 950 - Property 1.2.7.1.2.1 User Event Notification Controls Enable

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Bit Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.2.1 / 0x010207010201</td>
</tr>
<tr>
<td>Name</td>
<td>User Event Notifications Enable</td>
</tr>
<tr>
<td>Description</td>
<td><p>The host can use this property to enable <strong>notification
reasons</strong> defined in <strong>Notification 0x1001 - Device
Information Update</strong> in the <strong>User Events</strong>
Category. Each bit enables a specific <strong>Reason</strong> by setting
that bit to 1. Byte 0 is the first byte, bit 0 is the LSB of each
byte.</p>
<p>The device only detects these user events and sends these
notifications when it is idle. While processing a command (not idle),
such as when processing a transaction with <strong>Command 0x1001 -
Start Transaction</strong>, the device only sends notifications related
to the command it is currently processing.</p>
<p>Notification reasons may consume power when idle. For example,
enabling Contactless reasons requires the device to continuously consume
some radio frequency power to detect the presence of a contactless card
when idle. To conserve power, only enable the notification reasons that
are required by the solution design, if any. The readers and their
associated notifications will be disabled if the battery charge is 5
percent or lower.</p>
<p>Changes to this property do not take effect until the device is power
cycled or reset.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Byte 0</p>
<ul>
<li><p>bit 0 = Reason: Contactless Card Presented</p></li>
<li><p>bit 1 = Reason: Contactless Card Removed</p></li>
<li><p>bit 2 = Reason: Card Seated in Slot</p></li>
<li><p>bit 3 = Reason: Card Unseated from Slot</p></li>
<li><p>bit 4 = Reason: Card Swiped</p></li>
<li><p>bit 5 = Reason: Touch Sensor Press Detected</p></li>
<li><p>bit 6 = Reason: Touch Sensor Release Detected</p></li>
<li><p>bit 7 = Reason: Barcode Read Detected</p></li>
</ul>
<p>Byte 1</p>
<ul>
<li><p>bit 0 = Reason: Encrypt Barcode Reader Event Data</p></li>
</ul>
<ul>
<li><p>bit 1 = Reserved (set to 0x00)</p></li>
<li><p>etc.</p></li>
</ul>
<p>Byte 2</p>
<ul>
<li><p>bit 0 = Reserved (set to 0x00)</p></li>
<li><p>etc.</p></li>
</ul>
<p>Byte 3</p>
<ul>
<li><p>bit 0 = Reserved (set to 0x00)</p></li>
<li><p>etc.</p></li>
</ul>
<p>Any byte / bit not listed here is reserved for future use. The host
should set those values to 0, so if a future revision of firmware starts
using those bits, the related notifications will be disabled and will
not affect the existing host software.</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x00, 0x00, 0x00, 0x00 (all User Event notifications disabled)</td>
</tr>
</tbody>
</table>

Table 951 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070102 8902 C100 |

Table 952 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820013 D101 8501 01 8704 02070102 8906 C1 04 00 00 00 00 |

Table 953 - Set Request Example

| Example (Hex) |
|----|
| AA00 8104 0155D111 8413 D111 8501 01 8704 02070102 8906 C1 04 03 00 00 00 |

Table 954 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820013 D111 8501 01 8704 02070102 8906 C1 04 03 00 00 00 |

##### Property 1.2.7.1.2.2 User Event Notification MSR Data Timeout (MSR Only)

Table 955 - Property 1.2.7.1.2.2 User Event Notification MSR Data
Timeout (MSR Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Bit Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.2.2 / 0x010207010202</td>
</tr>
<tr>
<td>Name</td>
<td>User Event Notification MSR Data Timeout</td>
</tr>
<tr>
<td>Description</td>
<td><p>This parameter defines the number of seconds the device waits for
the host to take action (by sending <strong>Command 0x1001 - Start
Transaction)</strong> after the device sends <strong>Notification 0x1001
- Device Information Update</strong> to report a User Event / Card
Swiped event. After this period of time passes, the device erases the
buffered card data from memory.</p>
<p>Changes to this property do not take effect until the device is power
cycled or reset.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><ul>
<li><p>0x00 = Invalid value. (will be converted to 0x02 in the
firmware)</p></li>
<li><p>0x01 to 0xFF = 1 to 255 seconds</p></li>
</ul></td>
</tr>
<tr>
<td>Default</td>
<td>0x02 (2 seconds)</td>
</tr>
</tbody>
</table>

Table 956 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104 010CD101 841A D101 8107 2B06010401F609 8501 01 890A E208E706E104E202C200 |

Table 957 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 820CD101 8204 00000000 8482001B D101 8107 2B06010401F609 8501 01 890B E209E707E105E203C2 0102 |

Table 958 - Set Request Example

| Example (Hex) |
|----|
| AA00 8104 010DD111 841B D111 8107 2B06010401F609 8501 01 890B E209E707E105E203C2 0102 |

Table 959 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 820DD111 8204 00000000 8482001B D111 8107 2B06010401F609 8501 01 890B E209E707E105E203C2 0102 |

##### Property 1.2.7.1.3.1 Maximum Battery Charge Level (Deprecated)

Table 960 - Property 1.2.7.1.3.1 Maximum Battery Charge Level
(Deprecated)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.3.1 / 0x010207010301</td>
</tr>
<tr>
<td>Name</td>
<td>Maximum Battery Charge Level</td>
</tr>
<tr>
<td>Description</td>
<td><p>This OID has been deprecated. The OID can be written or read but
it will have no effect of the device’s behavior.</p>
<p>The host can use this property to control the maximum charge level
for the battery. All charge percentages reported or displayed will use
this percentage as 100% charged.</p>
<p>Setting this value to lower than 0x64 (100%) will increase the life
of the battery but reduce the run time when running from the
battery.</p>
<p>The Maximum Battery Charge Level takes effect immediately after the
host changes it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x0A..0x64</td>
</tr>
<tr>
<td>Default</td>
<td><p>0x64 (100%) if WLAN device</p>
<p>0x50 (80%) for all other devices</p></td>
</tr>
</tbody>
</table>

Table 961 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070103 8902 C100 |

Table 962 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070103 8903 C101 50 |

Table 963 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02070103 8903 C101 50 |

Table 8.3‑222 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820010 D111 8501 01 8704 02070103 8903 C101 50 |

##### Property 1.2.7.1.4.1 Device Low Temperature Notification Level

Table 964 - Property 1.2.7.1.4.1 Device Low Temperature Notification
Level

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.4.1 / 0x010207010401</td>
</tr>
<tr>
<td>Name</td>
<td>Device Low Temperature Notification Level</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device will send a low temperature notification when the
device’s temperature falls below this temperature. The temperature is in
degrees Celsius.</p>
<p>The Device Low Temperature Notification Level takes effect
immediately after the host changes it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Signed Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Temperature in Celsius:<br />
DynaProx: 0xE2 .. 0x55 (-30 .. 85)<br />
DynaProx BCR: 0xEC .. 0x37 (-20 .. 55)<br />
DynaFlex: 0x00 .. 0x2D (0 .. 45)</p>
<p>This value must be less than that set in 1.2.7.1.4.2.</p></td>
</tr>
<tr>
<td>Default</td>
<td>Temperature in Celsius:<br />
DynaProx: 0xE2 (-30<br />
DynaProx BCR: 0xEC (-20)<br />
DynaFlex: 0x00 (0)</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 965 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070104 8902 C100 |

Table 966 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070104 8903 C101 00 |

Table 967 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02070104 8903 C101 05 |

Table 8.3‑227 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820010 D111 8501 01 870402070104 8903 C101 05 |

##### Property 1.2.7.1.4.2 Device High Temperature Notification Level

Table 968 - Property 1.2.7.1.4.2 Device High Temperature Notification
Level

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.4.2 / 0x010207010402</td>
</tr>
<tr>
<td>Name</td>
<td>Device High Temperature Notification Level</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device will send a high temperature notification when the
device’s temperature rises above this temperature. The temperature is in
degrees Celsius.</p>
<p>The Device High Temperature Notification Level takes effect
immediately after the host changes it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Signed Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Temperature in Celsius:<br />
DynaProx: 0xE2 .. 0x55 (-30 .. 85)<br />
DynaProx BCR: 0xEC .. 0x37 (-20 .. 55)<br />
DynaFlex: 0x00 .. 0x2D (0 .. 45)</p>
<p>This value must be greater than that set in 1.2.7.1.4.1.</p></td>
</tr>
<tr>
<td>Default</td>
<td>Temperature in Celsius:<br />
DynaProx: 0x55 (85)<br />
DynaProx BCR: 0x37 (55)<br />
DynaFlex: 0x2D (45)</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 969 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070104 8902 C200 |

Table 8.3‑230 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070104 8903 C201 2D |

Table 970 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02070104 8903 C201 2D |

Table 8.3‑232 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820010 D111 8501 01 870402070104 8903 C201 2D |

##### Property 1.2.7.1.4.3 Device Temperature Notification Repeat Interval

Table 971 - Property 1.2.7.1.4.3 Device Temperature Notification Repeat
Interval

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>1.2.7.1.4.3 / 0x010207010403</td>
</tr>
<tr>
<td>Name</td>
<td>Device Temperature Notification Repeat Interval</td>
</tr>
<tr>
<td>Description</td>
<td><p>While the device’s temperature is outside of the range defined by
Device Low Temperature Notification Level (1.2.7.1.4.1) and Device High
Temperature Notification Level (1.2.7.1.4.2), notifications will be sent
to the host. This property sets the period between notifications.</p>
<p>The Device Temperature Notification Repeat Interval takes effect
immediately after the host changes it.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 Send once. Do not repeat.</p>
<p>0x0F .. 0xFF Repeat period in seconds. Must be multiple of 0x0F
(15).</p></td>
</tr>
<tr>
<td>Default</td>
<td>0x1E (30 seconds)</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 972 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 01 8704 02070104 8902 C300 |

Table 8.3‑235 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D101 8204 00000000 84820010 D101 8501 01 8704 02070104 8903 C301 1E |

Table 8.36 - Set Request Example

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA00 81040155D111 8410 D111 8501 01 8704 02070104 8903 C301 1E |

Table 8.3‑237 - Set Response Example

| Example (Hex) |
|----|
| AA00 8104 8255D111 8204 00000000 84820010 D111 8501 01 870402070104 8903 C301 1E |

### Property Group 2.1.1.nnn Device Firmware Feature Information (MAGTEK INTERNAL ONLY FOR NOW)

#### 8.4.1 Property Subgroup 2.1.1.1.nn MainApp Firmware Information

##### 8.4.1.1 Property 2.1.1.1.1.1 API Feature Set

Table 973 - 8.4.1.1 Property 2.1.1.1.1.1 API Feature Set

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.1.1.1.1 / 0x020101010101</td>
</tr>
<tr>
<td>Name</td>
<td>Main App Firmware API Feature Set</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report which API features are
active:</p>
<p>Bit 0: Banking Features</p>
<p>Bit 1 🡪 15: RFU</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Bit Mapped</td>
</tr>
<tr>
<td>Default</td>
<td>0x0000</td>
</tr>
</tbody>
</table>

Table 974 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E1 06 E1 04 E1 02 C1 00 |

Table 975 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 05 D1 01 82 04 00 00 00 00 84 82 00 1C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0C E1 0A E1 08 E1 06 E1 04 C1 02 01 00 |

### Property Group 2.1.2.nnn Device Firmware Identification Information

#### Property Subgroup 2.1.2.1.nn Boot Firmware Information

##### Property 2.1.2.1.1.2 Boot1 Firmware Version

Table 976 - Property 2.1.2.1.1.2 Boot1 Firmware Version

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.1.1.2 / 0x020102010102</td>
</tr>
<tr>
<td>Name</td>
<td>Boot 1 Firmware Version</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its bootloader firmware
version number in the form <strong>PartNumber-Version-PCI</strong>,
padded with null characters.</p>
<p>Example: 1000007536-A0-PCI</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 977 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E1 04 E1 02 C2 00 |

Table 978 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 05 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E1 17 E1 15 C2 13 31 30 30 30 30 30 37 35 33 36 2D 41 30 2D 50 43 49 00 00 |

##### Property 2.1.2.1.1.4 Boot1 Firmware Part Number

Table 979 - Property 2.1.2.1.1.4 Boot1 Firmware Part Number

| Property Description |  |
|----|----|
| Property OID | 2.1.2.1.1.4 / 0x020102010104 |
| Name | Boot 1 Firmware Part Number |
| Description | The device uses this property to report its bootloader firmware part number as a string, padded with null characters. |
| Securing Key | None |
| Min. Len (b) | 11 |
| Max. Len (b) | 11 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default |  |

Table 980 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 03 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E1 04 E1 02 C4 00 |

Table 981 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 03 D1 01 82 04 00 00 00 00 84 82 00 25 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 15 E1 13 E2 11 E1 0F E1 0D C4 0B 31 30 30 30 30 30 37 35 33 36 00 |

##### Property 2.1.2.1.2.2 Boot0 Firmware Version

Table 982 - Property 2.1.2.1.2.2 Boot0 Firmware Version

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.1.2.2 / 0x020102010202</td>
</tr>
<tr>
<td>Name</td>
<td>Boot 0 Firmware Version</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its bootloader firmware
version number in the form <strong>PartNumber-Version-PCI</strong>,
padded with null characters.</p>
<p>Example: 1000007535-A0-PCI</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 983 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E1 04 E2 02 C2 00 |

Table 984 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 05 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E1 17 E1 15 C2 13 31 30 30 30 30 30 37 35 33 35 2D 41 30 2D 50 43 49 00 00 |

##### Property 2.1.2.1.2.4 Boot0 Firmware Part Number

| Property Description |  |
|----|----|
| Property OID | 2.1.2.1.2.4 / 0x020102010204 |
| Name | Boot 0 Firmware Part Number |
| Description | The device uses this property to report its bootloader firmware part number as a string, padded with null characters. |
| Securing Key | None |
| Min. Len (b) | 11 |
| Max. Len (b) | 11 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default |  |

Table 985 - Property 2.1.2.1.2.4 Boot0 Firmware Part Number

| Example (Hex) |
|----|
| AA 00 81 04 01 0A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E1 04 E2 02 C4 00 |

Table 986 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0A D1 01 82 04 00 00 00 00 84 82 00 25 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 15 E1 13 E2 11 E1 0F E2 0D C4 0B 31 30 30 30 30 30 37 35 33 35 00 |

Table 987 - Get Response Example

#### Property Subgroup 2.1.2.2.nn Core Firmware Information

##### Property 2.1.2.2.2.1 Device Model Name

Table 988 - Property 2.1.2.2.2.1 Device Model Name

| Property Description |  |
|----|----|
| Property OID | 2.1.2.2.2.1 / 0x020102020201 |
| Name | Device Model Name |
| Description | The device uses this property to report its model name as string, padded with null characters. |
| Securing Key | None |
| Min. Len (b) | 10 |
| Max. Len (b) | 20 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default |  |

Table 989 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E2 04 E2 02 C1 00 |

Table 990 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 27 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 17 E1 15 E2 13 E2 11 E2 0F C1 0D 44 79 6E 61 46 6C 65 78 20 50 72 6F 00 |

##### Property 2.1.2.2.2.2 Main Firmware Version

Table 991 - Property 2.1.2.2.2.2 Main Firmware Version

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.2.2.2 / 0x020102020202</td>
</tr>
<tr>
<td>Name</td>
<td>Main Firmware Version</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its main firmware version
number in the form <strong>PartNumber-Version-PCI</strong>, padded with
null characters.</p>
<p>Example: 1000007183-A0-PCI</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>19</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 992 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 08 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E2 04 E2 02 C2 00 |

Table 993 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 08 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E2 17 E2 15 C2 13 31 30 30 30 30 30 37 31 38 33 2D 41 31 2D 50 43 49 00 00 |

##### Property 2.1.2.2.2.4 Main Firmware Part Number

Table 994 - Property 2.1.2.2.2.4 Main Firmware Part Number

| Property Description |  |
|----|----|
| Property OID | 2.1.2.2.2.4 / 0x020102020204 |
| Name | Main Firmware Part Number |
| Description | The device uses this property to report its main firmware part number as a string, padded with null characters. |
| Securing Key | None |
| Min. Len (b) | 11 |
| Max. Len (b) | 11 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default |  |

Table 995 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E2 04 E2 02 C4 00 |

Table 996 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0A D1 01 82 04 00 00 00 00 84 82 00 25 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 15 E1 13 E2 11 E2 0F E2 0D C4 0B 31 30 30 30 30 30 37 31 38 33 00 |

##### Property 2.1.2.2.2.6 Key Type

Table 997 - Property 2.1.2.2.2.6 Key Type

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.2.2.6 / 0x020102020206</td>
</tr>
<tr>
<td>Name</td>
<td>Key Type</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device’s firmware can be compiled to use one of two available
ECDSA P-521 key sets when signing and verifying the signature in
<strong>Command 0xEEEE - Send Secured Command to Device</strong>.</p>
<p>This property indicates which of the two keys the firmware is
configured to expect the host and device to use:</p>
<ul>
<li><p>0xFF00 = Development Key</p></li>
<li><p>Any other value = Production Key</p></li>
</ul></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>2</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 998 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 31 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E2 04 E2 02 C6 00 |

Table 999 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 31 D1 01 82 04 00 00 00 00 84 82 00 1C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0C E1 0A E2 08 E2 06 E2 04 C6 02 FF 00 |

#### Property Subgroup 2.1.2.3.nn EMV Firmware Information 

##### Property 2.1.2.3.1.1 Encryption ID (MAGTEK INTERNAL ONLY FOR NOW)

##### Property 2.1.2.3.1.2 Encryption Checksum (MAGTEK INTERNAL ONLY FOR NOW)

##### Property 2.1.2.3.2.1 EMV Contact L1 Kernel ID (Contact Only)

Table 1000 - Property 2.1.2.3.2.1 EMV Contact L1 Kernel ID (Contact
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.2.1 / 0x020102030201</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L1 Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L1 Kernel
ID as string, padded with null characters.</p>
<p>Example: CT L1 EMVCO 4.3C</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1001 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 12 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E2 02 C1 00 |

Table 1002 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 12 D1 01 82 04 00 00 00 00 84 82 00 2B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1B E1 19 E2 17 E3 15 E2 13 C1 11 43 54 20 4C 31 20 45 4D 56 43 4F 20 34 2E 33 43 00 |

##### Property 2.1.2.3.2.2 EMV Contact L1 Kernel Firmware Part Number (Contact Only)

Table 1003 - Property 2.1.2.3.2.2 EMV Contact L1 Kernel Firmware Part
Number (Contact Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.2.2 / 0x020102030202</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L1 Kernel Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L1 Kernel
Part Number as string, padded with null characters.</p>
<p>Example: 1000007176 Ver A</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1004 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 13 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E2 02 C2 00 |

Table 1005 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 13 D1 01 82 04 00 00 00 00 84 82 00 2B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1B E1 19 E2 17 E3 15 E2 13 C2 11 31 30 30 30 30 30 37 31 37 36 20 56 65 72 20 41 00 |

##### Property 2.1.2.3.3.1 EMV Contact L2 Kernel ID (Contact Only)

Table 1006 - Property 2.1.2.3.3.1 EMV Contact L2 Kernel ID (Contact
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.3.1 / 0x020102030301</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L2 Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L2 Kernel
ID as string, padded with null characters.</p>
<p>Example: CT L2 4.3K</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1007 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 15 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E3 02 C1 00 |

Table 1008 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 16 D1 01 82 04 00 00 00 00 84 82 00 25 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 15 E1 13 E2 11 E3 0F E3 0D C1 0B 43 54 20 4C 32 20 34 2E 33 4B 00 |

##### Property 2.1.2.3.3.2 EMV Contact L2 Kernel Firmware Part Number(Contact Only)

Table 1009 - Property 2.1.2.3.3.2 EMV Contact L2 Kernel Firmware Part
Number(Contact Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.3.2 / 0x020102030302</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L2 Kernel Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L2 Kernel
Part Number as string, padded with null characters.</p>
<p>Example: 1000008878 Ver A DynaFlex PED L2 Kernel</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>40</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>40</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1010 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E3 02 C2 00 |

Table 1011 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1A D1 01 82 04 00 00 00 00 84 82 00 42 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 32 E1 30 E2 2E E3 2C E3 2A C2 28 31 30 30 30 30 30 38 38 37 38 20 56 65 72 20 41 20 44 79 6E 61 46 6C 65 78 20 50 45 44 20 4C 32 20 4B 65 72 6E 65 6C 00 |

##### Property 2.1.2.3.3.3 EMV Contact L2 Kernel Checksum (Contact Only)

Table 1012 - Property 2.1.2.3.3.3 EMV Contact L2 Kernel Checksum
(Contact Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.3.3/ 0x020102030303</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L2 Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L2 Kernel
Checksum as string, no padding.</p>
<p>Example: vxxCAAgnos33_17
b54f31bcb61a26fc823bce9ab8989b31ab90f9a4</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1013 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1B D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E3 02 C3 00 |

Table 1014 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1B D1 01 82 04 00 00 00 00 84 82 00 52 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 42 E1 40 E2 3E E3 3C E3 3A C3 38 76 78 78 43 41 41 67 6E 6F 73 33 33 5F 31 37 20 62 35 34 66 33 31 62 63 62 36 31 61 32 36 66 63 38 32 33 62 63 65 39 61 62 38 39 38 39 62 33 31 61 62 39 30 66 39 61 34 |

##### Property 2.1.2.3.3.4 EMV Contact L2 Kernel Configuration Checksum (Contact Only)

Table 1015 - Property 2.1.2.3.3.4 EMV Contact L2 Kernel Configuration
Checksum (Contact Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.3.4/ 0x020102030304</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contact L2 Kernel Configuration Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contact L2 Kernel
Configuration Checksum as string, no padding.</p>
<p>Example: 17AC3C4A</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>8</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>8</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1016 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 1F D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E3 02 C4 00 |

Table 1017 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 1F D1 01 82 04 00 00 00 00 84 82 00 1E D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0E E1 0C E2 0A E3 08 E3 06 C4 04 17 AC 3C 4A |

##### Property 2.1.2.3.4.1 EMV Contactless L1 Kernel ID (Contactless Only)

Table 1018 - Property 2.1.2.3.4.1 EMV Contactless L1 Kernel ID
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.4.1 / 0x020102030401</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contactless L1 Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contactless L1
Kernel ID as string, padded with null characters.</p>
<p>Example: CL L1 EMVCO 3.0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1019 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 21 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E4 02 C1 00 |

Table 1020 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 21 D1 01 82 04 00 00 00 00 84 82 00 2A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1A E1 18 E2 16 E3 14 E4 12 C1 10 43 4C 20 4C 31 20 45 4D 56 43 4F 20 33 2E 30 00 |

##### Property 2.1.2.3.4.2 EMV Contactless L1 Kernel Firmware Part Number (Contactless Only)

Table 1021 - Property 2.1.2.3.4.2 EMV Contactless L1 Kernel Firmware
Part Number (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.4.2 / 0x020102030402</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contactless L1 Kernel Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contactless L1
Kernel Part Number as string, padded with null characters.</p>
<p>Example: 1000007177 Ver A</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>17</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1022 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 25 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E4 02 C2 00 |

Table 1023 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 25 D1 01 82 04 00 00 00 00 84 82 00 2B D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1B E1 19 E2 17 E3 15 E4 13 C2 11 31 30 30 30 30 30 37 31 37 37 20 56 65 72 20 41 00 |

##### Property 2.1.2.3.4.3 EMV Contactless L1 Kernel Checksum (Contactless Only)

Table 1024 - Property 2.1.2.3.4.3 EMV Contactless L1 Kernel Checksum
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.4.3/ 0x020102030403</td>
</tr>
<tr>
<td>Name</td>
<td>EMV Contactless L1 Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the EMV Contactless L1
Kernel Checksum as string, no padding.</p>
<p>Example: d3c5d413334178d1d5929a752b8d29adc1e5829c</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1025 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 26 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E4 02 C3 00 |

Table 1026 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 26 D1 01 82 04 00 00 00 00 84 82 00 42 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 32 E1 30 E2 2E E3 2C E4 2A C3 28 64 33 63 35 64 34 31 33 33 33 34 31 37 38 64 31 64 35 39 32 39 61 37 35 32 62 38 64 32 39 61 64 63 31 65 35 38 32 39 63 |

##### Property 2.1.2.3.5.1 Mastercard MCL Kernel ID (Contactless Only)

Table 1027 - Property 2.1.2.3.5.1 Mastercard MCL Kernel ID (Contactless
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.5.1 / 0x020102030501</td>
</tr>
<tr>
<td>Name</td>
<td>Mastercard MCL Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Mastercard MCL Kernel
ID as string, padded with null characters.</p>
<p>Example: MCL 3.1.3</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>10</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>10</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1028 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 28 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E5 02 C1 00 |

Table 1029 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 28 D1 01 82 04 00 00 00 00 84 82 00 24 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 14 E1 12 E2 10 E3 0E E5 0C C1 0A 4D 43 4C 20 33 2E 31 2E 33 00 |

##### Property 2.1.2.3.5.2 Mastercard MCL Kernel Firmware Part Number (Contactless Only)

Table 1030 - Property 2.1.2.3.5.2 Mastercard MCL Kernel Firmware Part
Number (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.5.2 / 0x020102030502</td>
</tr>
<tr>
<td>Name</td>
<td>Mastercard MCL Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Mastercard MCL Kernel
Part Number as string, padded with null characters.</p>
<p>Example: 1000007179 Ver A0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1031 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 29 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E5 02 C2 00 |

Table 1032 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 29 D1 01 82 04 00 00 00 00 84 82 00 2C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1C E1 1A E2 18 E3 16 E5 14 C2 12 31 30 30 30 30 30 37 31 37 39 20 56 65 72 20 41 30 00 |

##### Property 2.1.2.3.5.3 Mastercard MCL Kernel Checksum (Contactless Only)

Table 1033 - Property 2.1.2.3.5.3 Mastercard MCL Kernel Checksum
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.5.3/ 0x020102030503</td>
</tr>
<tr>
<td>Name</td>
<td>Mastercard MCL Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Mastercard MCL Kernel
Checksum as string, no padding.</p>
<p>Example: C2.2.8 -&gt; v1.0.2
[ade94c13b0c6a31f1be682b12536528264b1efc0]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1034 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 2A D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E5 02 C3 00 |

Table 1035 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 2A D1 01 82 04 00 00 00 00 84 82 00 55 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 45 E1 43 E2 41 E3 3F E5 3D C3 3B 43 32 2E 32 2E 38 20 2D 3E 20 76 31 2E 30 2E 32 20 5B 61 64 65 39 34 63 31 33 62 30 63 36 61 33 31 66 31 62 65 36 38 32 62 31 32 35 33 36 35 32 38 32 36 34 62 31 65 66 63 30 5D |

##### Property 2.1.2.3.6.1 Visa payWave Kernel ID (Contactless Only)

Table 1036 - Property 2.1.2.3.6.1 Visa payWave Kernel ID (Contactless
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.6.1 / 0x020102030601</td>
</tr>
<tr>
<td>Name</td>
<td>Visa payWave Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Visa payWave Kernel
ID as string, padded with null characters.</p>
<p>Example: PayWave 2.2</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>12</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>12</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1037 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 03 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E6 02 C1 00 |

Table 1038 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 03 D1 01 82 04 00 00 00 00 84 82 00 26 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 16 E1 14 E2 12 E3 10 E6 0E C1 0C 50 61 79 57 61 76 65 20 32 2E 32 00 |

##### Property 2.1.2.3.6.2 Visa payWave Kernel Firmware Part Number (Contactless Only)

Table 1039 - Property 2.1.2.3.6.2 Visa payWave Kernel Firmware Part
Number (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.6.2 / 0x020102030602</td>
</tr>
<tr>
<td>Name</td>
<td>Visa payWave Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Visa payWave Kernel
Part Number as string, padded with null characters.</p>
<p>Example: 1000007180 Ver A1</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1040 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 05 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E6 02 C2 00 |

Table 1041 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 05 D1 01 82 04 00 00 00 00 84 82 00 2C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1C E1 1A E2 18 E3 16 E6 14 C2 12 31 30 30 30 30 30 37 31 38 30 20 56 65 72 20 41 31 00 |

##### Property 2.1.2.3.6.3 Visa payWave Kernel Checksum (Contactless Only)

Table 1042 - Property 2.1.2.3.6.3 Visa payWave Kernel Checksum
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.6.3/ 0x020102030603</td>
</tr>
<tr>
<td>Name</td>
<td>Visa payWave Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Visa payWave Kernel
Checksum as string, no padding.</p>
<p>Example: VCPS 2.2x [00000000]-&gt; v1.5.6
[F1CBB8A23E00984E9E753EF4884C33EA368E570C]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1043 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E6 02 C3 00 |

Table 1044 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 62 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 52 E1 50 E2 4E E3 4C E6 4A C3 48 56 43 50 53 20 32 2E 32 78 20 5B 30 30 30 30 30 30 30 30 5D 2D 3E 20 76 31 2E 35 2E 36 20 5B 46 31 43 42 42 38 41 32 33 45 30 30 39 38 34 45 39 45 37 35 33 45 46 34 38 38 34 43 33 33 45 41 33 36 38 45 35 37 30 43 5D |

##### Property 2.1.2.3.6.5 Entry Point Checksum (Contactless Only)(Common Kernel Only)

Table 1045 - Property 2.1.2.3.6.5 Entry Point Checksum (Contactless
Only)(Common Kernel Only)(Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.6.5/ 0x020102030605</td>
</tr>
<tr>
<td>Name</td>
<td>Entry Point Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Entry Point Checksum
as string, no padding.</p>
<p>Example: 1B3725A7DBC220805DF369E035E935EF404C4B71</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1046 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E6 02 C5 00 |

Table 1047 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 42 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 32 E1 30 E2 2E E3 2C E6 2A C5 28 31 42 33 37 32 35 41 37 44 42 43 32 32 30 38 30 35 44 46 33 36 39 45 30 33 35 45 39 33 35 45 46 34 30 34 43 34 42 37 31 |

##### Property 2.1.2.3.7.1 Discover D-PAS Kernel ID (Contactless Only)

Table 1048 - Property 2.1.2.3.7.1 Discover D-PAS Kernel ID (Contactless
Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.7.1 / 0x020102030701</td>
</tr>
<tr>
<td>Name</td>
<td>Discover D-PAS Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Discover D-PAS Kernel
ID as string, padded with null characters.</p>
<p>Example: DPAS 1.0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>9</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>9</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1049 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 07 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E7 02 C1 00 |

Table 1050 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 07 D1 01 82 04 00 00 00 00 84 82 00 23 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 13 E1 11 E2 0F E3 0D E7 0B C1 09 44 50 41 53 20 31 2E 30 00 |

##### Property 2.1.2.3.7.2 Discover D-PAS Kernel Firmware Part Number (Contactless Only)

Table 1051 – Property 2.1.2.3.7.2 Discover D-PAS Kernel Firmware Part
Number (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.7.2 / 0x020102030702</td>
</tr>
<tr>
<td>Name</td>
<td>Discover D-PAS Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Discover D-PAS Kernel
Part Number as string, padded with null characters.</p>
<p>Example: 1000007181 Ver A0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1052 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 09 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E7 02 C2 00 |

Table 1053 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 09 D1 01 82 04 00 00 00 00 84 82 00 2C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1C E1 1A E2 18 E3 16 E7 14 C2 12 31 30 30 30 30 30 37 31 38 31 20 56 65 72 20 41 30 00 |

##### Property 2.1.2.3.7.3 Discover D-PAS Kernel Checksum (Contactless Only)

Table 1054 - Property 2.1.2.3.7.3 Discover D-PAS Kernel Checksum
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.7.3/ 0x020102030703</td>
</tr>
<tr>
<td>Name</td>
<td>Discover D-PAS Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Discover D-PAS Kernel
Checksum as string, no padding.</p>
<p>Example: DPAS 1.0 + TAS 00x -&gt; v1.3.42
[e28bf053de947cf6ad456a2a7c71059a2c5ac61e]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1055 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0C D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E7 02 C3 00 |

Table 1056 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0C D1 01 82 04 00 00 00 00 84 82 00 62 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 52 E1 50 E2 4E E3 4C E7 4A C3 48 44 50 41 53 20 31 2E 30 20 2B 20 54 41 53 20 30 30 78 20 2D 3E 20 76 31 2E 33 2E 34 32 20 5B 65 32 38 62 66 30 35 33 64 65 39 34 37 63 66 36 61 64 34 35 36 61 32 61 37 63 37 31 30 35 39 61 32 63 35 61 63 36 31 65 5D |

##### Property 2.1.2.3.8.1 American Express Expresspay Kernel ID (Contactless Only)

Table 1057 - Property 2.1.2.3.8.1 American Express Expresspay Kernel ID
(Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.8.1 / 0x020102030801</td>
</tr>
<tr>
<td>Name</td>
<td>American Express Expresspay Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the American Express
Expresspay Kernel ID as string, padded with null characters.</p>
<p>Example: AMEX 4.0.2</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1058 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E8 02 C1 00 |

Table 1059 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0E D1 01 82 04 00 00 00 00 84 82 00 25 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 15 E1 13 E2 11 E3 0F E8 0D C1 0B 41 4D 45 58 20 34 2E 30 2E 32 00 |

##### Property 2.1.2.3.8.2 American Express Expresspay Kernel Firmware Part Number (Contactless Only)

Table 1060 – Property 2.1.2.3.8.2 American Express Expresspay Kernel
Firmware Part Number (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.8.2 / 0x020102030802</td>
</tr>
<tr>
<td>Name</td>
<td>American Express Expresspay Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the American Express
Expresspay Part Number as string, padded with null characters.</p>
<p>Example: 1000007181 Ver A0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1061 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E8 02 C2 00 |

Table 1062 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 0F D1 01 82 04 00 00 00 00 84 82 00 2C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1C E1 1A E2 18 E3 16 E8 14 C2 12 31 30 30 30 30 30 37 31 38 32 20 56 65 72 20 41 30 00 |

##### Property 2.1.2.3.8.3 American Express Expresspay Kernel Checksum (Contactless Only)

Table 1063 - Property 2.1.2.3.8.3 American Express Expresspay Kernel
Checksum (Contactless Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.8.3/ 0x020102030803</td>
</tr>
<tr>
<td>Name</td>
<td>American Express Expresspay Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the American Express
Expresspay Kernel Checksum as string, no padding.</p>
<p>Example: C4.2.7 -&gt; v1.0.6
[5D5CC3073F64FE7F14F5454D62026EDB9E202930]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1064 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E8 02 C3 00 |

Table 1065 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 11 D1 01 82 04 00 00 00 00 84 82 00 55 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 45 E1 43 E2 41 E3 3F E8 3D C3 3B 43 34 2E 32 2E 37 20 2D 3E 20 76 31 2E 30 2E 36 20 5B 35 44 35 43 43 33 30 37 33 46 36 34 46 45 37 46 31 34 46 35 34 35 34 44 36 32 30 32 36 45 44 42 39 45 32 30 32 39 33 30 5D |

##### Property 2.1.2.3.9.1 Apple VAS Kernel ID

Table 1066 - Property 2.1.2.3.9.1 Apple VAS Kernel ID

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.9.1 / 0x020102030901</td>
</tr>
<tr>
<td>Name</td>
<td>Apple VAS Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Apple VAS Kernel ID
as a string, padded with null characters.</p>
<p>Example: APPLE VAS 1.0.0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1067 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 E9 02 C1 00 |

Table 1068 - Get Response Example

| Example (Hex) |
|----|
| AA008104820ED1018204000000008482002AD10181072B06010401F609850102891AE118E216E314E912C1104150504C452056415320312E302E3000 |

##### Property 2.1.2.3.A.1 JCB Kernel ID (Contactless Only) (Common Kernel Only)

Table 1069 - Property 2.1.2.3.A.1 JCB Kernel ID (Contactless Only)
(Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.A.1 / 0x020102030A01</td>
</tr>
<tr>
<td>Name</td>
<td>JCB Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the JCB Kernel ID as
string, padded with null characters.</p>
<p>Example: JCB 1.6</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1070 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EA 02 C1 00 |

Table 1071 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 22 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 12 E1 10 E2 0E E3 0C EA 0A C1 08 4A 43 42 20 31 2E 36 00 |

##### Property 2.1.2.3.A.2 JCB Kernel Firmware Part Number (Contactless Only) (Common Kernel Only)

Table 1072 – Property 2.1.2.3.A.2 JCB Kernel Firmware Part Number
(Contactless Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.A.2 / 0x020102030A02</td>
</tr>
<tr>
<td>Name</td>
<td>JCB Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the JCB Part Number as
string, padded with null characters.</p>
<p>Example: 1000009650 Ver A0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1073 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EA 02 C2 00 |

Table 1074 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E3 17 EA 15 C2 13 31 30 30 30 30 30 39 36 35 30 20 56 65 72 20 41 41 30 00 |

##### Property 2.1.2.3.A.3 JCB Kernel Checksum (Contactless Only) (Common Kernel Only)

Table 1075 - Property 2.1.2.3.A.3 JCB Kernel Checksum (Contactless Only)
(Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.A.3/ 0x020102030A03</td>
</tr>
<tr>
<td>Name</td>
<td>JCB Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the JCB Kernel Checksum
as string, no padding.</p>
<p>Example: JCB 1.6 -&gt; v1.0.29
[ca44a90cd42d379088fcb8ca8d1fab195546b278]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1076 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EA 02 C3 00 |

Table 1077 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 57 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 47 E1 45 E2 43 E3 41 EA 3F C3 3D 4A 43 42 20 31 2E 36 20 2D 3E 20 76 31 2E 30 2E 32 39 20 5B 63 61 34 34 61 39 30 63 64 34 32 64 33 37 39 30 38 38 66 63 62 38 63 61 38 64 31 66 61 62 31 39 35 35 34 36 62 32 37 38 5D |

##### Property 2.1.2.3.A.4 Reader Core Checksum (Contactless Only) (Common Kernel Only)

Table 1078 - Property 2.1.2.3.A.4 Reader Core Checksum (Contactless
Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.A.4/ 0x020102030A04</td>
</tr>
<tr>
<td>Name</td>
<td>Reader Core Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Reader Core Checksum
as string, no padding.</p>
<p>Example: 371835cedcd7f8a3e4cf8b32cc03803dfdc1f507</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1079 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EA 02 C4 00 |

Table 1080 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 42 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 32 E1 30 E2 2E E3 2C EA 2A C4 28 33 37 31 38 33 35 63 65 64 63 64 37 66 38 61 33 65 34 63 66 38 62 33 32 63 63 30 33 38 30 33 64 66 64 63 31 66 35 30 37 |

##### Property 2.1.2.3.A.5 Entry Point Checksum (Contactless Only) (Common Kernel Only)

Table 1081 - Property 2.1.2.3.A.5 Entry Point Checksum (Contactless
Only) (Common Kernel Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.A.5/ 0x020102030A05</td>
</tr>
<tr>
<td>Name</td>
<td>Entry Point Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Entry Point Checksum
as string, no padding.</p>
<p>Example: 1B3725A7DBC220805DF369E035E935EF404C4B71</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1082 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 06 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EA 02 C5 00 |

Table 1083 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 42 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 32 E1 30 E2 2E E3 2C EA 2A C5 28 31 42 33 37 32 35 41 37 44 42 43 32 32 30 38 30 35 44 46 33 36 39 45 30 33 35 45 39 33 35 45 46 34 30 34 43 34 42 37 31 |

##### Property 2.1.2.3.B.1 China Union Pay Kernel ID (Contactless Only) (Common Kernel Only)

Table 1084 - Property 2.1.2.3.B.1 China Union Pay Kernel ID (Contactless
Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.B.1 / 0x020102030B01</td>
</tr>
<tr>
<td>Name</td>
<td>China Union Pay Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the China Union Pay
Kernel ID as string, padded with null characters.</p>
<p>Example: CUP 1.0.2</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1085 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EB 02 C1 00 |

Table 1086 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 24 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 14 E1 12 E2 10 E3 0E EB 0C C1 0A 43 55 50 20 31 2E 30 2E 32 00 |

##### Property 2.1.2.3.B.2 China Union Pay Kernel Firmware Part Number (Contactless Only) (Common Kernel Only)

Table 1087 – Property 2.1.2.3.B.2 China Union Pay Kernel Firmware Part
Number (Contactless Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.B.2 / 0x020102030B02</td>
</tr>
<tr>
<td>Name</td>
<td>China Union Pay Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the China Union Pay Part
Number as string, padded with null characters.</p>
<p>Example: 1000009651 Ver AA0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1088 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EB 02 C2 00 |

Table 1089 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E3 17 EB 15 C2 13 31 30 30 30 30 30 39 36 35 31 20 56 65 72 20 41 41 30 00 |

##### Property 2.1.2.3.B.3 China Union Pay Kernel Checksum (Contactless Only) (Common Kernel Only)

Table 1090 - Property 2.1.2.3.B.3 China Union Pay Kernel Checksum
(Contactless Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.B.3/ 0x020102030B03</td>
</tr>
<tr>
<td>Name</td>
<td>China Union Pay Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the China Union Pay
Kernel Checksum as string, no padding.</p>
<p>Example: CUP v1.0.2 -&gt; v1.3.40
[23e9bc82b4ecbf422c2054c91914848017e0ed0f]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1091 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EB 02 C3 00 |

Table 1092 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 5A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 4A E1 48 E2 46 E3 44 EB 42 C3 40 43 55 50 20 76 31 2E 30 2E 32 20 2D 3E 20 76 31 2E 33 2E 34 30 20 5B 32 33 65 39 62 63 38 32 62 34 65 63 62 66 34 32 32 63 32 30 35 34 63 39 31 39 31 34 38 34 38 30 31 37 65 30 65 64 30 66 5D |

##### Property 2.1.2.3.C.1 Interact Flash Kernel ID (Contactless Only) (Common Kernel Only)

Table 1093 - Property 2.1.2.3.C.1 Interact Flash Kernel ID (Contactless
Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.C.1 / 0x020102030C01</td>
</tr>
<tr>
<td>Name</td>
<td>Interact Flash Kernel ID</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Interact Flash Kernel
ID as string, padded with null characters.</p>
<p>Example: FLASH 1.9</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>11</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1094 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0E D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EC 02 C1 00 |

Table 1095 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 24 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 14 E1 12 E2 10 E3 0E EC 0C C1 0A 46 4C 41 53 48 20 31 2E 39 00 |

##### Property 2.1.2.3.C.2 Interact Flash Kernel Firmware Part Number (Contactless Only) (Common Kernel Only)

Table 1096 – Property 2.1.2.3.C.2 Interact Flash Kernel Firmware Part
Number (Contactless Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.C.2 / 0x020102030C02</td>
</tr>
<tr>
<td>Name</td>
<td>Interact Flash Firmware Part Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Interact Flash Part
Number as string, padded with null characters.</p>
<p>Example: 1000009652 Ver AA0</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1097 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 0F D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EC 02 C2 00 |

Table 1098 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 2D D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 1D E1 1B E2 19 E3 17 EC 15 C2 13 31 30 30 30 30 30 39 36 35 32 20 56 65 72 20 41 41 30 00 |

##### Property 2.1.2.3.C.3 Interact Flash Kernel Checksum (Contactless Only) (Common Kernel Only)

Table 1099 - Property 2.1.2.3.C.3 Interact Flash Kernel Checksum
(Contactless Only) (Common Kernel Only)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.3.C.3/ 0x020102030C03</td>
</tr>
<tr>
<td>Name</td>
<td>Interact Flash Kernel Checksum</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the Interact Flash Kernel
Checksum as string, no padding.</p>
<p>Example: Flash 1.9 -&gt; v1.3.41
[394e45aed865e276e4f6737de26aa84c6eb1b174]</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Variable</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>75</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1100 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 11 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E1 08 E2 06 E3 04 EC 02 C3 00 |

Table 1101 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 06 D1 01 82 04 00 00 00 00 84 82 00 59 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 49 E1 47 E2 45 E3 43 EC 41 C3 3F 46 6C 61 73 68 20 31 2E 39 20 2D 3E 20 76 31 2E 33 2E 34 31 20 5B 33 39 34 65 34 35 61 65 64 38 36 35 65 32 37 36 65 34 66 36 37 33 37 64 65 32 36 61 61 38 34 63 36 65 62 31 62 31 37 34 5D |

#### Property Subgroup 2.1.2.4.nn Main Application Firmware Information (MAGTEK INTERNAL ONLY FOR NOW)

#### Property Subgroup 2.1.2.5.nn WLAN Information (WLAN Only)

##### Property 2.1.2.5.3.1 WLAN Firmware Version

Table 1102 - Property 2.1.2.5.3.1 WLAN Firmware Version

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.5.3.1 / 0x020102050301</td>
</tr>
<tr>
<td>Name</td>
<td>WLAN Firmware Version</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its WLAN firmware version
number in the form <strong>PartNumber-Version-PCI</strong>, padded with
null characters.</p>
<p>Example: 1000007537-A0-PCI</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1103 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040108D101841AD10181072B06010401F609850102890AE108E206E504E302C100 |

Table 1104 - Get Response Example

| Example (Hex) |
|----|
| AA0081048208D1018204000000008482002CD10181072B06010401F609850102891CE11AE218E516E314C112313030303030383633352D31302D44455600 |

##### Property 2.1.2.5.3.2 WLAN WiFi Module Build Hash (MAGTEK INTERNAL ONLY)

Table 1105 - Property 2.1.2.5.3.2 WLAN WiFi Module Build Hash (MAGTEK
INTERNAL ONLY) (MAGTEL INTERNAL ONLY)

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.3.2 / 0x020102050302 |
| Name | WLAN WiFi Module MAC Build Hash |
| Description | The device uses this property to report its WiFi module Build Hash. |
| Securing Key | None |
| Min. Len (b) | 18 |
| Max. Len (b) | 6 |
| Data Type | Binary |
| Valid Values | IEEE 802 EUI-48 |
| Default | None |

Table 1106 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040108D101841AD10181072B06010401F609850102890AE108E206E504E302C200 |

Table 1107 - Get Response Example

| Example (Hex) |
|----|
| AA0081048208D1018204000000008482002CD10181072B06010401F609850102891CE11AE218E516E314C212623233626639333900000000000000000000 |

##### Property 2.1.2.5.3.3 WLAN Firmware Sequence Number (MAGTEK INTERNAL ONLY)

Table 8.5‑91 - Property 2.1.2.5.3.3 WLAN Firmware Sequence Number
(MAGTEK INTERNAL ONLY)

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.3.3 / 0x020102050303 |
| Name | WLAN Firmware Sequence Number |
| Description | The device uses this property to report its WLAN firmware sequence number. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | Binary |
| Valid Values | Any |
| Default | None |

Table 8.5‑92 - Get Request Example

| Example (Hex)                                      |
|----------------------------------------------------|
| AA0081040155D101840FD1018501028704010205038902C300 |

Table 8.5‑93 - Get Response Example

| Example (Hex) |
|----|
| AA0081048255D10182040000000084820013D1018501028704010205038906C3040000001D |

##### Property 2.1.2.5.6.1 WLAN WiFi Module MAC Address

Table 1108 - Property 2.1.2.5.6.1 WLAN WiFi Module MAC AddressWLAN WiFi
Module MAC Address

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.1 / 0x020102050601 |
| Name | WLAN WiFi Module MAC Address |
| Description | The device uses this property to report its WiFi module MAC address. |
| Securing Key | None |
| Min. Len (b) | 6 |
| Max. Len (b) | 6 |
| Data Type | Binary |
| Valid Values | IEEE 802 EUI-48 |
| Default | None |

Table 1109 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010ED101 841AD101 81072B06010401F609 850102 890AE108E206E504E602C100 |

Table 1110 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820ED101 820400000000 84820020D101 81072B06010401F609 850102 8910E10EE20CE50AE608C1 06C47F51A41701 |

##### Property 2.1.2.5.6.2 WLAN WiFi RSSI

Table 1111 - Property 2.1.2.5.6.2 WLAN WiFi RSSIWLAN WiFi RSSI

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.2 / 0x020102050602 |
| Name | WLAN WiFi RSSI (Received Signal Strength Indicator) |
| Description | The device uses this property to report its WiFi RSSI. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Signed Character |
| Valid Values | 0x00 – 0xFF |
| Default | None |

Table 1112 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010ED101 841AD101 81072B06010401F609 850102 890AE108E206E504E602C200 |

Table 1113 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820ED101 820400000000 8482001BD101 81072B06010401F609 850102 890BE109E207E505E603C2 01BE |

##### Property 2.1.2.5.6.3 WLAN Dynamic IP Address 

Table 1114 - Property 2.1.2.5.6.3 WLAN Dynamic IP AddressWLAN Dynamic IP
Address

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.3 / 0x020102050603 |
| Name | WLAN Dynamic IP Address |
| Description | The device uses this property to report its WLAN Dynamic IP Address. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | Binary |
| Valid Values | Internet Protocol version 4 |
| Default | None |

Table 1115 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010ED101 841AD101 81072B06010401F609 850102 890AE108E206E504E602C300 |

Table 1116 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820ED101 820400000000 8482001ED101 81072B06010401F609 850102 890EE10CE20AE508E606C3 04C0A8017D |

##### Property 2.1.2.5.6.4 Active Client Connections

Table 1117 - Property 2.1.2.5.6.4 Active Client Connections

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.5.6.4 / 0x020102050604</td>
</tr>
<tr>
<td>Name</td>
<td>Active Client Connections</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its number of active
client connections.</p>
<p><strong>Property 1.2.2.1.1.A Maximum Client Connections</strong> is
related.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td>0x00 – 0x04</td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1118 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020506 8902 C400 |

Table 1119 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870401020506 8903 C401 01 |

##### Property 2.1.2.5.6.5 Server Certificate Chain Select

Table 1120 - Property 2.1.2.5.6.5 Server Certificate Chain Select

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.5 / 0x020102050605 |
| Name | Server Certificate Chain Select |
| Description | The device uses this property to report the certificate chain used for server certificate. Server Certificate Chain Select is set by loading a Trust Configuration File. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00 – 0x01: 0x00=client chain, 0x01=server chain |
| Default | None |

Table 1121 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020506 8902 C500 |

Table 1122 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870401020506 8903 C501 00 |

##### Property 2.1.2.5.6.6 Security Protocol

Table 1123 - Property 2.1.2.5.6.6 Security Protocol

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.6 / 0x020102050606 |
| Name | Security Protocol |
| Description | The device uses this property to report the security protocol. Security Protocol is set by loading a Trust Configuration File. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00 – 0x02: 0x00=mTLS, 0x01=TLS, 02=None |
| Default | None |

Table 1124 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020506 8902 C600 |

Table 1125 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870401020506 8903 C601 00 |

##### Property 2.1.2.5.6.7 Available Access Points

Table 1126 - Property 2.1.2.5.6.7 Available Access Points

| Property Description |  |
|----|----|
| Property OID | 2.1.2.5.6.7 / 0x020102050607 |
| Name | Available Access Points |
| Description | The device uses this property to report a list of available access points. The access points are in a list of tags starting with 0xA0 and incrementing. The list can contain up to 20 access points. Each access point contains two tags. Tag 0x80 contains the access point’s SSID. The SSID is a text string of 1 to 32 characters. Tag 0x81 is the RSSI for the access point. The RSSI is a signed binary number between -30 and -90. |
| Securing Key | None |
| Min. Len (b) | 0 |
| Max. Len (b) | 740 |
| Data Type | Binary |
| Valid Values | See **Table 8.5-146 – Access Point Payload Detail** |
| Default | None |

Table 1127 – Access Point Payload Detail

| Tag | Len | Value / Description                       | Typ | Req | Default |
|-----|-----|-------------------------------------------|-----|-----|---------|
| A0  | var | Access Point Container 1                  | T   | O   |         |
| /80 | var | Service Set Identifier (SSID)             | B   | R   |         |
| /81 | var | Received Signal Strength Indicator (RSSI) | B   | R   |         |
| A1  | var | Access Point Container 2                  | T   | O   |         |
| /80 | var | Service Set Identifier (SSID)             | B   | R   |         |
| /81 | var | Received Signal Strength Indicator (RSSI) | B   | R   |         |
| A2  | var | Access Point Container 3                  | T   | O   |         |
| /80 | var | Service Set Identifier (SSID)             | B   | R   |         |
| /81 | var | Received Signal Strength Indicator (RSSI) | B   | R   |         |
| …   |     |                                           |     |     |         |
| Ax  | var | Access Point Container x+1                | T   | O   |         |
| /80 | var | Service Set Identifier (SSID)             | B   | R   |         |
| /81 | var | Received Signal Strength Indicator (RSSI) | B   | R   |         |

Table 1128 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020506 8902 C700 |

Table 1129 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048206D101 820400000000 84820065 D101 81072B06010401F609 850102 8955E153E251E54FE64DC74B A00E80094D79416363657373318102FFC7 A10F800A4D7957694669535349448102FFA9 A22580204449524543542D46442D4850204465736B4A65742033363330207365726965738102FFA6 |

#### Property Subgroup 2.1.2.6.nn General Firmware Information (MAGTEK INTERNAL ONLY)

##### Property 2.1.2.6.1.1 Firmware Git and Build information (MAGTEK INTERNAL ONLY)

Table 1130 - Property 2.1.2.6.1.1 Firmware Git and Build information
(MAGTEK INTERNAL ONLY)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.6.1.1 / 0x020102060101</td>
</tr>
<tr>
<td>Name</td>
<td>Firmware Git and Build information</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its firmware Git and
build information. Git bash command “git describe --long --dirty
--always” is used to return information about each repository “MAIN”,
“SDK”, “EXT” and “AMADIS” in the same order followed by the date and
time the firmware was built as a null terminated string.</p>
<p>An example of the string returned is
“MAIN[PCI-A3-20200929-61-g46efa1a-dirty]_SDK[PCI-A2-NO-LCD-20200930-2-g6b69d7f]_EXT[PCI-A3-20200929-14-g370c7f0]_AMADIS[PCI-A2-NO-LCD-20200930-4-g5957fb6]_[2020-11-17][14:48:03]”
where:</p>
<ul>
<li><p>“MAIN” means the main repository</p></li>
<li><p>“PCI-A3-20200929” is the last tag found in this
repository</p></li>
<li><p>“61” means there have been 61 commits made since this
tag</p></li>
<li><p>“g46efa1a” means the hash of the latest commit starts with
46efa1a</p></li>
<li><p>“dirty” means that the repository has uncommitted changes made
since the last commit</p></li>
<li><p>“[2020-11-17][14:48:03]” is the date and time the firmware was
built.</p></li>
</ul></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>Compile time dependent</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>Compile time dependent</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1131 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020601 8902 C100 |

Table 1132 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA00 8104 8255D101 8204 00000000 848200C4 D101 8501 02 8704
01020601 898200B5 C18200B1
4D41494E5B5043492D41332D32303230303932392D36312D67343665666131612D64697274795D5F53444B5B5043492D41322D4E4F2D4C43442D32303230303933302D322D67366236396437665D5F4558545B5043492D41332D32303230303932392D31342D67333730633766305D5F414D414449535B5043492D41322D4E4F2D4C43442D32303230303933302D342D67353935376662365D5F5B323032302D31312D31375D5B31343A34383A30335D00</p>
<p>Text value:
MAIN[PCI-A3-20200929-61-g46efa1a-dirty]_SDK[PCI-A2-NO-LCD-20200930-2-g6b69d7f]_EXT[PCI-A3-20200929-14-g370c7f0]_AMADIS[PCI-A2-NO-LCD-20200930-4-g5957fb6]_[2020-11-17][14:48:03]</p></td>
</tr>
</tbody>
</table>

#### Property Subgroup 2.1.2.7.nn Bluetooth® LE Information (Bluetooth® LE Only, MAGTEK INTERNAL ONLY FOR NOW)

##### Property 2.1.2.7.1.1 Bluetooth® LE Firmware Version

Table 1133 - Property 2.1.2.7.1.1 Bluetooth® LE Firmware Version

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.7.1.1 / 0x020102070101</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Firmware Version</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its BLE firmware version
number in the form <strong>PartNumber-Version-PCI</strong>, padded with
null characters.</p>
<p>Example: 1000009327-A0-PCI</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>18</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td>Any string</td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1134 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040108D101841AD10181072B06010401F609850102890AE108E206E704E102C100 |

Table 1135 - Get Response Example

| Example (Hex) |
|----|
| AA0081048208D1018204000000008482002CD10181072B06010401F609850102891CE11AE218E716E114C112313030303030393332372D41302D50434900 |

##### Property 2.1.2.7.1.2 Bluetooth® LE Firmware Sequence Number

| Property Description |  |
|----|----|
| Property OID | 2.1.2.7.1.2 / 0x020102070102 |
| Name | Bluetooth® LE Firmware Sequence Number |
| Description | The device uses this property to report its BLE firmware sequence number. |
| Securing Key | None |
| Min. Len (b) | 4 |
| Max. Len (b) | 4 |
| Data Type | Binary |
| Valid Values | Non-zero. |
| Default | None |

Table 1136 - Property 2.1.2.7.1.2 Bluetooth® LE Firmware Sequence Number

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040106D101841AD10181072B06010401F609850102890AE108E206E704E102C200 |

Table 1137 - Get Request Example

| Example (Hex) |
|----|
| AA0081048206D1018204000000008482001ED10181072B06010401F609850102890EE10CE20AE708E106C20400000009 |

Table 1138 - Get Response Example

##### Property 2.1.2.7.2.1 Bluetooth® LE Device Address

Table 1139 – Bluetooth® LE Device Address

| Property Description |  |
|----|----|
| Property OID | 2.1.2.7.2.1 / 0x020102070201 |
| Name | Bluetooth® LE Device Address |
| Description | The device uses this property to report its Bluetooth® LE Device address in most significant byte order. |
| Securing Key | None |
| Min. Len (b) | 6 |
| Max. Len (b) | 6 |
| Data Type | Binary |
| Valid Values | IEEE 802 EUI-48 |
| Default | None |

Table 1140 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010ED101 841AD101 81072B06010401F609 850102 890AE108E206E704E202C100 |

Table 1141 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820ED101 820400000000 84820020D101 81072B06010401F609 850102 8910E10EE20CE70AE208C1 06943469B297A5 |

##### Property 2.1.2.7.2.2 Bluetooth® LE Connection Status

Table 1142 – Bluetooth® LE Connection Status

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.1.2.7.2.2 / 0x020102070202</td>
</tr>
<tr>
<td>Name</td>
<td>Bluetooth® LE Connection Status</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to report its Bluetooth® LE Connection
Status.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>One byte value where each bit of the byte indicates a particular
status. Bit 0 is the least significant bit.<br />
<br />
Bit 0 is the advertising status. If set to 1 the device is advertising,
otherwise 0.</p>
<p>Bit 1 is the connection status. If set to 1 the device is in a
connection, otherwise 0.</p>
<p>Bit 2 is the secure connection status. If set to 1 the device is in a
secure connection, otherwise 0.</p>
<p>Bit 3 is the notification status. If set to 1 notifications are
enabled, otherwise 0.</p>
<p>Bits 4 to 7 are reserved and will be set to zero for now.</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1143 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020702 8902 C200 |

Table 1144 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501028704010207028903C20101 |

##### Property 2.1.2.7.2.3 Bluetooth® LE Number of Bondings

Table 1145 – Bluetooth® LE Number of Bondings

| Property Description |  |
|----|----|
| Property OID | 2.1.2.7.2.3 / 0x020102070203 |
| Name | Bluetooth® LE Number of Bondings |
| Description | The device uses this property to report its Bluetooth® LE Number of Bondings. The maximum number of bondings is 9. If the device has 9 bondings and another host pairs with it, the new bonding will overwrite the oldest existing bonding. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0 - 9 |
| Default | None |

Table 1146 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020702 8902 C300 |

Table 1147 - Get Response Example

| Example (Hex)                                                        |
|----------------------------------------------------------------------|
| AA0081048255D10182040000000084820010D1018501028704010207028903C30101 |

##### Property 2.1.2.7.2.4 Bluetooth® LE MTU Size

Table 1148 – Bluetooth® LE MTU Size

| Property Description |  |
|----|----|
| Property OID | 2.1.2.7.2.4 / 0x020102070204 |
| Name | Bluetooth® LE MTU Size |
| Description | The device uses this two-byte property, in most significant byte order, to report its Bluetooth® LE MTU size. The maximum transmission unit (MTU) is agreed upon between the host and the device during a connection. For DynaFlex, the value will be between 23 and 247 depending on the size the host supports. If the device is not in a connection, it will report 23. |
| Securing Key | None |
| Min. Len (b) | 2 |
| Max. Len (b) | 2 |
| Data Type | Binary |
| Valid Values | 23 - 247 |
| Default | None |

Table 1149 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 01020702 8902 C400 |

Table 1150 - Get Response Example

| Example (Hex)                                                          |
|------------------------------------------------------------------------|
| AA0081048255D10182040000000084820011D1018501028704010207028904C40200F7 |

#### Property Subgroup 2.1.2.8.nn Custom UI

##### Property 2.1.2.8.1.1 UI Configuration File

Table 1151 - Property 2.1.2.8.1.1 UI Configuration File

| Property Description |  |
|----|----|
| Property OID | 2.1.2.8.1.1 / 0x020102080101 |
| Name | UI Configuration Filename |
| Description | This string contains the part number and the revision of the UI Configuration File. |
| Securing Key | None |
| Min. Len (b) | 14 |
| Max. Len (b) | 14 |
| Data Type | ASCII |
| Valid Values | CFG000xxxx-xxx |
| Default | None |

Table 1152 - Get Request Example

| Example (Hex)                                                            |
|--------------------------------------------------------------------------|
| AA0081040106D101841AD10181072B06010401F609850102890AE108E206E804E102C100 |

Table 1153 - Get Response Example

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th>Example (Hex)</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>AA0081048206D10182040000000084820028D10181072B06010401F609850102</p>
<p>8918E116E214E812E110C10E434647303030363831322D323030</p></td>
</tr>
</tbody>
</table>

### Property Group 2.2.1.nnn Device Hardware Information

#### Property Subgroup 2.2.1.1.1.n Device Common Configuration Information

##### Property 2.2.1.1.1.1 Serial Number

Table 1154 - Property 2.2.1.1.1.1 Serial Number

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.2.1.1.1.1 / 0x020201010101</td>
</tr>
<tr>
<td>Name</td>
<td>Device Serial Number</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its serial number. The
left 3.5 bytes represent the 7 digit serial number, and the remaining
half byte is always 0.</p>
<p>Example: Serial number <strong>B603226</strong> is reported as 0xB6,
0x03, 0x22, 0x60.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Min 0x00000000</p>
<p>Max 0xFFFFFFF0</p></td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1155 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 B5 D1 01 84 18 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 87 04 02 01 01 01 89 02 C1 00 |

Table 1156 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 B5 D1 01 82 04 00 00 00 00 84 82 00 1C D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 87 04 02 01 01 01 89 06 C1 04 B6 13 78 A0 |

##### Property 2.2.1.1.1.2 Device Capabilities Report (MAGTEK INTERNAL ONLY FOR NOW)

Table 1157 - Property 2.2.1.1.1.2 Device Capabilities Report (MAGTEK
INTERNAL ONLY FOR NOW)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.2.1.1.1.2 / 0x020201010102</td>
</tr>
<tr>
<td>Name</td>
<td>Device Capabilities Report</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its capabilities in
string format padded with null characters.</p>
<p>Example: “V=1,SC=1,SR=1,UDE=0,CE=2,CLE=2,BT=0,WF=0”</p>
<ul>
<li><p>V = Version</p></li>
<li><p>SC = Signature Capture</p></li>
<li><p>SR = SRED</p></li>
<li><p>UDE = Cardholder Data Entry Mode</p></li>
<li><p>CE = Contact EMV Level Supported</p></li>
<li><p>CLE = Contactless Level Supported</p></li>
<li><p>BT = Bluetooth®</p></li>
<li><p>WF = Wireless LAN (WLAN)</p></li>
</ul></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>64</td>
</tr>
<tr>
<td>Data Type</td>
<td>Alphanumeric</td>
</tr>
<tr>
<td>Valid Values</td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td></td>
</tr>
</tbody>
</table>

Table 1158 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 E0 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E2 08 E1 06 E1 04 E1 02 C2 00 |

Table 1159 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 E0 D1 01 82 04 00 00 00 00 84 82 00 5A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 4A E2 48 E1 46 E1 44 E1 42 C2 40 56 3D 31 2C 53 43 3D 31 2C 53 52 3D 31 2C 55 44 45 3D 30 2C 43 45 3D 32 2C 43 4C 45 3D 32 2C 42 54 3D 30 2C 57 46 3D 30 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |

##### Property 2.2.1.1.1.3 PCI Hardware ID

Table 1160 - Property 2.2.1.1.1.3 PCI Hardware ID

| Property Description |  |
|----|----|
| Property OID | 2.2.1.1.1.3 / 0x020201010103 |
| Name | PCI Hardware ID |
| Description | The device uses this property to report its PCI Hardware ID. Customers can use this value to compare against the device’s certification records on the PCI web site. |
| Securing Key | None |
| Min. Len (b) | 10 |
| Max. Len (b) | 256 |
| Data Type | Alphanumeric |
| Valid Values | Any string |
| Default |  |

Table 1161 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 E3 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E2 08 E1 06 E1 04 E1 02 C3 00 |

Table 1162 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 E3 D1 01 82 04 00 00 00 00 84 82 00 24 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 14 E2 12 E1 10 E1 0E E1 0C C3 0A 33 36 50 43 49 34 35 30 41 30 |

##### Property 2.2.1.1.1.4 Device Hardware Configuration (MAGTEK INTERNAL ONLY)

Table 1163 - Property 2.2.1.1.1.4 Device Hardware Configuration (MAGTEK
INTERNAL ONLY)

| Property Description |  |
|----|----|
| Property OID | 2.2.1.1.1.4 / 0x020201010104 |
| Name | Device Hardware Configuration |
| Description | The device uses this property to report its hardware configuration profile. See the **Hardware Configuration Profile** parameter in **Command 0xF016 - Activate Device Security (MAGTEK INTERNAL ONLY)** for detail. |
| Securing Key | None |
| Min. Len (b) | 10 |
| Max. Len (b) | 256 |
| Data Type | Binary |
| Valid Values | Any number |
| Default |  |

Table 1164 - Get Request Example

| Example (Hex) |
|----|
| AA 00 81 04 01 E3 D1 01 84 1A D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 0A E2 08 E1 06 E1 04 E1 02 C4 00 |

Table 1165 - Get Response Example

| Example (Hex) |
|----|
| AA 00 81 04 82 08 D1 01 82 04 00 00 00 00 84 82 00 34 D1 01 81 07 2B 06 01 04 01 F6 09 85 01 02 89 24 E2 22 E1 20 E1 1E E1 1C C4 1A 01 05 01 02 01 02 00 03 01 01 01 02 01 01 05 01 00 00 00 01 05 01 01 01 01 01 |

### Property Group 2.3.1.nnn System Status Information

#### Property Subgroup 2.3.1.1.1.n System Status Injected Key Information

##### Property 2.3.1.1.1.1 Device Key Status

Table 1166 - Property 2.3.1.1.1.1 Device Key Status

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.1.1 / 0x020301010101</td>
</tr>
<tr>
<td>Name</td>
<td>Device Key Status</td>
</tr>
<tr>
<td>Description</td>
<td>This OID contains a 32-bit bitmap. Each bit indicates the status of
a device key. A bit value of 1 indicates the corresponding key has been
injected.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Bit 0: TMPTK_1000</p>
<p>Bit 1: MTK_1001</p>
<p>Bit 2: DEVTK_1002</p>
<p>Bit 3: FINTK_1003</p>
<p>Bit 4: PRODTK_1021</p>
<p>Bit 5: MFGTK_1022</p>
<p>Bit 6: MFIFTK_1081</p>
<p>Bit 7: AKIFTK_1091</p>
<p>Bit 8: FREQMK_1101</p>
<p>Bit 9: MREQMK_1102</p>
<p>Bit 10: MFRQMK_1111</p>
<p>Bit 11: ARQ1MK_1121</p>
<p>Bit 12: ARQ2MK_1122</p>
<p>Bit 13 – 31: Reserved</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1167 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010ED101 841AD101 81072B06010401F609 850102 890AE308E106E104E102C100 |

Table 1168 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820ED101 820400000000 8482001E D101 81072B06010401F609 850102 890EE30CE10AE108E106C1040000077E |

##### Property 2.3.1.1.1.2 Transaction Key Status

Table 1169 - Property 2.3.1.1.1.2 Transaction Key Status

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.1.2 / 0x020301010102</td>
</tr>
<tr>
<td>Name</td>
<td>Transaction Key Status</td>
</tr>
<tr>
<td>Description</td>
<td>This OID contains a 32-bit bitmap. Each bit indicates the status of
a transaction key. A bit value of 1 indicates the corresponding key has
been injected.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>4</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Bit 0: DKPTM0_2000 Bit 16: DKPTM10_2010</p>
<p>Bit 1: DKPTM1_2001 Bit 17: DKPTM11_2011</p>
<p>Bit 2: DKPTM2_2002 Bit 18: DKPTM12_2012</p>
<p>Bit 3: DKPTM3_2003 Bit 19: DKPTM13_2013</p>
<p>Bit 4: DKPTM4_2004 Bit 20: DKPTM14_2014</p>
<p>Bit 5: DKPTM5_2005 Bit 21: DKPTM15_2015</p>
<p>Bit 6: DKPTM6_2006 Bit 22: DKPTM16_2016</p>
<p>Bit 7: DKPTM7_2007 Bit 23: DKPTM17_2017</p>
<p>Bit 8: DKPTM8_2008 Bit 24: DKPTM18_2018</p>
<p>Bit 9: DKPTM9_2009 Bit 25: DKPTM19_2019</p>
<p>Bit 10: DKPTMA_200A Bit 26: DKPTM1A_201A</p>
<p>Bit 11: DKPTMB_200B Bit 27: DKPTM1B_201B</p>
<p>Bit 12: DKPTMC_200C Bit 28: DKPTM1C_201C</p>
<p>Bit 13: DKPTMD_200D Bit 29: DKPTM1D_201D</p>
<p>Bit 14: DKPTME_200E Bit 30: DKPTM1E_201E</p>
<p>Bit 15: DKPTMF_200F Bit 31: DKPTM1F_201F</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1170 - Get Request Example

| Example (Hex) |
|----|
| AA00 8104010FD101 841AD101 81072B06010401F609 850102 890AE308E106E104E102C200 |

Table 1171 - Get Response Example

| Example (Hex) |
|----|
| AA00 8104820FD101 820400000000 8482001ED101 81072B06010401F609 850102 890EE30CE10AE108E106C20400000081 |

#### Property Subgroup 2.3.1.1.2.n System Status Security Protection Information

##### Property 2.3.1.1.2.1 Real Time Clock Enabled

Table 1172 - Property 2.3.1.1.2.1 Real Time Clock Enabled

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.2.1 / 0x020301010201</td>
</tr>
<tr>
<td>Name</td>
<td>Real Time Clock Enabled</td>
</tr>
<tr>
<td>Description</td>
<td>The device maps this property to its internal register that enables
its internal real-time clock. Because the device ensures that register
is enabled every time it powers up, this property should always report
Real Time Clock Enabled.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Real Time Clock Not Enabled</p>
<p>0x01 = Real Time Clock Enabled</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1173 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010102 8902 C100 |

Table 1174 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010102 8903 C101 01 |

##### Property 2.3.1.1.2.2 Tamper Sensors Activated

Table 1175 - Property 2.3.1.1.2.2 Tamper Sensors Activated

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.2.2 / 0x020301010202</td>
</tr>
<tr>
<td>Name</td>
<td>Tamper Sensors Activated</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to report whether its tamper sensors
have been activated using <strong>Command 0xF016 - Activate Device
Security (MAGTEK INTERNAL ONLY)</strong>. A device that is operating
normally should always have its tamper sensors activated.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Tamper Sensors Not Activated</p>
<p>0x01 = Tamper Sensors Activated</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1176 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010102 8902 C100 |

Table 1177 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010102 8903 C101 01 |

##### Property 2.3.1.1.2.3 Tamper Sensor Tampered

Table 1178 - Property 2.3.1.1.2.3 Tamper Sensor Tampered

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.2.3 / 0x020301010203</td>
</tr>
<tr>
<td>Name</td>
<td>Tamper Sensor Tampered</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to report whether a tamper sensor has
tampered. A device that is operating normally should not reported that
it has been tampered with. To examine the device’s tamper history to
determine the cause, use <strong>Command 0xF014 - Read Log (MAGTEK
INTERNAL ONLY)</strong> or <strong>Command 0xF015 - Read Log &amp; Clear
Tamper (MAGTEK INTERNAL ONLY)</strong>.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Not Tampered</p>
<p>0x01 = Tampered</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1179 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010102 8902 C300 |

Table 1180 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010102 8903 C301 00 |

##### Property 2.3.1.1.2.4 Tamper Configuration Revision (MAGTEK INTERNAL ONLY)

Table 1181 - Property 2.3.1.1.2.4 Tamper Configuration Revision (MAGTEK
INTERNAL ONLY)

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.1.2.4 / 0x020301010204</td>
</tr>
<tr>
<td>Name</td>
<td>Tamper Configuration Revision</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report which tamper
configuration its security systems are currently using. Tampers are
configured and locked for security the first time a host calls
<strong>Command 0xF016 - Activate Device Security (MAGTEK INTERNAL
ONLY)</strong>, and the device determines and sets this property based
on the firmware version installed in the device at that time.</p>
<p>This property exists because the host can not determine which tamper
configuration the device is currently using by examining the currently
installed firmware version; if a host activates the device’s security
systems while the device is loaded with firmware that uses an earlier
tamper configuration, installing firmware that supports a newer tamper
configuration does not change the tamper configuration until an operator
resets the device’s security systems.</p>
<p>To reset the device’s security systems and change the tamper
configuration, an operator must first reset this property to <strong>Not
Configured</strong> by disconnecting all tamper-related power from the
device. For example, disconnect USB power, the rechargeable battery, and
the coin cell battery, which requires physical access to the inside of
the device. This process clears and unlocks the tamper configuration.
The host must then call <strong>Command 0xF016 - Activate Device
Security (MAGTEK INTERNAL ONLY)</strong> to activate the device’s
security systems again.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Not Configured</p>
<p>0x01 = Original Configuration</p>
<p>0x02 = Coin Cell Current Optimized</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1182 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010102 8902 C400 |

Table 1183 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010102 8903 C401 02 |

#### Property Subgroup 2.3.1.2.1.n System Status Device State Information

##### Property 2.3.1.2.1.1 Device Operational Status

Table 1184 - Property 2.3.1.2.1.1 Device Operational Status

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.2.1.1 / 0x020301020101</td>
</tr>
<tr>
<td>Name</td>
<td>Device Operational Status</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report its operational
status.</p>
<p><strong>Online</strong> is the status the manufacturer populates in
this property before shipping, and is the result of the device going
through processes that configure its security subsystems and features.
In this state, the device is fully functional and can perform
transactions.</p>
<p><strong>Offline</strong> means the device is no longer fully
functional and can no longer perform transactions. The device
automatically transitions to this state if it detects a problem with
security or any of the subsystems it checks. For example, trying to open
the device triggers a tamper response, which causes the device to change
its operational status to Offline. To retrieve more information about
the cause of an Offline status, the host can retrieve <strong>Property
2.3.1.2.1.2 Offline Status Detail</strong>.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x01 = Offline</p>
<p>0x02 = Online</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1185 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C100 |

Table 1186 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C101 02 |

##### Property 2.3.1.2.1.2 Offline Status Detail

Table 1187 - Property 2.3.1.2.1.2 Offline Status Detail

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.2.1.2 / 0x020301020102</td>
</tr>
<tr>
<td>Name</td>
<td>Offline Status Detail</td>
</tr>
<tr>
<td>Description</td>
<td><p>The device uses this property to report the status of every
subsystem that can cause the device’s operation status to be set to
<strong>Offline</strong> in <strong>Property 2.3.1.2.1.1 Device
Operational</strong> Status.</p>
<p>The property consists of a sequence of bytes where each bit in each
byte represents the status of a subsystem. If a bit is set to one, then
there is a problem with the subsystem, otherwise no problem was
detected.</p>
<p>Some subsystems provide other properties or commands that can be used
to get more information about the subsystem’s status. For example,
<strong>Property 2.3.1.1.2.2 Tamper Sensors Activated</strong> and
<strong>Property 2.3.1.1.2.3 Tamper Sensor Tampered</strong>.</p></td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>16 (reserved for future expansion)</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>Byte 0</p>
<ul>
<li><p>Bit 0 = Tamper problem present</p></li>
<li><p>Bit 1 = Master Key problem present</p></li>
<li><p>Bit 2 = Keys and Certificates problem present</p></li>
<li><p>Bit 3 = Real Time Clock problem present</p></li>
<li><p>Bit 4 = Random Number Generator problem present</p></li>
<li><p>Bit 5 = Cryptography Engine problem present</p></li>
<li><p>Bit 6 = Magnetic Stripe Reader Hardware problem present</p></li>
<li><p>Bit 7 = Reserved</p></li>
</ul></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1188 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C200 |

Table 1189 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C201 00 |

##### Property 2.3.1.2.1.3 External Power Supplied

Table 1190 - Property 2.3.1.2.1.3 External Power Supplied

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.2.1.3 / 0x020301020103</td>
</tr>
<tr>
<td>Name</td>
<td>External Power Supplied</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to report the status of external
power.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = No external power supplied</p>
<p>0x01 = Power supplied by USB port</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 1191 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C300 |

Table 8‑200 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C301 01 |

##### Property 2.3.1.2.1.4 Battery State of Charge

Table 8‑201 - Property 2.3.1.2.1.4 Battery State of Charge

| Property Description |  |
|----|----|
| Property OID | 2.3.1.2.1.4 / 0x020301020104 |
| Name | Battery State of Charge |
| Description | The device uses this property to report the charge status of the internal battery. The charge status is reported as a percentage of full charge. |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Binary |
| Valid Values | 0x00..0x64 |
| Default | None |

Table 8‑202 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C400 |

Table 8‑203 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C401 64 |

##### Property 2.3.1.2.1.5 Battery Charger Status

Table 8‑204 - Property 2.3.1.2.1.5 Battery Charger Status

<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr>
<th colspan="2">Property Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Property OID</td>
<td>2.3.1.2.1.5 / 0x020301020105</td>
</tr>
<tr>
<td>Name</td>
<td>Battery Charger Status</td>
</tr>
<tr>
<td>Description</td>
<td>The device uses this property to report the status of the battery
charger.</td>
</tr>
<tr>
<td>Securing Key</td>
<td>None</td>
</tr>
<tr>
<td>Min. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Max. Len (b)</td>
<td>1</td>
</tr>
<tr>
<td>Data Type</td>
<td>Binary</td>
</tr>
<tr>
<td>Valid Values</td>
<td><p>0x00 = Precharge</p>
<p>0x01 = Fast charge – constant current</p>
<p>0x02 = Fast charge – constant voltage</p>
<p>0x03 = End of charge</p>
<p>0x04 = Charge complete</p>
<p>0x08 = No external power supplied</p></td>
</tr>
<tr>
<td>Default</td>
<td>None</td>
</tr>
</tbody>
</table>

Table 8‑205 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C500 |

Table 8‑206 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C501 04 |

##### Property 2.3.1.2.1.6 Device Temperature

Table 8‑207 - Property 2.3.1.2.1.6 Device Temperature

| Property Description |  |
|----|----|
| Property OID | 2.3.1.2.1.6 / 0x020301020106 |
| Name | Device Temperature |
| Description | The device uses this property to report the temperature in Celsius |
| Securing Key | None |
| Min. Len (b) | 1 |
| Max. Len (b) | 1 |
| Data Type | Signed Binary |
| Valid Values | 0x80 .. 0x7F (-128 .. 127) |
| Default | None |

Table 8‑208 - Get Request Example

| Example (Hex)                                                |
|--------------------------------------------------------------|
| AA00 8104 0155D101 840F D101 8501 02 8704 03010201 8902 C600 |

Table 8‑209 - Get Response Example

| Example (Hex) |
|----|
| AA00 81048255D101 820400000000 84820010 D101 850102 870403010201 8903 C601 26 |

####### Object IDs (OIDs) and ITU-T X660

######## About OIDs

For modular management of device functions, information, and settings,
this standard makes extensive use of Object Identifiers (also known as
Object IDs or OIDs) as defined in ***ITU-T X.660 \| ISO/IEC 9834-1***,
which can be found by searching for **X.660** in the publications on
[www.itu.int](http://www.itu.int).

OIDs are identifiers for any generic data element, and are managed by
standards bodies to be globally unique (much like web domains, IP
addresses, and Media Access Control MAC addresses). They are managed by
using a tree structure consisting of **nodes**, where the tree structure
is defined and controlled by a hierarchy of subordinate **Registration
Authorities**, each with their authority delegated by a Registration
Authority one level higher in the tree, starting with the root nodes
managed by ITU-T and ISO. The ***X.660*** standard for OIDs is
harmonized with the data representation standard of ***ASN.1*** via that
standard’s OBJECT IDENTIFIER and OID-IRI types. Every node is assigned a
**primary integer value** (or primary value for short) which serves to
uniquely identify the node, and may be assigned secondary identifiers
(such as strings) for human readability.

MagTek is the Registration Authority for the OID tree beginning at
**{iso(1) identified-organization(3) dod(6) internet(1) private(4)
enterprise(1) MagTek(15113)}** (using **value notation** of the
***ASN.1*** OBJECT IDENTIFIER type). The branch can also be represented
in numerical shorthand as **1.3.6.1.4.1.15113**, which is the
**encoding** form of the ***ASN.1*** OBJECT IDENTIFIER type.

Per ***X.660***, OIDs can be encoded in **constructed** form or
**primitive** form. The primitive form is a sequence of octets (bytes)
and is summarized in section **A.2 Octet Encoding of OIDs**. The
constructed form is a TLV data object and is summarized in section **A.3
TLV Encoding of OIDs**.

In many cases, the MagTek implementation of OID-based message elements
allows the host to specify an optional **Company ID** and **Tree
prefix** alongside a **Relative OID**, where the full OID is a
concatenation of the company ID, followed by the tree prefix, followed
by the relative OID. If a message does not include the optional company
ID or tree prefix, company ID is assumed to be the MagTek arc above, and
the tree prefix is assumed to be a reasonable sequence of additional
nodes based on the purpose and scope of the message.

######## Octet Encoding of OIDs

In addition to human-readable ***ASN.1*** value notation and encoding
forms above, OIDs can be encoded as binary values (octets) as follows
(per ***X.660*** section ***8.19 Encoding of an object identifier
value***):

1)  Start with the numerical form (for example, MagTek’s arc
    **1.3.6.1.4.1.15113** from section **A.1**).

2)  Multiply the primary value of the first node in the OID by 40
    decimal (e.g., 1\*40=40) and add it to the primary value of the
    second node. The sum is used as the first byte (e.g., 43 decimal =
    **0x2B**) of the octet form. The first two nodes receive this
    special treatment because their possible value ranges are expected
    to remain very small indefinitely.

3)  The next bytes in the octet encoded form are simply equal to each
    primary value in the OID sequence, unless the primary value is
    greater than 128 decimal (0x80). For primary values greater than
    0x80, additional encoding rules apply that are not necessary to
    detail here, because for simplicity MagTek selects OID primary
    values that are equal to 0x79 or less (and in many cases, 0x30 or
    less); In addition, TLV encoding places additional restrictions on
    selection of OID, in that if the OID is to be used directly as a tag
    in a TLV data object, it must not be greater than 0x1F (see section
    **3.2.1.1 About TLV Encoding**). The only portion of MagTek’s arc
    that is subject to these additional encoding rules is the primary
    value **15113** at the end, which encodes to **0xF609** hex (per the
    rules not detailed here, see ***X.660*** for details). The full arc
    **1.3.6.1.4.1.15113** therefore encodes to **0x2B 06 01 04 01
    F609**.

######## TLV Encoding of OIDs

The primary method of encoding OIDs, as specified in ***X.660*** section
***8 Basic encoding rules***, is BER Tag-Length-Value (TLV) format. A
TLV-encoded OID is a set of nested TLV data objects, where:

- The **tag** of each TLV data object equals the primary value of the
  node it represents in the OID sequence, encoded according to the BER
  TLV tag number rules; the assigned primary values in this standard are
  all **private** (11nnnnnn), the bottom level value / leaf of any OID
  arc is encoded as **primitive** (nn0nnnnn), and the levels above it
  are encoded as **composed** (nn1nnnnn). This information makes it
  possible to use the bit definitions for **Tag** in section **3.2.1
  Tag-Length-Value (TLV) Encoding** as a reference to encode each level
  of the OID as a tag. Generally the primary values in this standard are
  selected to be less than 0x1F, and so do not require multi-byte tags.

- The **length** of each TLV data object, like all TLV data objects, is
  equal to the length of its value.

- The **value** of each TLV data object is equal to a nested TLV data
  object containing all subsequent nodes in the OID sequence, so
  TLV-encoded OIDs must be built from the bottom up. The primitive value
  in the bottom node of a TLV-encoded OID is the set of actual values
  contained by that OID (e.g., string, byte\[s\], and so on), or in the
  case of requests where the value is (by definition) not known to the
  requester, the length is **0x00**.

For example, the process of TLV encoding the OID in a request to
retrieve the contents of **OID 3.5.7.9** with 9 being a leaf node looks
like this (all values are hexadecimal unless otherwise noted):

1)  First, realize OID 3.5.7.9 is to be interpreted as a nested set of
    containers. Node 3 contains node 5, which contains node 7, which
    contains node 9. Although node 9 presumably contains one or more
    values, the entity making the request for its contents, by
    definition, does not know the contents when composing the request,
    so in this example, node 9 is treated like an “empty bucket.” In the
    corresponding response, node 9 would include its actual contents.

2)  Because TLV is built from the inside out (bottom up), start the
    encoding process with the node at the end which has a primary value
    equal to 9. Like all OIDs in this standard it is **private**, and
    because it is a leaf node at the bottom / end of the OID tree and
    therefore does not contain any further nested TLV data objects, it
    is **primitive**: 0x09 primary value OR 0b11000000 private OR
    0b00000000 primitive = **C9**. As explained above, in this case it
    is an empty bucket, so its length is **00**. Its TLV encoding is
    **C9 00**.

3)  Up one level to the node with primary value equal to 7, it is also
    **private**, but unlike the previous level it contains a nested TLV
    data object (C9 00 from above) so it is **constructed** instead of
    primitive: 0x07 primary value OR 0b11000000 private OR 0b00100000
    constructed = **E7**. It has contents C9 00 so length is **02**. Its
    TLV encoding is **E7 02 C9 00**.

4)  Up one level to the node with primary value 5, it is **private** and
    contains TLV data object E7 02 C9 00 from above, so it is
    **constructed**: 0x05 primary value OR 0b11000000 private OR
    0b00100000 constructed = **E5**. It has contents E7 02 C9 00 so
    length is **04**. Its TLV encoding is **E5 04 E7 02 C9 00**.

5)  Up to the root with primary value 3, it is **private** and
    **constructed** so tag is **E3**, value is the TLV data object from
    above, so length is equal to that object’s length **06**. Its
    encoding is **E3 06 E5 04 E7 02 C9 00**, which is the final encoding
    of whole “empty bucket” OID **3.5.7.9**.

####### Design Intent (MAGTEK INTERNAL ONLY)

The main body of this document describes MMS from a customer’s point of
view. However, when MagTek firmware engineers need to make decisions
about extending or modifying the standard, there are additional factors
that are important to the design that are not important to customers.
For example, although the first release of MMS includes four Message
Types, it may become necessary in the future to add another one, and in
that case, the design intent behind the existing Message Type numbers
becomes an important consideration, because dependent software may make
assumptions that rely on certain “invisible rules” being consistently
followed. This section collects the design factors to consider.

######## Tag Selection

When constructing a new tag, these are the general parameters for
deciding what it should be:

######## Message Types

When adding a message type, these are the general parameters for
deciding what it should be:

<span class="mark">  
</span>

####### Demo Mode (MAGTEK INTERNAL ONLY FOR NOW) 

Demo Mode provides a way to demonstrate the card and barcode readers on
the DynaFlex and DynaProx devices. Once DemoMode is entered, the device
must be rebooted in order exit Demo Mode. The demo can be run on devices
that do not have a LCD display. The LEDs and beeps will indicate the
state of the demo.

######## Preparation for Demo Mode

To use the contactless reader, contactless events must be enabled.
Writing 03000000 to OID 1.2.7.1.2.1 will the enable events for the
contactless reader. See [**Property 1.2.7.1.2.1 User Event Notification
Controls
Enable**](#property-1.2.7.1.2.1-user-event-notification-controls-enable)
for more information.

The device must be powered using a USB charger to enter Demo Mode. Demo
Mode will not start when the device is powered from a USB host or when
running from the battery.

If an image is to be displayed in place of the prompt, download the
image to the fourth image file (02000003). See [**Command 0xD812 - Start
Send File to Device
(Unsecured)**](#command-0xd812---start-send-file-to-device-unsecured)
for more information.

######## Running the Demo

To run the demo, execute the following steps:

1)  Power the device from a USB charger. The device will boot. Do not
    remove power until you are finished running the demo. Wait for the
    device to display the Welcome screen.

2)  On the back of the device, near the USB port, is a small oval
    button. Press and hold the button until the device beeps exactly
    five times then release the button.

3)  A series of short beeps will sound to indicate that the demo has
    started. If an image has been stored in the fourth image file, the
    image will be displayed. If no image has been saved, the device will
    prompt for a card. If the device has a barcode reader, the prompt
    will also prompt for a barcode and the barcode reader’s light will
    turn on. The first LED will be green, and the rest will be off.

4)  Insert, tap, or swipe a card or scan a barcode.

5)  When a card or barcode is read, the device will sound a specific
    number of beeps, display a results text and light an LED. The
    following table shows the result of each type of read:

<table>
<caption><p>Table 1192 - LED Display</p></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Reader</th>
<th>Beeps</th>
<th>LED</th>
<th>Displayed Text</th>
</tr>
</thead>
<tbody>
<tr>
<td>Barcode</td>
<td>1</td>
<td>1<sup>st</sup> Blue</td>
<td>“MSR Read Successful”</td>
</tr>
<tr>
<td>MSR</td>
<td>2</td>
<td>2<sup>nd</sup> Blue</td>
<td><p>“Contactless EMV Read</p>
<p>Successful”</p></td>
</tr>
<tr>
<td>Contact</td>
<td>3</td>
<td>3<sup>rd</sup> Blue</td>
<td><p>“Contact EMV Read</p>
<p>Successful”</p></td>
</tr>
<tr>
<td>Contactless</td>
<td>4</td>
<td>4<sup>th</sup> Blue</td>
<td>“MSR Read Successful”</td>
</tr>
</tbody>
</table>

6)  The results will display for four seconds.

7)  If a card is still in the contact reader or in range of the
    contactless reader, a prompt to remove the card will be displayed
    and an error beep l also sound about once a second until the card is
    removed.

8)  Return to step 3.

######## Exiting the Demo

Unplug the USB cable to shut down the device. After unplugging the USB
cable, WLAN devices will have to be turned off using the button on the
back of the device. Press the button for two beeps and release the
button. The device will power off.

<span class="mark">  
</span>

####### Barcode Reader Symbologies 

A Barcode symbology refers to the way in which data is encoded in a
barcode. It uses either spaced lines, dots or squares. When read, these
symbols are decoded and converted to data. The table below lists all of
the supported Symbologies and which are enabled by default.

| Symbology             | Default  |
|-----------------------|----------|
| AIM 128               | Disabled |
| Aztec                 | Enabled  |
| Codabar               | Enabled  |
| Code 11               | Disabled |
| Code128               | Enabled  |
| Code 32               | Disabled |
| Code 39               | Enabled  |
| Code 93               | Disabled |
| Data Matrix           | Enabled  |
| EAN-8                 | Enabled  |
| EAN-13                | Enabled  |
| Febraban              | Disabled |
| GSI-128 (UCC/EAN-128) | Enabled  |
| GS1 Databar (RSS)     | Disabled |
| Industrial 25         | Disable  |
| Interleaved 2 of 5,   | Enabled  |
| ISSN                  | Disabled |
| ISBN                  | Disabled |
| ITF-14                | Disabled |
| ITF-6                 | Disabled |
| Matrix 2 of 5         | Enabled  |
| Micro QR              | Disabled |
| MSI Plessey           | Disabled |
| PDF417                | Enabled  |
| Plessey               | Disabled |
| QR Code               | Enabled  |
| Standard 25           | Disabled |
| UPC-E                 | Enabled  |
| UPC-A                 | Enabled  |

Table D8.7‑1 – Barcode Reader Supported Symbologies

####### Erasing EMV Configurations

######## Load CAPK with AID: 0000000000 to erase all current CAPK keys with this CAPK key:

**Table 1193 - Get Request Example**

| Example (Hex) |
|----|
| AA00810401CED8128444D812810400000300A22B81040000008D8201048320B9C1F228E41A1F0B6173E00423C5B58A952DE1111E0CC5E33C3044A5D3FD2FCAA30A81083030303030333030870101 |

**Table 1194 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA00810482CED812820400000000 |

**Table 1195 - Get Request Example**

| Example (Hex) |
|----|
| AA0081080400D8120000030084818D4D47544B41503130C10400000300CE7D000000000000016000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000583F99A8DF1A414B11A1607402AE67722C4F59B9 |

**Table 1196 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048200D812820400000000 |

######## Empty Amex DRL: Load AMEX DRL file with “EMPTY” content

**Table 1197 - Get Request Example**

| Example (Hex) |
|----|
| AA008104018DD8128444D812810400000500A22B81040000001182010483205E39BD3937CF6B80DECC2B6FD0ABED138D5CC69A6CE55C8790BBA58254B66ED5A30A81083030303030353030870101 |

**Table 1198 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA008104828DD812820400000000 |

**Table 1199 - Get Request Example**

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA0081080400D8120000050084114D47544B41503130C10400000500CE01AA |

**Table 1200 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048200D812820400000000 |

######## Empty Terminal: Load Terminal file with “EMPTY” content

**Table 1201 - Get Request Example**

| Example (Hex) |
|----|
| AA0081040114D8128444D812810400000000A22B8104000000118201048320543666037C01700B9215F365346E7C883290F201E0D844D9F32B0D05A098B519A30A81083030303030303030870101 |

**Table 1202 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048214D812820400000000 |

**Table 1203 - Get Request Example**

| Example (Hex)                                                  |
|----------------------------------------------------------------|
| AA0081080400D8120000000084114D47544B41503130C10400000000CE01AA |

**Table 1204 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048200D812820400000000 |

######## Empty Processing: Load Processing file with “EMPTY” content and 1 delimiter (FF33)

**Table 1205 - Get Request Example**

| Example (Hex) |
|----|
| AA008104011BD8128444D812810400000100A22B8104000000288201048320B25A77AD6582338898AA0498D1C15512AC9AE7C1B021884238813A28423B20E9A30A81083030303030313030870101 |

**Table 1206 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA008104821BD812820400000000 |

**Table 1207 - Get Request Example**

| Example (Hex) |
|----|
| AA0081080400D8120000010084284D47544B41503130C10400000100CE18AA9A6CCE52123D2315BF3759D466BC0F7C4572A754FF3300 |

**Table 1208 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048200D812820400000000 |

######## Empty Entry Point: Load Entry file with “EMPTY” content and 1 delimiter (FF35)

**Table 1209 - Get Request Example**

| Example (Hex) |
|----|
| AA0081040135D8128444D812810400000200A22B8104000000288201048320d747a07102af345bbe0f41669ebd63aac8770aef5fa37ca00a2eaaf4112b8a2cA30A81083030303030323030870101 |

**Table 1210 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048235D812820400000000 |

**Table 1211 - Get Request Example**

| Example (Hex) |
|----|
| AA0081080400D8120000020084284D47544B41503130C10400000200CE18AA3dcfbc51fcdfd06ada36181f1cd3aee3f8f879bcFF3500 |

**Table 1212 - Get Response Example**

| Example (Hex)                |
|------------------------------|
| AA0081048200D812820400000000 |

####### Tip & Tax Display Limits (Touch Only)

These are the display limits that are supported.

The maximum number of digits for “preset” tip in \$ buttons is 6
(\$9,999.99).

The range for “preset” tip in % buttons is 0% to 100%

The maximum number of digits for custom tip is 9 (\$9,999,999.99).

The maximum number of digits for sale amount + tip + tax is 12
(\$9,999,999,999.99).

####### Physical Button (DynaFlex Only)

Every DynaFlex device features a single physical button. On the DynaFlex
II Go, this button is located on the left side of the device. For all
other models, it is located on the bottom of the device near the USB
port. Pressing and holding this button can activate additional functions
on the device. To active a specific function, press and hold the button
until a specific number of beeps are heard. Table G8.7-48 shows which
functions can be activated. Beep counts that are not listed are not
supported.

<table>
<caption><p>Table G8.7‑48 – Button Functions</p></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">Beep Count</th>
<th style="text-align: center;">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">2</td>
<td><p>Power Off</p>
<p>Power the device off, The device will reboot if it is connected to
USB.</p></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td><p>WLAN Setup</p>
<p>WLAN devices only.</p></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td><p>BLE Pairing</p>
<p>BLE devices only.</p></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td><p>Demo</p>
<p>See Appendix C for more information.</p></td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td><p>Battery Level</p>
<p>Light the LEDs to indicate the current state of charge of the
battery. The LEDs will light for 3 seconds then return to their original
state.</p>
<p><img
src="C:\Users\andrews\OneDrive - MagTek, Inc\AndrewS\Files to MD\media/media/image20.png"
style="width:4.9375in;height:1.57292in"
alt="A table with green and black text AI-generated content may be incorrect." /></p>
<p>The DynaFlex II Go has only green LEDs. Instead of lighting the first
LED in amber, it will slowly flash the first LED. Instead of Red, the
first LED will flash quickly.</p></td>
</tr>
</tbody>
</table>

######## Battery Charge Status

As mentioned in **Appendix G Physical Button (DynaFlex Only)**, there is
only one physical button on DynaFlex devices. Pressing and holding this
button until the device beeps six times then releasing it causes the
LEDs on the front of the device to display the current charge state of
the battery. The LEDs will return to their previous state after three
seconds.

| Battery Level | Transactions and Firmware Update Allowed | LED Color | LEDs On When Button is Pressed |  |  |  |  |
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| 100% - 90% | Yes | Green | 4 LEDs |  |  |  |  |
| 89% - 70% | Yes | Green | 3 LEDs |  |  |  |  |
| 69% - 50% | Yes | Green | 2 LEDs |  |  |  |  |
| 49% - 20% | Yes | Amber | 1 LED |  |  |  |  |
| 19% - 6% | Yes | Red | 1 LED |  |  |  |  |
| 5% - 0% | No | Red | 1 LED |  |  |  |  |

Table 1213 - Battery Charged Example

The DynaFlex II Go has only green LEDs. Instead of lighting the first
LED in amber, it will slowly flash the first LED. Instead of Red, the
first LED will flash quickly.



